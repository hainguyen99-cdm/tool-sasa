import{j as v,K as Xg,L as kf,t as Gg,O as Zn,r as V,Q as Fn,U as If,V as bo,X as hr,Y as yo,Z as Yg,_ as Rf,$ as $g,u as Wg,a0 as qo,a1 as tn,a2 as Ko,a3 as Qc,a4 as Mf,a5 as zg,a6 as wo,a7 as Hg,T as qg,C as Kg,a as Zg,G as Qg,a8 as Jg,a9 as t0,h as e0,aa as ze,ab as Ue,g as lt,i as $t,e as mt,J as Sr,I as Ul,ac as St,f as q,ad as s0,ae as n0,af as Pf,ag as r0,B as Rt,ah as ft,z as gs,ai as $s,aj as Gt,ak as Jc,F as Ws,al as Wt,am as ee,an as se,ao as Pi,ap as Nf,aq as i0,ar as a0,as as th,at as eh,au as sh,av as nh,aw as ar,ax as rh,ay as o0,az as l0,aA as He,aB as Na,aC as c0,aD as nr,aE as vo,aF as Lr,aG as h0,aH as Ff,aI as xi,aJ as jl,aK as d0,aL as u0,aM as ih,aN as Bf,aO as Df,aP as Sn,aQ as Lf,aR as Tn,aS as f0,aT as m0,aU as p0,aV as g0,aW as Of,aX as x0,W as Vf,o as Uf,H as b0,aY as y0,aZ as w0,a_ as Bn,D as v0,p as _0,a$ as E0,q as S0,v as T0,b0 as A0,E as C0,b1 as ah,b2 as k0,S as I0,M as zr,b3 as R0,b4 as M0,b5 as P0,b6 as N0,b7 as F0,b8 as la,b9 as B0,ba as D0,bb as L0,bc as O0,bd as ca,be as V0,bf as U0,bg as Zo,bh as jf,w as j0,x as X0,n as G0,y as Y0,bi as $0,bj as W0,bk as z0,bl as H0,bm as Xf,bn as q0,bo as K0,bp as Z0,bq as $a,br as Q0,bs as J0,bt as Xr,R as tx,N as ex}from"./NotiSSE.BhFj6iDc.js";import{g as oh}from"./_commonjsHelpers.BosuxZz1.js";import"./base.CKaqUdIP.js";var sx=new Set(["dark","light","system"]);function nx(n){let t=n;return sx.has(t)||(t="light"),t}function rx(n={}){const{initialColorMode:t="light",type:e="localStorage",storageKey:s="chakra-ui-color-mode"}=n,r=nx(t),i=e==="cookie",o=`(function(){try{var a=function(o){var l="(prefers-color-scheme: dark)",v=window.matchMedia(l).matches?"dark":"light",e=o==="system"?v:o,d=document.documentElement,m=document.body,i="chakra-ui-light",n="chakra-ui-dark",s=e==="dark";return m.classList.add(s?n:i),m.classList.remove(s?i:n),d.style.colorScheme=e,d.dataset.theme=e,e},u=a,h="${r}",r="${s}",t=document.cookie.match(new RegExp("(^| )".concat(r,"=([^;]+)"))),c=t?t[2]:null;c?a(c):document.cookie="".concat(r,"=").concat(a(h),"; max-age=31536000; path=/")}catch(a){}})();
  `,l=`(function(){try{var a=function(c){var v="(prefers-color-scheme: dark)",h=window.matchMedia(v).matches?"dark":"light",r=c==="system"?h:c,o=document.documentElement,s=document.body,l="chakra-ui-light",d="chakra-ui-dark",i=r==="dark";return s.classList.add(i?d:l),s.classList.remove(i?l:d),o.style.colorScheme=r,o.dataset.theme=r,r},n=a,m="${r}",e="${s}",t=localStorage.getItem(e);t?a(t):localStorage.setItem(e,a(m))}catch(a){}})();
  `;return`!${i?o:l}`.trim()}function ix(n={}){const{nonce:t}=n;return v.jsx("script",{id:"chakra-script",nonce:t,dangerouslySetInnerHTML:{__html:rx(n)}})}var ax=["borders","breakpoints","colors","components","config","direction","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","shadows","sizes","space","styles","transition","zIndices"];function ox(n){return Xg(n)?ax.every(t=>Object.prototype.hasOwnProperty.call(n,t)):!1}function Ni(n){return typeof n=="function"}function lx(...n){return t=>n.reduce((e,s)=>s(e),t)}var cx=n=>function(...e){let s=[...e],r=e[e.length-1];return ox(r)&&s.length>1?s=s.slice(0,s.length-1):r=n,lx(...s.map(i=>o=>Ni(i)?i(o):dx(o,i)))(r)},hx=cx(Gg);function dx(...n){return kf({},...n,Gf)}function Gf(n,t,e,s){if((Ni(n)||Ni(t))&&Object.prototype.hasOwnProperty.call(s,e))return(...r)=>{const i=Ni(n)?n(...r):n,o=Ni(t)?t(...r):t;return kf({},i,o,Gf)}}function ux(n){const t=parseFloat(n);return typeof t!="number"||Number.isNaN(t)?0:t}function Yf(n,t){let e=ux(n);const s=10**(t??10);return e=Math.round(e*s)/s,t?e.toFixed(t):e.toString()}function Ud(n){if(!Number.isFinite(n))return 0;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e+=1;return e}function fx(n,t,e){return n==null?n:(e<t&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(n,t),e))}function mx(n={}){const{onChange:t,precision:e,defaultValue:s,value:r,step:i=1,min:o=Number.MIN_SAFE_INTEGER,max:l=Number.MAX_SAFE_INTEGER,keepWithinRange:a=!0}=n,c=Zn(t),[h,d]=V.useState(()=>{var C;return s==null?"":(C=Qo(s,i,e))!=null?C:""}),u=typeof r<"u",f=u?r:h,m=$f(Un(f),i),p=e??m,g=V.useCallback(C=>{C!==f&&(u||d(C.toString()),c==null||c(C.toString(),Un(C)))},[c,u,f]),x=V.useCallback(C=>{let I=C;return a&&(I=fx(I,o,l)),Yf(I,p)},[p,a,l,o]),b=V.useCallback((C=i)=>{let I;f===""?I=Un(C):I=Un(f)+C,I=x(I),g(I)},[x,i,g,f]),y=V.useCallback((C=i)=>{let I;f===""?I=Un(-C):I=Un(f)-C,I=x(I),g(I)},[x,i,g,f]),w=V.useCallback(()=>{var C;let I;s==null?I="":I=(C=Qo(s,i,e))!=null?C:o,g(I)},[s,e,i,g,o]),_=V.useCallback(C=>{var I;const P=(I=Qo(C,i,p))!=null?I:o;g(P)},[p,i,g,o]),E=Un(f);return{isOutOfRange:E>l||E<o,isAtMax:E===l,isAtMin:E===o,precision:p,value:f,valueAsNumber:E,update:g,reset:w,increment:b,decrement:y,clamp:x,cast:_,setValue:d}}function Un(n){return parseFloat(n.toString().replace(/[^\w.-]+/g,""))}function $f(n,t){return Math.max(Ud(t),Ud(n))}function Qo(n,t,e){const s=Un(n);if(Number.isNaN(s))return;const r=$f(s,t);return Yf(s,e??r)}function px(n,t,e,s){const r=Zn(e);return V.useEffect(()=>{const i=typeof n=="function"?n():n??document;if(!(!e||!i))return i.addEventListener(t,r,s),()=>{i.removeEventListener(t,r,s)}},[t,n,s,r,e]),()=>{const i=typeof n=="function"?n():n??document;i==null||i.removeEventListener(t,r,s)}}var js=Fn(function(t,e){const s=If("Link",t),{className:r,isExternal:i,...o}=bo(t);return v.jsx(hr.a,{target:i?"_blank":void 0,rel:i?"noopener":void 0,ref:e,className:yo("chakra-link",r),...o,__css:s})});js.displayName="Link";var En=Fn(function(t,e){const s=If("Text",t),{className:r,align:i,decoration:o,casing:l,...a}=bo(t),c=Yg({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return v.jsx(hr.p,{ref:e,className:yo("chakra-text",t.className),...c,...a,__css:s})});En.displayName="Text";var gx=n=>v.jsx(Rf,{viewBox:"0 0 24 24",...n,children:v.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})}),xx=n=>v.jsx(Rf,{viewBox:"0 0 24 24",...n,children:v.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})});function jd(n,t,e,s){V.useEffect(()=>{var r;if(!n.current||!s)return;const i=(r=n.current.ownerDocument.defaultView)!=null?r:window,o=Array.isArray(t)?t:[t],l=new i.MutationObserver(a=>{for(const c of a)c.type==="attributes"&&c.attributeName&&o.includes(c.attributeName)&&e(c)});return l.observe(n.current,{attributes:!0,attributeFilter:o}),()=>l.disconnect()})}function bx(n,t){const e=Zn(n);V.useEffect(()=>{let s=null;const r=()=>e();return t!==null&&(s=window.setInterval(r,t)),()=>{s&&window.clearInterval(s)}},[t,e])}var yx=50,Xd=300;function wx(n,t){const[e,s]=V.useState(!1),[r,i]=V.useState(null),[o,l]=V.useState(!0),a=V.useRef(null),c=()=>clearTimeout(a.current);bx(()=>{r==="increment"&&n(),r==="decrement"&&t()},e?yx:null);const h=V.useCallback(()=>{o&&n(),a.current=setTimeout(()=>{l(!1),s(!0),i("increment")},Xd)},[n,o]),d=V.useCallback(()=>{o&&t(),a.current=setTimeout(()=>{l(!1),s(!0),i("decrement")},Xd)},[t,o]),u=V.useCallback(()=>{l(!0),s(!1),c()},[]);return V.useEffect(()=>()=>c(),[]),{up:h,down:d,stop:u,isSpinning:e}}var vx=/^[Ee0-9+\-.]$/;function _x(n){return vx.test(n)}function Ex(n,t){if(n.key==null)return!0;const e=n.ctrlKey||n.altKey||n.metaKey;return!(n.key.length===1)||e?!0:t(n.key)}function Sx(n={}){const{focusInputOnChange:t=!0,clampValueOnBlur:e=!0,keepWithinRange:s=!0,min:r=Number.MIN_SAFE_INTEGER,max:i=Number.MAX_SAFE_INTEGER,step:o=1,isReadOnly:l,isDisabled:a,isRequired:c,isInvalid:h,pattern:d="[0-9]*(.[0-9]+)?",inputMode:u="decimal",allowMouseWheel:f,id:m,onChange:p,precision:g,name:x,"aria-describedby":b,"aria-label":y,"aria-labelledby":w,onFocus:_,onBlur:E,onInvalid:S,getAriaValueText:T,isValidCharacter:A,format:C,parse:I,...P}=n,R=Zn(_),N=Zn(E),F=Zn(S),D=Zn(A??_x),L=Zn(T),O=mx(n),{update:j,increment:U,decrement:B}=O,[G,H]=V.useState(!1),K=!(l||a),z=V.useRef(null),J=V.useRef(null),Q=V.useRef(null),X=V.useRef(null),W=V.useCallback(ot=>ot.split("").filter(D).join(""),[D]),Z=V.useCallback(ot=>{var Vt;return(Vt=I==null?void 0:I(ot))!=null?Vt:ot},[I]),at=V.useCallback(ot=>{var Vt;return((Vt=C==null?void 0:C(ot))!=null?Vt:ot).toString()},[C]);$g(()=>{(O.valueAsNumber>i||O.valueAsNumber<r)&&(F==null||F("rangeOverflow",at(O.value),O.valueAsNumber))},[O.valueAsNumber,O.value,at,F]),Wg(()=>{if(!z.current)return;if(z.current.value!=O.value){const Vt=Z(z.current.value);O.setValue(W(Vt))}},[Z,W]);const gt=V.useCallback((ot=o)=>{K&&U(ot)},[U,K,o]),yt=V.useCallback((ot=o)=>{K&&B(ot)},[B,K,o]),nt=wx(gt,yt);jd(Q,"disabled",nt.stop,nt.isSpinning),jd(X,"disabled",nt.stop,nt.isSpinning);const It=V.useCallback(ot=>{if(ot.nativeEvent.isComposing)return;const ie=Z(ot.currentTarget.value);j(W(ie)),J.current={start:ot.currentTarget.selectionStart,end:ot.currentTarget.selectionEnd}},[j,W,Z]),Ct=V.useCallback(ot=>{var Vt,ie,Pt;R==null||R(ot),J.current&&(ot.target.selectionStart=(ie=J.current.start)!=null?ie:(Vt=ot.currentTarget.value)==null?void 0:Vt.length,ot.currentTarget.selectionEnd=(Pt=J.current.end)!=null?Pt:ot.currentTarget.selectionStart)},[R]),wt=V.useCallback(ot=>{if(ot.nativeEvent.isComposing)return;Ex(ot,D)||ot.preventDefault();const Vt=Qt(ot)*o,ie=ot.key,fr={ArrowUp:()=>gt(Vt),ArrowDown:()=>yt(Vt),Home:()=>j(r),End:()=>j(i)}[ie];fr&&(ot.preventDefault(),fr(ot))},[D,o,gt,yt,j,r,i]),Qt=ot=>{let Vt=1;return(ot.metaKey||ot.ctrlKey)&&(Vt=.1),ot.shiftKey&&(Vt=10),Vt},Jt=V.useMemo(()=>{const ot=L==null?void 0:L(O.value);if(ot!=null)return ot;const Vt=O.value.toString();return Vt||void 0},[O.value,L]),re=V.useCallback(()=>{let ot=O.value;if(O.value==="")return;/^[eE]/.test(O.value.toString())?O.setValue(""):(O.valueAsNumber<r&&(ot=r),O.valueAsNumber>i&&(ot=i),O.cast(ot))},[O,i,r]),qt=V.useCallback(()=>{H(!1),e&&re()},[e,H,re]),Kt=V.useCallback(()=>{t&&requestAnimationFrame(()=>{var ot;(ot=z.current)==null||ot.focus()})},[t]),je=V.useCallback(ot=>{ot.preventDefault(),nt.up(),Kt()},[Kt,nt]),Ln=V.useCallback(ot=>{ot.preventDefault(),nt.down(),Kt()},[Kt,nt]);px(()=>z.current,"wheel",ot=>{var Vt,ie;const fr=((ie=(Vt=z.current)==null?void 0:Vt.ownerDocument)!=null?ie:document).activeElement===z.current;if(!f||!fr)return;ot.preventDefault();const Ti=Qt(ot)*o,Vd=Math.sign(ot.deltaY);Vd===-1?gt(Ti):Vd===1&&yt(Ti)},{passive:!1});const Ss=V.useCallback((ot={},Vt=null)=>{const ie=a||s&&O.isAtMax;return{...ot,ref:qo(Vt,Q),role:"button",tabIndex:-1,onPointerDown:tn(ot.onPointerDown,Pt=>{Pt.button!==0||ie||je(Pt)}),onPointerLeave:tn(ot.onPointerLeave,nt.stop),onPointerUp:tn(ot.onPointerUp,nt.stop),disabled:ie,"aria-disabled":Ko(ie)}},[O.isAtMax,s,je,nt.stop,a]),aa=V.useCallback((ot={},Vt=null)=>{const ie=a||s&&O.isAtMin;return{...ot,ref:qo(Vt,X),role:"button",tabIndex:-1,onPointerDown:tn(ot.onPointerDown,Pt=>{Pt.button!==0||ie||Ln(Pt)}),onPointerLeave:tn(ot.onPointerLeave,nt.stop),onPointerUp:tn(ot.onPointerUp,nt.stop),disabled:ie,"aria-disabled":Ko(ie)}},[O.isAtMin,s,Ln,nt.stop,a]),oa=V.useCallback((ot={},Vt=null)=>{var ie,Pt,fr,Ti;return{name:x,inputMode:u,type:"text",pattern:d,"aria-labelledby":w,"aria-label":y,"aria-describedby":b,id:m,disabled:a,...ot,readOnly:(ie=ot.readOnly)!=null?ie:l,"aria-readonly":(Pt=ot.readOnly)!=null?Pt:l,"aria-required":(fr=ot.required)!=null?fr:c,required:(Ti=ot.required)!=null?Ti:c,ref:qo(z,Vt),value:at(O.value),role:"spinbutton","aria-valuemin":r,"aria-valuemax":i,"aria-valuenow":Number.isNaN(O.valueAsNumber)?void 0:O.valueAsNumber,"aria-invalid":Ko(h??O.isOutOfRange),"aria-valuetext":Jt,autoComplete:"off",autoCorrect:"off",onChange:tn(ot.onChange,It),onKeyDown:tn(ot.onKeyDown,wt),onFocus:tn(ot.onFocus,Ct,()=>H(!0)),onBlur:tn(ot.onBlur,N,qt)}},[x,u,d,w,y,at,b,m,a,c,l,h,O.value,O.valueAsNumber,O.isOutOfRange,r,i,Jt,It,wt,Ct,N,qt]);return{value:at(O.value),valueAsNumber:O.valueAsNumber,isFocused:G,isDisabled:a,isReadOnly:l,getIncrementButtonProps:Ss,getDecrementButtonProps:aa,getInputProps:oa,htmlProps:P}}var[Tx,_o]=Qc({name:"NumberInputStylesContext",errorMessage:`useNumberInputStyles returned is 'undefined'. Seems you forgot to wrap the components in "<NumberInput />" `}),[Ax,lh]=Qc({name:"NumberInputContext",errorMessage:"useNumberInputContext: `context` is undefined. Seems you forgot to wrap number-input's components within <NumberInput />"}),ch=Fn(function(t,e){const s=Mf("NumberInput",t),r=bo(t),i=zg(r),{htmlProps:o,...l}=Sx(i),a=V.useMemo(()=>l,[l]);return v.jsx(Ax,{value:a,children:v.jsx(Tx,{value:s,children:v.jsx(hr.div,{...o,ref:e,className:yo("chakra-numberinput",t.className),__css:{position:"relative",zIndex:0,...s.root}})})})});ch.displayName="NumberInput";var Cx=Fn(function(t,e){const s=_o();return v.jsx(hr.div,{"aria-hidden":!0,ref:e,...t,__css:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",height:"calc(100% - 2px)",zIndex:1,...s.stepperGroup}})});Cx.displayName="NumberInputStepper";var hh=Fn(function(t,e){const{getInputProps:s}=lh(),r=s(t,e),i=_o();return v.jsx(hr.input,{...r,className:yo("chakra-numberinput__field",t.className),__css:{width:"100%",...i.field}})});hh.displayName="NumberInputField";var Wf=hr("div",{baseStyle:{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transitionProperty:"common",transitionDuration:"normal",userSelect:"none",cursor:"pointer",lineHeight:"normal"}}),kx=Fn(function(t,e){var s;const r=_o(),{getDecrementButtonProps:i}=lh(),o=i(t,e);return v.jsx(Wf,{...o,__css:r.stepper,children:(s=t.children)!=null?s:v.jsx(gx,{})})});kx.displayName="NumberDecrementStepper";var Ix=Fn(function(t,e){var s;const{getIncrementButtonProps:r}=lh(),i=r(t,e),o=_o();return v.jsx(Wf,{...i,__css:o.stepper,children:(s=t.children)!=null?s:v.jsx(xx,{})})});Ix.displayName="NumberIncrementStepper";function Rx(n,t,e){return(n-t)*100/(e-t)}wo({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});wo({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});var Mx=wo({"0%":{left:"-40%"},"100%":{left:"100%"}}),Px=wo({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function Nx(n){const{value:t=0,min:e,max:s,valueText:r,getValueText:i,isIndeterminate:o,role:l="progressbar"}=n,a=Rx(t,e,s);return{bind:{"data-indeterminate":o?"":void 0,"aria-valuemax":s,"aria-valuemin":e,"aria-valuenow":o?void 0:t,"aria-valuetext":(()=>{if(t!=null)return typeof i=="function"?i(t,a):r})(),role:l},percent:a,value:t}}var[Fx,Bx]=Qc({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),Dx=Fn((n,t)=>{const{min:e,max:s,value:r,isIndeterminate:i,role:o,...l}=n,a=Nx({value:r,min:e,max:s,isIndeterminate:i,role:o}),h={height:"100%",...Bx().filledTrack};return v.jsx(hr.div,{ref:t,style:{width:`${a.percent}%`,...l.style},...a.bind,...l,__css:h})}),zf=Fn((n,t)=>{var e;const{value:s,min:r=0,max:i=100,hasStripe:o,isAnimated:l,children:a,borderRadius:c,isIndeterminate:h,"aria-label":d,"aria-labelledby":u,"aria-valuetext":f,title:m,role:p,...g}=bo(n),x=Mf("Progress",n),b=c??((e=x.track)==null?void 0:e.borderRadius),y={animation:`${Px} 1s linear infinite`},E={...!h&&o&&l&&y,...h&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${Mx} 1s ease infinite normal none running`}},S={overflow:"hidden",position:"relative",...x.track};return v.jsx(hr.div,{ref:t,borderRadius:b,__css:S,...g,children:v.jsxs(Fx,{value:x,children:[v.jsx(Dx,{"aria-label":d,"aria-labelledby":u,"aria-valuetext":f,min:r,max:i,value:s,isIndeterminate:h,css:E,borderRadius:b,title:m,role:p}),a]})})});zf.displayName="Progress";var Lx=Hg({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"});const Ox='.menu{display:flex;font-family:Sora,sans-serif;height:100%;position:fixed;top:0;bottom:0;right:0;transition:.2s}@keyframes open{0%{right:-33.0625rem}to{right:0}}@keyframes close{0%{right:0rem}to{right:-33.0625rem}}.menu.close-menu-wrapper{right:-33.0625rem;animation:close .3s linear alternate}@media (max-width: 80rem){.menu.close-menu-wrapper{right:-26.7rem}}.menu.open-menu-wrapper{right:0;animation:open .3s linear alternate}.menu .open-menu-btn{position:absolute;left:-37px;top:80px;width:2.25rem;height:2.25rem;display:flex;justify-content:center;align-items:center;border-radius:50%;border:.0625rem solid}.menu .open-menu-btn img{border-radius:50%;object-fit:contain}.menu .open-menu-btn-game{position:absolute;left:-37px;top:150px;width:2.25rem;height:2.25rem;display:flex;justify-content:center;align-items:center;border-radius:50%;border:.0625rem solid}.menu .open-menu-btn-game img{border-radius:50%;object-fit:contain}.menu .menu-content{height:100%;transition:.2s;padding:0;border-left:1px solid;width:33.0625rem}@media (max-width: 80rem){.menu .menu-content{width:400px}}.menu .menu-content.open-menu .logout{display:flex;padding:0 1.5rem}.menu .menu-content.open-menu .login{display:block}.menu .menu-content.open-menu .login .list-game{padding:20px 20px 10px}.menu .menu-content.open-menu .login .header-tab{padding:15px 20px;height:87px;border-bottom-width:2px;display:flex;align-items:center;justify-content:space-between;gap:20px}.menu .menu-content.open-menu .login .header-tab .left{display:flex;align-items:center;gap:6px}.menu .menu-content.open-menu .login .header-tab .right .balance{max-width:100%;justify-content:left}.menu .menu-content.open-menu .login .header-tab .right .balance .tooltip{margin:0}.menu .menu-content.open-menu .login .header-tab .sasa img{width:42px;height:40px}.menu .menu-content.open-menu .login .header-tab h1{font-size:20px;font-weight:500}.menu .menu-content.open-menu .login .main-tab .navigation{scrollbar-width:thin}@media (max-width: 80rem){.menu .menu-content.open-menu .login .main-tab .navigation{overflow-y:hidden;overflow-x:auto}}.menu .menu-content.open-menu .login .main-tab.theme-dark .chakra-tabs__tablist{border-color:#ffffff1a}.menu .menu-content.open-menu .login .main-tab.theme-dark .chakra-tabs__tablist .chakra-tabs__tab[aria-selected=true]:after{background:#faad14}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tab-panels{padding:0 20px}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tab-panels .tab-panel-home{height:calc(100vh - 200px);overflow-y:auto;scrollbar-width:none}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tablist{border-bottom-width:2px;border-color:#0000001a}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tablist .chakra-tabs__tab{font-size:.875rem;font-weight:500;height:2.875rem;padding:0 1.1rem;position:relative}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tablist .chakra-tabs__tab[aria-selected=true]:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:3px;background:#1890ff}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tablist .chakra-tabs__tab:hover .tab-tooltip{display:block}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tablist .chakra-tabs__tab img{width:1.5rem;height:1.5rem;object-fit:contain}.menu .menu-content.open-menu .login .main-tab .chakra-tabs__tab-panel{padding:0!important}.menu .menu-content.open-menu .login .quest-tab .chakra-tabs__tab-panels{padding:0}.menu .menu-content.open-menu .login .quest-tab .chakra-tabs__tablist{border:none;gap:10px}.menu .menu-content.open-menu .login .quest-tab .chakra-tabs__tablist .chakra-tabs__tab{border-radius:10px;border:1px solid}.menu .menu-content .logout{width:100%;height:100%;display:none;flex-direction:column;justify-content:center;align-items:center;gap:3rem;overflow-y:auto}.menu .menu-content .logout .exten-logo{width:150px;height:90px;object-fit:contain}.menu .menu-content .logout button{width:200px;height:2.75rem;border-radius:.625rem;font-size:1rem;transition:.2s}.menu .menu-content .logout button:hover{opacity:.7;transition:.2s}.menu .menu-content .login{display:none;width:100%;height:100%;color:#fff;overflow:hidden}.menu .menu-content .login .my-stuff{display:flex;justify-content:space-between;align-items:center;margin-top:2.18rem}.menu .menu-content .login .my-stuff .stuff{display:flex;gap:.75rem;align-items:center}.menu .menu-content .login .my-stuff .stuff .whitelist{color:#faad14;font-size:.75rem;font-weight:500;text-decoration-line:underline}.menu .menu-content .login .my-stuff .stuff .my-bag-btn{display:flex;flex-direction:column;align-items:center;transition:.2s}.menu .menu-content .login .my-stuff .stuff .my-bag-btn:hover p{opacity:.9;transition:.2s}.menu .menu-content .login .my-stuff .stuff .my-bag-btn p{font-size:.75rem;font-weight:500;opacity:.5;transition:.2s}.menu .menu-content .login .group-external-link .btn-transfer{display:flex;gap:.3125rem;border:1px solid;border-radius:10px;align-items:center;font-size:.75rem!important;font-weight:400}.menu .menu-content .login .group-external-link .btn-transfer img{width:20px;height:20px}.menu .menu-content .login .group-external-link .btn-transfer.theme-light{border:1px solid rgba(0,0,0,.2)!important}.menu .menu-content .login .enter-code-referral{position:sticky;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;justify-content:center;align-items:center}.menu .menu-content .login .enter-code-referral h1{font-size:20px;font-weight:700;margin-bottom:30px}.menu .menu-content .login .enter-code-referral .chakra-form-control{width:fit-content;margin:0 auto 20px}.menu .menu-content .login .enter-code-referral input{max-width:200px;height:44px;border-radius:10px;border:1px solid rgba(255,255,255,.5);text-align:center}.menu .menu-content .login .enter-code-referral button{width:200px;height:44px;border-radius:10px;background:#faad14;color:#000;font-size:14px;font-weight:600}.tooltip:hover .title{display:block;padding:6px 12px;border:1px solid rgba(255,255,255,.2);border-radius:6px;background:#00000080;color:#fff}.tooltip .title{text-wrap:nowrap;display:none;position:absolute;bottom:-40px;left:50%;transform:translate(-50%);z-index:3;width:fit-content;background:#00000080;color:#fff}.wrapper-balance{display:flex;gap:10px;flex-direction:column}.wrapper-balance .balance{display:flex;gap:12px;align-items:center;max-width:60%}.wrapper-balance .balance .coins{display:flex;gap:.2rem;align-items:center}.wrapper-balance .balance .coins img{width:1.5rem;height:1.5rem;object-fit:contain}.wrapper-balance .balance .coins .credit{display:flex;flex-direction:column;gap:.3rem;align-items:center}.wrapper-balance .balance .coins .credit span{font-size:.875rem;font-weight:500;width:50px;white-space:nowrap}@media (max-width: 80rem){.wrapper-balance .balance .coins .credit span{width:30px;font-size:12px}}.wrapper-balance .balance .coins .credit span.usd{font-size:.75rem;opacity:.5}canvas{pointer-events:none!important}@media (max-height: 800px){.home{max-height:70dvh}}.home .list-card-balance{display:flex;padding-top:20px;gap:22px;justify-content:flex-start;flex-wrap:wrap;margin-bottom:30px;align-items:stretch}@media (max-width: 80rem){.home .list-card-balance{gap:15.2px}}.home .list-card-balance .card-balance{height:11.875rem;width:calc(33.333% - 15px);display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:16px 2px;border-radius:10px;text-align:center;border:1px solid}@media (max-width: 80rem){.home .list-card-balance .card-balance{height:11.5rem;width:calc(33.333% - 11px)}}.home .list-card-balance .card-balance.theme-dark .text-transfer{color:#faad14}.home .list-card-balance .card-balance.theme-dark .balance.ap{color:#fff}.home .list-card-balance .card-balance .img-currency{width:auto;height:3.125rem}@media (max-width: 80rem){.home .list-card-balance .card-balance .img-currency{height:2.5rem}}.home .list-card-balance .card-balance .name-balance{font-size:14px;font-weight:500;color:#000000b3;margin-top:10px;margin-bottom:10px}@media (max-width: 80rem){.home .list-card-balance .card-balance .name-balance{font-size:12px}}.home .list-card-balance .card-balance .balance{font-size:24px;font-weight:700;max-width:100%;line-height:32px}@media (max-width: 80rem){.home .list-card-balance .card-balance .balance{font-size:20px}}.home .list-card-balance .card-balance .balance.gold{color:#faad14}.home .list-card-balance .card-balance .balance.snowflake{color:#722ed1}.home .list-card-balance .card-balance .balance.asg{color:#1890ff}.home .list-card-balance .card-balance .balance.sae{color:#eb2f96}.home .list-card-balance .card-balance .balance.usdt{color:#50ac56}.home .list-card-balance .card-balance .balance.ap{color:#000}.home .list-card-balance .card-balance .balance.gem{color:#fa0a0a}.home .list-card-balance .card-balance .text-transfer{color:#1890ff;text-decoration:underline;font-size:14px;font-weight:500;background:none}@media (max-width: 80rem){.home .list-card-balance .card-balance .text-transfer{font-size:12px}}.home .my-pet{display:flex;gap:.9rem;margin-bottom:2.51rem}.home .my-pet .pet-image{width:11.25rem;border:1px solid;border-radius:.625rem}@media (max-width: 80rem){.home .my-pet .pet-image{width:8.5rem;height:100%}}.home .my-pet .pet-image img{width:100%;height:100%;object-fit:cover}.home .my-pet .pet-image canvas{pointer-events:none}@media (max-width: 80rem){.home .my-pet .pet-image canvas{width:10.5rem!important;height:12rem!important}}.home .my-pet .copy-wrapper{position:relative;width:fit-content;height:fit-content;cursor:pointer}.home .my-pet .copy-wrapper img{width:24px}.home .my-pet .copy-wrapper .copy-tooltip{position:absolute;visibility:hidden;opacity:0;padding:7px;top:-35px;left:50%;transform:translate(-50%);border-radius:7px;font-size:12px;background:#1d293d;color:#fff;transition:opacity .3s ease}.home .my-pet .copy-wrapper .tooltip-show{opacity:1;visibility:visible}.home .my-pet .pet-info{flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:flex-start;width:100%}.home .my-pet .pet-info .text-binding{font-size:11px;cursor:pointer;color:#1890ff}.home .my-pet .pet-info .text-binding:hover{text-decoration:underline}.home .my-pet .pet-info .linked-citizen{display:flex;gap:.3125rem}.home .my-pet .pet-info .name{font-size:1.5rem;font-weight:700;display:flex;gap:.62rem}.home .my-pet .pet-info .name .edit-name{cursor:pointer;width:1.5rem;height:1.5rem;object-fit:contain;opacity:.9;transition:.4s}.home .my-pet .pet-info .name .edit-name:hover{opacity:1;transition:.4s}.home .my-pet .pet-info .level{width:100%;margin-top:4px}.home .my-pet .pet-info .level .level-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.69rem}.home .my-pet .pet-info .level .level-header .current-level{font-size:1rem;font-weight:700;line-height:1.5rem}.home .my-pet .pet-info .level .level-header .remaining-to-up{opacity:.5;font-size:.875rem;font-weight:500;line-height:1.375rem}@media (max-width: 80rem){.home .my-pet .pet-info .level .level-header .remaining-to-up{font-size:12px}}.home .my-pet .pet-info .level .progress{background-color:#f7f9f9!important}.home .my-pet .pet-info .why-lv-up{font-size:.8rem;font-weight:500;line-height:1.125rem;margin-bottom:1.24rem;display:flex;gap:.31rem;align-items:center}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-level-des{width:max-content!important;left:-65%}@media (max-width: 80rem){.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-level-des{left:-64%}}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-level-des .lv-tooltip{display:flex;align-items:center;gap:4px}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-hover{margin-top:15px;margin-bottom:0}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-content{width:13.7rem}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-content .lv-tooltip span{color:#faad14}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-content .lv-tooltip .gold{display:flex;justify-content:flex-start;align-items:center}.home .my-pet .pet-info .why-lv-up .custom-tooltip .tooltip-content .lv-tooltip .gold .img-gold{width:12px!important;height:12px!important;margin-left:2px;margin-right:2px}.home .my-pet .pet-info .action{display:flex;justify-content:space-between;width:100%}.home .my-pet .pet-info .action button{height:2.875rem;border-radius:.625rem;background-color:#fff;padding:0 .9375rem;display:flex;justify-content:center;align-items:center;font-size:.875rem;color:#000;gap:.31rem;border:.0625rem solid rgb(209,217,221)}.home .my-pet .pet-info .action button img{width:1.5rem;height:1.5rem;object-fit:contain}.home .my-pet .pet-info .action .btn-disable{opacity:.5;cursor:not-allowed}.home .description{opacity:.5;font-size:.875rem;font-weight:500;line-height:1.375rem;margin-bottom:1.24rem}.home .mint-banner{width:100%;height:28.75rem;object-fit:cover;border-radius:.625rem;margin-bottom:1.85rem}.home .image-full{width:65%;margin:0 auto 30px;border-radius:8px}.home .resource-wrapper{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:1.4375rem;margin-bottom:1.875rem}.home .resource-wrapper .resource-img{width:100%;height:100%;border-radius:.625rem}.home .resource-wrapper .resource-item{position:relative;overflow:hidden}.home .resource-wrapper .resource-item:hover .extension-tooltip{display:block}.home .extension-tooltip{position:absolute;display:none;background:#15202bb3;white-space:break-spaces;width:100%;height:100%;z-index:10;text-align:left;padding:.5rem;border-radius:.5rem;font-size:12px;font-weight:300;top:0;left:0;animation:anim-tooltip .3s ease-in}@keyframes anim-tooltip{0%{top:100%;opacity:0}to{top:0;opacity:1}}.home .mint-vip-pass{padding:0 1.25rem;height:2.75rem;border-radius:.625rem;font-size:14px;font-weight:700;line-height:1.375rem;display:block;margin:auto}.home .mint-vip-pass-active{opacity:1}.home .mint-vip-pass-disable{opacity:.5;cursor:not-allowed}.tab-tooltip{position:absolute;display:none;width:fit-content;height:fit-content;z-index:10;text-align:center;padding:.5rem;border-radius:.5rem;font-size:12px;font-weight:300;top:100%;left:50%;transform:translate(-50%);white-space:nowrap}.referral{overflow:hidden;height:calc(100dvh - 100px);padding-bottom:100px;padding-top:20px}.referral .title{font-size:.875rem;font-weight:500;line-height:1.375rem;margin-bottom:1.24rem}.referral .share-ref{display:flex;gap:1.25rem;height:2.875rem;width:100%;margin-bottom:1.24rem}.referral .share-ref .link-ref{flex:1;display:flex;align-items:center;padding:0 1.26rem;height:100%;border-radius:.625rem;border:1px solid;font-size:.875rem;font-weight:500;line-height:1.375rem}.referral .share-ref .copy-ref{width:8.82rem;height:100%;display:flex;justify-content:center;align-items:center;gap:.3125rem;border-radius:.625rem;border:1px solid}.referral .share-ref .copy-ref img{width:1.5rem;height:1.5rem}.referral .share-ref .copy-ref p{font-size:.875rem;font-weight:700;line-height:1.375rem}.referral .statistic{display:flex;justify-content:space-between;margin-bottom:2.42rem;gap:20px}.referral .statistic .statistic-card{flex-shrink:0;flex-grow:1;border-radius:.625rem;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;padding:2.8rem 0;border:1px solid;width:calc(50% - 10px)}.referral .statistic .statistic-card .number{font-size:2.375rem;font-weight:700;line-height:52.5px;display:flex;gap:.31rem;align-items:center}.referral .statistic .statistic-card .number img{width:3.5rem;height:3.5rem;object-fit:contain}.referral .statistic .statistic-card .st-line{background-color:#3d3e41;height:5px;width:5.625rem;border-radius:8px;margin-top:1.47rem;margin-bottom:1.22rem}.referral .statistic .statistic-card .label{margin-bottom:1.22rem;text-align:center;font-size:.875rem;font-weight:500;line-height:1.375rem}.referral .statistic .statistic-card .claim{color:#faad14;font-size:.875rem;font-weight:500;line-height:1.375rem;text-decoration-line:underline;cursor:pointer}.referral .list-ref-title{font-size:1rem;font-weight:700;line-height:1.5rem}@media (max-width: 80rem){.referral .list-ref-title{font-size:.875rem}}.referral .referral-list{width:100%;overflow-y:auto;height:calc(100dvh - 30.5rem);scrollbar-width:thin;padding-top:2rem;padding-bottom:50px}.referral .referral-list .referral-card{width:100%;margin-bottom:1.24rem;display:flex;gap:68px;align-items:center;justify-content:space-between;padding:12px 22px;border-radius:10px;background-color:#f7f9f9}.referral .referral-list .referral-card.dark{background:#0d0e12}.referral .referral-list .referral-card .card-left{display:flex;gap:.39rem;align-items:center;justify-content:space-between;width:100%}.referral .referral-list .referral-card .card-left img{width:24px;height:24px}.referral .referral-list .referral-card .card-left .ref-info{display:flex;gap:12px;justify-content:center;align-items:center;justify-content:space-between;width:100%}.referral .referral-list .referral-card .card-left .ref-info .ref-name{font-size:1rem;font-weight:500;line-height:1.5rem;min-width:120px;color:#fff}@media (max-width: 80rem){.referral .referral-list .referral-card .card-left .ref-info .ref-name{font-size:14px}}.referral .referral-list .referral-card .card-left .ref-info .ref-name.text-line-through{text-decoration:line-through}.referral .referral-list .referral-card .card-left .ref-info .copy-wrapper{position:relative;width:fit-content;height:fit-content}.referral .referral-list .referral-card .card-left .ref-info .copy-wrapper .copy-tooltip{position:absolute;visibility:hidden;opacity:0;padding:7px;top:-35px;left:50%;transform:translate(-50%);border-radius:7px;font-size:12px;background:#1d293d;transition:opacity .3s ease}.referral .referral-list .referral-card .card-left .ref-info .copy-wrapper .tooltip-show{opacity:1;visibility:visible}.referral .referral-list .referral-card .card-left .ref-info .icon-copy{cursor:pointer}.referral .referral-list .referral-card .card-left .ref-info .ref-date{display:flex;gap:.95rem;font-size:.75rem;font-weight:500;opacity:.5}.referral .referral-list .referral-card .card-right p{font-size:14px;font-weight:500;line-height:22px;color:#000}.referral .referral-list .referral-card .card-right-black p{font-size:14px;font-weight:500;line-height:22px;color:#fff}.tooltip-copy{color:#fff}.list-store{padding-top:20px;display:flex;flex-wrap:wrap;justify-content:flex-start;gap:.95rem;overflow-y:auto;max-height:80dvh;padding-bottom:50px;scrollbar-width:thin}@media (max-height: 800px){.list-store{max-height:72dvh}}.list-store .store-card{width:9rem;height:9rem;border-radius:.625rem;border:1px solid;position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.69rem;cursor:pointer;transition:.4s}@media (max-width: 80rem){.list-store .store-card{width:47%}}.list-store .store-card .item-img{height:5rem;width:auto;border-radius:8px;position:relative;display:flex;justify-content:center;align-items:center}.list-store .store-card .price{display:flex;gap:.3rem;align-items:center}.list-store .store-card .price img{width:1.25rem;height:1.25rem;object-fit:contain}.list-store .store-card .price p{font-size:.875rem;font-weight:500;line-height:1.375rem}.list-store .store-card .tooltip{position:absolute;top:10px;left:10px}.list-store .store-card .tooltip .custom-tooltip .tooltip-content{white-space:pre-wrap}.border-yellow:hover{border:1px solid #e66e00!important;transition:.4s}.border-blue:hover{border:1px solid #1890ff!important;transition:.4s}.quest .list-items{height:calc(100dvh - 210px);overflow-y:auto;width:100%;padding-bottom:40px;scrollbar-width:thin;padding-top:20px}.quest .quest-tab .chakra-tabs__tablist{margin-top:20px}@media (max-width: 80rem){.quest .quest-tab .chakra-tabs__tablist .chakra-tabs__tab{padding:0 12px!important}}.quest .quest-tab .chakra-tabs__tablist .chakra-tabs__tab[aria-selected=true]:after{display:none}@media (max-width: 80rem){.quest .quest-tab .chakra-tabs__tablist button span{font-size:12px!important;white-space:nowrap}}.list-quest{width:100%;max-height:100%}.list-quest .card-container{position:relative;margin-bottom:1.24rem}.list-quest .card-container:last-child{margin-bottom:2rem}.list-quest .card-container .quest-card{width:100%;border-radius:.625rem;border:1px solid rgba(255,255,255,.1);padding:20px 12px;transition:.4s;gap:1rem}.list-quest .card-container .quest-card:hover{border:1px solid rgba(255,255,255,.5)!important;transition:.4s}.list-quest .card-container .quest-card .card-header{display:flex;justify-content:space-between;align-items:center;gap:10px;min-height:35px}.list-quest .card-container .quest-card .card-header a{display:block;text-align:center}.list-quest .card-container .quest-card .card-header .reward{display:flex;align-items:center;flex-shrink:0;gap:4px;width:80px}.list-quest .card-container .quest-card .card-header .reward img{width:35px;height:35px;object-fit:contain}.list-quest .card-container .quest-card .card-header .reward p{font-size:.875rem;font-weight:500;line-height:1.375rem}.list-quest .card-container .quest-card .card-header .quest-name{flex:1;text-align:left!important;overflow:hidden}.list-quest .card-container .quest-card .card-header .quest-name .item-quest-name{display:inline-block;width:calc(100% - 110px)}@media (max-width: 80rem){.list-quest .card-container .quest-card .card-header .quest-name .item-quest-name{font-size:13px}}.list-quest .card-container .quest-card .card-header .button-check-claim{display:flex;justify-content:flex-start;align-items:center;width:126px}.list-quest .card-container .quest-card .card-header .type{font-size:.75rem;font-weight:700;border:1px solid;background-color:transparent;height:1.625rem;border-radius:.375rem;display:flex;justify-content:center;align-items:center;padding:0 .62rem}.list-quest .card-container .quest-card .card-header .type.onetime{color:#52c41a;border-color:#52c41a}.list-quest .card-container .quest-card .card-header .type.daily{color:#eb2f96;border-color:#eb2f96}.list-quest .card-container .quest-card a,.list-quest .card-container .quest-card p{font-size:1rem;font-weight:700;line-height:1.5rem}.list-quest .card-container .quest-card .cancel-binding{opacity:1;font-size:.8rem;font-weight:600;line-height:1.375rem;position:absolute;top:3.1rem;left:.75rem;transition:.2s}.list-quest .card-container .quest-card .cancel-binding:hover{text-decoration:underline;transition:.2s}.list-quest .card-container .quest-card .progress-btn{padding:0 15px;border-radius:.625rem;height:2.25rem;display:flex;justify-content:center;align-items:center;background-color:#1d9bf0;color:#fff}.list-quest .card-container .claim-btn{position:absolute;top:50%;transform:translateY(-50%);right:12px;background-color:#faad14;border-radius:.625rem;height:2.25rem;max-width:7rem;width:100%;font-size:.75rem}@media (max-width: 80rem){.list-quest .card-container .claim-btn{max-width:5.5rem}}.list-quest .card-container .claim-btn.claim-btn-transparent{background-color:transparent!important}.list-quest .card-container .claim-btn a{font-weight:700}.list-quest .card-container .claim-btn span{font-size:14px;font-weight:500}@media (max-width: 80rem){.list-quest .card-container .claim-btn span{font-size:12px}}.list-quest .card-container .claim-btn.claimed{background-color:#3c3f46!important;color:#fff!important;font-weight:700;cursor:auto!important;pointer-events:none!important;opacity:.5}.list-quest .card-container .claim-btn.completed{font-weight:700;cursor:not-allowed!important;opacity:.5;border:1px solid rgb(230,110,0)}.list-quest .card-container .claim-btn.waiting-binding{background:#9d9d9d!important;color:#fff;cursor:auto!important;pointer-events:none!important}.list-quest .description{opacity:.5;font-size:.875rem;font-weight:500}.my-bag{padding:1.45rem 1.25rem;overflow:hidden}.my-bag .back-home{margin-bottom:2.16rem;gap:.31rem;padding:0;background-color:transparent!important;height:auto!important}.my-bag .back-home:hover{background-color:transparent!important}.my-bag .back-home img{width:1.5rem;height:1.5rem;object-fit:contain}.my-bag .back-home p{font-size:.875rem;font-weight:500;line-height:1.375rem}.bag-list{height:72dvh;overflow-y:auto;padding-bottom:50px;padding-top:20px}.bag-list .list{display:flex;justify-content:flex-start;row-gap:1.24rem;column-gap:1rem;flex-wrap:wrap}.bag-list .list .bag-card{width:9rem;height:9rem;border-radius:.625rem;border:1px solid;position:relative;display:flex;justify-content:center;flex-direction:column;align-items:center;cursor:pointer;transition:.2s;gap:.5rem}@media (max-width: 80rem){.bag-list .list .bag-card{width:47%}}.bag-list .list .bag-card img{height:5rem;width:auto;border-radius:8px}.bag-list .list .bag-card .tooltip{position:absolute;top:10px;left:10px}.bag-list .list .bag-card p{font-size:.875rem;font-weight:500;line-height:1.375rem}@keyframes customAni{0%{transform:scale(1)}50%{transform:scale(1.1)}to{transform:scale(1)}}.big-quest{border-radius:.825rem;border:1px solid;padding:1.2rem}.big-quest .title{font-size:1.1rem;font-weight:700;line-height:1.5rem;margin-bottom:1rem}.big-quest .title span{margin-left:.4rem;font-weight:500;font-size:1rem}.big-quest .description{font-size:1rem;font-weight:500;line-height:1.5rem;margin-bottom:1rem;opacity:.8}.big-quest img{width:85px;height:auto;display:block;margin:auto;border-radius:.6rem}.big-quest .claim-big-quest{width:130px;height:44px;border-radius:.625rem;font-size:1rem;display:block;margin:auto;margin-top:2rem}.refetch-quest{width:1.5rem;height:1.5rem;cursor:pointer;display:flex;align-items:center;height:2.875rem}.refetch-quest img{width:100%;height:100%;object-fit:contain}.refetch-quest .chakra-spinner{width:1.3rem;height:1.3rem}.popup-buy{position:fixed;top:50%;left:50%;transform:translate(-50%) translateY(-50%);width:26.25rem;padding:1.07rem 1.25rem 1.88rem;border-radius:.625rem;z-index:2;border:1px solid}.popup-buy .popup-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:1.9rem;border-bottom:1px solid}.popup-buy .popup-header .h-title{display:flex;gap:.3rem;align-items:center}.popup-buy .popup-header .h-title p{font-size:.875rem;font-weight:600;margin-top:4px}.popup-buy .popup-header .h-title img{width:1.5rem;object-fit:contain;height:1.5rem}.popup-buy .popup-header .close-popup{width:1.5rem;height:1.5rem;cursor:pointer}.popup-buy .popup-header .close-popup img{width:100%;height:100%;object-fit:contain}.popup-buy .popup-content{display:flex;gap:1.25rem;margin-top:1.45rem}.popup-buy .popup-content .item-img{width:8.75rem;height:8.75rem;border:1.5px solid rgba(0,0,0,.2);border-radius:.625rem;padding:.84rem;position:relative;display:flex;align-items:center;justify-content:center}.popup-buy .popup-content .item-img img{width:100%;height:100%;object-fit:contain}.popup-buy .popup-content .item-img .reward{position:absolute;bottom:4px;right:4px;font-weight:600}.popup-buy .popup-content .item-right{flex:1}.popup-buy .popup-content .item-right.inven{display:flex;flex-direction:column;justify-content:space-between}.popup-buy .popup-content .item-right .item-name{font-size:1.2rem;font-weight:700;margin-bottom:1rem}.popup-buy .popup-content .item-right .item-price{width:100%;display:flex;align-items:center;justify-content:space-between;margin-bottom:.7rem}.popup-buy .popup-content .item-right .item-price p{font-size:.85rem}.popup-buy .popup-content .item-right .item-price img{width:22px;height:22px;object-fit:contain}.popup-buy .popup-content .item-right .item-price div{display:flex;gap:.2rem;align-items:center}.popup-buy .popup-content .item-right .limit{width:100%;display:flex;align-items:center;justify-content:space-between}.popup-buy .popup-content .item-right .limit p{font-size:.85rem}.popup-buy .popup-content .item-right .button-buy{width:100%}.popup-buy .popup-content .item-right .button-buy button{width:100%;border-radius:.625rem;height:44px;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.2rem}.popup-buy .popup-content .item-right .button-buy button img{width:22px;height:22px;object-fit:contain}.popup-buy .popup-content .quantity{display:flex;justify-content:center;align-items:center;margin-top:.7rem}.popup-buy .popup-content .quantity img{width:1.5rem;height:1.5rem;object-fit:contain}.popup-buy .popup-content .quantity .input-quantity{width:6.3rem;height:1.625rem;display:flex;justify-content:space-between;align-items:center}.popup-buy .popup-content .quantity .input-quantity img{cursor:pointer;width:1rem;height:1rem}.popup-buy .popup-content .quantity .input-quantity input{outline:unset!important;height:1.625rem!important;border:none!important;width:2.875rem;padding:0!important;text-align:center}.popup-buy .popup-content .quantity .max{width:2.875rem;height:1.625rem;font-size:.75rem;font-weight:700;cursor:pointer;display:flex;justify-content:center;align-items:center;border-radius:.375rem}.popup-buy .footer{display:flex;gap:1rem;margin-top:.6rem;justify-content:center}.popup-buy .footer .quantity{width:8.75rem}.popup-buy .footer .button-buy{flex:1}.popup-buy .footer .button-buy button{width:100%;border-radius:.625rem;height:44px;font-size:1rem;display:flex;align-items:center;justify-content:center;gap:.2rem}.popup-buy .footer .button-buy button img{width:22px;height:22px;object-fit:contain}.overlay{position:fixed;width:100dvw;height:100dvh;background-color:#00000080;top:0;left:0;right:0;bottom:0;cursor:auto!important;transition:all .1s linear;z-index:1}.overlay-lv2{z-index:2}.custom-popup{position:fixed;top:50%;left:50%;transform:translate(-50%) translateY(-50%);width:26.25rem;padding:1.07rem 1.25rem 1.88rem;border-radius:.625rem;border:1px solid;z-index:2}.custom-popup .popup-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:1.9rem;border-bottom:1px solid}.custom-popup .popup-header .h-title{display:flex;gap:.3rem;align-items:center}.custom-popup .popup-header .h-title p{font-size:.875rem;font-weight:600;margin-top:4px}.custom-popup .popup-header .h-title img{width:1.5rem;object-fit:contain;height:1.5rem}.custom-popup .popup-header .close-popup{width:1.5rem;height:1.5rem;cursor:pointer}.custom-popup .popup-header .close-popup img{width:100%;height:100%;object-fit:contain}.custom-popup .popup-content{display:flex;gap:1.238rem;margin-top:1.45rem}.custom-popup .popup-content .item-img{width:8.75rem;height:8.75rem;border:1.5px solid;border-radius:.625rem;padding:.84rem}.custom-popup .popup-content .item-img img{width:100%;height:100%;object-fit:contain}.custom-popup .popup-content .tools{flex:1;display:flex;flex-direction:column;justify-content:space-between}.custom-popup .popup-content .tools .name{font-size:1rem;font-weight:700;line-height:1.5rem;margin-bottom:1rem}.custom-popup .popup-content .tools .quantity{display:flex;justify-content:space-between;align-items:center}.custom-popup .popup-content .tools .quantity img{width:1.5rem;height:1.5rem;object-fit:contain}.custom-popup .popup-content .tools .quantity .input-quantity{width:fit-content;height:1.625rem;display:flex;justify-content:space-between;align-items:center;gap:8px}.custom-popup .popup-content .tools .quantity .input-quantity img{cursor:pointer;width:1rem;height:1rem}.custom-popup .popup-content .tools .quantity .input-quantity input{outline:unset!important;height:1.625rem!important;border:none!important;max-width:5rem;width:fit-content;padding:0!important;text-align:center}.custom-popup .popup-content .tools .quantity .max{width:2.875rem;height:1.625rem;font-size:.75rem;font-weight:700;cursor:pointer;display:flex;justify-content:center;align-items:center;border-radius:.375rem}.custom-popup .popup-content .tools .btn{width:100%;border-radius:.625rem;height:44px}.custom-popup .popup-footer{margin-top:29px;display:flex;justify-content:flex-end}.custom-popup .popup-footer .btn{width:100%;border-radius:.625rem;height:44px;width:192.5px}.custom-popup .footer{display:flex;justify-content:center;gap:1rem}.custom-popup .mint-vip-pass{padding:0 1.25rem;height:2.75rem;border-radius:.625rem;font-size:14px;font-weight:700;line-height:1.375rem;display:block;margin:auto}.custom-popup .mint-vip-pass-active{background:#faad14}.custom-popup .mint-vip-pass-active:hover{background:#faad14b3}.custom-popup .mint-vip-pass-disable{cursor:not-allowed;background-color:#e2e8f0;border:1px solid rgba(255,255,255,.2)}.tooltip{position:relative;width:fit-content;margin:auto}.tooltip:hover .title{display:block;padding:6px 12px;border:1px solid rgba(255,255,255,.2);border-radius:6px}.tooltip .title{text-wrap:nowrap;display:none;position:absolute;bottom:-40px;left:50%;transform:translate(-50%);z-index:3;width:fit-content}.wear-popup{position:fixed;top:50%;left:50%;transform:translate(-50%) translateY(-50%);width:40rem;padding:1.07rem 1.25rem 1.55rem;border-radius:.625rem;z-index:2;border:1px solid}.wear-popup .popup-header{display:flex;justify-content:space-between;align-items:center;padding-bottom:1.9rem;border-bottom:1px solid}.wear-popup .popup-header .h-title{display:flex;gap:.3rem;align-items:center}.wear-popup .popup-header .h-title p{font-size:.875rem;font-weight:600;margin-top:4px}.wear-popup .popup-header .h-title img{width:1.5rem;object-fit:contain;height:1.5rem}.wear-popup .popup-header .close-popup{width:1.5rem;height:1.5rem;cursor:pointer}.wear-popup .popup-header .close-popup img{width:100%;height:100%;object-fit:contain}.wear-popup .popup-content{display:flex;gap:1.23rem;margin-top:1.45rem}.wear-popup .popup-content .item-img{width:20rem;height:23.08425rem;border:1.5px solid;border-radius:.625rem;padding:1.1rem}.wear-popup .popup-content .item-img img{width:100%;height:100%;object-fit:contain}.wear-popup .popup-content .tools{flex:1}.wear-popup .popup-content .tools .name{font-size:1rem;font-weight:700;line-height:1.5rem;margin-bottom:1.28rem}.wear-popup .popup-content .tools .list-skin{display:flex;gap:1.25rem;flex-wrap:wrap;margin-bottom:1.28rem}.wear-popup .popup-content .tools .list-skin .skin-item{position:relative;cursor:pointer;width:7.5rem;height:7.5rem;border-radius:.625rem;overflow:hidden;padding:1.7rem;transition:.2s;display:flex;justify-content:center;align-items:center}.wear-popup .popup-content .tools .list-skin .skin-item .image{width:100%!important;height:100%!important;object-fit:contain}.wear-popup .popup-content .tools .list-skin .skin-item .check{opacity:0;position:absolute;width:1.5rem;height:1.5rem;object-fit:contain;top:.6rem;left:.6rem;transition:.2s}.wear-popup .popup-content .tools .list-skin .skin-item.active{border-color:#52c41a!important;box-shadow:unset!important;transition:.2s}.wear-popup .popup-content .tools .list-skin .skin-item.active .check{opacity:1;transition:.2s}.wear-popup .popup-content .tools .btn{width:100%;border-radius:.625rem;height:2.75rem;margin-bottom:1.75rem}.pop-binding.popup-buy .popup-content{flex-direction:column;gap:5px}.pop-binding.popup-buy .popup-content .label{color:#fff;text-align:center;font-size:.875rem;font-weight:500;line-height:1.375rem;margin-bottom:1.2rem}.pop-binding.popup-buy .popup-content .label span{opacity:.7}.pop-binding.popup-buy .popup-content .label .poli{color:#ff1919;font-weight:700;opacity:1!important}.pop-binding.popup-buy .popup-content input{height:2.75rem!important;width:100%;border-radius:.625rem;text-align:center;background-color:transparent!important;border:1px solid}.pop-binding.popup-buy .popup-content .chakra-numberinput{width:100%}.pop-binding.popup-buy .popup-content .chakra-numberinput input{height:2.75rem!important;border-radius:.625rem;text-align:center;background-color:transparent!important}.pop-binding.popup-buy .footer{margin-top:1rem;flex-direction:column;gap:1.23rem;align-items:center}.pop-binding.popup-buy .footer .button-buy{width:100%}.pop-binding.popup-buy .footer .button-buy a:hover{text-decoration:none!important}.pop-binding.popup-buy .footer .button-buy button{font-size:.875rem;font-weight:700;height:2.75rem!important}.pop-binding.popup-buy .footer .sign-up{text-align:center;font-size:.85rem;font-weight:500;line-height:1.125rem}.pop-binding.popup-buy .footer .sign-up a{text-align:center;font-size:.85rem;font-weight:500;line-height:1.125rem;text-decoration:underline}.pop-binding.popup-buy .footer .how-to-get-code{color:#fff;text-align:center;font-size:.75rem;font-weight:500;line-height:1.125rem;text-decoration:underline}.pop-binding.popup-buy .wallet-note{margin-top:1rem}.pop-binding.popup-buy .wallet-note .wallet-warning{font-size:.8rem;font-weight:500;line-height:1.375rem;color:#ff1919}.pop-binding.popup-buy .wallet-note .chakra-checkbox__label p{font-size:.8rem;font-weight:500;line-height:1.1rem}.popup-buy.popup-show-reward{transition:all .3s ease}.popup-buy.popup-show-reward .popup-content{display:flex;flex-direction:column;gap:20px;align-items:center}.popup-buy.popup-show-reward .popup-content .item-img img{border-radius:10px}.popup-buy.popup-show-reward .popup-content .item-right .item-name{font-size:16px;text-align:center}.detail-balance{justify-content:flex-start!important}.detail-balance .btn-claim-disabled{opacity:.5;cursor:not-allowed;pointer-events:none}.modal-deposit .popup-content{margin-top:12px}.modal-deposit .popup-content .list-item{list-style:none;padding-top:0}.menu .menu-content.open-menu .login .wrapper-wallet{max-height:80dvh;overflow-y:auto;padding-bottom:50px}.menu .menu-content.open-menu .login .wrapper-wallet .home-tab{padding:0}.menu .menu-content.open-menu .login .wrapper-wallet .header{display:flex;justify-content:space-between;margin-bottom:28px;align-items:flex-start;gap:20px;padding:24px 20px;border-bottom:1px solid}.menu .menu-content.open-menu .login .wrapper-wallet .header.header-in-wallet{padding:0;margin-top:20px}.menu .menu-content.open-menu .login .wrapper-wallet .header .left{display:flex;align-items:center;gap:5px;cursor:pointer}.menu .menu-content.open-menu .login .wrapper-wallet .header .left h1{text-wrap:nowrap}.menu .menu-content.open-menu .login .wrapper-wallet .header .right .balance{max-width:100%}.menu .menu-content.open-menu .login .wrapper-wallet .list-item{list-style:none!important}.menu .menu-content.open-menu .login .wrapper-wallet .list-item::marker{display:none!important}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .home-tab .infor-user{margin-top:20px;gap:4rem}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .chakra-form__error-message{font-size:11px}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .chakra-tabs .chakra-tabs__tab-panels .chakra-tabs__tab-panel{padding:0 16px!important}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .chakra-tabs .chakra-tabs__tablist{border:none;justify-content:center}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .chakra-tabs .chakra-tabs__tablist .chakra-tabs__tab{padding:12px 60px!important;font-size:16px;font-weight:600;border:none}@media (max-width: 80rem){.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .chakra-tabs .chakra-tabs__tablist .chakra-tabs__tab{font-size:.875rem}}.menu .menu-content.open-menu .login .wrapper-wallet .extension-x .import-wallet .import-display .chakra-tabs .chakra-tabs__tab-panels{padding:20px 16px}.menu .menu-content.open-menu .login .wrapper-wallet .no-header .header-tab{display:none}.button-play-now{display:flex;align-items:center;justify-content:center;gap:10px;padding:0 10px;color:#fff;text-shadow:2px 2px rgb(116,116,116);text-transform:uppercase;cursor:pointer;border:solid 2px black;letter-spacing:1px;font-weight:600;font-size:17px;background-color:#fdd835;border-radius:50px;position:relative;overflow:hidden;transition:all .5s ease}.button-play-now:active{transform:scale(.9);transition:all .1s ease}.button-play-now__icon{transition:all .5s ease;z-index:2}.button-play-now__text{transition:all .5s ease;transition-delay:.3s}.button-play-now__text--now{position:absolute;left:0;transform:translate(-100%);transition:all .5s ease;z-index:2}.button-play-now:hover__icon{transform:scale(3) translate(50%)}.button-play-now:hover .button__text--now{transform:translate(10px);transition-delay:.3s}.button-play-now:hover .button__text--play{transform:translate(200%);transition-delay:.3s}.sasa-popup .home-tab{padding:1.25rem 1.25rem 0}.sasa-popup .chakra-tabs{margin-top:1.25rem}.sasa-popup .chakra-tabs .tab_list_popup{justify-content:space-around;border:unset}.sasa-popup .chakra-tabs .tab_list_popup button{width:50%}.sasa-popup .chakra-tabs .token{padding:16px;border-bottom:1px solid rgba(0,0,0,.1)}.sasa-popup .chakra-tabs .token:hover{background:#c8dddd}.sasa-popup .chakra-tabs .token .card-token{display:flex;justify-content:space-between;align-items:center;font-size:.875rem;font-weight:600}.sasa-popup .chakra-tabs .token .card-token .left{display:flex;align-items:center;gap:1rem}.sasa-popup .chakra-tabs .token .card-token .left .symbol,.sasa-popup .chakra-tabs .token .card-token .left .quantity{font-size:.875rem;font-weight:700;color:#000}.sasa-popup .chakra-tabs .token .card-token .right .convert{font-size:.875rem;font-weight:700}.sasa-popup .chakra-tabs .token .card-token .right .quantity{font-size:.875rem;font-weight:700;color:#000}.sasa-popup .chakra-tabs .token .card-token .right .skeleton{width:100px;height:16px;position:relative;background:#dfdfdf;overflow:hidden;border-radius:4px}.sasa-popup .chakra-tabs .token .card-token .right .skeleton:after{content:"";position:absolute;height:100%;width:100px;left:-100px;top:0;background:linear-gradient(to right,transparent,rgba(255,255,255,.4392156863),transparent);animation:reflect .8s ease-out infinite}.sasa-popup .chakra-tabs .token .card-token .right .skeleton.theme-dark{background:#505865}.sasa-popup .chakra-tabs .token .card-token img{width:1.875rem;height:1.875rem;object-fit:contain}.sasa-popup .chakra-tabs .token.theme-dark{border-bottom:1px solid rgba(255,255,255,.2)}.sasa-popup .chakra-tabs .token.theme-dark:hover{background:#2f313a}.sasa-popup .chakra-tabs .token.theme-dark .card-token .left .symbol,.sasa-popup .chakra-tabs .token.theme-dark .card-token .left .quantity,.sasa-popup .chakra-tabs .token.theme-dark .card-token .right .quantity{color:#fff}.sasa-popup .chakra-tabs .token.refresh-balance{border-bottom:none}.sasa-popup .chakra-tabs .token.refresh-balance:hover{background:inherit}.sasa-popup .chakra-tabs .token.refresh-balance .card-token{justify-content:center}.sasa-popup .chakra-tabs .token.refresh-balance .card-token .left{gap:10px}.sasa-popup .chakra-tabs .token.refresh-balance .card-token .left:hover{opacity:.8}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.sasa-popup .chakra-tabs .token.refresh-balance .card-token .left img{width:24px;height:24px;cursor:pointer}.sasa-popup .chakra-tabs .token.refresh-balance .card-token .left img.img-rotate{animation:rotate 1s linear infinite}.sasa-popup .chakra-tabs .setting{padding-top:1px}.sasa-popup .chakra-tabs .setting .about-sasa{padding:0 1rem;margin-top:1rem}.sasa-popup .chakra-tabs .setting .about-sasa h1{font-size:.875rem;font-weight:500;margin-bottom:.375rem}.sasa-popup .chakra-tabs .setting .about-sasa .social{display:flex;justify-content:space-between}.sasa-popup .chakra-tabs .setting .about-sasa .social .item{width:50%;padding:.75rem 0;display:flex;justify-content:center;align-items:center;border-top:.0625rem solid;border-bottom:.0625rem solid;border-color:#0003;font-size:.875rem;cursor:pointer;font-weight:700;transition:.3s}.sasa-popup .chakra-tabs .setting .about-sasa .social .item:first-child{border:.0625rem solid;border-color:#0003;border-top-left-radius:.625rem;border-bottom-left-radius:.625rem}.sasa-popup .chakra-tabs .setting .about-sasa .social .item:last-child{border:.0625rem solid;border-color:#0003;border-top-right-radius:.625rem;border-bottom-right-radius:.625rem;border-left:none}.sasa-popup .chakra-tabs .setting .about-sasa .social .item:hover{background-color:#eff1f1}.sasa-popup .chakra-tabs .setting .actions h1{margin:1rem 0;padding:0 1rem;font-size:.875rem;font-weight:400}.sasa-popup .chakra-tabs .setting .actions .action{display:flex;gap:1rem;font-size:.875rem;font-weight:600;padding:.625rem 1rem;cursor:pointer;transition:.3s;border-bottom:.0625rem solid;align-items:center}.sasa-popup .chakra-tabs .setting .actions .action:hover{background:#c8dddd!important}.sasa-popup .chakra-tabs .setting.setting-dark .about-sasa .social .item{border-color:#ffffff1a!important}.sasa-popup .chakra-tabs .setting.setting-dark .about-sasa .social .item:first-child,.sasa-popup .chakra-tabs .setting.setting-dark .about-sasa .social .item:last-child{border-color:#ffffff1a!important}.sasa-popup .chakra-tabs .setting.setting-dark .about-sasa .social .item:hover,.sasa-popup .chakra-tabs .setting.setting-dark .actions .action:hover{background:#2f313a!important}.sasa-popup .chakra-tabs .chakra-tabs__tablist{border-bottom-width:2px!important;border-color:#0003}.sasa-popup .chakra-tabs .chakra-tabs__tablist .chakra-tabs__tab{color:#00000080}.sasa-popup .chakra-tabs .chakra-tabs__tablist .chakra-tabs__tab:active{background:inherit!important}.sasa-popup .chakra-tabs .chakra-tabs__tablist .chakra-tabs__tab[aria-selected=true]{color:#1890ff;font-weight:700}.sasa-popup .chakra-tabs.tab-dark .chakra-tabs__tablist{border-bottom-color:#fff3!important}.sasa-popup .chakra-tabs.tab-dark .chakra-tabs__tablist .chakra-tabs__tab{color:#ffffff80!important}.sasa-popup .chakra-tabs.tab-dark .chakra-tabs__tablist .chakra-tabs__tab[aria-selected=true]{color:#faad14!important}.sasa-popup .chakra-tabs__tab-panel{padding:0 16px 16px;background:#13161b;border-top-right-radius:24px;border-top-left-radius:24px;margin-top:24px}.sasa-popup .tab-light .chakra-tabs__tab-panel{box-shadow:0 -1px 12px #00000026;background-color:#eff3f4}.password-empty{display:flex;align-items:center;justify-content:center;height:100%;padding-top:20px}.password-empty.reset-password{padding-top:0}.password-empty.change-password{display:block;padding-top:0!important}.password-empty.change-password .icon-back{cursor:pointer}.password-empty.change-password .container{padding-top:20px}.password-empty.change-password .container .chakra-form__label{font-size:.875rem;font-weight:600;margin-bottom:6px}.password-empty.change-password .container .chakra-form__error-message{font-size:10px;font-weight:500}.password-empty.change-password .container.theme-light .form-change-password{margin-top:20px}.password-empty.change-password .container.theme-light .form-change-password .chakra-input__right-element{height:100%}.password-empty.change-password .container.theme-light .chakra-form__label{color:#000;font-size:.875rem}.password-empty.change-password .container .list-step{margin-top:20px}.password-empty.change-password .container .list-step .item-step{display:flex;gap:.1875rem}.password-empty .container{width:100%;padding:0 20px}.password-empty .container.theme-light .chakra-form-control .chakra-form__label{color:#000;font-size:.875rem}.password-empty .container .text-privatekey{padding:.75rem;border-radius:.375rem}.password-empty .container .warring{margin:2.5rem 0;display:flex;align-items:start;flex-direction:column;gap:.625rem}.password-empty .container .title{font-size:1.5rem;font-weight:600;margin-bottom:1rem;text-align:center}.password-empty .container .des{font-size:.875rem;font-weight:500;margin-bottom:1.875rem;text-align:center}.password-empty .container .des .warning{color:#d21d21;font-weight:500}.password-empty .container .form-change-password .list-step-create-pass{display:flex;flex-direction:column;gap:.625rem;margin-top:.625rem}.password-empty .container .form-change-password .list-step-create-pass.theme-dark .item span{color:#ffffff80}.password-empty .container .form-change-password .list-step-create-pass.theme-dark .item.success span{color:#fff}.password-empty .container .form-change-password .list-step-create-pass .item-step{display:flex;align-items:center;gap:.3125rem}.password-empty .container .chakra-form-control{margin-bottom:2.2rem}.password-empty .container .chakra-form-control .chakra-form__label{color:#fff;margin-bottom:6px}.password-empty .container .chakra-form-control .chakra-input{height:3.125rem;border-radius:.625rem}.password-empty .container .chakra-form-control .chakra-input[aria-invalid=true]{border-color:#e53e3e!important}.password-empty .container .chakra-form-control .wra-input input{max-width:100%}.password-empty .container .chakra-form-control .wra-input input[aria-invalid=true]{border-color:#e53e3e!important}.password-empty .btn-submit-form.disable{opacity:.5;cursor:not-allowed}.password-empty.export-wallet .des-in-x{color:#000;font-size:14px;width:fit-content;margin:10px auto 30px}.sasa-popup{min-height:37.5rem;width:22.5rem;margin:auto}.sasa-popup.extension-x{width:100%!important}.sasa-popup.not-logged{height:37.5rem}.sasa-popup .btn-submit-form{background:#1890ff;color:#fff;margin:auto;display:flex;align-items:center;font-size:.875rem;font-weight:700;padding:.25rem 1.375rem;height:2.75rem;border-radius:.625rem}.sasa-popup .btn-submit-form:hover:disabled{color:#000}.sasa-popup .header{display:flex;align-items:center;justify-content:space-between;padding:1.125rem}.sasa-popup .header .left{display:flex;align-items:center;gap:.625rem}.sasa-popup .header .left span{font-size:.875rem;font-weight:600}.sasa-popup .logo-polygon{width:1.5rem;height:1.5rem;object-fit:contain}.sasa-popup .logo-sasa{max-width:10.25rem}.sasa-popup .button-login{margin-top:1.25rem;padding:.75rem 1.25rem;border-radius:.5rem;font-family:Sora,sans-serif;font-weight:700;font-size:1rem}.sasa-popup .button-login:hover{cursor:pointer;background:gray;color:#fff;opacity:.8}.sasa-popup .no-auth{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%}.sasa-popup .logo-saw{width:10rem;height:5rem}.sasa-popup .infor-user{display:flex;align-items:center;gap:.625rem;flex-direction:column}.sasa-popup .infor-user .bnb-balance{position:relative;width:192px;height:192px}.sasa-popup .infor-user .bnb-balance.bnb-balance-popup .circle:after{width:calc(100% - 4px);height:calc(100% - 4px)}.sasa-popup .infor-user .bnb-balance.theme-light .circle:after{background:#fff}.sasa-popup .infor-user .bnb-balance.theme-light .circle-1{background:#dde7ff}.sasa-popup .infor-user .bnb-balance.theme-light .circle-1:after{background:#dde7ff}.sasa-popup .infor-user .bnb-balance .circle{position:absolute;border-radius:100%;top:50%;left:50%;transform:translate(-50%,-50%);opacity:.5}.sasa-popup .infor-user .bnb-balance .circle:after{content:"";width:calc(100% - 4px);height:calc(100% - 4px);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:100%;padding:.0625rem;background:#000}.sasa-popup .infor-user .bnb-balance .circle-4{background:linear-gradient(180deg,#5471ad4d,#5471ad);width:192px;height:192px}.sasa-popup .infor-user .bnb-balance .circle-3{width:144px;height:144px;background:linear-gradient(180deg,#5471ad,#5471ad1a 79.25%)}.sasa-popup .infor-user .bnb-balance .circle-2{width:110px;height:110px;background:linear-gradient(180deg,#5471ad4d,#5471ad)}.sasa-popup .infor-user .bnb-balance .circle-1{width:76px;height:76px}.sasa-popup .infor-user .bnb-balance .circle-1:after{background:#60a5fa66}.sasa-popup .infor-user .bnb-balance .balance{position:absolute;border-radius:100%;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.5rem;font-weight:700;text-wrap:nowrap;max-width:100%}.sasa-popup .infor-user .bnb-balance .balance .inj{display:flex;gap:6px}@keyframes reflect{to{left:calc(100% + 100px)}}.sasa-popup .infor-user .bnb-balance .balance .skeleton{width:100px;height:26px;position:relative;background:#dfdfdf;overflow:hidden;border-radius:4px}.sasa-popup .infor-user .bnb-balance .balance .skeleton:after{content:"";position:absolute;height:100%;width:100px;left:-100px;top:0;background:linear-gradient(to right,transparent,rgba(255,255,255,.4392156863),transparent);animation:reflect .8s ease-out infinite}.sasa-popup .infor-user .bnb-balance .balance .skeleton.theme-dark{background:#505865}.sasa-popup .infor-user .avatar img{width:4.125rem;height:4.125rem;object-fit:contain;border-radius:100%;margin-top:1.25rem}.sasa-popup .infor-user .name{font-size:.875rem;font-weight:700}.sasa-popup .infor-user .address{font-size:.875rem;font-weight:700;display:flex;gap:.375rem;align-items:center}.sasa-popup .infor-user .address img{width:1.5rem;height:1.5rem;object-fit:contain;cursor:pointer}.sasa-popup .infor-user .copy-wrapper{position:relative;width:fit-content;height:fit-content}.sasa-popup .infor-user .copy-tooltip{position:absolute;visibility:hidden;opacity:0;padding:.4375rem;top:-2.1875rem;left:50%;transform:translate(-50%);border-radius:.4375rem;font-size:.75rem;background:#fff;transition:opacity .3s ease;border:.0625rem solid #000}.sasa-popup .infor-user .copy-tooltip.theme-dark{color:#000}.sasa-popup .infor-user .tooltip-show{opacity:1;visibility:visible}.sasa-popup .infor-user .deposit-withdraw{display:flex;gap:2rem;align-items:center}.sasa-popup .infor-user .deposit-withdraw .wrapper-btn{display:flex;flex-direction:column;align-items:center;justify-content:center}.sasa-popup .infor-user .deposit-withdraw .wrapper-btn p{margin-top:.5rem;font-size:1rem;font-weight:500}.sasa-popup .infor-user .deposit-withdraw .btn-transfer{border:none;border-radius:1rem;background-color:#fff;gap:.3125rem;transition:.3s;width:3.5rem;height:3.5rem;display:flex;justify-content:center;align-items:center}.sasa-popup .infor-user .deposit-withdraw .btn-transfer p{font-size:.875rem;font-weight:700;margin:0}.sasa-popup .infor-user .deposit-withdraw .btn-transfer img{width:1.5rem;height:1.5rem;object-fit:contain;object-position:center}.sasa-popup .infor-user .deposit-withdraw .btn-transfer:hover{background:#fff!important}.sasa-popup .infor-user .deposit-withdraw.theme-dark .btn-transfer:hover{background:#434557!important}.sasa-popup .form-control-password{position:relative}.sasa-popup .form-control-password .chakra-form__error-message{font-size:.625rem;position:absolute;font-weight:500}.sasa-popup .form-control-password .chakra-input{padding-right:2.75rem}.sasa-popup .form-control-password .chakra-input__right-element{height:3.125rem;width:3.125rem}.sasa-popup .form-control-password .chakra-input__right-element .chakra-button{background:none}.sasa-popup .form-control-password .list-step{display:flex;flex-direction:column;gap:.625rem;margin-top:.625rem}.sasa-popup .form-control-password .list-step.theme-dark .item span{color:#ffffff80}.sasa-popup .form-control-password .list-step.theme-dark .item.success span{color:#fff}.sasa-popup .form-control-password .list-step .item{display:flex;align-items:center;gap:.3125rem}.modal-password-empty .form-control-password{position:relative}.modal-password-empty .form-control-password .chakra-form__error-message{font-size:.625rem;position:absolute;font-weight:500}.modal-password-empty .form-control-password .chakra-input{padding-right:2.75rem}.modal-password-empty .form-control-password .chakra-input__right-element{height:3.125rem;width:3.125rem}.modal-password-empty .form-control-password .chakra-input__right-element .chakra-button{background:none}.modal-password-empty .form-control-password .list-step{display:flex;flex-direction:column;gap:.625rem;margin-top:.625rem}.modal-password-empty .form-control-password .list-step.theme-dark .item span{color:#ffffff80}.modal-password-empty .form-control-password .list-step.theme-dark .item.success span{color:#fff}.modal-password-empty .form-control-password .list-step .item{display:flex;align-items:center;gap:.3125rem}.custom-modal-sasa{position:fixed;top:50%;left:50%;transform:translate(-50%) translateY(-50%);width:auto;padding:1.07rem 1.25rem 1.88rem;border-radius:.625rem;z-index:2;border:.0625rem solid}.custom-modal-sasa .popup-header{display:flex;justify-content:space-between;align-items:center}.custom-modal-sasa .popup-header .h-title{display:flex;gap:.3rem;align-items:center}.custom-modal-sasa .popup-header .h-title p{font-size:.875rem;font-weight:600;margin-top:.25rem}.custom-modal-sasa .popup-header .h-title img{width:1.5rem;object-fit:contain;height:1.5rem}.custom-modal-sasa .popup-header .close-popup{width:1.5rem;height:1.5rem;cursor:pointer}.custom-modal-sasa .popup-header .close-popup img{width:100%;height:100%;object-fit:contain}.custom-modal-sasa .popup-content{display:flex;gap:1.25rem;margin-top:1.45rem}.custom-modal-sasa .footer{display:flex;gap:1rem;margin-top:.6rem;justify-content:center}.modal-confirm-withdraw-sasa{width:20rem}.modal-confirm-withdraw-sasa .popup-content{margin-top:.625rem}.modal-confirm-withdraw-sasa .popup-content .des{margin:1.25rem 0!important}.modal-deposit{width:26.25rem}.modal-select-type-transfer .custom-modal{flex-direction:column}.modal-select-type-transfer .custom-modal .group-btn{display:flex;justify-content:center;gap:16px}.modal-select-type-transfer .custom-modal .tooltip{margin:unset}.modal-select-type-transfer .custom-modal .tooltip .title{top:-88%;bottom:unset}.tab-transfer .header-tab{padding:.75rem 0rem;position:relative}.tab-transfer .header-tab .icon-back{position:absolute;left:0;top:50%;left:1.25rem;transform:translateY(-50%)}.tab-transfer .transfer-sasa-wallet{padding:0 20px}.tab-transfer .title{text-align:center;font-size:1rem;font-weight:700;margin:0}.tab-transfer .icon-back{cursor:pointer}.tab-transfer .list-item{padding:0 1.25rem;padding-top:24px}.tab-transfer .list-item .sub-title{color:#000;font-size:14px;width:fit-content;margin:10px auto 30px;text-align:center}.tab-transfer .list-item.theme-dark .item .qr{border:none}.tab-transfer .list-item .address .value{width:95%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.tab-transfer .list-item .address .copy-wrapper{padding-right:0}.tab-transfer .item{margin-bottom:1.875rem}.tab-transfer .item .label{font-size:.875rem;font-weight:700;margin-bottom:.25rem}.tab-transfer .item .tag{border:.0625rem solid rgb(209,217,221);border-radius:.625rem;display:flex;align-items:center;gap:.75rem;padding:1rem}.tab-transfer .item .tag img{width:1.875rem;height:1.875rem}.tab-transfer .item .tag span{font-size:.875rem;font-weight:700}.tab-transfer .item .address{display:flex;align-items:center;font-size:.875rem;border-radius:.625rem;justify-content:space-between;padding:0 1.125rem;border-width:1px}.tab-transfer .item .address .copy-tooltip{position:absolute;visibility:hidden;opacity:0;padding:.4375rem;top:-2.1875rem;left:44%;transform:translate(-50%);border-radius:.4375rem;font-size:.75rem;background:#fff;transition:opacity .3s ease;border:.0625rem solid #000;color:#000}.tab-transfer .item .address .tooltip-show{opacity:1;visibility:visible}.tab-transfer .item .address .copy-wrapper{width:fit-content;text-align:center;color:#fff;padding:1.125rem 1rem;border-top-right-radius:1rem;border-bottom-right-radius:1rem;font-size:.875rem;font-weight:700;cursor:pointer;position:relative;text-wrap:nowrap}.tab-transfer .item .qr{margin:auto;display:flex;align-items:center;justify-content:center;width:fit-content;border-radius:.875rem;border:.0625rem solid rgb(209,217,221);overflow:hidden}.tab-transfer .item .qr img{width:12.5rem;height:12.5rem}.tab-transfer .item-step{margin-bottom:0}.tab-transfer .form.form-dark .address::placeholder{color:#ffffff80}.tab-transfer .form.form-dark .form-group-amount .amount::placeholder{color:#ffffff80}.tab-transfer .form .address{margin-bottom:1rem;height:3.125rem;border-radius:.625rem}.tab-transfer .form .address::placeholder{color:#00000080}.tab-transfer .form .form-group-amount{display:flex;border-width:.0625rem;border-radius:.375rem;padding-right:.75rem;align-items:center;height:3.125rem;border-radius:.625rem;justify-content:space-between}.tab-transfer .form .form-group-amount .amount{width:65%;border:none;box-shadow:none}.tab-transfer .form .form-group-amount .amount::placeholder{color:#00000080}.tab-transfer .form .balance{margin-top:.875rem;text-align:right;font-size:.75rem}.chakra-modal__content-container .custom-modal .chakra-modal__header{font-size:.875rem}.chakra-modal__content-container .custom-modal .des{font-size:.875rem;text-align:center;color:#00000080;margin:40px 0}.chakra-modal__content-container .custom-modal .chakra-modal__footer .chakra-button{font-size:.875rem}.chakra-modal__content-container .custom-modal .footer-notice{justify-content:space-between;gap:1.25rem}.chakra-modal__content-container .custom-modal .footer-notice .btn-submit-form{width:50%}.chakra-modal__content-container .custom-modal.modal-noti-error{background-color:inherit}.chakra-modal__content-container .custom-modal.modal-noti-error .des{color:#e53e3e;font-size:14px}.chakra-modal__content-container .custom-modal.modal-noti-success{width:220px;justify-content:center;background-color:inherit}.chakra-modal__content-container .custom-modal.modal-noti-success .des{color:#0084ff;font-size:14px}.chakra-modal__content-container .custom-modal.modal-loading-tx{width:fit-content}.chakra-modal__content-container .custom-modal.modal-loading-tx .chakra-modal__body{display:flex;justify-content:center;flex-direction:column;align-items:center;gap:1.25rem}.chakra-modal__content-container .custom-modal.modal-loading-tx .chakra-modal__body .des{margin-top:.25rem}.chakra-modal__content-container .custom-modal.modal-transaction-success,.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body{display:flex;flex-direction:column;align-items:center}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .img-transaction{width:7.5rem;height:7.5rem}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .title{font-size:1.25rem;font-weight:700;margin-bottom:1rem;text-align:center;margin-top:1.25rem;margin-bottom:.375rem}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .des{font-size:.875rem}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .hash{color:#fff;padding:.125rem .25rem;display:flex;margin-top:.375rem;align-items:center;gap:.25rem}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .hash p{font-weight:700;font-size:.875rem;max-width:100%;text-wrap:wrap;text-align:center;display:block;color:#1890ff;text-decoration:underline;cursor:pointer}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .hash .hash-text{white-space:nowrap}.chakra-modal__content-container .custom-modal.modal-transaction-success .chakra-modal__body .hash .icon-external-link{cursor:pointer}.chakra-modal__content-container .btn-submit-form{padding:.625rem 1.25rem;border-radius:.625rem;background:#1890ff!important;color:#fff;font-weight:700}.chakra-modal__content-container .btn-submit-form:hover{background:#3ea0fc!important}.chakra-modal__content-container .btn-submit-form:focus-visible{box-shadow:none}.chakra-modal__content-container .btn-reject{border:1px solid rgb(24,144,255)!important;background:#fff!important;color:#00000080}.chakra-modal__content-container .btn-reject:hover{background:#ff373766!important;border:1px solid transparent!important}.chakra-modal__content-container .theme-dark{background-color:#000}.chakra-modal__content-container .theme-dark .chakra-modal__header{color:#fff;border-bottom:.0625rem solid rgba(255,255,255,.1)}.chakra-modal__content-container .theme-dark .chakra-modal__body .des{color:#ffffff80}.chakra-modal__content-container .theme-dark.modal-transaction-success .chakra-modal__body .title,.chakra-modal__content-container .theme-dark.modal-transaction-success .chakra-modal__body .des{color:#fff}.chakra-modal__content-container .theme-dark.modal-transaction-success .chakra-modal__body .hash p{color:#faad14}.chakra-modal__content-container .theme-dark .btn-submit-form{background:#faad14;color:#000;font-weight:400}.deposit-withdraw-to-pool .title{color:#141536;margin-bottom:4px;font-weight:700;font-size:16px;text-align:start}.deposit-withdraw-to-pool .sub-title{color:#8c8c8c;margin-bottom:40px;text-align:start;font-size:14px}.deposit-withdraw-to-pool .group-address{border:1px solid;border-color:#d9d9d9;background-color:#fff;padding:4px;border-radius:16px;display:flex;flex-direction:column;gap:4px;position:relative}.deposit-withdraw-to-pool .group-address .group-arrow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border:1px solid;border-color:#d9d9d9;background-color:#fff;border-radius:50%;display:flex;justify-content:center;align-items:center;padding:6px}.deposit-withdraw-to-pool .group-address .group-arrow img{width:24px;height:24px}.deposit-withdraw-to-pool .group-address .from-address{background:#f7f9f9;padding:16px 24px;border-radius:14px;height:80px}.deposit-withdraw-to-pool .group-address .from-address:first-child{padding-bottom:30px}.deposit-withdraw-to-pool .group-address .from-address:nth-child(2){padding-top:20px}.deposit-withdraw-to-pool .group-address .from-address .name{color:#595959;font-weight:400;font-size:16px;margin-bottom:4px}.deposit-withdraw-to-pool .group-address .from-address .address{color:#8c8c8c;font-size:14px}.deposit-withdraw-to-pool .form .first-form{margin:12px 0;display:flex;gap:8px;align-items:flex-end}.deposit-withdraw-to-pool .form .first-form .amount{flex-grow:1}.deposit-withdraw-to-pool .form .first-form .amount .label{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.deposit-withdraw-to-pool .form .first-form .amount .label h3{font-size:14px;font-weight:700;color:#000}.deposit-withdraw-to-pool .form .first-form .amount .label p{color:#00000073;font-size:12px;font-weight:400}.deposit-withdraw-to-pool .form .first-form .amount .confirm-value{display:flex;gap:8px;align-items:center;border-radius:16px}.deposit-withdraw-to-pool .form .first-form .amount .confirm-value .amount{padding:15px;border-radius:16px;height:56px;font-size:16px;font-weight:400;color:#000;outline:none;box-shadow:none!important}.deposit-withdraw-to-pool .form .first-form .currency .select-currency{border:2px solid #d9d9d9;border-radius:16px;width:130px;height:56px;padding-right:6px}.deposit-withdraw-to-pool .form .first-form .currency .select-currency .react-select__control{height:100%}.deposit-withdraw-to-pool .form .first-form .currency .select-currency .react-select__value-container{padding:0}.deposit-withdraw-to-pool .form .note .chakra-checkbox__control{border-width:1px;border-color:#d9d9d9;border-radius:4px}.deposit-withdraw-to-pool .form .note .chakra-checkbox__label{color:#000000d9;font-size:14px;font-weight:400}.deposit-withdraw-to-pool .form .note .theme-dark svg{color:#000}.deposit-withdraw-to-pool .form .group-btn{display:flex;gap:20px;margin-top:20px}.deposit-withdraw-to-pool .form .group-btn .cancel{border:1px solid}.deposit-withdraw-to-pool .form .group-btn .cancel.theme-light:hover{opacity:.6}.deposit-withdraw-to-pool .form .group-btn .cancel:hover{opacity:.8}.deposit-withdraw-to-pool .form .group-btn .btn-submit-form{font-size:14px;font-weight:500;padding:0 26px;height:44px;border-radius:10px}.deposit-withdraw-to-pool .form .group-btn .btn-submit-form.submit .chakra-button__spinner{display:none}.deposit-withdraw-to-pool.theme-dark .title{color:#fff}.deposit-withdraw-to-pool.theme-dark .sub-title{color:#ffffffb3}.deposit-withdraw-to-pool.theme-dark .group-address{background-color:#000;border-color:#fff3}.deposit-withdraw-to-pool.theme-dark .group-address .from-address{background:#0d0e12}.deposit-withdraw-to-pool.theme-dark .group-address .from-address .name{color:#fff}.deposit-withdraw-to-pool.theme-dark .group-address .from-address .address{color:#ffffffb3}.deposit-withdraw-to-pool.theme-dark .group-address .group-arrow{background-color:#000}.deposit-withdraw-to-pool.theme-dark .form .first-form .amount .label h3{color:#fff}.deposit-withdraw-to-pool.theme-dark .form .first-form .amount .label p{color:#ffffff73}.deposit-withdraw-to-pool.theme-dark .form .currency .select-currency{border:2px solid rgba(255,255,255,.2)}.deposit-withdraw-to-pool.theme-dark .note .chakra-checkbox__control{background-color:#fff}.deposit-withdraw-to-pool.theme-dark .note .chakra-checkbox__label{color:#ffffffd9}.select-currency{flex-shrink:1;flex-grow:1;border:none}.select-currency.select-light .react-select__menu{overflow:hidden;border-color:#d1d9dd}.select-currency.select-dark .react-select__menu{overflow:hidden;border:2px solid;border-color:#fff3}.select-currency .react-select__menu{border:1px solid}.select-currency.select-currency-extension{max-width:122px}.select-currency .react-select-listbox-custom{padding:0;border-radius:.375rem;overflow:hidden}.select-currency .react-select-listbox-custom .react-select-listbox-custom-item{overflow:hidden}.select-currency.select-dark .react-select-listbox-custom-item{background-color:#0d0e12;cursor:pointer}.select-currency.select-dark .react-select-listbox-custom-item[aria-selected=true]{background-color:#383838}.select-currency.select-light .react-select-listbox-custom-item{background-color:#eff1f1;cursor:pointer}.select-currency.select-light .react-select-listbox-custom-item[aria-selected=true]{background-color:#d3d3d3}.select-item{display:flex;align-items:center;gap:.375rem;padding:.5rem .75rem;overflow:hidden;width:93px}.select-item img{width:1.5rem;height:1.5rem}.import-wallet{min-height:37.5rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.import-wallet button:hover{opacity:.8}.import-wallet .import-display{position:absolute;width:100%;height:100%;top:0;transition:.3s linear;background-color:#000}.import-wallet .import-display.theme-dark .chakra-tabs__tablist button[aria-selected=true]{color:#faad14!important}.import-wallet .import-display.theme-dark .chakra-tabs__tablist button[aria-selected=false]{color:#ffffff80!important}.import-wallet .import-display .import-header{display:flex;align-items:center;gap:1rem;padding:1rem}.import-wallet .import-display .import-header .heading{flex:1;width:calc(100% - 40px - 1rem);text-align:center;font-size:1.25rem;font-weight:600;color:#fff}@media (max-width: 400px){.import-wallet .import-display .import-header .heading{font-size:16px}}.import-wallet .import-display .import-header button{border-radius:50%;padding:0}.import-wallet .import-display .import-header button:hover{opacity:.8}.import-wallet .import-display .import-header button .chakra-icon{width:2rem;height:2rem}.import-wallet .import-display .chakra-tabs{padding:0 20px}.import-wallet .import-display .chakra-tabs__tablist{justify-content:center}.import-wallet .import-display .chakra-tabs__tablist button{font-size:14px!important}.import-wallet .import-display .chakra-tabs__tablist button[aria-selected=true]{color:#1890ff!important}.import-wallet .import-display .chakra-tabs__tab-panels{background-color:#13161b;padding:1rem;border-radius:1rem;margin-top:1rem}@media (max-width: 400px){.import-wallet .import-display .chakra-tabs__tab-panels{margin-top:0}}.import-wallet .import-display .chakra-tabs__tab-panels .chakra-tabs__tab-panel{background-color:transparent;margin-top:1rem;padding:0}.import-wallet .import-display .chakra-tabs__tab-panels button.disable{opacity:.5;cursor:not-allowed;pointer-events:none}.import-wallet .import-display .seed-pharse{display:flex;flex-wrap:wrap;width:100%}.import-wallet .import-display .seed-pharse .input-text{display:flex;align-items:center;padding:.5rem;max-width:33.3333333333%;justify-content:space-between}.import-wallet .import-display .seed-pharse .input-text label{text-wrap:nowrap;display:block}.import-wallet .import-display .seed-pharse .input-text input{width:78%;height:3rem;border-radius:.625rem}@media (max-width: 400px){.import-wallet .import-display .seed-pharse .input-text input{height:2.5rem}}.import-wallet .import-display .input-key{height:3.125rem;border-radius:.625rem}.import-wallet .import-display.theme-light .chakra-tabs .chakra-tabs__tab-panels{background:#f7f9f9}.modal-confirm-create-wallet{max-width:360px}.modal-confirm-create-wallet .des{margin:20px 0!important}.modal-confirm-create-wallet .btn-submit-form{display:flex;align-items:center;margin:unset}.font-size-import .chakra-checkbox__label{font-size:12px!important}.maintain-container{width:100%;height:80vh;display:flex;flex-direction:column;justify-content:center;align-items:center}.maintain-container .img-maintain{object-fit:cover}.maintain-container .text-maintain{padding:0 20px;font-size:1.5rem;font-weight:700;margin-top:20px;text-align:center}.theme-light .text-maintain{color:#000000b3}.theme-dark .text-maintain{color:#fff}.swap-tab .form{position:relative}.swap-tab .form .balance{text-align:left}.swap-tab .form .form-group-amount{height:6rem!important}.swap-tab .form .form-group-amount .amount{text-align:right;width:50%}.swap-tab .form .amount-above{border-radius:.625rem .625rem 0 0;margin-top:4px;border-bottom:none}.swap-tab .form .amount-below{border-radius:0 0 .625rem .625rem}.swap-tab .form .icon-swap{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);border-width:1px;padding:4px;width:40px;height:40px;border-radius:100%;display:flex;justify-content:center;align-items:center;cursor:pointer}.swap-tab .estimate-fee{float:right;margin:12px 0}.swap-tab .your-balance{font-size:12px;opacity:.5;padding:0 12px}::-webkit-scrollbar{width:.25rem;height:.25rem;border-radius:.25rem}::-webkit-scrollbar-track{background:#141417}::-webkit-scrollbar-thumb{background:#bae7ff;border-radius:.25rem}::-webkit-scrollbar-thumb:hover{background:#bae7ff}:root{--bg: #000}[data-theme=light]{--bg: #fff}.loading{margin-top:100px;display:flex;justify-content:center}.noti{position:fixed!important;bottom:0;right:0;width:33.0625rem!important;z-index:10000}@media (max-width: 80rem){.noti{width:400px!important}}.noti button{position:absolute;right:0!important;top:0!important}.custom-tooltip{position:relative;cursor:pointer}.custom-tooltip:hover .tooltip-content{display:block}.custom-tooltip svg{font-size:15px}.custom-tooltip img.img-note{width:18px!important;height:18px!important}.custom-tooltip .tooltip-content{position:absolute;border:1px solid;white-space:break-spaces;width:130px;z-index:1;text-align:left;padding:.5rem;border-radius:.375rem;font-size:.75rem;line-height:1.125rem;font-weight:300;top:10px;left:-5px;display:none}.custom-tooltip .tooltip-hover{font-size:.8rem;font-weight:500;line-height:1.125rem;margin-bottom:1.24rem;display:flex;gap:.31rem;align-items:center}.disabled{opacity:.2;cursor:not-allowed!important}';let Jo;function dh(n){return[...n.v,(n.i?"!":"")+n.n].join(":")}function Vx(n,t=","){return n.map(dh).join(t)}let Hf=typeof CSS<"u"&&CSS.escape||(n=>n.replace(/[!"'`*+.,;:\\/<=>?@#$%&^|~()[\]{}]/g,"\\$&").replace(/^\d/,"\\3$& "));function Wa(n){for(var t=9,e=n.length;e--;)t=Math.imul(t^n.charCodeAt(e),1597334677);return"#"+((t^t>>>9)>>>0).toString(36)}function uh(n,t="@media "){return t+te(n).map(e=>(typeof e=="string"&&(e={min:e}),e.raw||Object.keys(e).map(s=>`(${s}-width:${e[s]})`).join(" and "))).join(",")}function te(n=[]){return Array.isArray(n)?n:n==null?[]:[n]}function Gd(n){return n}function fh(){}let Ce={d:0,b:134217728,c:268435456,a:671088640,u:805306368,o:939524096};function qf(n){var t;return((t=n.match(/[-=:;]/g))==null?void 0:t.length)||0}function Xl(n){return Math.min(/(?:^|width[^\d]+)(\d+(?:.\d+)?)(p)?/.test(n)?Math.max(0,29.63*(+RegExp.$1/(RegExp.$2?15:1))**.137-43):0,15)<<22|Math.min(qf(n),15)<<18}let Ux=["rst-c","st-ch","h-chi","y-lin","nk","sited","ecked","pty","ad-on","cus-w","ver","cus","cus-v","tive","sable","tiona","quire"];function mh({n,i:t,v:e=[]},s,r,i){n&&(n=dh({n,i:t,v:e})),i=[...te(i)];for(let l of e){let a=s.theme("screens",l);for(let c of te(a&&uh(a)||s.v(l))){var o;i.push(c),r|=a?67108864|Xl(c):l=="dark"?1073741824:c[0]=="@"?Xl(c):(o=c,1<<~(/:([a-z-]+)/.test(o)&&~Ux.indexOf(RegExp.$1.slice(2,7))||-18))}}return{n,p:r,r:i,i:t}}let Kf=new Map;function Gl(n){if(n.d){let t=[],e=tl(n.r.reduce((s,r)=>r[0]=="@"?(t.push(r),s):r?tl(s,i=>tl(r,o=>{let l=/(:merge\(.+?\))(:[a-z-]+|\\[.+])/.exec(o);if(l){let a=i.indexOf(l[1]);return~a?i.slice(0,a)+l[0]+i.slice(a+l[1].length):el(i,o)}return el(o,i)})):s,"&"),s=>el(s,n.n?"."+Hf(n.n):""));return e&&t.push(e.replace(/:merge\((.+?)\)/g,"$1")),t.reduceRight((s,r)=>r+"{"+s+"}",n.d)}}function tl(n,t){return n.replace(/ *((?:\(.+?\)|\[.+?\]|[^,])+) *(,|$)/g,(e,s,r)=>t(s)+r)}function el(n,t){return n.replace(/&/g,t)}let Yd=new Intl.Collator("en",{numeric:!0});function Zf(n,t){for(var e=0,s=n.length;e<s;){let r=s+e>>1;0>=Qf(n[r],t)?e=r+1:s=r}return s}function Qf(n,t){let e=n.p&Ce.o;return e==(t.p&Ce.o)&&(e==Ce.b||e==Ce.o)?0:n.p-t.p||n.o-t.o||Yd.compare($d(n.n),$d(t.n))||Yd.compare(Wd(n.n),Wd(t.n))}function $d(n){return(n||"").split(/:/).pop().split("/").pop()||"\0"}function Wd(n){return(n||"").replace(/\W/g,t=>String.fromCharCode(127+t.charCodeAt(0)))+"\0"}function sl(n,t){return Math.round(parseInt(n,16)*t)}function Jn(n,t={}){if(typeof n=="function")return n(t);let{opacityValue:e="1",opacityVariable:s}=t,r=s?`var(${s})`:e;if(n.includes("<alpha-value>"))return n.replace("<alpha-value>",r);if(n[0]=="#"&&(n.length==4||n.length==7)){let i=(n.length-1)/3,o=[17,1,.062272][i-1];return`rgba(${[sl(n.substr(1,i),o),sl(n.substr(1+i,i),o),sl(n.substr(1+2*i,i),o),r]})`}return r=="1"?n:r=="0"?"#0000":n.replace(/^(rgb|hsl)(\([^)]+)\)$/,`$1a$2,${r})`)}function Jf(n,t,e,s,r=[]){return function i(o,{n:l,p:a,r:c=[],i:h},d){let u=[],f="",m=0,p=0;for(let b in o||{}){var g,x;let y=o[b];if(b[0]=="@"){if(!y)continue;if(b[1]=="a"){u.push(...gh(l,a,Ha(""+y),d,a,c,h,!0));continue}if(b[1]=="l"){for(let w of te(y))u.push(...i(w,{n:l,p:(g=Ce[b[7]],a&~Ce.o|g),r:b[7]=="d"?[]:c,i:h},d));continue}if(b[1]=="i"){u.push(...te(y).map(w=>({p:-1,o:0,r:[],d:b+" "+w})));continue}if(b[1]=="k"){u.push({p:Ce.d,o:0,r:[b],d:i(y,{p:Ce.d},d).map(Gl).join("")});continue}if(b[1]=="f"){u.push(...te(y).map(w=>({p:Ce.d,o:0,r:[b],d:i(w,{p:Ce.d},d).map(Gl).join("")})));continue}}if(typeof y!="object"||Array.isArray(y))b=="label"&&y?l=y+Wa(JSON.stringify([a,h,o])):(y||y===0)&&(b=b.replace(/[A-Z]/g,w=>"-"+w.toLowerCase()),p+=1,m=Math.max(m,(x=b)[0]=="-"?0:qf(x)+(/^(?:(border-(?!w|c|sty)|[tlbr].{2,4}m?$|c.{7,8}$)|([fl].{5}l|g.{8}$|pl))/.test(x)?+!!RegExp.$1||-!!RegExp.$2:0)+1),f+=(f?";":"")+te(y).map(w=>d.s(b,ph(""+w,d.theme)+(h?" !important":""))).join(";"));else if(b[0]=="@"||b.includes("&")){let w=a;b[0]=="@"&&(b=b.replace(/\bscreen\(([^)]+)\)/g,(_,E)=>{let S=d.theme("screens",E);return S?(w|=67108864,uh(S,"")):_}),w|=Xl(b)),u.push(...i(y,{n:l,p:w,r:[...c,b],i:h},d))}else u.push(...i(y,{p:a,r:[...c,b]},d))}return u.unshift({n:l,p:a,o:Math.max(0,15-p)+1.5*Math.min(m||15,15),r:c,d:f}),u.sort(Qf)}(n,mh(t,e,s,r),e)}function ph(n,t){return n.replace(/theme\((["'`])?(.+?)\1(?:\s*,\s*(["'`])?(.+?)\3)?\)/g,(e,s,r,i,o="")=>{let l=t(r,o);return typeof l=="function"&&/color|fill|stroke/i.test(r)?Jn(l):""+te(l).filter(a=>Object(a)!==a)})}function tm(n,t){let e,s=[];for(let r of n)r.d&&r.n?(e==null?void 0:e.p)==r.p&&""+e.r==""+r.r?(e.c=[e.c,r.c].filter(Boolean).join(" "),e.d=e.d+";"+r.d):s.push(e={...r,n:r.n&&t}):s.push({...r,n:r.n&&t});return s}function za(n,t,e=Ce.u,s,r){let i=[];for(let o of n)for(let l of function(a,c,h,d,u){a={...a,i:a.i||u};let f=function(m,p){let g=Kf.get(m.n);return g?g(m,p):p.r(m.n,m.v[0]=="dark")}(a,c);return f?typeof f=="string"?({r:d,p:h}=mh(a,c,h,d),tm(za(Ha(f),c,h,d,a.i),a.n)):Array.isArray(f)?f.map(m=>{var p,g;return{o:0,...m,r:[...te(d),...te(m.r)],p:(p=h,g=m.p??h,p&~Ce.o|g)}}):Jf(f,a,c,h,d):[{c:dh(a),p:0,o:0,r:[]}]}(o,t,e,s,r))i.splice(Zf(i,l),0,l);return i}function gh(n,t,e,s,r,i,o,l){return tm((l?e.flatMap(a=>za([a],s,r,i,o)):za(e,s,r,i,o)).map(a=>a.p&Ce.o&&(a.n||t==Ce.b)?{...a,p:a.p&~Ce.o|t,o:0}:a),n)}function jx(n,t,e,s){var r;return r=(i,o)=>{let{n:l,p:a,r:c,i:h}=mh(i,o,t);return e&&gh(l,t,e,o,a,c,h,s)},Kf.set(n,r),n}function nl(n,t,e){if(n[n.length-1]!="("){let s=[],r=!1,i=!1,o="";for(let l of n)if(!(l=="("||/[~@]$/.test(l))){if(l[0]=="!"&&(l=l.slice(1),r=!r),l.endsWith(":")){s[l=="dark:"?"unshift":"push"](l.slice(0,-1));continue}l[0]=="-"&&(l=l.slice(1),i=!i),l.endsWith("-")&&(l=l.slice(0,-1)),l&&l!="&"&&(o+=(o&&"-")+l)}o&&(i&&(o="-"+o),t[0].push({n:o,v:s.filter(Xx),i:r}))}}function Xx(n,t,e){return e.indexOf(n)==t}let zd=new Map;function Ha(n){let t=zd.get(n);if(!t){let e=[],s=[[]],r=0,i=0,o=null,l=0,a=(c,h=0)=>{r!=l&&(e.push(n.slice(r,l+h)),c&&nl(e,s)),r=l+1};for(;l<n.length;l++){let c=n[l];if(i)n[l-1]!="\\"&&(i+=+(c=="[")||-(c=="]"));else if(c=="[")i+=1;else if(o)n[l-1]!="\\"&&o.test(n.slice(l))&&(o=null,r=l+RegExp.lastMatch.length);else if(c=="/"&&n[l-1]!="\\"&&(n[l+1]=="*"||n[l+1]=="/"))o=n[l+1]=="*"?/^\*\//:/^[\r\n]/;else if(c=="(")a(),e.push(c);else if(c==":")n[l+1]!=":"&&a(!1,1);else if(/[\s,)]/.test(c)){a(!0);let h=e.lastIndexOf("(");if(c==")"){let d=e[h-1];if(/[~@]$/.test(d)){let u=s.shift();e.length=h,nl([...e,"#"],s);let{v:f}=s[0].pop();for(let m of u)m.v.splice(+(m.v[0]=="dark")-+(f[0]=="dark"),f.length);nl([...e,jx(d.length>1?d.slice(0,-1)+Wa(JSON.stringify([d,u])):d+"("+Vx(u)+")",Ce.a,u,/@$/.test(d))],s)}h=e.lastIndexOf("(",h-1)}e.length=h+1}else/[~@]/.test(c)&&n[l+1]=="("&&s.unshift([])}a(!0),zd.set(n,t=s[0])}return t}function st(n,t,e){return[n,Yl(t,e)]}function Yl(n,t){return typeof n=="function"?n:typeof n=="string"&&/^[\w-]+$/.test(n)?(e,s)=>({[n]:t?t(e,s):$l(e,1)}):e=>n||{[e[1]]:$l(e,2)}}function $l(n,t,e=n.slice(t).find(Boolean)||n.$$||n.input){return n.input[0]=="-"?`calc(${e} * -1)`:e}function rt(n,t,e,s){return[n,Gx(t,e,s)]}function Gx(n,t,e){let s=typeof t=="string"?(r,i)=>({[t]:e?e(r,i):r._}):t||(({1:r,_:i},o,l)=>({[r||l]:i}));return(r,i)=>{let o=em(n||r[1]),l=i.theme(o,r.$$)??tr(r.$$,o,i);if(l!=null)return r._=$l(r,0,l),s(r,i,o)}}function Re(n,t={},e){return[n,Yx(t,e)]}function Yx(n={},t){return(e,s)=>{let{section:r=em(e[0]).replace("-","")+"Color"}=n,[i,o]=$x(e.$$);if(!i)return;let l=s.theme(r,i)||tr(i,r,s);if(!l||typeof l=="object")return;let{opacityVariable:a=`--tw-${e[0].replace(/-$/,"")}-opacity`,opacitySection:c=r.replace("Color","Opacity"),property:h=r,selector:d}=n,u=s.theme(c,o||"DEFAULT")||o&&tr(o,c,s),f=t||(({_:p})=>{let g=Fa(h,p);return d?{[d]:g}:g});e._={value:Jn(l,{opacityVariable:a||void 0,opacityValue:u||void 0}),color:p=>Jn(l,p),opacityVariable:a||void 0,opacityValue:u||void 0};let m=f(e,s);if(!e.dark){let p=s.d(r,i,l);p&&p!==l&&(e._={value:Jn(p,{opacityVariable:a||void 0,opacityValue:u||"1"}),color:g=>Jn(p,g),opacityVariable:a||void 0,opacityValue:u||void 0},m={"&":m,[s.v("dark")]:f(e,s)})}return m}}function $x(n){return(n.match(/^(\[[^\]]+]|[^/]+?)(?:\/(.+))?$/)||[]).slice(1)}function Fa(n,t){let e={};return typeof t=="string"?e[n]=t:(t.opacityVariable&&t.value.includes(t.opacityVariable)&&(e[t.opacityVariable]=t.opacityValue||"1"),e[n]=t.value),e}function tr(n,t,e){if(n[0]=="["&&n.slice(-1)=="]"){if(n=zi(ph(n.slice(1,-1),e.theme)),!t)return n;if(!(/color|fill|stroke/i.test(t)&&!(/^color:/.test(n)||/^(#|((hsl|rgb)a?|hwb|lab|lch|color)\(|[a-z]+$)/.test(n))||/image/i.test(t)&&!(/^image:/.test(n)||/^[a-z-]+\(/.test(n))||/weight/i.test(t)&&!(/^(number|any):/.test(n)||/^\d+$/.test(n))||/position/i.test(t)&&/^(length|size):/.test(n)))return n.replace(/^[a-z-]+:/,"")}}function em(n){return n.replace(/-./g,t=>t[1].toUpperCase())}function zi(n){return n.includes("url(")?n.replace(/(.*?)(url\(.*?\))(.*?)/g,(t,e="",s,r="")=>zi(e)+s+zi(r)):n.replace(/(^|[^\\])_+/g,(t,e)=>e+" ".repeat(t.length-e.length)).replace(/\\_/g,"_").replace(/(calc|min|max|clamp)\(.+\)/g,t=>t.replace(/(-?\d*\.?\d(?!\b-.+[,)](?![^+\-/*])\D)(?:%|[a-z]+)?|\))([+\-/*])/g,"$1 $2 "))}function sm({presets:n=[],...t}){let e={darkMode:void 0,darkColor:void 0,preflight:t.preflight!==!1&&[],theme:{},variants:te(t.variants),rules:te(t.rules),ignorelist:te(t.ignorelist),hash:void 0,stringify:(s,r)=>s+":"+r,finalize:[]};for(let s of te([...n,{darkMode:t.darkMode,darkColor:t.darkColor,preflight:t.preflight!==!1&&te(t.preflight),theme:t.theme,hash:t.hash,stringify:t.stringify,finalize:t.finalize}])){let{preflight:r,darkMode:i=e.darkMode,darkColor:o=e.darkColor,theme:l,variants:a,rules:c,ignorelist:h,hash:d=e.hash,stringify:u=e.stringify,finalize:f}=typeof s=="function"?s(e):s;e={preflight:e.preflight!==!1&&r!==!1&&[...e.preflight,...te(r)],darkMode:i,darkColor:o,theme:{...e.theme,...l,extend:{...e.theme.extend,...l==null?void 0:l.extend}},variants:[...e.variants,...te(a)],rules:[...e.rules,...te(c)],ignorelist:[...e.ignorelist,...te(h)],hash:d,stringify:u,finalize:[...e.finalize,...te(f)]}}return e}function Hd(n,t,e,s,r,i){for(let o of t){let l=e.get(o);l||e.set(o,l=s(o));let a=l(n,r,i);if(a)return a}}function Wx(n){var t;return Wl(n[0],typeof(t=n[1])=="function"?t:()=>t)}function zx(n){var t,e;return Array.isArray(n)?Wl(n[0],Yl(n[1],n[2])):Wl(n,Yl(t,e))}function Wl(n,t){return nm(n,(e,s,r,i)=>{let o=s.exec(e);if(o)return o.$$=e.slice(o[0].length),o.dark=i,t(o,r)})}function nm(n,t){let e=te(n).map(Hx);return(s,r,i)=>{for(let o of e){let l=t(s,o,r,i);if(l)return l}}}function Hx(n){return typeof n=="string"?RegExp("^"+n+(n.includes("$")||n.slice(-1)=="-"?"":"$")):n}function qx(n,t){let e=sm(n),s=function({theme:a,darkMode:c,darkColor:h=fh,variants:d,rules:u,hash:f,stringify:m,ignorelist:p,finalize:g}){let x=new Map,b=new Map,y=new Map,w=new Map,_=nm(p,(T,A)=>A.test(T));d.push(["dark",Array.isArray(c)||c=="class"?`${te(c)[1]||".dark"} &`:typeof c=="string"&&c!="media"?c:"@media (prefers-color-scheme:dark)"]);let E=typeof f=="function"?T=>f(T,Wa):f?Wa:Gd;E!==Gd&&g.push(T=>{var A;return{...T,n:T.n&&E(T.n),d:(A=T.d)==null?void 0:A.replace(/--(tw(?:-[\w-]+)?)\b/g,(C,I)=>"--"+E(I).replace("#",""))}});let S={theme:function({extend:T={},...A}){let C={},I={get colors(){return P("colors")},theme:P,negative(){return{}},breakpoints(N){let F={};for(let D in N)typeof N[D]=="string"&&(F["screen-"+D]=N[D]);return F}};return P;function P(N,F,D,L){if(N){if({1:N,2:L}=/^(\S+?)(?:\s*\/\s*([^/]+))?$/.exec(N)||[,N],/[.[]/.test(N)){let B=[];N.replace(/\[([^\]]+)\]|([^.[]+)/g,(G,H,K=H)=>B.push(K)),N=B.shift(),D=F,F=B.join("-")}let j=C[N]||Object.assign(Object.assign(C[N]={},R(A,N)),R(T,N));if(F==null)return j;F||(F="DEFAULT");let U=j[F]??F.split("-").reduce((B,G)=>B==null?void 0:B[G],j)??D;return L?Jn(U,{opacityValue:ph(L,P)}):U}let O={};for(let j of[...Object.keys(A),...Object.keys(T)])O[j]=P(j);return O}function R(N,F){let D=N[F];return typeof D=="function"&&(D=D(I)),D&&/color|fill|stroke/i.test(F)?function L(O,j=[]){let U={};for(let B in O){let G=O[B],H=[...j,B];U[H.join("-")]=G,B=="DEFAULT"&&(H=j,U[j.join("-")]=G),typeof G=="object"&&Object.assign(U,L(G,H))}return U}(D):D}}(a),e:Hf,h:E,s(T,A){return m(T,A,S)},d(T,A,C){return h(T,A,S,C)},v(T){return x.has(T)||x.set(T,Hd(T,d,b,Wx,S)||"&:"+T),x.get(T)},r(T,A){let C=JSON.stringify([T,A]);return y.has(C)||y.set(C,!_(T,S)&&Hd(T,u,w,zx,S,A)),y.get(C)},f(T){return g.reduce((A,C)=>C(A,S),T)}};return S}(e),r=new Map,i=[],o=new Set;t.resume(a=>r.set(a,a),(a,c)=>{t.insert(a,i.length,c),i.push(c),o.add(a)});function l(a){let c=s.f(a),h=Gl(c);if(h&&!o.has(h)){o.add(h);let d=Zf(i,a);t.insert(h,d,a),i.splice(d,0,a)}return c.n}return Object.defineProperties(function(c){if(!r.size)for(let d of te(e.preflight))typeof d=="function"&&(d=d(s)),d&&(typeof d=="string"?gh("",Ce.b,Ha(d),s,Ce.b,[],!1,!0):Jf(d,{},s,Ce.b)).forEach(l);c=""+c;let h=r.get(c);if(!h){let d=new Set;for(let u of za(Ha(c),s))d.add(u.c).add(l(u));h=[...d].filter(Boolean).join(" "),r.set(c,h).set(h,h)}return h},Object.getOwnPropertyDescriptors({get target(){return t.target},theme:s.theme,config:e,snapshot(){let a=t.snapshot(),c=new Set(o),h=new Map(r),d=[...i];return()=>{a(),o=c,r=h,i=d}},clear(){t.clear(),o=new Set,r=new Map,i=[]},destroy(){this.clear(),t.destroy()}}))}function Kx(n,t){return n!=t&&""+n.split(" ").sort()!=""+t.split(" ").sort()}function Zx(n){let t=new MutationObserver(e);return{observe(r){t.observe(r,{attributeFilter:["class"],subtree:!0,childList:!0}),s(r),e([{target:r,type:""}])},disconnect(){t.disconnect()}};function e(r){for(let{type:i,target:o}of r)if(i[0]=="a")s(o);else for(let l of o.querySelectorAll("[class]"))s(l);t.takeRecords()}function s(r){var l;let i,o=(l=r.getAttribute)==null?void 0:l.call(r,"class");o&&Kx(o,i=n(o))&&r.setAttribute("class",i)}}function Qx(n=eb,t=typeof document<"u"&&document.documentElement){if(t){let e=Zx(n);e.observe(t);let{destroy:s}=n;n.destroy=()=>{e.disconnect(),s.call(n)}}return n}function Jx(n){let t=document.querySelector(n||'style[data-twind=""]');return(!t||t.tagName!="STYLE")&&(t=document.createElement("style"),document.head.prepend(t)),t.dataset.twind="claimed",t}function tb(n){let t=n!=null&&n.cssRules?n:(n&&typeof n!="string"?n:Jx(n)).sheet;return{target:t,snapshot(){let e=Array.from(t.cssRules,s=>s.cssText);return()=>{this.clear(),e.forEach(this.insert)}},clear(){for(let e=t.cssRules.length;e--;)t.deleteRule(e)},destroy(){var e;(e=t.ownerNode)==null||e.remove()},insert(e,s){try{t.insertRule(e,s)}catch{t.insertRule(":root{}",s)}},resume:fh}}let eb=new Proxy(fh,{apply(n,t,e){return Jo(e[0])},get(n,t){let e=Jo[t];return typeof e=="function"?function(){return e.apply(Jo,arguments)}:e}});(function(){if(typeof document>"u"||"adoptedStyleSheets"in document)return;var n="ShadyCSS"in window&&!ShadyCSS.nativeShadow,t=document.implementation.createHTMLDocument(""),e=new WeakMap,s=typeof DOMException=="object"?Error:DOMException,r=Object.defineProperty,i=Array.prototype.forEach,o=/@import.+?;?$/gm;function l(X){var W=X.replace(o,"");return W!==X&&console.warn("@import rules are not allowed here. See https://github.com/WICG/construct-stylesheets/issues/119#issuecomment-588352418"),W.trim()}function a(X){return"isConnected"in X?X.isConnected:document.contains(X)}function c(X){return X.filter(function(W,Z){return X.indexOf(W)===Z})}function h(X,W){return X.filter(function(Z){return W.indexOf(Z)===-1})}function d(X){X.parentNode.removeChild(X)}function u(X){return X.shadowRoot||e.get(X)}var f=["addRule","deleteRule","insertRule","removeRule"],m=CSSStyleSheet,p=m.prototype;p.replace=function(){return Promise.reject(new s("Can't call replace on non-constructed CSSStyleSheets."))},p.replaceSync=function(){throw new s("Failed to execute 'replaceSync' on 'CSSStyleSheet': Can't call replaceSync on non-constructed CSSStyleSheets.")};function g(X){return typeof X=="object"?P.isPrototypeOf(X)||p.isPrototypeOf(X):!1}function x(X){return typeof X=="object"?p.isPrototypeOf(X):!1}var b=new WeakMap,y=new WeakMap,w=new WeakMap,_=new WeakMap;function E(X,W){var Z=document.createElement("style");return w.get(X).set(W,Z),y.get(X).push(W),Z}function S(X,W){return w.get(X).get(W)}function T(X,W){w.get(X).delete(W),y.set(X,y.get(X).filter(function(Z){return Z!==W}))}function A(X,W){requestAnimationFrame(function(){W.textContent=b.get(X).textContent,_.get(X).forEach(function(Z){return W.sheet[Z.method].apply(W.sheet,Z.args)})})}function C(X){if(!b.has(X))throw new TypeError("Illegal invocation")}function I(){var X=this,W=document.createElement("style");t.body.appendChild(W),b.set(X,W),y.set(X,[]),w.set(X,new WeakMap),_.set(X,[])}var P=I.prototype;P.replace=function(W){try{return this.replaceSync(W),Promise.resolve(this)}catch(Z){return Promise.reject(Z)}},P.replaceSync=function(W){if(C(this),typeof W=="string"){var Z=this;b.get(Z).textContent=l(W),_.set(Z,[]),y.get(Z).forEach(function(at){at.isConnected()&&A(Z,S(Z,at))})}},r(P,"cssRules",{configurable:!0,enumerable:!0,get:function(){return C(this),b.get(this).sheet.cssRules}}),r(P,"media",{configurable:!0,enumerable:!0,get:function(){return C(this),b.get(this).sheet.media}}),f.forEach(function(X){P[X]=function(){var W=this;C(W);var Z=arguments;_.get(W).push({method:X,args:Z}),y.get(W).forEach(function(gt){if(gt.isConnected()){var yt=S(W,gt).sheet;yt[X].apply(yt,Z)}});var at=b.get(W).sheet;return at[X].apply(at,Z)}}),r(I,Symbol.hasInstance,{configurable:!0,value:g});var R={childList:!0,subtree:!0},N=new WeakMap;function F(X){var W=N.get(X);return W||(W=new K(X),N.set(X,W)),W}function D(X){r(X.prototype,"adoptedStyleSheets",{configurable:!0,enumerable:!0,get:function(){return F(this).sheets},set:function(W){F(this).update(W)}})}function L(X,W){for(var Z=document.createNodeIterator(X,NodeFilter.SHOW_ELEMENT,function(gt){return u(gt)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},null,!1),at=void 0;at=Z.nextNode();)W(u(at))}var O=new WeakMap,j=new WeakMap,U=new WeakMap;function B(X,W){return W instanceof HTMLStyleElement&&j.get(X).some(function(Z){return S(Z,X)})}function G(X){var W=O.get(X);return W instanceof Document?W.body:W}function H(X){var W=document.createDocumentFragment(),Z=j.get(X),at=U.get(X),gt=G(X);at.disconnect(),Z.forEach(function(yt){W.appendChild(S(yt,X)||E(yt,X))}),gt.insertBefore(W,null),at.observe(gt,R),Z.forEach(function(yt){A(yt,S(yt,X))})}function K(X){var W=this;W.sheets=[],O.set(W,X),j.set(W,[]),U.set(W,new MutationObserver(function(Z,at){if(!document){at.disconnect();return}Z.forEach(function(gt){n||i.call(gt.addedNodes,function(yt){yt instanceof Element&&L(yt,function(nt){F(nt).connect()})}),i.call(gt.removedNodes,function(yt){yt instanceof Element&&(B(W,yt)&&H(W),n||L(yt,function(nt){F(nt).disconnect()}))})})}))}if(K.prototype={isConnected:function(){var X=O.get(this);return X instanceof Document?X.readyState!=="loading":a(X.host)},connect:function(){var X=G(this);U.get(this).observe(X,R),j.get(this).length>0&&H(this),L(X,function(W){F(W).connect()})},disconnect:function(){U.get(this).disconnect()},update:function(X){var W=this,Z=O.get(W)===document?"Document":"ShadowRoot";if(!Array.isArray(X))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+Z+": Iterator getter is not callable.");if(!X.every(g))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+Z+": Failed to convert value to 'CSSStyleSheet'");if(X.some(x))throw new TypeError("Failed to set the 'adoptedStyleSheets' property on "+Z+": Can't adopt non-constructed stylesheets");W.sheets=X;var at=j.get(W),gt=c(X),yt=h(at,gt);yt.forEach(function(nt){d(S(nt,W)),T(nt,W)}),j.set(W,gt),W.isConnected()&&gt.length>0&&H(W)}},window.CSSStyleSheet=I,D(Document),"ShadowRoot"in window){D(ShadowRoot);var z=Element.prototype,J=z.attachShadow;z.attachShadow=function(W){var Z=J.call(this,W);return W.mode==="closed"&&e.set(this,Z),Z}}var Q=F(document);Q.isConnected()?Q.connect():document.addEventListener("DOMContentLoaded",Q.connect.bind(Q))})();let zl={screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},columns:{auto:"auto","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},spacing:{px:"1px",0:"0px",...ls(4,"rem",4,.5,.5),...ls(12,"rem",4,5),14:"3.5rem",...ls(64,"rem",4,16,4),72:"18rem",80:"20rem",96:"24rem"},durations:{75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0,0,0.2,1) infinite",pulse:"pulse 2s cubic-bezier(0.4,0,0.6,1) infinite",bounce:"bounce 1s infinite"},aspectRatio:{auto:"auto",square:"1/1",video:"16/9"},backdropBlur:Xt("blur"),backdropBrightness:Xt("brightness"),backdropContrast:Xt("contrast"),backdropGrayscale:Xt("grayscale"),backdropHueRotate:Xt("hueRotate"),backdropInvert:Xt("invert"),backdropOpacity:Xt("opacity"),backdropSaturate:Xt("saturate"),backdropSepia:Xt("sepia"),backgroundColor:Xt("colors"),backgroundImage:{none:"none"},backgroundOpacity:Xt("opacity"),backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{none:"none",0:"0",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},brightness:{...ls(200,"",100,0,50),...ls(110,"",100,90,5),75:"0.75",125:"1.25"},borderColor:({theme:n})=>({DEFAULT:n("colors.gray.200","currentColor"),...n("colors")}),borderOpacity:Xt("opacity"),borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem","1/2":"50%",full:"9999px"},borderSpacing:Xt("spacing"),borderWidth:{DEFAULT:"1px",...ys(8,"px")},boxShadow:{sm:"0 1px 2px 0 rgba(0,0,0,0.05)",DEFAULT:"0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px -1px rgba(0,0,0,0.1)",md:"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1)",lg:"0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1)",xl:"0 20px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1)","2xl":"0 25px 50px -12px rgba(0,0,0,0.25)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.05)",none:"0 0 #0000"},boxShadowColor:Xt("colors"),caretColor:Xt("colors"),accentColor:({theme:n})=>({auto:"auto",...n("colors")}),contrast:{...ls(200,"",100,0,50),75:"0.75",125:"1.25"},content:{none:"none"},divideColor:Xt("borderColor"),divideOpacity:Xt("borderOpacity"),divideWidth:Xt("borderWidth"),dropShadow:{sm:"0 1px 1px rgba(0,0,0,0.05)",DEFAULT:["0 1px 2px rgba(0,0,0,0.1)","0 1px 1px rgba(0,0,0,0.06)"],md:["0 4px 3px rgba(0,0,0,0.07)","0 2px 2px rgba(0,0,0,0.06)"],lg:["0 10px 8px rgba(0,0,0,0.04)","0 4px 3px rgba(0,0,0,0.1)"],xl:["0 20px 13px rgba(0,0,0,0.03)","0 8px 5px rgba(0,0,0,0.08)"],"2xl":"0 25px 25px rgba(0,0,0,0.15)",none:"0 0 #0000"},fill:({theme:n})=>({...n("colors"),none:"none"}),grayscale:{DEFAULT:"100%",0:"0"},hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},invert:{DEFAULT:"100%",0:"0"},flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:({theme:n})=>({...n("spacing"),...Ai(2,6),...Ai(12,12),auto:"auto",full:"100%"}),flexGrow:{DEFAULT:1,0:0},flexShrink:{DEFAULT:1,0:0},fontFamily:{sans:'ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"'.split(","),serif:'ui-serif,Georgia,Cambria,"Times New Roman",Times,serif'.split(","),mono:'ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'.split(",")},fontSize:{xs:["0.75rem","1rem"],sm:["0.875rem","1.25rem"],base:["1rem","1.5rem"],lg:["1.125rem","1.75rem"],xl:["1.25rem","1.75rem"],"2xl":["1.5rem","2rem"],"3xl":["1.875rem","2.25rem"],"4xl":["2.25rem","2.5rem"],"5xl":["3rem","1"],"6xl":["3.75rem","1"],"7xl":["4.5rem","1"],"8xl":["6rem","1"],"9xl":["8rem","1"]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:Xt("spacing"),gradientColorStops:Xt("colors"),gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0,1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0,1fr)"},gridColumn:{auto:"auto","span-full":"1 / -1"},gridRow:{auto:"auto","span-full":"1 / -1"},gridTemplateColumns:{none:"none"},gridTemplateRows:{none:"none"},height:({theme:n})=>({...n("spacing"),...Ai(2,6),min:"min-content",max:"max-content",fit:"fit-content",auto:"auto",full:"100%",screen:"100vh"}),inset:({theme:n})=>({...n("spacing"),...Ai(2,4),auto:"auto",full:"100%"}),keyframes:{spin:{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},ping:{"0%":{transform:"scale(1)",opacity:"1"},"75%,100%":{transform:"scale(2)",opacity:"0"}},pulse:{"0%,100%":{opacity:"1"},"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{...ls(10,"rem",4,3),none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2"},margin:({theme:n})=>({auto:"auto",...n("spacing")}),maxHeight:({theme:n})=>({full:"100%",min:"min-content",max:"max-content",fit:"fit-content",screen:"100vh",...n("spacing")}),maxWidth:({theme:n,breakpoints:t})=>({...t(n("screens")),none:"none",0:"0rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch"}),minHeight:{0:"0px",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",screen:"100vh"},minWidth:{0:"0px",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"},opacity:{...ls(100,"",100,0,10),5:"0.05",25:"0.25",75:"0.75",95:"0.95"},order:{first:"-9999",last:"9999",none:"0"},padding:Xt("spacing"),placeholderColor:Xt("colors"),placeholderOpacity:Xt("opacity"),outlineColor:Xt("colors"),outlineOffset:ys(8,"px"),outlineWidth:ys(8,"px"),ringColor:({theme:n})=>({...n("colors"),DEFAULT:"#3b82f6"}),ringOffsetColor:Xt("colors"),ringOffsetWidth:ys(8,"px"),ringOpacity:({theme:n})=>({...n("opacity"),DEFAULT:"0.5"}),ringWidth:{DEFAULT:"3px",...ys(8,"px")},rotate:{...ys(2,"deg"),...ys(12,"deg",3),...ys(180,"deg",45)},saturate:ls(200,"",100,0,50),scale:{...ls(150,"",100,0,50),...ls(110,"",100,90,5),75:"0.75",125:"1.25"},scrollMargin:Xt("spacing"),scrollPadding:Xt("spacing"),sepia:{0:"0",DEFAULT:"100%"},skew:{...ys(2,"deg"),...ys(12,"deg",3)},space:Xt("spacing"),stroke:({theme:n})=>({...n("colors"),none:"none"}),strokeWidth:ls(2),textColor:Xt("colors"),textDecorationColor:Xt("colors"),textDecorationThickness:{"from-font":"from-font",auto:"auto",...ys(8,"px")},textUnderlineOffset:{auto:"auto",...ys(8,"px")},textIndent:Xt("spacing"),textOpacity:Xt("opacity"),transitionDuration:({theme:n})=>({...n("durations"),DEFAULT:"150ms"}),transitionDelay:Xt("durations"),transitionProperty:{none:"none",all:"all",DEFAULT:"color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter",colors:"color,background-color,border-color,text-decoration-color,fill,stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4,0,0.2,1)",linear:"linear",in:"cubic-bezier(0.4,0,1,1)",out:"cubic-bezier(0,0,0.2,1)","in-out":"cubic-bezier(0.4,0,0.2,1)"},translate:({theme:n})=>({...n("spacing"),...Ai(2,4),full:"100%"}),width:({theme:n})=>({min:"min-content",max:"max-content",fit:"fit-content",screen:"100vw",...n("flexBasis")}),willChange:{scroll:"scroll-position"},zIndex:{...ls(50,"",1,0,10),auto:"auto"}};function Ai(n,t){let e={};do for(var s=1;s<n;s++)e[`${s}/${n}`]=Number((s/n*100).toFixed(6))+"%";while(++n<=t);return e}function ys(n,t,e=0){let s={};for(;e<=n;e=2*e||1)s[e]=e+t;return s}function ls(n,t="",e=1,s=0,r=1,i={}){for(;s<=n;s+=r)i[s]=s/e+t;return i}function Xt(n){return({theme:t})=>t(n)}let sb={"*,::before,::after":{boxSizing:"border-box",borderWidth:"0",borderStyle:"solid",borderColor:"theme(borderColor.DEFAULT, currentColor)"},"::before,::after":{"--tw-content":"''"},html:{lineHeight:1.5,WebkitTextSizeAdjust:"100%",MozTabSize:"4",tabSize:4,fontFamily:`theme(fontFamily.sans, ${zl.fontFamily.sans})`,fontFeatureSettings:"theme(fontFamily.sans[1].fontFeatureSettings, normal)"},body:{margin:"0",lineHeight:"inherit"},hr:{height:"0",color:"inherit",borderTopWidth:"1px"},"abbr:where([title])":{textDecoration:"underline dotted"},"h1,h2,h3,h4,h5,h6":{fontSize:"inherit",fontWeight:"inherit"},a:{color:"inherit",textDecoration:"inherit"},"b,strong":{fontWeight:"bolder"},"code,kbd,samp,pre":{fontFamily:`theme(fontFamily.mono, ${zl.fontFamily.mono})`,fontFeatureSettings:"theme(fontFamily.mono[1].fontFeatureSettings, normal)",fontSize:"1em"},small:{fontSize:"80%"},"sub,sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},table:{textIndent:"0",borderColor:"inherit",borderCollapse:"collapse"},"button,input,optgroup,select,textarea":{fontFamily:"inherit",fontSize:"100%",lineHeight:"inherit",color:"inherit",margin:"0",padding:"0"},"button,select":{textTransform:"none"},"button,[type='button'],[type='reset'],[type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},":-moz-focusring":{outline:"auto"},":-moz-ui-invalid":{boxShadow:"none"},progress:{verticalAlign:"baseline"},"::-webkit-inner-spin-button,::-webkit-outer-spin-button":{height:"auto"},"[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},summary:{display:"list-item"},"blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre":{margin:"0"},fieldset:{margin:"0",padding:"0"},legend:{padding:"0"},"ol,ul,menu":{listStyle:"none",margin:"0",padding:"0"},textarea:{resize:"vertical"},"input::placeholder,textarea::placeholder":{opacity:1,color:"theme(colors.gray.400, #9ca3af)"},'button,[role="button"]':{cursor:"pointer"},":disabled":{cursor:"default"},"img,svg,video,canvas,audio,iframe,embed,object":{display:"block",verticalAlign:"middle"},"img,video":{maxWidth:"100%",height:"auto"},"[hidden]":{display:"none"}},nb=[st("\\[([-\\w]+):(.+)]",({1:n,2:t},e)=>({"@layer overrides":{"&":{[n]:tr(`[${t}]`,"",e)}}})),st("(group|peer)([~/][^-[]+)?",({input:n},{h:t})=>[{c:t(n)}]),rt("aspect-","aspectRatio"),st("container",(n,{theme:t})=>{let{screens:e=t("screens"),center:s,padding:r}=t("container"),i={width:"100%",marginRight:s&&"auto",marginLeft:s&&"auto",...o("xs")};for(let l in e){let a=e[l];typeof a=="string"&&(i[uh(a)]={"&":{maxWidth:a,...o(l)}})}return i;function o(l){let a=r&&(typeof r=="string"?r:r[l]||r.DEFAULT);if(a)return{paddingRight:a,paddingLeft:a}}}),rt("content-","content",({_:n})=>({"--tw-content":n,content:"var(--tw-content)"})),st("(?:box-)?decoration-(slice|clone)","boxDecorationBreak"),st("box-(border|content)","boxSizing",({1:n})=>n+"-box"),st("hidden",{display:"none"}),st("table-(auto|fixed)","tableLayout"),st(["(block|flex|table|grid|inline|contents|flow-root|list-item)","(inline-(block|flex|table|grid))","(table-(caption|cell|column|row|(column|row|footer|header)-group))"],"display"),"(float)-(left|right|none)","(clear)-(left|right|none|both)","(overflow(?:-[xy])?)-(auto|hidden|clip|visible|scroll)","(isolation)-(auto)",st("isolate","isolation"),st("object-(contain|cover|fill|none|scale-down)","objectFit"),rt("object-","objectPosition"),st("object-(top|bottom|center|(left|right)(-(top|bottom))?)","objectPosition",ha),st("overscroll(-[xy])?-(auto|contain|none)",({1:n="",2:t})=>({["overscroll-behavior"+n]:t})),st("(static|fixed|absolute|relative|sticky)","position"),rt("-?inset(-[xy])?(?:$|-)","inset",({1:n,_:t})=>({top:n!="-x"&&t,right:n!="-y"&&t,bottom:n!="-x"&&t,left:n!="-y"&&t})),rt("-?(top|bottom|left|right)(?:$|-)","inset"),st("(visible|collapse)","visibility"),st("invisible",{visibility:"hidden"}),rt("-?z-","zIndex"),st("flex-((row|col)(-reverse)?)","flexDirection",qd),st("flex-(wrap|wrap-reverse|nowrap)","flexWrap"),rt("(flex-(?:grow|shrink))(?:$|-)"),rt("(flex)-"),rt("grow(?:$|-)","flexGrow"),rt("shrink(?:$|-)","flexShrink"),rt("basis-","flexBasis"),rt("-?(order)-"),"-?(order)-(\\d+)",rt("grid-cols-","gridTemplateColumns"),st("grid-cols-(\\d+)","gridTemplateColumns",Jd),rt("col-","gridColumn"),st("col-(span)-(\\d+)","gridColumn",Qd),rt("col-start-","gridColumnStart"),st("col-start-(auto|\\d+)","gridColumnStart"),rt("col-end-","gridColumnEnd"),st("col-end-(auto|\\d+)","gridColumnEnd"),rt("grid-rows-","gridTemplateRows"),st("grid-rows-(\\d+)","gridTemplateRows",Jd),rt("row-","gridRow"),st("row-(span)-(\\d+)","gridRow",Qd),rt("row-start-","gridRowStart"),st("row-start-(auto|\\d+)","gridRowStart"),rt("row-end-","gridRowEnd"),st("row-end-(auto|\\d+)","gridRowEnd"),st("grid-flow-((row|col)(-dense)?)","gridAutoFlow",n=>ha(qd(n))),st("grid-flow-(dense)","gridAutoFlow"),rt("auto-cols-","gridAutoColumns"),rt("auto-rows-","gridAutoRows"),rt("gap-x(?:$|-)","gap","columnGap"),rt("gap-y(?:$|-)","gap","rowGap"),rt("gap(?:$|-)","gap"),"(justify-(?:items|self))-",st("justify-","justifyContent",Kd),st("(content|items|self)-",n=>({["align-"+n[1]]:Kd(n)})),st("(place-(content|items|self))-",({1:n,$$:t})=>({[n]:("wun".includes(t[3])?"space-":"")+t})),rt("p([xytrbl])?(?:$|-)","padding",Gr("padding")),rt("-?m([xytrbl])?(?:$|-)","margin",Gr("margin")),rt("-?space-(x|y)(?:$|-)","space",({1:n,_:t})=>({"&>:not([hidden])~:not([hidden])":{[`--tw-space-${n}-reverse`]:"0",["margin-"+{y:"top",x:"left"}[n]]:`calc(${t} * calc(1 - var(--tw-space-${n}-reverse)))`,["margin-"+{y:"bottom",x:"right"}[n]]:`calc(${t} * var(--tw-space-${n}-reverse))`}})),st("space-(x|y)-reverse",({1:n})=>({"&>:not([hidden])~:not([hidden])":{[`--tw-space-${n}-reverse`]:"1"}})),rt("w-","width"),rt("min-w-","minWidth"),rt("max-w-","maxWidth"),rt("h-","height"),rt("min-h-","minHeight"),rt("max-h-","maxHeight"),rt("font-","fontWeight"),rt("font-","fontFamily",({_:n})=>typeof(n=te(n))[1]=="string"?{fontFamily:Ts(n)}:{fontFamily:Ts(n[0]),...n[1]}),st("antialiased",{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"}),st("subpixel-antialiased",{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}),st("italic","fontStyle"),st("not-italic",{fontStyle:"normal"}),st("(ordinal|slashed-zero|(normal|lining|oldstyle|proportional|tabular)-nums|(diagonal|stacked)-fractions)",({1:n,2:t="",3:e})=>t=="normal"?{fontVariantNumeric:"normal"}:{["--tw-"+(e?"numeric-fraction":"pt".includes(t[0])?"numeric-spacing":t?"numeric-figure":n)]:n,fontVariantNumeric:"var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)",...Hn({"--tw-ordinal":"var(--tw-empty,/*!*/ /*!*/)","--tw-slashed-zero":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-figure":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-spacing":"var(--tw-empty,/*!*/ /*!*/)","--tw-numeric-fraction":"var(--tw-empty,/*!*/ /*!*/)"})}),rt("tracking-","letterSpacing"),rt("leading-","lineHeight"),st("list-(inside|outside)","listStylePosition"),rt("list-","listStyleType"),st("list-","listStyleType"),rt("placeholder-opacity-","placeholderOpacity",({_:n})=>({"&::placeholder":{"--tw-placeholder-opacity":n}})),Re("placeholder-",{property:"color",selector:"&::placeholder"}),st("text-(left|center|right|justify|start|end)","textAlign"),st("text-(ellipsis|clip)","textOverflow"),rt("text-opacity-","textOpacity","--tw-text-opacity"),Re("text-",{property:"color"}),rt("text-","fontSize",({_:n})=>typeof n=="string"?{fontSize:n}:{fontSize:n[0],...typeof n[1]=="string"?{lineHeight:n[1]}:n[1]}),rt("indent-","textIndent"),st("(overline|underline|line-through)","textDecorationLine"),st("no-underline",{textDecorationLine:"none"}),rt("underline-offset-","textUnderlineOffset"),Re("decoration-",{section:"textDecorationColor",opacityVariable:!1,opacitySection:"opacity"}),rt("decoration-","textDecorationThickness"),st("decoration-","textDecorationStyle"),st("(uppercase|lowercase|capitalize)","textTransform"),st("normal-case",{textTransform:"none"}),st("truncate",{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),st("align-","verticalAlign"),st("whitespace-","whiteSpace"),st("break-normal",{wordBreak:"normal",overflowWrap:"normal"}),st("break-words",{overflowWrap:"break-word"}),st("break-all",{wordBreak:"break-all"}),st("break-keep",{wordBreak:"keep-all"}),Re("caret-",{opacityVariable:!1,opacitySection:"opacity"}),Re("accent-",{opacityVariable:!1,opacitySection:"opacity"}),st("bg-gradient-to-([trbl]|[tb][rl])","backgroundImage",({1:n})=>`linear-gradient(to ${Tr(n," ")},var(--tw-gradient-stops))`),Re("from-",{section:"gradientColorStops",opacityVariable:!1,opacitySection:"opacity"},({_:n})=>({"--tw-gradient-from":n.value,"--tw-gradient-to":n.color({opacityValue:"0"}),"--tw-gradient-stops":"var(--tw-gradient-from),var(--tw-gradient-to)"})),Re("via-",{section:"gradientColorStops",opacityVariable:!1,opacitySection:"opacity"},({_:n})=>({"--tw-gradient-to":n.color({opacityValue:"0"}),"--tw-gradient-stops":`var(--tw-gradient-from),${n.value},var(--tw-gradient-to)`})),Re("to-",{section:"gradientColorStops",property:"--tw-gradient-to",opacityVariable:!1,opacitySection:"opacity"}),st("bg-(fixed|local|scroll)","backgroundAttachment"),st("bg-origin-(border|padding|content)","backgroundOrigin",({1:n})=>n+"-box"),st(["bg-(no-repeat|repeat(-[xy])?)","bg-repeat-(round|space)"],"backgroundRepeat"),st("bg-blend-","backgroundBlendMode"),st("bg-clip-(border|padding|content|text)","backgroundClip",({1:n})=>n+(n=="text"?"":"-box")),rt("bg-opacity-","backgroundOpacity","--tw-bg-opacity"),Re("bg-",{section:"backgroundColor"}),rt("bg-","backgroundImage"),rt("bg-","backgroundPosition"),st("bg-(top|bottom|center|(left|right)(-(top|bottom))?)","backgroundPosition",ha),rt("bg-","backgroundSize"),rt("rounded(?:$|-)","borderRadius"),rt("rounded-([trbl]|[tb][rl])(?:$|-)","borderRadius",({1:n,_:t})=>{let e={t:["tl","tr"],r:["tr","br"],b:["bl","br"],l:["bl","tl"]}[n]||[n,n];return{[`border-${Tr(e[0])}-radius`]:t,[`border-${Tr(e[1])}-radius`]:t}}),st("border-(collapse|separate)","borderCollapse"),rt("border-opacity(?:$|-)","borderOpacity","--tw-border-opacity"),st("border-(solid|dashed|dotted|double|none)","borderStyle"),rt("border-spacing(-[xy])?(?:$|-)","borderSpacing",({1:n,_:t})=>({...Hn({"--tw-border-spacing-x":"0","--tw-border-spacing-y":"0"}),["--tw-border-spacing"+(n||"-x")]:t,["--tw-border-spacing"+(n||"-y")]:t,"border-spacing":"var(--tw-border-spacing-x) var(--tw-border-spacing-y)"})),Re("border-([xytrbl])-",{section:"borderColor"},Gr("border","Color")),Re("border-"),rt("border-([xytrbl])(?:$|-)","borderWidth",Gr("border","Width")),rt("border(?:$|-)","borderWidth"),rt("divide-opacity(?:$|-)","divideOpacity",({_:n})=>({"&>:not([hidden])~:not([hidden])":{"--tw-divide-opacity":n}})),st("divide-(solid|dashed|dotted|double|none)",({1:n})=>({"&>:not([hidden])~:not([hidden])":{borderStyle:n}})),st("divide-([xy]-reverse)",({1:n})=>({"&>:not([hidden])~:not([hidden])":{["--tw-divide-"+n]:"1"}})),rt("divide-([xy])(?:$|-)","divideWidth",({1:n,_:t})=>{let e={x:"lr",y:"tb"}[n];return{"&>:not([hidden])~:not([hidden])":{[`--tw-divide-${n}-reverse`]:"0",[`border-${Tr(e[0])}Width`]:`calc(${t} * calc(1 - var(--tw-divide-${n}-reverse)))`,[`border-${Tr(e[1])}Width`]:`calc(${t} * var(--tw-divide-${n}-reverse))`}}}),Re("divide-",{property:"borderColor",selector:"&>:not([hidden])~:not([hidden])"}),rt("ring-opacity(?:$|-)","ringOpacity","--tw-ring-opacity"),Re("ring-offset-",{property:"--tw-ring-offset-color",opacityVariable:!1}),rt("ring-offset(?:$|-)","ringOffsetWidth","--tw-ring-offset-width"),st("ring-inset",{"--tw-ring-inset":"inset"}),Re("ring-",{property:"--tw-ring-color"}),rt("ring(?:$|-)","ringWidth",({_:n},{theme:t})=>({...Hn({"--tw-ring-offset-shadow":"0 0 #0000","--tw-ring-shadow":"0 0 #0000","--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000","&":{"--tw-ring-inset":"var(--tw-empty,/*!*/ /*!*/)","--tw-ring-offset-width":t("ringOffsetWidth","","0px"),"--tw-ring-offset-color":Jn(t("ringOffsetColor","","#fff")),"--tw-ring-color":Jn(t("ringColor","","#93c5fd"),{opacityVariable:"--tw-ring-opacity"}),"--tw-ring-opacity":t("ringOpacity","","0.5")}}),"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":`var(--tw-ring-inset) 0 0 0 calc(${n} + var(--tw-ring-offset-width)) var(--tw-ring-color)`,boxShadow:"var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)"})),Re("shadow-",{section:"boxShadowColor",opacityVariable:!1,opacitySection:"opacity"},({_:n})=>({"--tw-shadow-color":n.value,"--tw-shadow":"var(--tw-shadow-colored)"})),rt("shadow(?:$|-)","boxShadow",({_:n})=>({...Hn({"--tw-ring-offset-shadow":"0 0 #0000","--tw-ring-shadow":"0 0 #0000","--tw-shadow":"0 0 #0000","--tw-shadow-colored":"0 0 #0000"}),"--tw-shadow":Ts(n),"--tw-shadow-colored":Ts(n).replace(/([^,]\s+)(?:#[a-f\d]+|(?:(?:hsl|rgb)a?|hwb|lab|lch|color|var)\(.+?\)|[a-z]+)(,|$)/g,"$1var(--tw-shadow-color)$2"),boxShadow:"var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)"})),rt("(opacity)-"),st("mix-blend-","mixBlendMode"),...Zd(),...Zd("backdrop-"),rt("transition(?:$|-)","transitionProperty",(n,{theme:t})=>({transitionProperty:Ts(n),transitionTimingFunction:n._=="none"?void 0:Ts(t("transitionTimingFunction","")),transitionDuration:n._=="none"?void 0:Ts(t("transitionDuration",""))})),rt("duration(?:$|-)","transitionDuration","transitionDuration",Ts),rt("ease(?:$|-)","transitionTimingFunction","transitionTimingFunction",Ts),rt("delay(?:$|-)","transitionDelay","transitionDelay",Ts),rt("animate(?:$|-)","animation",(n,{theme:t,h:e,e:s})=>{let r=Ts(n),i=r.split(" "),o=t("keyframes",i[0]);return o?{["@keyframes "+(i[0]=s(e(i[0])))]:o,animation:i.join(" ")}:{animation:r}}),"(transform)-(none)",st("transform",Hl),st("transform-(cpu|gpu)",({1:n})=>({"--tw-transform":rm(n=="gpu")})),rt("scale(-[xy])?-","scale",({1:n,_:t})=>({["--tw-scale"+(n||"-x")]:t,["--tw-scale"+(n||"-y")]:t,...Hl()})),rt("-?(rotate)-","rotate",rl),rt("-?(translate-[xy])-","translate",rl),rt("-?(skew-[xy])-","skew",rl),st("origin-(center|((top|bottom)(-(left|right))?)|left|right)","transformOrigin",ha),"(appearance)-",rt("(columns)-"),"(columns)-(\\d+)","(break-(?:before|after|inside))-",rt("(cursor)-"),"(cursor)-",st("snap-(none)","scroll-snap-type"),st("snap-(x|y|both)",({1:n})=>({...Hn({"--tw-scroll-snap-strictness":"proximity"}),"scroll-snap-type":n+" var(--tw-scroll-snap-strictness)"})),st("snap-(mandatory|proximity)","--tw-scroll-snap-strictness"),st("snap-(?:(start|end|center)|align-(none))","scroll-snap-align"),st("snap-(normal|always)","scroll-snap-stop"),st("scroll-(auto|smooth)","scroll-behavior"),rt("scroll-p([xytrbl])?(?:$|-)","padding",Gr("scroll-padding")),rt("-?scroll-m([xytrbl])?(?:$|-)","scroll-margin",Gr("scroll-margin")),st("touch-(auto|none|manipulation)","touch-action"),st("touch-(pinch-zoom|pan-(?:(x|left|right)|(y|up|down)))",({1:n,2:t,3:e})=>({...Hn({"--tw-pan-x":"var(--tw-empty,/*!*/ /*!*/)","--tw-pan-y":"var(--tw-empty,/*!*/ /*!*/)","--tw-pinch-zoom":"var(--tw-empty,/*!*/ /*!*/)","--tw-touch-action":"var(--tw-pan-x) var(--tw-pan-y) var(--tw-pinch-zoom)"}),[`--tw-${t?"pan-x":e?"pan-y":n}`]:n,"touch-action":"var(--tw-touch-action)"})),st("outline-none",{outline:"2px solid transparent","outline-offset":"2px"}),st("outline",{outlineStyle:"solid"}),st("outline-(dashed|dotted|double)","outlineStyle"),rt("-?(outline-offset)-"),Re("outline-",{opacityVariable:!1,opacitySection:"opacity"}),rt("outline-","outlineWidth"),"(pointer-events)-",rt("(will-change)-"),"(will-change)-",["resize(?:-(none|x|y))?","resize",({1:n})=>({x:"horizontal",y:"vertical"})[n]||n||"both"],st("select-(none|text|all|auto)","userSelect"),Re("fill-",{section:"fill",opacityVariable:!1,opacitySection:"opacity"}),Re("stroke-",{section:"stroke",opacityVariable:!1,opacitySection:"opacity"}),rt("stroke-","strokeWidth"),st("sr-only",{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(0,0,0,0)",borderWidth:"0"}),st("not-sr-only",{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal",clip:"auto"})];function ha(n){return(typeof n=="string"?n:n[1]).replace(/-/g," ").trim()}function qd(n){return(typeof n=="string"?n:n[1]).replace("col","column")}function Tr(n,t="-"){let e=[];for(let s of n)e.push({t:"top",r:"right",b:"bottom",l:"left"}[s]);return e.join(t)}function Ts(n){return n&&""+(n._||n)}function Kd({$$:n}){return({r:"flex-","":"flex-",w:"space-",u:"space-",n:"space-"}[n[3]||""]||"")+n}function Gr(n,t=""){return({1:e,_:s})=>{let r={x:"lr",y:"tb"}[e]||e+e;return r?{...Fa(n+"-"+Tr(r[0])+t,s),...Fa(n+"-"+Tr(r[1])+t,s)}:Fa(n+t,s)}}function Zd(n=""){let t=["blur","brightness","contrast","grayscale","hue-rotate","invert",n&&"opacity","saturate","sepia",!n&&"drop-shadow"].filter(Boolean),e={};for(let s of t)e[`--tw-${n}${s}`]="var(--tw-empty,/*!*/ /*!*/)";return e={...Hn(e),[`${n}filter`]:t.map(s=>`var(--tw-${n}${s})`).join(" ")},[`(${n}filter)-(none)`,st(`${n}filter`,e),...t.map(s=>rt(`${s[0]=="h"?"-?":""}(${n}${s})(?:$|-)`,s,({1:r,_:i})=>({[`--tw-${r}`]:te(i).map(o=>`${s}(${o})`).join(" "),...e})))]}function rl({1:n,_:t}){return{["--tw-"+n]:t,...Hl()}}function Hl(){return{...Hn({"--tw-translate-x":"0","--tw-translate-y":"0","--tw-rotate":"0","--tw-skew-x":"0","--tw-skew-y":"0","--tw-scale-x":"1","--tw-scale-y":"1","--tw-transform":rm()}),transform:"var(--tw-transform)"}}function rm(n){return[n?"translate3d(var(--tw-translate-x),var(--tw-translate-y),0)":"translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y))","rotate(var(--tw-rotate))","skewX(var(--tw-skew-x))","skewY(var(--tw-skew-y))","scaleX(var(--tw-scale-x))","scaleY(var(--tw-scale-y))"].join(" ")}function Qd({1:n,2:t}){return`${n} ${t} / ${n} ${t}`}function Jd({1:n}){return`repeat(${n},minmax(0,1fr))`}function Hn(n){return{"@layer defaults":{"*,::before,::after":n,"::backdrop":n}}}let rb=[["sticky","@supports ((position: -webkit-sticky) or (position:sticky))"],["motion-reduce","@media (prefers-reduced-motion:reduce)"],["motion-safe","@media (prefers-reduced-motion:no-preference)"],["print","@media print"],["(portrait|landscape)",({1:n})=>`@media (orientation:${n})`],["contrast-(more|less)",({1:n})=>`@media (prefers-contrast:${n})`],["(first-(letter|line)|placeholder|backdrop|before|after)",({1:n})=>`&::${n}`],["(marker|selection)",({1:n})=>`& *::${n},&::${n}`],["file","&::file-selector-button"],["(first|last|only)",({1:n})=>`&:${n}-child`],["even","&:nth-child(2n)"],["odd","&:nth-child(odd)"],["open","&[open]"],["(aria|data)-",({1:n,$$:t},e)=>t&&`&[${n}-${e.theme(n,t)||tr(t,"",e)||`${t}="true"`}]`],["((group|peer)(~[^-[]+)?)(-\\[(.+)]|[-[].+?)(\\/.+)?",({2:n,3:t="",4:e,5:s="",6:r=t},{e:i,h:o,v:l})=>{let a=zi(s)||(e[0]=="["?e:l(e.slice(1)));return`${(a.includes("&")?a:"&"+a).replace(/&/g,`:merge(.${i(o(n+r))})`)}${n[0]=="p"?"~":" "}&`}],["(ltr|rtl)",({1:n})=>`[dir="${n}"] &`],["supports-",({$$:n},t)=>{if(n&&(n=t.theme("supports",n)||tr(n,"",t)),n)return n.includes(":")||(n+=":var(--tw)"),/^\w*\s*\(/.test(n)||(n=`(${n})`),`@supports ${n.replace(/\b(and|or|not)\b/g," $1 ").trim()}`}],["max-",({$$:n},t)=>{if(n&&(n=t.theme("screens",n)||tr(n,"",t)),typeof n=="string")return`@media not all and (min-width:${n})`}],["min-",({$$:n},t)=>(n&&(n=tr(n,"",t)),n&&`@media (min-width:${n})`)],[/^\[(.+)]$/,({1:n})=>/[&@]/.test(n)&&zi(n).replace(/[}]+$/,"").split("{")]];function ib({colors:n,disablePreflight:t}={}){return{preflight:t?void 0:sb,theme:{...zl,colors:{inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",...n}},variants:rb,rules:nb,finalize(e){return e.n&&e.d&&e.r.some(s=>/^&::(before|after)$/.test(s))&&!/(^|;)content:/.test(e.d)?{...e,d:"content:var(--tw-content);"+e.d}:e}}}let ab={50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"},ob={50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},lb={50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b"},cb={50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},hb={50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917"},db={50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},ub={50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"},fb={50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},mb={50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12"},pb={50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314"},gb={50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d"},xb={50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"},bb={50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a"},yb={50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63"},wb={50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},vb={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},_b={50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81"},Eb={50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95"},Sb={50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87"},Tb={50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75"},Ab={50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843"},Cb={50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337"},kb={__proto__:null,slate:ab,gray:ob,zinc:lb,neutral:cb,stone:hb,red:db,orange:ub,amber:fb,yellow:mb,lime:pb,green:gb,emerald:xb,teal:bb,cyan:yb,sky:wb,blue:vb,indigo:_b,violet:Eb,purple:Sb,fuchsia:Tb,pink:Ab,rose:Cb};function Ib({disablePreflight:n}={}){return ib({colors:kb,disablePreflight:n})}var Rb=new Map([["align-self","-ms-grid-row-align"],["color-adjust","-webkit-print-color-adjust"],["column-gap","grid-column-gap"],["forced-color-adjust","-ms-high-contrast-adjust"],["gap","grid-gap"],["grid-template-columns","-ms-grid-columns"],["grid-template-rows","-ms-grid-rows"],["justify-self","-ms-grid-column-align"],["margin-inline-end","-webkit-margin-end"],["margin-inline-start","-webkit-margin-start"],["mask-border","-webkit-mask-box-image"],["mask-border-outset","-webkit-mask-box-image-outset"],["mask-border-slice","-webkit-mask-box-image-slice"],["mask-border-source","-webkit-mask-box-image-source"],["mask-border-repeat","-webkit-mask-box-image-repeat"],["mask-border-width","-webkit-mask-box-image-width"],["overflow-wrap","word-wrap"],["padding-inline-end","-webkit-padding-end"],["padding-inline-start","-webkit-padding-start"],["print-color-adjust","color-adjust"],["row-gap","grid-row-gap"],["scroll-margin-bottom","scroll-snap-margin-bottom"],["scroll-margin-left","scroll-snap-margin-left"],["scroll-margin-right","scroll-snap-margin-right"],["scroll-margin-top","scroll-snap-margin-top"],["scroll-margin","scroll-snap-margin"],["text-combine-upright","-ms-text-combine-horizontal"]]);function Mb(n){return Rb.get(n)}function Pb(n){var t=/^(?:(text-(?:decoration$|e|or|si)|back(?:ground-cl|d|f)|box-d|mask(?:$|-[ispro]|-cl)|pr|hyphena|flex-d)|(tab-|column(?!-s)|text-align-l)|(ap)|u|hy)/i.exec(n);return t?t[1]?1:t[2]?2:t[3]?3:5:0}function Nb(n,t){var e=/^(?:(pos)|(cli)|(background-i)|(flex(?:$|-b)|(?:max-|min-)?(?:block-s|inl|he|widt))|dis)/i.exec(n);return e?e[1]?/^sti/i.test(t)?1:0:e[2]?/^pat/i.test(t)?1:0:e[3]?/^image-/i.test(t)?1:0:e[4]?t[3]==="-"?2:0:/^(?:inline-)?grid$/i.test(t)?4:0:0}let Fb=[["-webkit-",1],["-moz-",2],["-ms-",4]];function Bb(){return({stringify:n})=>({stringify(t,e,s){let r="",i=Mb(t);i&&(r+=n(i,e,s)+";");let o=Pb(t),l=Nb(t,e);for(let a of Fb)o&a[1]&&(r+=n(a[0]+t,e,s)+";"),l&a[1]&&(r+=n(t,a[0]+e,s)+";");return r+n(t,e,s)}})}const Db=sm({presets:[Bb(),Ib()]});function Lb(n,t){const e=tb(new CSSStyleSheet),s=qx(Db,e);Qx(s,n),t.adoptedStyleSheets=[e.target]}const Ob=hx(),Vb=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";function Ub({children:n,shadowRootId:t}){const[e,s]=V.useState(Vb());V.useEffect(()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{const a=l.matches;s(a?"dark":"light")};return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]);const r=V.useCallback(()=>{s(i=>i==="dark"?"light":"dark")},[]);return v.jsxs(qg,{theme:Ob,cssVarsRoot:`#${t}`,children:[v.jsx(ix,{initialColorMode:"system"}),v.jsxs(Kg.Provider,{value:{colorMode:e,setColorMode:s,toggleColorMode:r},children:[v.jsx(Zg,{}),v.jsx(Qg,{}),n]})]})}function jb({children:n,rootId:t}){const[e,s]=V.useState(null);return V.useEffect(()=>{function r(o){s(t0({key:t,container:o}))}const i=document.getElementById(t);i&&i.shadowRoot&&r(i.shadowRoot)},[]),e?v.jsx(Jg,{value:e,children:n}):null}const xh=async()=>{var t;const n=await e0();(n==null?void 0:n.status)===200&&window.location.replace((t=n==null?void 0:n.data)==null?void 0:t.redirectUrl)};var Or=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(Or||{}),im=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.WEBGL=1]="WEBGL",n[n.CANVAS=2]="CANVAS",n))(im||{}),ql=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(ql||{}),ht=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(ht||{}),Xs=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Xs||{}),et=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(et||{}),ai=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(ai||{}),bt=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(bt||{}),dt=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(dt||{}),hs=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(hs||{}),rr=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(rr||{}),zs=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(zs||{}),qe=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(qe||{}),hn=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(hn||{}),bh=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(bh||{}),vs=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(vs||{}),Te=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(Te||{}),Se=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(Se||{}),dn=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(dn||{});const Xb={createCanvas:(n,t)=>{const e=document.createElement("canvas");return e.width=n,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,t)=>fetch(n,t),parseXML:n=>new DOMParser().parseFromString(n,"text/xml")},ct={ADAPTER:Xb,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var il=/iPhone/i,tu=/iPod/i,eu=/iPad/i,su=/\biOS-universal(?:.+)Mac\b/i,al=/\bAndroid(?:.+)Mobile\b/i,nu=/Android/i,Yr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,da=/Silk/i,gn=/Windows Phone/i,ru=/\bWindows(?:.+)ARM\b/i,iu=/BlackBerry/i,au=/BB10/i,ou=/Opera Mini/i,lu=/\b(CriOS|Chrome)(?:.+)Mobile/i,cu=/Mobile(?:.+)Firefox\b/i,hu=function(n){return typeof n<"u"&&n.platform==="MacIntel"&&typeof n.maxTouchPoints=="number"&&n.maxTouchPoints>1&&typeof MSStream>"u"};function Gb(n){return function(t){return t.test(n)}}function du(n){var t={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof n=="string"?t.userAgent=n:n&&n.userAgent&&(t={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var e=t.userAgent,s=e.split("[FBAN");typeof s[1]<"u"&&(e=s[0]),s=e.split("Twitter"),typeof s[1]<"u"&&(e=s[0]);var r=Gb(e),i={apple:{phone:r(il)&&!r(gn),ipod:r(tu),tablet:!r(il)&&(r(eu)||hu(t))&&!r(gn),universal:r(su),device:(r(il)||r(tu)||r(eu)||r(su)||hu(t))&&!r(gn)},amazon:{phone:r(Yr),tablet:!r(Yr)&&r(da),device:r(Yr)||r(da)},android:{phone:!r(gn)&&r(Yr)||!r(gn)&&r(al),tablet:!r(gn)&&!r(Yr)&&!r(al)&&(r(da)||r(nu)),device:!r(gn)&&(r(Yr)||r(da)||r(al)||r(nu))||r(/\bokhttp\b/i)},windows:{phone:r(gn),tablet:r(ru),device:r(gn)||r(ru)},other:{blackberry:r(iu),blackberry10:r(au),opera:r(ou),firefox:r(cu),chrome:r(lu),device:r(iu)||r(au)||r(ou)||r(cu)||r(lu)},any:!1,phone:!1,tablet:!1};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}const Yb=du.default??du,An=Yb(globalThis.navigator);ct.RETINA_PREFIX=/@([0-9\.]+)x/;ct.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var am={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(a,c,h){this.fn=a,this.context=c,this.once=h||!1}function i(a,c,h,d,u){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new r(h,d||a,u),m=e?e+c:c;return a._events[m]?a._events[m].fn?a._events[m]=[a._events[m],f]:a._events[m].push(f):(a._events[m]=f,a._eventsCount++),a}function o(a,c){--a._eventsCount===0?a._events=new s:delete a._events[c]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,d;if(this._eventsCount===0)return c;for(d in h=this._events)t.call(h,d)&&c.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c){var h=e?e+c:c,d=this._events[h];if(!d)return[];if(d.fn)return[d.fn];for(var u=0,f=d.length,m=new Array(f);u<f;u++)m[u]=d[u].fn;return m},l.prototype.listenerCount=function(c){var h=e?e+c:c,d=this._events[h];return d?d.fn?1:d.length:0},l.prototype.emit=function(c,h,d,u,f,m){var p=e?e+c:c;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,b,y;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,d),!0;case 4:return g.fn.call(g.context,h,d,u),!0;case 5:return g.fn.call(g.context,h,d,u,f),!0;case 6:return g.fn.call(g.context,h,d,u,f,m),!0}for(y=1,b=new Array(x-1);y<x;y++)b[y-1]=arguments[y];g.fn.apply(g.context,b)}else{var w=g.length,_;for(y=0;y<w;y++)switch(g[y].once&&this.removeListener(c,g[y].fn,void 0,!0),x){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,h);break;case 3:g[y].fn.call(g[y].context,h,d);break;case 4:g[y].fn.call(g[y].context,h,d,u);break;default:if(!b)for(_=1,b=new Array(x-1);_<x;_++)b[_-1]=arguments[_];g[y].fn.apply(g[y].context,b)}}return!0},l.prototype.on=function(c,h,d){return i(this,c,h,d,!1)},l.prototype.once=function(c,h,d){return i(this,c,h,d,!0)},l.prototype.removeListener=function(c,h,d,u){var f=e?e+c:c;if(!this._events[f])return this;if(!h)return o(this,f),this;var m=this._events[f];if(m.fn)m.fn===h&&(!u||m.once)&&(!d||m.context===d)&&o(this,f);else{for(var p=0,g=[],x=m.length;p<x;p++)(m[p].fn!==h||u&&!m[p].once||d&&m[p].context!==d)&&g.push(m[p]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=e?e+c:c,this._events[h]&&o(this,h)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=e,l.EventEmitter=l,n.exports=l})(am);var $b=am.exports;const sa=oh($b);var yh={exports:{}};yh.exports=Eo;yh.exports.default=Eo;function Eo(n,t,e){e=e||2;var s=t&&t.length,r=s?t[0]*e:n.length,i=om(n,0,r,e,!0),o=[];if(!i||i.next===i.prev)return o;var l,a,c,h,d,u,f;if(s&&(i=Kb(n,t,i,e)),n.length>80*e){l=c=n[0],a=h=n[1];for(var m=e;m<r;m+=e)d=n[m],u=n[m+1],d<l&&(l=d),u<a&&(a=u),d>c&&(c=d),u>h&&(h=u);f=Math.max(c-l,h-a),f=f!==0?32767/f:0}return Hi(i,o,e,l,a,f,0),o}function om(n,t,e,s,r){var i,o;if(r===Ql(n,t,e,s)>0)for(i=t;i<e;i+=s)o=uu(i,n[i],n[i+1],o);else for(i=e-s;i>=t;i-=s)o=uu(i,n[i],n[i+1],o);return o&&So(o,o.next)&&(Ki(o),o=o.next),o}function Pr(n,t){if(!n)return n;t||(t=n);var e=n,s;do if(s=!1,!e.steiner&&(So(e,e.next)||ue(e.prev,e,e.next)===0)){if(Ki(e),e=t=e.prev,e===e.next)break;s=!0}else e=e.next;while(s||e!==t);return t}function Hi(n,t,e,s,r,i,o){if(n){!o&&i&&ey(n,s,r,i);for(var l=n,a,c;n.prev!==n.next;){if(a=n.prev,c=n.next,i?zb(n,s,r,i):Wb(n)){t.push(a.i/e|0),t.push(n.i/e|0),t.push(c.i/e|0),Ki(n),n=c.next,l=c.next;continue}if(n=c,n===l){o?o===1?(n=Hb(Pr(n),t,e),Hi(n,t,e,s,r,i,2)):o===2&&qb(n,t,e,s,r,i):Hi(Pr(n),t,e,s,r,i,1);break}}}}function Wb(n){var t=n.prev,e=n,s=n.next;if(ue(t,e,s)>=0)return!1;for(var r=t.x,i=e.x,o=s.x,l=t.y,a=e.y,c=s.y,h=r<i?r<o?r:o:i<o?i:o,d=l<a?l<c?l:c:a<c?a:c,u=r>i?r>o?r:o:i>o?i:o,f=l>a?l>c?l:c:a>c?a:c,m=s.next;m!==t;){if(m.x>=h&&m.x<=u&&m.y>=d&&m.y<=f&&ni(r,l,i,a,o,c,m.x,m.y)&&ue(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function zb(n,t,e,s){var r=n.prev,i=n,o=n.next;if(ue(r,i,o)>=0)return!1;for(var l=r.x,a=i.x,c=o.x,h=r.y,d=i.y,u=o.y,f=l<a?l<c?l:c:a<c?a:c,m=h<d?h<u?h:u:d<u?d:u,p=l>a?l>c?l:c:a>c?a:c,g=h>d?h>u?h:u:d>u?d:u,x=Kl(f,m,t,e,s),b=Kl(p,g,t,e,s),y=n.prevZ,w=n.nextZ;y&&y.z>=x&&w&&w.z<=b;){if(y.x>=f&&y.x<=p&&y.y>=m&&y.y<=g&&y!==r&&y!==o&&ni(l,h,a,d,c,u,y.x,y.y)&&ue(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=f&&w.x<=p&&w.y>=m&&w.y<=g&&w!==r&&w!==o&&ni(l,h,a,d,c,u,w.x,w.y)&&ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=x;){if(y.x>=f&&y.x<=p&&y.y>=m&&y.y<=g&&y!==r&&y!==o&&ni(l,h,a,d,c,u,y.x,y.y)&&ue(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=b;){if(w.x>=f&&w.x<=p&&w.y>=m&&w.y<=g&&w!==r&&w!==o&&ni(l,h,a,d,c,u,w.x,w.y)&&ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Hb(n,t,e){var s=n;do{var r=s.prev,i=s.next.next;!So(r,i)&&lm(r,s,s.next,i)&&qi(r,i)&&qi(i,r)&&(t.push(r.i/e|0),t.push(s.i/e|0),t.push(i.i/e|0),Ki(s),Ki(s.next),s=n=i),s=s.next}while(s!==n);return Pr(s)}function qb(n,t,e,s,r,i){var o=n;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&ry(o,l)){var a=cm(o,l);o=Pr(o,o.next),a=Pr(a,a.next),Hi(o,t,e,s,r,i,0),Hi(a,t,e,s,r,i,0);return}l=l.next}o=o.next}while(o!==n)}function Kb(n,t,e,s){var r=[],i,o,l,a,c;for(i=0,o=t.length;i<o;i++)l=t[i]*s,a=i<o-1?t[i+1]*s:n.length,c=om(n,l,a,s,!1),c===c.next&&(c.steiner=!0),r.push(ny(c));for(r.sort(Zb),i=0;i<r.length;i++)e=Qb(r[i],e);return e}function Zb(n,t){return n.x-t.x}function Qb(n,t){var e=Jb(n,t);if(!e)return t;var s=cm(e,n);return Pr(s,s.next),Pr(e,e.next)}function Jb(n,t){var e=t,s=n.x,r=n.y,i=-1/0,o;do{if(r<=e.y&&r>=e.next.y&&e.next.y!==e.y){var l=e.x+(r-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(l<=s&&l>i&&(i=l,o=e.x<e.next.x?e:e.next,l===s))return o}e=e.next}while(e!==t);if(!o)return null;var a=o,c=o.x,h=o.y,d=1/0,u;e=o;do s>=e.x&&e.x>=c&&s!==e.x&&ni(r<h?s:i,r,c,h,r<h?i:s,r,e.x,e.y)&&(u=Math.abs(r-e.y)/(s-e.x),qi(e,n)&&(u<d||u===d&&(e.x>o.x||e.x===o.x&&ty(o,e)))&&(o=e,d=u)),e=e.next;while(e!==a);return o}function ty(n,t){return ue(n.prev,n,t.prev)<0&&ue(t.next,n,n.next)<0}function ey(n,t,e,s){var r=n;do r.z===0&&(r.z=Kl(r.x,r.y,t,e,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,sy(r)}function sy(n){var t,e,s,r,i,o,l,a,c=1;do{for(e=n,n=null,i=null,o=0;e;){for(o++,s=e,l=0,t=0;t<c&&(l++,s=s.nextZ,!!s);t++);for(a=c;l>0||a>0&&s;)l!==0&&(a===0||!s||e.z<=s.z)?(r=e,e=e.nextZ,l--):(r=s,s=s.nextZ,a--),i?i.nextZ=r:n=r,r.prevZ=i,i=r;e=s}i.nextZ=null,c*=2}while(o>1);return n}function Kl(n,t,e,s,r){return n=(n-e)*r|0,t=(t-s)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function ny(n){var t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function ni(n,t,e,s,r,i,o,l){return(r-o)*(t-l)>=(n-o)*(i-l)&&(n-o)*(s-l)>=(e-o)*(t-l)&&(e-o)*(i-l)>=(r-o)*(s-l)}function ry(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!iy(n,t)&&(qi(n,t)&&qi(t,n)&&ay(n,t)&&(ue(n.prev,n,t.prev)||ue(n,t.prev,t))||So(n,t)&&ue(n.prev,n,n.next)>0&&ue(t.prev,t,t.next)>0)}function ue(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function So(n,t){return n.x===t.x&&n.y===t.y}function lm(n,t,e,s){var r=fa(ue(n,t,e)),i=fa(ue(n,t,s)),o=fa(ue(e,s,n)),l=fa(ue(e,s,t));return!!(r!==i&&o!==l||r===0&&ua(n,e,t)||i===0&&ua(n,s,t)||o===0&&ua(e,n,s)||l===0&&ua(e,t,s))}function ua(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function fa(n){return n>0?1:n<0?-1:0}function iy(n,t){var e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&lm(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function qi(n,t){return ue(n.prev,n,n.next)<0?ue(n,t,n.next)>=0&&ue(n,n.prev,t)>=0:ue(n,t,n.prev)<0||ue(n,n.next,t)<0}function ay(n,t){var e=n,s=!1,r=(n.x+t.x)/2,i=(n.y+t.y)/2;do e.y>i!=e.next.y>i&&e.next.y!==e.y&&r<(e.next.x-e.x)*(i-e.y)/(e.next.y-e.y)+e.x&&(s=!s),e=e.next;while(e!==n);return s}function cm(n,t){var e=new Zl(n.i,n.x,n.y),s=new Zl(t.i,t.x,t.y),r=n.next,i=t.prev;return n.next=t,t.prev=n,e.next=r,r.prev=e,s.next=e,e.prev=s,i.next=s,s.prev=i,s}function uu(n,t,e,s){var r=new Zl(n,t,e);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function Ki(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Zl(n,t,e){this.i=n,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Eo.deviation=function(n,t,e,s){var r=t&&t.length,i=r?t[0]*e:n.length,o=Math.abs(Ql(n,0,i,e));if(r)for(var l=0,a=t.length;l<a;l++){var c=t[l]*e,h=l<a-1?t[l+1]*e:n.length;o-=Math.abs(Ql(n,c,h,e))}var d=0;for(l=0;l<s.length;l+=3){var u=s[l]*e,f=s[l+1]*e,m=s[l+2]*e;d+=Math.abs((n[u]-n[m])*(n[f+1]-n[u+1])-(n[u]-n[f])*(n[m+1]-n[u+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function Ql(n,t,e,s){for(var r=0,i=t,o=e-s;i<e;i+=s)r+=(n[o]-n[i])*(n[i+1]+n[o+1]),o=i;return r}Eo.flatten=function(n){for(var t=n[0][0].length,e={vertices:[],holes:[],dimensions:t},s=0,r=0;r<n.length;r++){for(var i=0;i<n[r].length;i++)for(var o=0;o<t;o++)e.vertices.push(n[r][i][o]);r>0&&(s+=n[r-1].length,e.holes.push(s))}return e};var oy=yh.exports;const ly=oh(oy),fu={};function Nt(n,t,e=3){if(fu[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`):(s=s.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${n}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${n}`),console.warn(s))),fu[t]=!0}function As(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Ci(n){return n.split("?")[0].split("#")[0]}function cy(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hy(n,t,e){return n.replace(new RegExp(cy(t),"g"),e)}function dy(n,t){let e="",s=0,r=-1,i=0,o=-1;for(let l=0;l<=n.length;++l){if(l<n.length)o=n.charCodeAt(l);else{if(o===47)break;o=47}if(o===47){if(!(r===l-1||i===1))if(r!==l-1&&i===2){if(e.length<2||s!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",s=0):(e=e.slice(0,a),s=e.length-1-e.lastIndexOf("/")),r=l,i=0;continue}}else if(e.length===2||e.length===1){e="",s=0,r=l,i=0;continue}}t&&(e.length>0?e+="/..":e="..",s=2)}else e.length>0?e+=`/${n.slice(r+1,l)}`:e=n.slice(r+1,l),s=l-r-1;r=l,i=0}else o===46&&i!==-1?++i:i=-1}return e}const ne={toPosix(n){return hy(n,"\\","/")},isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl(n){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n)},isBlobUrl(n){return n.startsWith("blob:")},hasProtocol(n){return/^[^/:]+:/.test(this.toPosix(n))},getProtocol(n){As(n),n=this.toPosix(n);const t=/^file:\/\/\//.exec(n);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(n);return e?e[0]:""},toAbsolute(n,t,e){if(As(n),this.isDataUrl(n)||this.isBlobUrl(n))return n;const s=Ci(this.toPosix(t??ct.ADAPTER.getBaseUrl())),r=Ci(this.toPosix(e??this.rootname(s)));return n=this.toPosix(n),n.startsWith("/")?ne.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(s,n)},normalize(n){if(As(n),n.length===0)return".";if(this.isDataUrl(n)||this.isBlobUrl(n))return n;n=this.toPosix(n);let t="";const e=n.startsWith("/");this.hasProtocol(n)&&(t=this.rootname(n),n=n.slice(t.length));const s=n.endsWith("/");return n=dy(n,!1),n.length>0&&s&&(n+="/"),e?`/${n}`:t+n},isAbsolute(n){return As(n),n=this.toPosix(n),this.hasProtocol(n)?!0:n.startsWith("/")},join(...n){if(n.length===0)return".";let t;for(let e=0;e<n.length;++e){const s=n[e];if(As(s),s.length>0)if(t===void 0)t=s;else{const r=n[e-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(n){if(As(n),n.length===0)return".";n=this.toPosix(n);let t=n.charCodeAt(0);const e=t===47;let s=-1,r=!0;const i=this.getProtocol(n),o=n;n=n.slice(i.length);for(let l=n.length-1;l>=1;--l)if(t=n.charCodeAt(l),t===47){if(!r){s=l;break}}else r=!1;return s===-1?e?"/":this.isUrl(o)?i+n:i:e&&s===1?"//":i+n.slice(0,s)},rootname(n){As(n),n=this.toPosix(n);let t="";if(n.startsWith("/")?t="/":t=this.getProtocol(n),this.isUrl(n)){const e=n.indexOf("/",t.length);e!==-1?t=n.slice(0,e):t=n,t.endsWith("/")||(t+="/")}return t},basename(n,t){As(n),t&&As(t),n=Ci(this.toPosix(n));let e=0,s=-1,r=!0,i;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";let o=t.length-1,l=-1;for(i=n.length-1;i>=0;--i){const a=n.charCodeAt(i);if(a===47){if(!r){e=i+1;break}}else l===-1&&(r=!1,l=i+1),o>=0&&(a===t.charCodeAt(o)?--o===-1&&(s=i):(o=-1,s=l))}return e===s?s=l:s===-1&&(s=n.length),n.slice(e,s)}for(i=n.length-1;i>=0;--i)if(n.charCodeAt(i)===47){if(!r){e=i+1;break}}else s===-1&&(r=!1,s=i+1);return s===-1?"":n.slice(e,s)},extname(n){As(n),n=Ci(this.toPosix(n));let t=-1,e=0,s=-1,r=!0,i=0;for(let o=n.length-1;o>=0;--o){const l=n.charCodeAt(o);if(l===47){if(!r){e=o+1;break}continue}s===-1&&(r=!1,s=o+1),l===46?t===-1?t=o:i!==1&&(i=1):t!==-1&&(i=-1)}return t===-1||s===-1||i===0||i===1&&t===s-1&&t===e+1?"":n.slice(t,s)},parse(n){As(n);const t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;n=Ci(this.toPosix(n));let e=n.charCodeAt(0);const s=this.isAbsolute(n);let r;t.root=this.rootname(n),s||this.hasProtocol(n)?r=1:r=0;let i=-1,o=0,l=-1,a=!0,c=n.length-1,h=0;for(;c>=r;--c){if(e=n.charCodeAt(c),e===47){if(!a){o=c+1;break}continue}l===-1&&(a=!1,l=c+1),e===46?i===-1?i=c:h!==1&&(h=1):i!==-1&&(h=-1)}return i===-1||l===-1||h===0||h===1&&i===l-1&&i===o+1?l!==-1&&(o===0&&s?t.base=t.name=n.slice(1,l):t.base=t.name=n.slice(o,l)):(o===0&&s?(t.name=n.slice(1,i),t.base=n.slice(1,l)):(t.name=n.slice(o,i),t.base=n.slice(o,l)),t.ext=n.slice(i,l)),t.dir=this.dirname(n),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let ol;async function uy(){return ol??(ol=(async()=>{var i;const n=document.createElement("canvas").getContext("webgl");if(!n)return qe.UNPACK;const t=await new Promise(o=>{const l=document.createElement("video");l.onloadeddata=()=>o(l),l.onerror=()=>o(null),l.autoplay=!1,l.crossOrigin="anonymous",l.preload="auto",l.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",l.load()});if(!t)return qe.UNPACK;const e=n.createTexture();n.bindTexture(n.TEXTURE_2D,e);const s=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,s),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t);const r=new Uint8Array(4);return n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,r),n.deleteFramebuffer(s),n.deleteTexture(e),(i=n.getExtension("WEBGL_lose_context"))==null||i.loseContext(),r[0]<=r[3]?qe.PMA:qe.UNPACK})()),ol}let ll;function fy(){return typeof ll>"u"&&(ll=function(){var t;const n={stencil:!0,failIfMajorPerformanceCaveat:ct.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ct.ADAPTER.getWebGLRenderingContext())return!1;const e=ct.ADAPTER.createCanvas();let s=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);const r=!!((t=s==null?void 0:s.getContextAttributes())!=null&&t.stencil);if(s){const i=s.getExtension("WEBGL_lose_context");i&&i.loseContext()}return s=null,r}catch{return!1}}()),ll}var my={grad:.9,turn:360,rad:360/(2*Math.PI)},xn=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},Ne=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*n)/e+0},_s=function(n,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),n>e?e:n>t?n:t},hm=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},mu=function(n){return{r:_s(n.r,0,255),g:_s(n.g,0,255),b:_s(n.b,0,255),a:_s(n.a)}},cl=function(n){return{r:Ne(n.r),g:Ne(n.g),b:Ne(n.b),a:Ne(n.a,3)}},py=/^#([0-9a-f]{3,8})$/i,ma=function(n){var t=n.toString(16);return t.length<2?"0"+t:t},dm=function(n){var t=n.r,e=n.g,s=n.b,r=n.a,i=Math.max(t,e,s),o=i-Math.min(t,e,s),l=o?i===t?(e-s)/o:i===e?2+(s-t)/o:4+(t-e)/o:0;return{h:60*(l<0?l+6:l),s:i?o/i*100:0,v:i/255*100,a:r}},um=function(n){var t=n.h,e=n.s,s=n.v,r=n.a;t=t/360*6,e/=100,s/=100;var i=Math.floor(t),o=s*(1-e),l=s*(1-(t-i)*e),a=s*(1-(1-t+i)*e),c=i%6;return{r:255*[s,l,o,o,a,s][c],g:255*[a,s,s,l,o,o][c],b:255*[o,o,a,s,s,l][c],a:r}},pu=function(n){return{h:hm(n.h),s:_s(n.s,0,100),l:_s(n.l,0,100),a:_s(n.a)}},gu=function(n){return{h:Ne(n.h),s:Ne(n.s),l:Ne(n.l),a:Ne(n.a,3)}},xu=function(n){return um((e=(t=n).s,{h:t.h,s:(e*=((s=t.l)<50?s:100-s)/100)>0?2*e/(s+e)*100:0,v:s+e,a:t.a}));var t,e,s},$i=function(n){return{h:(t=dm(n)).h,s:(r=(200-(e=t.s))*(s=t.v)/100)>0&&r<200?e*s/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,e,s,r},gy=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xy=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,by=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yy=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Jl={string:[[function(n){var t=py.exec(n);return t?(n=t[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?Ne(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?Ne(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var t=by.exec(n)||yy.exec(n);return t?t[2]!==t[4]||t[4]!==t[6]?null:mu({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(n){var t=gy.exec(n)||xy.exec(n);if(!t)return null;var e,s,r=pu({h:(e=t[1],s=t[2],s===void 0&&(s="deg"),Number(e)*(my[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return xu(r)},"hsl"]],object:[[function(n){var t=n.r,e=n.g,s=n.b,r=n.a,i=r===void 0?1:r;return xn(t)&&xn(e)&&xn(s)?mu({r:Number(t),g:Number(e),b:Number(s),a:Number(i)}):null},"rgb"],[function(n){var t=n.h,e=n.s,s=n.l,r=n.a,i=r===void 0?1:r;if(!xn(t)||!xn(e)||!xn(s))return null;var o=pu({h:Number(t),s:Number(e),l:Number(s),a:Number(i)});return xu(o)},"hsl"],[function(n){var t=n.h,e=n.s,s=n.v,r=n.a,i=r===void 0?1:r;if(!xn(t)||!xn(e)||!xn(s))return null;var o=function(l){return{h:hm(l.h),s:_s(l.s,0,100),v:_s(l.v,0,100),a:_s(l.a)}}({h:Number(t),s:Number(e),v:Number(s),a:Number(i)});return um(o)},"hsv"]]},bu=function(n,t){for(var e=0;e<t.length;e++){var s=t[e][0](n);if(s)return[s,t[e][1]]}return[null,void 0]},wy=function(n){return typeof n=="string"?bu(n.trim(),Jl.string):typeof n=="object"&&n!==null?bu(n,Jl.object):[null,void 0]},hl=function(n,t){var e=$i(n);return{h:e.h,s:_s(e.s+100*t,0,100),l:e.l,a:e.a}},dl=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},yu=function(n,t){var e=$i(n);return{h:e.h,s:e.s,l:_s(e.l+100*t,0,100),a:e.a}},tc=function(){function n(t){this.parsed=wy(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return Ne(dl(this.rgba),2)},n.prototype.isDark=function(){return dl(this.rgba)<.5},n.prototype.isLight=function(){return dl(this.rgba)>=.5},n.prototype.toHex=function(){return t=cl(this.rgba),e=t.r,s=t.g,r=t.b,o=(i=t.a)<1?ma(Ne(255*i)):"","#"+ma(e)+ma(s)+ma(r)+o;var t,e,s,r,i,o},n.prototype.toRgb=function(){return cl(this.rgba)},n.prototype.toRgbString=function(){return t=cl(this.rgba),e=t.r,s=t.g,r=t.b,(i=t.a)<1?"rgba("+e+", "+s+", "+r+", "+i+")":"rgb("+e+", "+s+", "+r+")";var t,e,s,r,i},n.prototype.toHsl=function(){return gu($i(this.rgba))},n.prototype.toHslString=function(){return t=gu($i(this.rgba)),e=t.h,s=t.s,r=t.l,(i=t.a)<1?"hsla("+e+", "+s+"%, "+r+"%, "+i+")":"hsl("+e+", "+s+"%, "+r+"%)";var t,e,s,r,i},n.prototype.toHsv=function(){return t=dm(this.rgba),{h:Ne(t.h),s:Ne(t.s),v:Ne(t.v),a:Ne(t.a,3)};var t},n.prototype.invert=function(){return sn({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},n.prototype.saturate=function(t){return t===void 0&&(t=.1),sn(hl(this.rgba,t))},n.prototype.desaturate=function(t){return t===void 0&&(t=.1),sn(hl(this.rgba,-t))},n.prototype.grayscale=function(){return sn(hl(this.rgba,-1))},n.prototype.lighten=function(t){return t===void 0&&(t=.1),sn(yu(this.rgba,t))},n.prototype.darken=function(t){return t===void 0&&(t=.1),sn(yu(this.rgba,-t))},n.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},n.prototype.alpha=function(t){return typeof t=="number"?sn({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):Ne(this.rgba.a,3);var e},n.prototype.hue=function(t){var e=$i(this.rgba);return typeof t=="number"?sn({h:t,s:e.s,l:e.l,a:e.a}):Ne(e.h)},n.prototype.isEqual=function(t){return this.toHex()===sn(t).toHex()},n}(),sn=function(n){return n instanceof tc?n:new tc(n)},wu=[],vy=function(n){n.forEach(function(t){wu.indexOf(t)<0&&(t(tc,Jl),wu.push(t))})};function _y(n,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var r in e)s[e[r]]=r;var i={};n.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var l,a,c=s[this.toHex()];if(c)return c;if(o!=null&&o.closest){var h=this.toRgb(),d=1/0,u="black";if(!i.length)for(var f in e)i[f]=new n(e[f]).toRgb();for(var m in e){var p=(l=h,a=i[m],Math.pow(l.r-a.r,2)+Math.pow(l.g-a.g,2)+Math.pow(l.b-a.b,2));p<d&&(d=p,u=m)}return u}},t.string.push([function(o){var l=o.toLowerCase(),a=l==="transparent"?"#0000":e[l];return a?new n(a).toRgb():null},"name"])}vy([_y]);const Hr=class Ba{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Ba)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const s=typeof t;if(s!==typeof e)return!1;if(s==="number"||s==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((r,i)=>r===e[i]);if(t!==null&&e!==null){const r=Object.keys(t),i=Object.keys(e);return r.length!==i.length?!1:r.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,s,r]=this._components;return{r:t,g:e,b:s,a:r}}toRgb(){const[t,e,s]=this._components;return{r:t,g:e,b:s}}toRgbaString(){const[t,e,s]=this.toUint8RgbArray();return`rgba(${t},${e},${s},${this.alpha})`}toUint8RgbArray(t){const[e,s,r]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(s*255),t[2]=Math.round(r*255),t}toRgbArray(t){t=t??[];const[e,s,r]=this._components;return t[0]=e,t[1]=s,t[2]=r,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,s,r,i]=Ba.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=s,this._components[2]*=r,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let s=this._int>>16&255,r=this._int>>8&255,i=this._int&255;return e&&(s=s*t+.5|0,r=r*t+.5|0,i=i*t+.5|0),(t*255<<24)+(s<<16)+(r<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,s,r]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(s*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,s,r,i]=this._components;return t[0]=e,t[1]=s,t[2]=r,t[3]=i,t}normalize(t){let e,s,r,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,s=(o>>8&255)/255,r=(o&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,s,r,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,s,r,i=255]=t,e/=255,s/=255,r/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const l=Ba.HEX_PATTERN.exec(t);l&&(t=`#${l[2]}`)}const o=sn(t);o.isValid()&&({r:e,g:s,b:r,a:i}=o.rgba,e/=255,s/=255,r/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=s,this._components[2]=r,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,s]=this._components;this._int=(t*255<<16)+(e*255<<8)+(s*255|0)}_clamp(t,e=0,s=1){return typeof t=="number"?Math.min(Math.max(t,e),s):(t.forEach((r,i)=>{t[i]=Math.min(Math.max(r,e),s)}),t)}};Hr.shared=new Hr,Hr.temp=new Hr,Hr.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Zt=Hr;function Ey(n,t=[]){return Nt("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Zt.shared.setValue(n).toRgbArray(t)}function Sy(n){return Nt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Zt.shared.setValue(n).toHex()}function Da(n){return Nt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Zt.shared.setValue(n).toNumber()}function Ty(){const n=[],t=[];for(let s=0;s<32;s++)n[s]=s,t[s]=s;n[ht.NORMAL_NPM]=ht.NORMAL,n[ht.ADD_NPM]=ht.ADD,n[ht.SCREEN_NPM]=ht.SCREEN,t[ht.NORMAL]=ht.NORMAL_NPM,t[ht.ADD]=ht.ADD_NPM,t[ht.SCREEN]=ht.SCREEN_NPM;const e=[];return e.push(t),e.push(n),e}const fm=Ty();function mm(n,t){return fm[t?1:0][n]}function Ay(n,t=null){const e=n*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let s=0,r=0;s<e;s+=6,r+=4)t[s+0]=r+0,t[s+1]=r+1,t[s+2]=r+2,t[s+3]=r+0,t[s+4]=r+2,t[s+5]=r+3;return t}function pm(n){if(n.BYTES_PER_ELEMENT===4)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(n.BYTES_PER_ELEMENT===2){if(n instanceof Uint16Array)return"Uint16Array"}else if(n.BYTES_PER_ELEMENT===1&&n instanceof Uint8Array)return"Uint8Array";return null}function qa(n){return n+=n===0?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1}function vu(n){return!(n&n-1)&&!!n}function _u(n){let t=(n>65535?1:0)<<4;n>>>=t;let e=(n>255?1:0)<<3;return n>>>=e,t|=e,e=(n>15?1:0)<<2,n>>>=e,t|=e,e=(n>3?1:0)<<1,n>>>=e,t|=e,t|n>>1}function oi(n,t,e){const s=n.length;let r;if(t>=s||e===0)return;e=t+e>s?s-t:e;const i=s-e;for(r=t;r<i;++r)n[r]=n[r+e];n.length=i}function er(n){return n===0?0:n<0?-1:1}let Cy=0;function Nr(){return++Cy}const ec=class{constructor(n,t,e,s){this.left=n,this.top=t,this.right=e,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};ec.EMPTY=new ec(0,0,0,0);let Eu=ec;const Su={},nn=Object.create(null),On=Object.create(null);class ky{constructor(t,e,s){this._canvas=ct.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||ct.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Tu(n,t,e){for(let s=0,r=4*e*t;s<t;++s,r+=4)if(n[r+3]!==0)return!1;return!0}function Au(n,t,e,s,r){const i=4*t;for(let o=s,l=s*i+4*e;o<=r;++o,l+=i)if(n[l+3]!==0)return!1;return!0}function Iy(n){const{width:t,height:e}=n,s=n.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const r=s.getImageData(0,0,t,e).data;let i=0,o=0,l=t-1,a=e-1;for(;o<e&&Tu(r,t,o);)++o;if(o===e)return Eu.EMPTY;for(;Tu(r,t,a);)--a;for(;Au(r,t,i,o,a);)++i;for(;Au(r,t,l,o,a);)--l;return++l,++a,new Eu(i,o,l,a)}function Ry(n){const t=Iy(n),{width:e,height:s}=t;let r=null;if(!t.isEmpty()){const i=n.getContext("2d");if(i===null)throw new TypeError("Failed to get canvas 2D context");r=i.getImageData(t.left,t.top,e,s)}return{width:e,height:s,data:r}}function My(n,t=globalThis.location){if(n.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(n,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function Mn(n,t=1){var s;const e=(s=ct.RETINA_PREFIX)==null?void 0:s.exec(n);return e?parseFloat(e[1]):t}var it=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(it||{});const sc=n=>{if(typeof n=="function"||typeof n=="object"&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={...typeof n.extension!="object"?{type:n.extension}:n.extension,ref:n}}if(typeof n=="object")n={...n};else throw new Error("Invalid extension type");return typeof n.type=="string"&&(n.type=[n.type]),n},Cu=(n,t)=>sc(n).priority??t,pt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map(sc).forEach(t=>{t.type.forEach(e=>{var s,r;return(r=(s=this._removeHandlers)[e])==null?void 0:r.call(s,t)})}),this},add(...n){return n.map(sc).forEach(t=>{t.type.forEach(e=>{var i,o;const s=this._addHandlers,r=this._queue;s[e]?(i=s[e])==null||i.call(s,t):(r[e]=r[e]||[],(o=r[e])==null||o.push(t))})}),this},handle(n,t,e){var o;const s=this._addHandlers,r=this._removeHandlers;if(s[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);s[n]=t,r[n]=e;const i=this._queue;return i[n]&&((o=i[n])==null||o.forEach(l=>t(l)),delete i[n]),this},handleByMap(n,t){return this.handle(n,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(n,t,e=-1){return this.handle(n,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((r,i)=>Cu(i,e)-Cu(r,e)))},s=>{const r=t.indexOf(s.ref);r!==-1&&t.splice(r,1)})}};class nc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Py=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ny(n){let t="";for(let e=0;e<n;++e)e>0&&(t+=`
else `),e<n-1&&(t+=`if(test == ${e}.0){}`);return t}function Fy(n,t){if(n===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=Py.replace(/%forloop%/gi,Ny(n));if(t.shaderSource(e,s),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))n=n/2|0;else break}return n}const ul=0,fl=1,ml=2,pl=3,gl=4,xl=5;class mn{constructor(){this.data=0,this.blendMode=ht.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ul)}set blend(t){!!(this.data&1<<ul)!==t&&(this.data^=1<<ul)}get offsets(){return!!(this.data&1<<fl)}set offsets(t){!!(this.data&1<<fl)!==t&&(this.data^=1<<fl)}get culling(){return!!(this.data&1<<ml)}set culling(t){!!(this.data&1<<ml)!==t&&(this.data^=1<<ml)}get depthTest(){return!!(this.data&1<<pl)}set depthTest(t){!!(this.data&1<<pl)!==t&&(this.data^=1<<pl)}get depthMask(){return!!(this.data&1<<xl)}set depthMask(t){!!(this.data&1<<xl)!==t&&(this.data^=1<<xl)}get clockwiseFrontFace(){return!!(this.data&1<<gl)}set clockwiseFrontFace(t){!!(this.data&1<<gl)!==t&&(this.data^=1<<gl)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==ht.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new mn;return t.depthTest=!1,t.blend=!0,t}}mn.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const rc=[];function gm(n,t){if(!n)return null;let e="";if(typeof n=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);s&&(e=s[1].toLowerCase())}for(let s=rc.length-1;s>=0;--s){const r=rc[s];if(r.test&&r.test(n,e))return new r(n,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Gs{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,s,r,i,o,l,a){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:h}=this;this._aliasCount++;for(let d=0,u=h.length;d<u;d++)h[d][c](t,e,s,r,i,o,l,a);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Gs.prototype,{dispatch:{value:Gs.prototype.emit},run:{value:Gs.prototype.emit}});class Zi{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Gs("setRealSize"),this.onUpdate=new Gs("update"),this.onError=new Gs("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class To extends Zi{constructor(t,e){const{width:s,height:r}=e||{};if(!s||!r)throw new Error("BufferResource width or height invalid");super(s,r),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,s){const r=t.gl;r.pixelStorei(r.UNPACK_ALIGNMENT,this.unpackAlignment),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===qe.UNPACK);const i=e.realWidth,o=e.realHeight;return s.width===i&&s.height===o?r.texSubImage2D(e.target,0,0,0,i,o,e.format,s.type,this.data):(s.width=i,s.height=o,r.texImage2D(e.target,0,s.internalFormat,i,o,0,e.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const By={scaleMode:hs.NEAREST,alphaMode:qe.NPM},ic=class qr extends sa{constructor(t=null,e=null){super(),e=Object.assign({},qr.defaultOptions,e);const{alphaMode:s,mipmap:r,anisotropicLevel:i,scaleMode:o,width:l,height:a,wrapMode:c,format:h,type:d,target:u,resolution:f,resourceOptions:m}=e;t&&!(t instanceof Zi)&&(t=gm(t,m),t.internal=!0),this.resolution=f||ct.RESOLUTION,this.width=Math.round((l||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=i,this._wrapMode=c,this._scaleMode=o,this.format=h,this.type=d,this.target=u,this.alphaMode=s,this.uid=Nr(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=l>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let s;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,s=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,s=!0),s&&this.dirtyStyleId++,this}setSize(t,e,s){return s=s||this.resolution,this.setRealSize(t*s,e*s,s)}setRealSize(t,e,s){return this.resolution=s||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=vu(this.realWidth)&&vu(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete On[this.cacheId],delete nn[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),qr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,s=ct.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let i=null;if(r)i=t;else{if(!t._pixiId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${l}_${Nr()}`}i=t._pixiId}let o=On[i];if(r&&s&&!o)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return o||(o=new qr(t,e),o.cacheId=i,qr.addToCache(o,i)),o}static fromBuffer(t,e,s,r){t=t||new Float32Array(e*s*4);const i=new To(t,{width:e,height:s,...r==null?void 0:r.resourceOptions});let o,l;return t instanceof Float32Array?(o=et.RGBA,l=bt.FLOAT):t instanceof Int32Array?(o=et.RGBA_INTEGER,l=bt.INT):t instanceof Uint32Array?(o=et.RGBA_INTEGER,l=bt.UNSIGNED_INT):t instanceof Int16Array?(o=et.RGBA_INTEGER,l=bt.SHORT):t instanceof Uint16Array?(o=et.RGBA_INTEGER,l=bt.UNSIGNED_SHORT):t instanceof Int8Array?(o=et.RGBA,l=bt.BYTE):(o=et.RGBA,l=bt.UNSIGNED_BYTE),i.internal=!0,new qr(i,Object.assign({},By,{type:l,format:o},r))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),On[e]&&On[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),On[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=On[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete On[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete On[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};ic.defaultOptions={mipmap:zs.POW2,anisotropicLevel:0,scaleMode:hs.LINEAR,wrapMode:rr.CLAMP,alphaMode:qe.UNPACK,target:ai.TEXTURE_2D,format:et.RGBA,type:bt.UNSIGNED_BYTE},ic._globalBatch=0;let Et=ic;class ac{constructor(){this.texArray=null,this.blend=0,this.type=Xs.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Dy=0;class ye{constructor(t,e=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=e,this.id=Dy++,this.disposeRunner=new Gs("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?dn.ELEMENT_ARRAY_BUFFER:dn.ARRAY_BUFFER}get index(){return this.type===dn.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ye(t)}}class Ka{constructor(t,e=0,s=!1,r=bt.FLOAT,i,o,l,a=1){this.buffer=t,this.size=e,this.normalized=s,this.type=r,this.stride=i,this.start=o,this.instance=l,this.divisor=a}destroy(){this.buffer=null}static from(t,e,s,r,i){return new Ka(t,e,s,r,i)}}const Ly={Float32Array,Uint32Array,Int32Array,Uint8Array};function Oy(n,t){let e=0,s=0;const r={};for(let a=0;a<n.length;a++)s+=t[a],e+=n[a].length;const i=new ArrayBuffer(e*4);let o=null,l=0;for(let a=0;a<n.length;a++){const c=t[a],h=n[a],d=pm(h);r[d]||(r[d]=new Ly[d](i)),o=r[d];for(let u=0;u<h.length;u++){const f=(u/c|0)*s+l,m=u%c;o[f+m]=h[u]}l+=c}return new Float32Array(i)}const ku={5126:4,5123:2,5121:1};let Vy=0;const Uy={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class or{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Vy++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Gs("disposeGeometry"),this.refCount=0}addAttribute(t,e,s=0,r=!1,i,o,l,a=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ye||(e instanceof Array&&(e=new Float32Array(e)),e=new ye(e));const c=t.split("|");if(c.length>1){for(let d=0;d<c.length;d++)this.addAttribute(c[d],e,s,r,i);return this}let h=this.buffers.indexOf(e);return h===-1&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new Ka(h,s,r,i,o,l,a),this.instanced=this.instanced||a,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ye||(t instanceof Array&&(t=new Uint16Array(t)),t=new ye(t)),t.type=dn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],s=new ye;let r;for(r in this.attributes){const i=this.attributes[r],o=this.buffers[i.buffer];t.push(o.data),e.push(i.size*ku[i.type]/4),i.buffer=0}for(s.data=Oy(t,e),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new or;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ye(this.buffers[e].data.slice(0));for(const e in this.attributes){const s=this.attributes[e];t.attributes[e]=new Ka(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=dn.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new or,s=[],r=[],i=[];let o;for(let l=0;l<t.length;l++){o=t[l];for(let a=0;a<o.buffers.length;a++)r[a]=r[a]||0,r[a]+=o.buffers[a].data.length,i[a]=0}for(let l=0;l<o.buffers.length;l++)s[l]=new Uy[pm(o.buffers[l].data)](r[l]),e.buffers[l]=new ye(s[l]);for(let l=0;l<t.length;l++){o=t[l];for(let a=0;a<o.buffers.length;a++)s[a].set(o.buffers[a].data,i[a]),i[a]+=o.buffers[a].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=dn.ELEMENT_ARRAY_BUFFER;let l=0,a=0,c=0,h=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){h=d;break}for(const d in o.attributes){const u=o.attributes[d];(u.buffer|0)===h&&(a+=u.size*ku[u.type]/4)}for(let d=0;d<t.length;d++){const u=t[d].indexBuffer.data;for(let f=0;f<u.length;f++)e.indexBuffer.data[f+c]+=l;l+=t[d].buffers[h].data.length/a,c+=u.length}}return e}}class xm extends or{constructor(t=!1){super(),this._buffer=new ye(null,t,!1),this._indexBuffer=new ye(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,bt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,bt.FLOAT).addAttribute("aColor",this._buffer,4,!0,bt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,bt.FLOAT).addIndex(this._indexBuffer)}}const Za=Math.PI*2,jy=180/Math.PI,Xy=Math.PI/180;var Oe=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Oe||{});class jt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new jt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}jt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const pa=[new jt,new jt,new jt,new jt];class _t{constructor(t=0,e=0,s=0,r=0){this.x=Number(t),this.y=Number(e),this.width=Number(s),this.height=Number(r),this.type=Oe.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new _t(0,0,0,0)}clone(){return new _t(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const T=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=T)return!1;const A=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>A}const s=this.left,r=this.right,i=this.top,o=this.bottom;if(r<=s||o<=i)return!1;const l=pa[0].set(t.left,t.top),a=pa[1].set(t.left,t.bottom),c=pa[2].set(t.right,t.top),h=pa[3].set(t.right,t.bottom);if(c.x<=l.x||a.y<=l.y)return!1;const d=Math.sign(e.a*e.d-e.b*e.c);if(d===0||(e.apply(l,l),e.apply(a,a),e.apply(c,c),e.apply(h,h),Math.max(l.x,a.x,c.x,h.x)<=s||Math.min(l.x,a.x,c.x,h.x)>=r||Math.max(l.y,a.y,c.y,h.y)<=i||Math.min(l.y,a.y,c.y,h.y)>=o))return!1;const u=d*(a.y-l.y),f=d*(l.x-a.x),m=u*s+f*i,p=u*r+f*i,g=u*s+f*o,x=u*r+f*o;if(Math.max(m,p,g,x)<=u*l.x+f*l.y||Math.min(m,p,g,x)>=u*h.x+f*h.y)return!1;const b=d*(l.y-c.y),y=d*(c.x-l.x),w=b*s+y*i,_=b*r+y*i,E=b*s+y*o,S=b*r+y*o;return!(Math.max(w,_,E,S)<=b*l.x+y*l.y||Math.min(w,_,E,S)>=b*h.x+y*h.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(s-e,0),this.y=r,this.height=Math.max(i-r,0),this}ceil(t=1,e=.001){const s=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=s-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=s-e,this.y=r,this.height=i-r,this}}_t.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ao{constructor(t=0,e=0,s=0){this.x=t,this.y=e,this.radius=s,this.type=Oe.CIRC}clone(){return new Ao(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const s=this.radius*this.radius;let r=this.x-t,i=this.y-e;return r*=r,i*=i,r+i<=s}getBounds(){return new _t(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Ao.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Co{constructor(t=0,e=0,s=0,r=0){this.x=t,this.y=e,this.width=s,this.height=r,this.type=Oe.ELIP}clone(){return new Co(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,r=(e-this.y)/this.height;return s*=s,r*=r,s+r<=1}getBounds(){return new _t(this.x-this.width,this.y-this.height,this.width,this.height)}}Co.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ir{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const s=[];for(let r=0,i=e.length;r<i;r++)s.push(e[r].x,e[r].y);e=s}this.points=e,this.type=Oe.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new ir(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let s=!1;const r=this.points.length/2;for(let i=0,o=r-1;i<r;o=i++){const l=this.points[i*2],a=this.points[i*2+1],c=this.points[o*2],h=this.points[o*2+1];a>e!=h>e&&t<(c-l)*((e-a)/(h-a))+l&&(s=!s)}return s}}ir.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((n,t)=>`${n}, ${t}`,"")}]`};class ko{constructor(t=0,e=0,s=0,r=0,i=20){this.x=t,this.y=e,this.width=s,this.height=r,this.radius=i,this.type=Oe.RREC}clone(){return new ko(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+s&&e<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let r=t-(this.x+s),i=e-(this.y+s);const o=s*s;if(r*r+i*i<=o||(r=t-(this.x+this.width-s),r*r+i*i<=o)||(i=e-(this.y+this.height-s),r*r+i*i<=o)||(r=t-(this.x+s),r*r+i*i<=o))return!0}return!1}}ko.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Ht{constructor(t=1,e=0,s=0,r=1,i=0,o=0){this.array=null,this.a=t,this.b=e,this.c=s,this.d=r,this.tx=i,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,s,r,i,o){return this.a=t,this.b=e,this.c=s,this.d=r,this.tx=i,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const s=e||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,e){e=e||new jt;const s=t.x,r=t.y;return e.x=this.a*s+this.c*r+this.tx,e.y=this.b*s+this.d*r+this.ty,e}applyInverse(t,e){e=e||new jt;const s=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*s*r+-this.c*s*i+(this.ty*this.c-this.tx*this.d)*s,e.y=this.a*s*i+-this.b*s*r+(-this.ty*this.a+this.tx*this.b)*s,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),s=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*s,this.b=r*s+this.b*e,this.c=i*e-this.d*s,this.d=i*s+this.d*e,this.tx=o*e-this.ty*s,this.ty=o*s+this.ty*e,this}append(t){const e=this.a,s=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*s+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*s+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*s+t.ty*i+this.ty,this}setTransform(t,e,s,r,i,o,l,a,c){return this.a=Math.cos(l+c)*i,this.b=Math.sin(l+c)*i,this.c=-Math.sin(l-a)*o,this.d=Math.cos(l-a)*o,this.tx=t-(s*this.a+r*this.c),this.ty=e-(s*this.b+r*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,r=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,s=this.b,r=this.c,i=this.d,o=t.pivot,l=-Math.atan2(-r,i),a=Math.atan2(s,e),c=Math.abs(l+a);return c<1e-5||Math.abs(Za-c)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=l,t.skew.y=a),t.scale.x=Math.sqrt(e*e+s*s),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*s+o.y*i),t}invert(){const t=this.a,e=this.b,s=this.c,r=this.d,i=this.tx,o=t*r-e*s;return this.a=r/o,this.b=-e/o,this.c=-s/o,this.d=t/o,this.tx=(s*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Ht;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Ht}static get TEMP_MATRIX(){return new Ht}}Ht.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const gr=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],xr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],br=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],yr=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],oc=[],bm=[],ga=Math.sign;function Gy(){for(let n=0;n<16;n++){const t=[];oc.push(t);for(let e=0;e<16;e++){const s=ga(gr[n]*gr[e]+br[n]*xr[e]),r=ga(xr[n]*gr[e]+yr[n]*xr[e]),i=ga(gr[n]*br[e]+br[n]*yr[e]),o=ga(xr[n]*br[e]+yr[n]*yr[e]);for(let l=0;l<16;l++)if(gr[l]===s&&xr[l]===r&&br[l]===i&&yr[l]===o){t.push(l);break}}}for(let n=0;n<16;n++){const t=new Ht;t.set(gr[n],xr[n],br[n],yr[n],0,0),bm.push(t)}}Gy();const de={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>gr[n],uY:n=>xr[n],vX:n=>br[n],vY:n=>yr[n],inv:n=>n&8?n&15:-n&7,add:(n,t)=>oc[n][t],sub:(n,t)=>oc[n][de.inv(t)],rotate180:n=>n^4,isVertical:n=>(n&3)===2,byDirection:(n,t)=>Math.abs(n)*2<=Math.abs(t)?t>=0?de.S:de.N:Math.abs(t)*2<=Math.abs(n)?n>0?de.E:de.W:t>0?n>0?de.SE:de.SW:n>0?de.NE:de.NW,matrixAppendRotationInv:(n,t,e=0,s=0)=>{const r=bm[de.inv(t)];r.tx=e,r.ty=s,n.append(r)}};class Cn{constructor(t,e,s=0,r=0){this._x=s,this._y=r,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Cn(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Cn.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const lc=class{constructor(){this.worldTransform=new Ht,this.localTransform=new Ht,this.position=new Cn(this.onChange,this,0,0),this.scale=new Cn(this.onChange,this,1,1),this.pivot=new Cn(this.onChange,this,0,0),this.skew=new Cn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const e=n.worldTransform,s=this.worldTransform;s.a=t.a*e.a+t.b*e.c,s.b=t.a*e.b+t.b*e.d,s.c=t.c*e.a+t.d*e.c,s.d=t.c*e.b+t.d*e.d,s.tx=t.tx*e.a+t.ty*e.c+e.tx,s.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};lc.IDENTITY=new lc;let Io=lc;Io.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Yy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,$y=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Iu(n,t,e){const s=n.createShader(t);return n.shaderSource(s,e),n.compileShader(s),s}function bl(n){const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=!1;return t}function ym(n,t){switch(n){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return bl(2*t);case"bvec3":return bl(3*t);case"bvec4":return bl(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const li=[{test:n=>n.type==="float"&&n.size===1&&!n.isArray,code:n=>`
            if(uv["${n}"] !== ud["${n}"].value)
            {
                ud["${n}"].value = uv["${n}"]
                gl.uniform1f(ud["${n}"].location, uv["${n}"])
            }
            `},{test:(n,t)=>(n.type==="sampler2D"||n.type==="samplerCube"||n.type==="sampler2DArray")&&n.size===1&&!n.isArray&&(t==null||t.castToBaseTexture!==void 0),code:n=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${n}"], t);

            if(ud["${n}"].value !== t)
            {
                ud["${n}"].value = t;
                gl.uniform1i(ud["${n}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(n,t)=>n.type==="mat3"&&n.size===1&&!n.isArray&&t.a!==void 0,code:n=>`
            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));
            `,codeUbo:n=>`
                var ${n}_matrix = uv.${n}.toArray(true);

                data[offset] = ${n}_matrix[0];
                data[offset+1] = ${n}_matrix[1];
                data[offset+2] = ${n}_matrix[2];
        
                data[offset + 4] = ${n}_matrix[3];
                data[offset + 5] = ${n}_matrix[4];
                data[offset + 6] = ${n}_matrix[5];
        
                data[offset + 8] = ${n}_matrix[6];
                data[offset + 9] = ${n}_matrix[7];
                data[offset + 10] = ${n}_matrix[8];
            `},{test:(n,t)=>n.type==="vec2"&&n.size===1&&!n.isArray&&t.x!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${n}"].location, v.x, v.y);
                }`,codeUbo:n=>`
                v = uv.${n};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:n=>n.type==="vec2"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);
                }
            `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.width!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(n,t)=>n.type==="vec4"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${n}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(n,t)=>n.type==="vec3"&&n.size===1&&!n.isArray&&t.red!==void 0,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${n}"].location, v.red, v.green, v.blue)
                }`,codeUbo:n=>`
                    v = uv.${n};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:n=>n.type==="vec4"&&n.size===1&&!n.isArray,code:n=>`
                cv = ud["${n}"].value;
                v = uv["${n}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])
                }`}],Wy={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},zy={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Hy(n,t){var s;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in n.uniforms){const i=t[r];if(!i){((s=n.uniforms[r])==null?void 0:s.group)===!0&&(n.uniforms[r].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=n.uniforms[r];let l=!1;for(let a=0;a<li.length;a++)if(li[a].test(i,o)){e.push(li[a].code(r,o)),l=!0;break}if(!l){const a=(i.size===1&&!i.isArray?Wy:zy)[i.type].replace("location",`ud["${r}"].location`);e.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const wm={};let $r=wm;function qy(){if($r===wm||$r!=null&&$r.isContextLost()){const n=ct.ADAPTER.createCanvas();let t;ct.PREFER_ENV>=Or.WEBGL2&&(t=n.getContext("webgl2",{})),t||(t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),$r=t}return $r}let xa;function Ky(){if(!xa){xa=vs.MEDIUM;const n=qy();if(n&&n.getShaderPrecisionFormat){const t=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);t&&(xa=t.precision?vs.HIGH:vs.MEDIUM)}}return xa}function Ru(n,t){const e=n.getShaderSource(t).split(`
`).map((c,h)=>`${h}: ${c}`),s=n.getShaderInfoLog(t),r=s.split(`
`),i={},o=r.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!i[c]?(i[c]=!0,!0):!1),l=[""];o.forEach(c=>{e[c-1]=`%c${e[c-1]}%c`,l.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const a=e.join(`
`);l[0]=a,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...l),console.groupEnd()}function Zy(n,t,e,s){n.getProgramParameter(t,n.LINK_STATUS)||(n.getShaderParameter(e,n.COMPILE_STATUS)||Ru(n,e),n.getShaderParameter(s,n.COMPILE_STATUS)||Ru(n,s),console.error("PixiJS Error: Could not initialize shader."),n.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(t)))}const Qy={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function vm(n){return Qy[n]}let ba=null;const Mu={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function _m(n,t){if(!ba){const e=Object.keys(Mu);ba={};for(let s=0;s<e.length;++s){const r=e[s];ba[n[r]]=Mu[r]}}return ba[t]}function Pu(n,t,e){if(n.substring(0,9)!=="precision"){let s=t;return t===vs.HIGH&&e!==vs.HIGH&&(s=vs.MEDIUM),`precision ${s} float;
${n}`}else if(e!==vs.HIGH&&n.substring(0,15)==="precision highp")return n.replace("precision highp","precision mediump");return n}let ki;function Jy(){if(typeof ki=="boolean")return ki;try{ki=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{ki=!1}return ki}let t1=0;const ya={},cc=class Kr{constructor(t,e,s="pixi-shader",r={}){this.extra={},this.id=t1++,this.vertexSrc=t||Kr.defaultVertexSrc,this.fragmentSrc=e||Kr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,this.vertexSrc.substring(0,8)!=="#version"&&(s=s.replace(/\s+/g,"-"),ya[s]?(ya[s]++,s+=`-${ya[s]}`):ya[s]=1,this.vertexSrc=`#define SHADER_NAME ${s}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${s}
${this.fragmentSrc}`,this.vertexSrc=Pu(this.vertexSrc,Kr.defaultVertexPrecision,vs.HIGH),this.fragmentSrc=Pu(this.fragmentSrc,Kr.defaultFragmentPrecision,Ky())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return $y}static get defaultFragmentSrc(){return Yy}static from(t,e,s){const r=t+e;let i=Su[r];return i||(Su[r]=i=new Kr(t,e,s)),i}};cc.defaultVertexPrecision=vs.HIGH,cc.defaultFragmentPrecision=An.apple.device?vs.HIGH:vs.MEDIUM;let kn=cc,e1=0;class Ys{constructor(t,e,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=e1++,this.static=!!e,this.ubo=!!s,t instanceof ye?(this.buffer=t,this.buffer.type=dn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ye(new Float32Array(1)),this.buffer.type=dn.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,s){if(!this.ubo)this.uniforms[t]=new Ys(e,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,s){return new Ys(t,e,s)}static uboFrom(t,e){return new Ys(t,e??!0,!0)}}class un{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof Ys?this.uniformGroup=e:this.uniformGroup=new Ys(e):this.uniformGroup=new Ys({}),this.disposeRunner=new Gs("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const s in e.uniforms){const r=e.uniforms[s];if(r.group===!0&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,s){const r=kn.from(t,e);return new un(r,s)}}class s1{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let i=0;i<t;i++)s[i]=i;this.defaultGroupCache[t]=Ys.from({uSamplers:s},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new kn(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ht,default:this.defaultGroupCache[t]};return new un(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let s=0;s<t;s++)s>0&&(e+=`
else `),s<t-1&&(e+=`if(vTextureId < ${s}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${s}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class hc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function n1(){return!An.apple.device}function r1(n){let t=!0;const e=ct.ADAPTER.getNavigator();if(An.tablet||An.phone){if(An.apple.device){const s=e.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(An.android.device){const s=e.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?n:4}class Ro{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var i1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,a1=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Fi=class ks extends Ro{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=xm,this.vertexSize=6,this.state=mn.for2d(),this.size=ks.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??r1(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??n1(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return Nt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return a1}static get defaultFragmentTemplate(){return i1}setShaderGenerator({vertex:t=ks.defaultVertexSrc,fragment:e=ks.defaultFragmentTemplate}={}){this.shaderGenerator=new s1(t,e)}contextChange(){const t=this.renderer.gl;ct.PREFER_ENV===Or.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ks.defaultMaxTextures),this.maxTextures=Fy(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=ks,s=this.size/4,r=Math.floor(s/this.maxTextures)+1;for(;t.length<s;)t.push(new ac);for(;e.length<r;)e.push(new hc);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,s=ks._textureArrayPool,r=this.renderer.batch,i=this._tempBoundTextures,o=this.renderer.textureGC.count;let l=++Et._globalBatch,a=0,c=s[0],h=0;r.copyBoundTextures(i,e);for(let d=0;d<this._bufferSize;++d){const u=t[d];t[d]=null,u._batchEnabled!==l&&(c.count>=e&&(r.boundArray(c,i,l,e),this.buildDrawCalls(c,h,d),h=d,c=s[++a],++l),u._batchEnabled=l,u.touched=o,c.elements[c.count++]=u)}c.count>0&&(r.boundArray(c,i,l,e),this.buildDrawCalls(c,h,this._bufferSize),++a,++l);for(let d=0;d<i.length;d++)i[d]=null;Et._globalBatch=l}buildDrawCalls(t,e,s){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:o,vertexSize:l}=this,a=ks._drawCallPool;let c=this._dcIndex,h=this._aIndex,d=this._iIndex,u=a[c];u.start=this._iIndex,u.texArray=t;for(let f=e;f<s;++f){const m=r[f],p=m._texture.baseTexture,g=fm[p.alphaMode?1:0][m.blendMode];r[f]=null,e<f&&u.blend!==g&&(u.size=d-u.start,e=f,u=a[++c],u.texArray=t,u.start=d),this.packInterleavedGeometry(m,i,o,h,d),h+=m.vertexData.length/2*l,d+=m.indices.length,u.blend=g}e<s&&(u.size=d-u.start,++c),this._dcIndex=c,this._aIndex=h,this._iIndex=d}bindAndClearTexArray(t){const e=this.renderer.texture;for(let s=0;s<t.count;s++)e.bind(t.elements[s],t.ids[s]),t.elements[s]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:s}=this;ks.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:s}=this.renderer,r=ks._drawCallPool;let i=null;for(let o=0;o<t;o++){const{texArray:l,type:a,size:c,start:h,blend:d}=r[o];i!==l&&(i=l,this.bindAndClearTexArray(l)),this.state.blendMode=d,s.set(this.state),e.drawElements(a,c,e.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),ks.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=qa(Math.ceil(t/8)),s=_u(e),r=e*8;this._aBuffers.length<=s&&(this._iBuffers.length=s+1);let i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new nc(r*this.vertexSize*4)),i}getIndexBuffer(t){const e=qa(Math.ceil(t/12)),s=_u(e),r=e*12;this._iBuffers.length<=s&&(this._iBuffers.length=s+1);let i=this._iBuffers[s];return i||(this._iBuffers[s]=i=new Uint16Array(r)),i}packInterleavedGeometry(t,e,s,r,i){const{uint32View:o,float32View:l}=e,a=r/this.vertexSize,c=t.uvs,h=t.indices,d=t.vertexData,u=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),m=Zt.shared.setValue(t._tintRGB).toPremultiplied(f,t._texture.baseTexture.alphaMode>0);for(let p=0;p<d.length;p+=2)l[r++]=d[p],l[r++]=d[p+1],l[r++]=c[p],l[r++]=c[p+1],o[r++]=m,l[r++]=u;for(let p=0;p<h.length;p++)s[i++]=a+h[p]}};Fi.defaultBatchSize=4096,Fi.extension={name:"batch",type:it.RendererPlugin},Fi._drawCallPool=[],Fi._textureArrayPool=[];let wr=Fi;pt.add(wr);var o1=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,l1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const dc=class Bi extends un{constructor(t,e,s){const r=kn.from(t||Bi.defaultVertexSrc,e||Bi.defaultFragmentSrc);super(r,s),this.padding=0,this.resolution=Bi.defaultResolution,this.multisample=Bi.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new mn}apply(t,e,s,r,i){t.applyFilter(this,e,s,r)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return l1}static get defaultFragmentSrc(){return o1}};dc.defaultResolution=1,dc.defaultMultisample=Se.NONE;let Ke=dc;class Qa{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Zt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:s,backgroundAlpha:r}=t,i=s??e;i!==void 0&&(this.color=i),this.alpha=r}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Qa.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Qa.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"background"};pt.add(Qa);class Em{constructor(t){this.renderer=t,this.emptyRenderer=new Ro(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:s}=this.renderer.texture;for(let r=e-1;r>=0;--r)t[r]=s[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,e,s,r){const{elements:i,ids:o,count:l}=t;let a=0;for(let c=0;c<l;c++){const h=i[c],d=h._batchLocation;if(d>=0&&d<r&&e[d]===h){o[c]=d;continue}for(;a<r;){const u=e[a];if(u&&u._batchEnabled===s&&u._batchLocation===a){a++;continue}o[c]=a,h._batchLocation=a,e[a]=h;break}}}destroy(){this.renderer=null}}Em.extension={type:it.RendererSystem,name:"batch"};pt.add(Em);let Nu=0;class Ja{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Nu++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Nu++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let s;if(ct.PREFER_ENV>=Or.WEBGL2&&(s=t.getContext("webgl2",e)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Ja.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Ja.extension={type:it.RendererSystem,name:"context"};pt.add(Ja);class uc{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Gs("disposeFramebuffer"),this.multisample=Se.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Et(null,{scaleMode:hs.NEAREST,resolution:1,mipmap:zs.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Et(null,{scaleMode:hs.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:zs.OFF,format:et.DEPTH_COMPONENT,type:bt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const r=this.colorTextures[s],i=r.resolution;r.setSize(t/i,e/i)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,e/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Sm extends Et{constructor(t={}){if(typeof t=="number"){const e=arguments[0],s=arguments[1],r=arguments[2],i=arguments[3];t={width:e,height:s,scaleMode:r,resolution:i}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Se.NONE),super(null,t),this.mipmap=zs.OFF,this.valid=!0,this._clear=new Zt([0,0,0,0]),this.framebuffer=new uc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Pn extends Zi{constructor(t){const e=t,s=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,r=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(s,r),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,s){s===void 0&&!e.startsWith("data:")?t.crossOrigin=My(e):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,e,s,r){const i=t.gl,o=e.realWidth,l=e.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===qe.UNPACK),!this.noSubImage&&e.target===i.TEXTURE_2D&&s.width===o&&s.height===l?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,s.type,r):(s.width=o,s.height=l,i.texImage2D(e.target,0,s.internalFormat,e.format,s.type,r)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(e,s),super.update()}dispose(){this.source=null}}class Tm extends Pn{constructor(t,e){if(e=e||{},typeof t=="string"){const s=new Image;Pn.crossOrigin(s,t,e.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??ct.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,s)=>{const r=this.source;this.url=r.src;const i=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?i():(r.onload=i,r.onerror=o=>{s(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(r=>r.blob()).then(r=>e(r,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===qe.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,s){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,s,this.bitmap),!this.preserveBitmap){let r=!0;const i=e._glTextures;for(const o in i){const l=i[o];if(l!==s&&l.dirtyId!==e.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class wh{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,s){const r=e.width,i=e.height;if(s){const o=t.width/2/r,l=t.height/2/i,a=t.x/r+o,c=t.y/i+l;s=de.add(s,de.NW),this.x0=a+o*de.uX(s),this.y0=c+l*de.uY(s),s=de.add(s,2),this.x1=a+o*de.uX(s),this.y1=c+l*de.uY(s),s=de.add(s,2),this.x2=a+o*de.uX(s),this.y2=c+l*de.uY(s),s=de.add(s,2),this.x3=a+o*de.uX(s),this.y3=c+l*de.uY(s)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}wh.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Fu=new wh;function wa(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class ut extends sa{constructor(t,e,s,r,i,o,l){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new _t(0,0,1,1)),t instanceof ut&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=r,this.valid=!1,this.destroyed=!1,this._uvs=Fu,this.uvMatrix=null,this.orig=s||e,this._rotate=Number(i||0),i===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new jt(o.x,o.y):new jt(0,0),this.defaultBorders=l,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&nn[e.url]&&ut.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ut.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var r;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),s=new ut(this.baseTexture,!this.noFrame&&t,e,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===Fu&&(this._uvs=new wh),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},s=ct.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let i=null;if(r)i=t;else if(t instanceof Et){if(!t.cacheId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${l}-${Nr()}`,Et.addToCache(t,t.cacheId)}i=t.cacheId}else{if(!t._pixiId){const l=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${l}_${Nr()}`}i=t._pixiId}let o=nn[i];if(r&&s&&!o)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return!o&&!(t instanceof Et)?(e.resolution||(e.resolution=Mn(t)),o=new ut(new Et(t,e)),o.baseTexture.cacheId=i,Et.addToCache(o.baseTexture,i),ut.addToCache(o,i)):!o&&t instanceof Et&&(o=new ut(t),ut.addToCache(o,i)),o}static fromURL(t,e){const s=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),r=ut.from(t,Object.assign({resourceOptions:s},e),!1),i=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):i.load().then(()=>Promise.resolve(r))}static fromBuffer(t,e,s,r){return new ut(Et.fromBuffer(t,e,s,r))}static fromLoader(t,e,s,r){const i=new Et(t,Object.assign({scaleMode:Et.defaultOptions.scaleMode,resolution:Mn(e)},r)),{resource:o}=i;o instanceof Tm&&(o.url=e);const l=new ut(i);return s||(s=e),Et.addToCache(l.baseTexture,s),ut.addToCache(l,s),s!==e&&(Et.addToCache(l.baseTexture,e),ut.addToCache(l,e)),l.baseTexture.valid?Promise.resolve(l):new Promise(a=>{l.baseTexture.once("loaded",()=>a(l))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),nn[e]&&nn[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),nn[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=nn[t];if(e){const s=e.textureCacheIds.indexOf(t);return s>-1&&e.textureCacheIds.splice(s,1),delete nn[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)nn[t.textureCacheIds[e]]===t&&delete nn[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:s,width:r,height:i}=t,o=e+r>this.baseTexture.width,l=s+i>this.baseTexture.height;if(o||l){const a=o&&l?"and":"or",c=`X: ${e} + ${r} = ${e+r} > ${this.baseTexture.width}`,h=`Y: ${s} + ${i} = ${s+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${a} ${h}`)}this.valid=r&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ut._EMPTY||(ut._EMPTY=new ut(new Et),wa(ut._EMPTY),wa(ut._EMPTY.baseTexture)),ut._EMPTY}static get WHITE(){if(!ut._WHITE){const t=ct.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),ut._WHITE=new ut(Et.from(t)),wa(ut._WHITE),wa(ut._WHITE.baseTexture)}return ut._WHITE}}class Vr extends ut{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,s=!0){const r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,s&&this.baseTexture.resize(i,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Vr(new Sm(t))}}class Am{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,s=Se.NONE){const r=new Sm(Object.assign({width:t,height:e,resolution:1,multisample:s},this.textureOptions));return new Vr(r)}getOptimalTexture(t,e,s=1,r=Se.NONE){let i;t=Math.max(Math.ceil(t*s-1e-6),1),e=Math.max(Math.ceil(e*s-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=qa(t),e=qa(e),i=((t&65535)<<16|e&65535)>>>0,r>1&&(i+=r*4294967296)):i=r>1?-r:-1,this.texturePool[i]||(this.texturePool[i]=[]);let o=this.texturePool[i].pop();return o||(o=this.createTexture(t,e,r)),o.filterPoolKey=i,o.setResolution(s),o}getFilterTexture(t,e,s){const r=this.getOptimalTexture(t.width,t.height,e||t.resolution,s||Se.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const s=this.texturePool[e];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const s=this.texturePool[e];if(s)for(let r=0;r<s.length;r++)s[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Am.SCREEN_KEY=-1;class c1 extends or{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Cm extends or{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ye(this.vertices),this.uvBuffer=new ye(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let s=0,r=0;return this.uvs[0]=s,this.uvs[1]=r,this.uvs[2]=s+e.width/t.width,this.uvs[3]=r,this.uvs[4]=s+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=s,this.uvs[7]=r+e.height/t.height,s=e.x,r=e.y,this.vertices[0]=s,this.vertices[1]=r,this.vertices[2]=s+e.width,this.vertices[3]=r,this.vertices[4]=s+e.width,this.vertices[5]=r+e.height,this.vertices[6]=s,this.vertices[7]=r+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class h1{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Se.NONE,this.sourceFrame=new _t,this.destinationFrame=new _t,this.bindingSourceFrame=new _t,this.bindingDestinationFrame=new _t,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const va=[new jt,new jt,new jt,new jt],yl=new Ht;class km{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Am,this.statePool=[],this.quad=new c1,this.quadUv=new Cm,this.tempRect=new _t,this.activeState={},this.globalUniforms=new Ys({outputFrame:new _t,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const s=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new h1,o=s.renderTexture;let l,a;if(o.current){const g=o.current;l=g.resolution,a=g.multisample}else l=s.resolution,a=s.multisample;let c=e[0].resolution||l,h=e[0].multisample??a,d=e[0].padding,u=e[0].autoFit,f=e[0].legacy??!0;for(let g=1;g<e.length;g++){const x=e[g];c=Math.min(c,x.resolution||l),h=Math.min(h,x.multisample??a),d=this.useMaxPadding?Math.max(d,x.padding):d+x.padding,u=u&&x.autoFit,f=f||(x.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(i),i.resolution=c,i.multisample=h,i.legacy=f,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(d);const m=this.tempRect.copyFrom(o.sourceFrame);s.projection.transform&&this.transformAABB(yl.copyFrom(s.projection.transform).invert(),m),u?(i.sourceFrame.fit(m),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(m)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,o.current?o.current.resolution:s.resolution,o.sourceFrame,o.destinationFrame,s.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,c,h),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=i.sourceFrame.width,p.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=s.projection.transform,s.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,p),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),s=e.filters;this.activeState=e;const r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;const i=r.inputSize,o=r.inputPixel,l=r.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*e.resolution),o[1]=Math.round(i[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],l[0]=.5*o[2],l[1]=.5*o[3],l[2]=e.sourceFrame.width*i[2]-.5*o[2],l[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){const c=r.filterArea;c[0]=e.destinationFrame.width,c[1]=e.destinationFrame.height,c[2]=e.sourceFrame.x,c[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const a=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,e.renderTexture,a.renderTexture,hn.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let c=e.renderTexture,h=this.getOptimalFilterTexture(c.width,c.height,e.resolution);h.filterFrame=c.filterFrame;let d=0;for(d=0;d<s.length-1;++d){d===1&&e.multisample>1&&(h=this.getOptimalFilterTexture(c.width,c.height,e.resolution),h.filterFrame=c.filterFrame),s[d].apply(this,c,h,hn.CLEAR,e);const u=c;c=h,h=u}s[d].apply(this,c,a.renderTexture,hn.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=hn.CLEAR){const{renderTexture:s,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,s.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=r.stateId&1||this.forceClear;(e===hn.CLEAR||e===hn.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,s,r){const i=this.renderer;i.state.set(t.state),this.bindAndClear(s,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(Xs.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(Xs.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:s,destinationFrame:r}=this.activeState,{orig:i}=e._texture,o=t.set(r.width,0,0,r.height,s.x,s.y),l=e.worldTransform.copyTo(Ht.TEMP_MATRIX);return l.invert(),o.prepend(l),o.scale(1/i.width,1/i.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,s=1,r=Se.NONE){return this.texturePool.getOptimalTexture(t,e,s,r)}getFilterTexture(t,e,s){if(typeof t=="number"){const i=t;t=e,e=i}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,s||Se.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const s=va[0],r=va[1],i=va[2],o=va[3];s.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(s,s),t.apply(r,r),t.apply(i,i),t.apply(o,o);const l=Math.min(s.x,r.x,i.x,o.x),a=Math.min(s.y,r.y,i.y,o.y),c=Math.max(s.x,r.x,i.x,o.x),h=Math.max(s.y,r.y,i.y,o.y);e.x=l,e.y=a,e.width=c-l,e.height=h-a}roundFrame(t,e,s,r,i){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(i){const{a:o,b:l,c:a,d:c}=i;if((Math.abs(l)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}i=i?yl.copyFrom(i):yl.identity(),i.translate(-s.x,-s.y).scale(r.width/s.width,r.height/s.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}}}km.extension={type:it.RendererSystem,name:"filter"};pt.add(km);class d1{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Se.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const u1=new _t;class Im{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new uc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new _t,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;ct.PREFER_ENV===Or.WEBGL_LEGACY&&(e=null,s=null),e?t.drawBuffers=r=>e.drawBuffersWEBGL(r):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,s=0){const{gl:r}=this;if(t){const i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=s),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const l=t.colorTextures[o];this.renderer.texture.unbind(l.parentTextureArray||l)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>s,l=e.height>>s,a=o/e.width;this.setViewport(e.x*a,e.y*a,o,l)}else{const o=t.width>>s,l=t.height>>s;this.setViewport(0,0,o,l)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,s,r){const i=this.viewport;t=Math.round(t),e=Math.round(e),s=Math.round(s),r=Math.round(r),(i.width!==s||i.height!==r||i.x!==t||i.y!==e)&&(i.x=t,i.y=e,i.width=s,i.height=r,this.gl.viewport(t,e,s,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,s,r,i=ql.COLOR|ql.DEPTH){const{gl:o}=this;o.clearColor(t,e,s,r),o.clear(i)}initFramebuffer(t){const{gl:e}=this,s=new d1(e.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:e}=this,s=t.glFramebuffers[this.CONTEXT_UID];if(s.stencil){e.bindRenderbuffer(e.RENDERBUFFER,s.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,s.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const r=t.colorTextures;let i=r.length;e.drawBuffers||(i=Math.min(i,1));for(let o=0;o<i;o++){const l=r[o],a=l.parentTextureArray||l;this.renderer.texture.bind(a,0),o===0&&s.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,s.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,s.multisample,a._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:s}=this,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures;let o=i.length;s.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||s.createRenderbuffer():r.msaaBuffer&&(s.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const l=[];for(let a=0;a<o;a++){const c=i[a],h=c.parentTextureArray||c;this.renderer.texture.bind(h,0),a===0&&r.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,r.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,r.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+a,c.target,h._glTextures[this.CONTEXT_UID].texture,e),l.push(s.COLOR_ATTACHMENT0+a))}if(l.length>1&&s.drawBuffers(l),t.depthTexture&&this.writeDepthTexture){const a=t.depthTexture;this.renderer.texture.bind(a,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){r.stencil=r.stencil||s.createRenderbuffer();let a,c;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,c=s.DEPTH_STENCIL):t.depth&&t.stencil?(a=s.DEPTH_STENCIL_ATTACHMENT,c=s.DEPTH24_STENCIL8):t.depth?(a=s.DEPTH_ATTACHMENT,c=s.DEPTH_COMPONENT24):(a=s.STENCIL_ATTACHMENT,c=s.STENCIL_INDEX8),s.bindRenderbuffer(s.RENDERBUFFER,r.stencil),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,c,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,c,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,r.stencil)}else r.stencil&&(s.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let s=Se.NONE;if(t<=1||e===null)return s;for(let r=0;r<e.length;r++)if(e[r]<=t){s=e[r];break}return s===1&&(s=Se.NONE),s}blit(t,e,s){const{current:r,renderer:i,gl:o,CONTEXT_UID:l}=this;if(i.context.webGLVersion!==2||!r)return;const a=r.glFramebuffers[l];if(!a)return;if(!t){if(!a.msaaBuffer)return;const h=r.colorTextures[0];if(!h)return;a.blitFramebuffer||(a.blitFramebuffer=new uc(r.width,r.height),a.blitFramebuffer.addColorTexture(0,h)),t=a.blitFramebuffer,t.colorTextures[0]!==h&&(t.colorTextures[0]=h,t.dirtyId++,t.dirtyFormat++),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||(e=u1,e.width=r.width,e.height=r.height),s||(s=e);const c=e.width===s.width&&e.height===s.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,a.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,s.left,s.top,s.right,s.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const s=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&r.deleteRenderbuffer(s.msaaBuffer),s.stencil&&r.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<e.length;s++)this.disposeFramebuffer(e[s],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const s=t.width,r=t.height,i=this.gl,o=e.stencil=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o);let l,a;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH_STENCIL):t.depth?(l=i.DEPTH_STENCIL_ATTACHMENT,a=i.DEPTH24_STENCIL8):(l=i.STENCIL_ATTACHMENT,a=i.STENCIL_INDEX8),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,a,s,r):i.renderbufferStorage(i.RENDERBUFFER,a,s,r),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new _t}destroy(){this.renderer=null}}Im.extension={type:it.RendererSystem,name:"framebuffer"};pt.add(Im);const wl={5126:4,5123:2,5121:1};class Rm{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;ct.PREFER_ENV===Or.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=r=>s.bindVertexArrayOES(r),t.deleteVertexArray=r=>s.deleteVertexArrayOES(r)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(r,i)=>s.vertexAttribDivisorANGLE(r,i),t.drawElementsInstanced=(r,i,o,l,a)=>s.drawElementsInstancedANGLE(r,i,o,l,a),t.drawArraysInstanced=(r,i,o,l)=>s.drawArraysInstancedANGLE(r,i,o,l)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:s}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);const o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?s.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const r=t.buffers[s];e.update(r)}}checkCompatibility(t,e){const s=t.attributes,r=e.attributeData;for(const i in r)if(!s[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(t,e){const s=t.attributes,r=e.attributeData,i=["g",t.id];for(const o in s)r[o]&&i.push(o,r[o].location);return i.join("-")}initGeometryVao(t,e,s=!0){const r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,l=e.program;l.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,l);const a=this.getSignature(t,l),c=t.glVertexArrayObjects[this.CONTEXT_UID];let h=c[a];if(h)return c[l.id]=h,h;const d=t.buffers,u=t.attributes,f={},m={};for(const p in d)f[p]=0,m[p]=0;for(const p in u)!u[p].size&&l.attributeData[p]?u[p].size=l.attributeData[p].size:u[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),f[u[p].buffer]+=u[p].size*wl[u[p].type];for(const p in u){const g=u[p],x=g.size;g.stride===void 0&&(f[g.buffer]===x*wl[g.type]?g.stride=0:g.stride=f[g.buffer]),g.start===void 0&&(g.start=m[g.buffer],m[g.buffer]+=x*wl[g.type])}h=r.createVertexArray(),r.bindVertexArray(h);for(let p=0;p<d.length;p++){const g=d[p];o.bind(g),s&&g._glBuffers[i].refCount++}return this.activateVao(t,l),c[l.id]=h,c[a]=h,r.bindVertexArray(null),o.unbind(dn.ARRAY_BUFFER),h}disposeGeometry(t,e){var l;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,i=t.buffers,o=(l=this.renderer)==null?void 0:l.buffer;if(t.disposeRunner.remove(this),!!s){if(o)for(let a=0;a<i.length;a++){const c=i[a]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!e&&o.dispose(i[a],e))}if(!e){for(const a in s)if(a[0]==="g"){const c=s[a];this._activeVao===c&&this.unbind(),r.deleteVertexArray(c)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let s=0;s<e.length;s++)this.disposeGeometry(this.managedGeometries[e[s]],t)}activateVao(t,e){const s=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,l=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);let a=null;for(const c in l){const h=l[c],d=o[h.buffer],u=d._glBuffers[r];if(e.attributeData[c]){a!==u&&(i.bind(d),a=u);const f=e.attributeData[c].location;if(s.enableVertexAttribArray(f),s.vertexAttribPointer(f,h.size,h.type||s.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)s.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,s,r){const{gl:i}=this,o=this._activeGeometry;if(o.indexBuffer){const l=o.indexBuffer.data.BYTES_PER_ELEMENT,a=l===2?i.UNSIGNED_SHORT:i.UNSIGNED_INT;l===2||l===4&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(s||0)*l,r||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(s||0)*l):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,s,e||o.getSize(),r||1):i.drawArrays(t,s,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Rm.extension={type:it.RendererSystem,name:"geometry"};pt.add(Rm);const Bu=new Ht;class Mm{constructor(t,e){this._texture=t,this.mapCoord=new Ht,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const s=this.mapCoord;for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];e[r]=i*s.a+o*s.c+s.tx,e[r+1]=i*s.b+o*s.d+s.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const s=e._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const r=e.orig,i=e.trim;i&&(Bu.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Bu));const o=e.baseTexture,l=this.uClampFrame,a=this.clampMargin/o.resolution,c=this.clampOffset;return l[0]=(e._frame.x+a+c)/o.width,l[1]=(e._frame.y+a+c)/o.height,l[2]=(e._frame.x+e._frame.width-a+c)/o.width,l[3]=(e._frame.y+e._frame.height-a+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var f1=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,m1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class p1 extends Ke{constructor(t,e,s){let r=null;typeof t!="string"&&e===void 0&&s===void 0&&(r=t,t=void 0,e=void 0,s=void 0),super(t||m1,e||f1,s),this.maskSprite=r,this.maskMatrix=new Ht}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,s,r){const i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Mm(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,s,r))}}class g1{constructor(t=null){this.type=Te.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ke.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Te.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class Pm{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let s=e;if(!s.isMaskData){const i=this.maskDataPool.pop()||new g1;i.pooled=!0,i.maskObject=e,s=i}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(r),s._colorMask=r?r._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==Te.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case Te.SCISSOR:this.renderer.scissor.push(s);break;case Te.STENCIL:this.renderer.stencil.push(s);break;case Te.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case Te.COLOR:this.pushColorMask(s);break}s.type===Te.SPRITE&&this.maskStack.push(s)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case Te.SCISSOR:this.renderer.scissor.pop(e);break;case Te.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case Te.SPRITE:this.popSpriteMask(e);break;case Te.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===Te.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=Te.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Te.SCISSOR:t.type=Te.STENCIL:t.type=Te.COLOR}pushSpriteMask(t){const{maskObject:e}=t,s=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new p1])),r[0].resolution=t.resolution,r[0].multisample=t.multisample,r[0].maskSprite=e;const i=s.filterArea;s.filterArea=e.getBounds(!0),this.renderer.filter.push(s,r),s.filterArea=i,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,s=t._colorMask=e&t.colorMask;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const e=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==e&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}Pm.extension={type:it.RendererSystem,name:"mask"};pt.add(Pm);class Nm{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,s=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==s&&(r===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Du=new Ht,Lu=[],Fm=class La extends Nm{constructor(t){super(t),this.glConst=ct.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:s}=t,{renderer:r}=this,i=r.renderTexture,o=s.getBounds(!0,Lu.pop()??new _t);this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:s,c:r,d:i}=t;return(Math.abs(s)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||La.isMatrixRotated(e.worldTransform)||La.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const s=t._scissorRectLocal;return s.width>0&&s.height>0}roundFrameToPixels(t,e,s,r,i){La.isMatrixRotated(i)||(i=i?Du.copyFrom(i):Du.identity(),i.translate(-s.x,-s.y).scale(r.width/s.width,r.height/s.height).translate(r.x,r.y),this.renderer.filter.transformAABB(i,t),t.fit(r),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&Lu.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};Fm.extension={type:it.RendererSystem,name:"scissor"};let x1=Fm;pt.add(x1);class Bm extends Nm{constructor(t){super(t),this.glConst=ct.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:s}=this.renderer,r=t._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const i=t._colorMask;i!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,r,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(t._colorMask=i,s.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=s?s._colorMask:15;r!==0&&(s._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,r!==0&&(s._colorMask=r,e.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Bm.extension={type:it.RendererSystem,name:"stencil"};pt.add(Bm);class Dm{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Nt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return Nt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return Nt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}Dm.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"_plugin"};pt.add(Dm);class Lm{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ht,this.transform=null}update(t,e,s,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,r),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(t,e,s,r){const i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d}setTransform(t){}destroy(){this.renderer=null}}Lm.extension={type:it.RendererSystem,name:"projection"};pt.add(Lm);const b1=new Io,Ou=new _t;class Om{constructor(t){this.renderer=t,this._tempMatrix=new Ht}generateTexture(t,e){const{region:s,...r}=e||{},i=(s==null?void 0:s.copyTo(Ou))||t.getLocalBounds(Ou,!0),o=r.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/o),i.height=Math.max(i.height,1/o),r.width=i.width,r.height=i.height,r.resolution=o,r.multisample??(r.multisample=this.renderer.multisample);const l=Vr.create(r);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const a=t.transform;return t.transform=b1,this.renderer.render(t,{renderTexture:l,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,l}destroy(){}}Om.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"textureGenerator"};pt.add(Om);const mr=new _t,Ii=new _t;class Vm{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new _t,this.destinationFrame=new _t,this.viewportFrame=new _t}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,s){const r=this.renderer;this.current=t;let i,o,l;t?(i=t.baseTexture,l=i.resolution,e||(mr.width=t.frame.width,mr.height=t.frame.height,e=mr),s||(Ii.x=t.frame.x,Ii.y=t.frame.y,Ii.width=e.width,Ii.height=e.height,s=Ii),o=i.framebuffer):(l=r.resolution,e||(mr.width=r._view.screen.width,mr.height=r._view.screen.height,e=mr),s||(s=mr,s.width=e.width,s.height=e.height));const a=this.viewportFrame;a.x=s.x*l,a.y=s.y*l,a.width=s.width*l,a.height=s.height*l,t||(a.y=r.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(o,a),this.renderer.projection.update(s,e,l,!o),t?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(s)}clear(t,e){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=Zt.shared.setValue(t||s);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);const i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,l=i.width!==o.width||i.height!==o.height;if(l){let{x:a,y:c,width:h,height:d}=this.viewportFrame;a=Math.round(a),c=Math.round(c),h=Math.round(h),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,c,h,d)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,e),l&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Vm.extension={type:it.RendererSystem,name:"renderTexture"};pt.add(Vm);class y1{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function w1(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);for(let r=0;r<s;r++){const i=t.getActiveAttrib(n,r);if(i.name.startsWith("gl_"))continue;const o=_m(t,i.type),l={type:o,name:i.name,size:vm(o),location:t.getAttribLocation(n,i.name)};e[i.name]=l}return e}function v1(n,t){const e={},s=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);for(let r=0;r<s;r++){const i=t.getActiveUniform(n,r),o=i.name.replace(/\[.*?\]$/,""),l=!!i.name.match(/\[.*?\]$/),a=_m(t,i.type);e[o]={name:o,index:r,type:a,size:i.size,isArray:l,value:ym(a,i.size)}}return e}function _1(n,t){var l;const e=Iu(n,n.VERTEX_SHADER,t.vertexSrc),s=Iu(n,n.FRAGMENT_SHADER,t.fragmentSrc),r=n.createProgram();n.attachShader(r,e),n.attachShader(r,s);const i=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(i&&(typeof n.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(r,i.names,i.bufferMode==="separate"?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)||Zy(n,r,e,s),t.attributeData=w1(r,n),t.uniformData=v1(r,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const a=Object.keys(t.attributeData);a.sort((c,h)=>c>h?1:-1);for(let c=0;c<a.length;c++)t.attributeData[a[c]].location=c,n.bindAttribLocation(r,c,a[c]);n.linkProgram(r)}n.deleteShader(e),n.deleteShader(s);const o={};for(const a in t.uniformData){const c=t.uniformData[a];o[a]={location:n.getUniformLocation(r,a),value:ym(c.type,c.size)}}return new y1(r,o)}function E1(n,t,e,s,r){e.buffer.update(r)}const S1={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Um={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function T1(n){const t=n.map(i=>({data:i,offset:0,dataLen:0,dirty:0}));let e=0,s=0,r=0;for(let i=0;i<t.length;i++){const o=t[i];if(e=Um[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,s%e!==0&&s<16){const l=s%e%16;s+=l,r+=l}s+e>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=e,s=e):(o.offset=r,s+=e,r+=e)}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}function A1(n,t){const e=[];for(const s in n)t[s]&&e.push(t[s]);return e.sort((s,r)=>s.index-r.index),e}function C1(n,t){if(!n.autoManage)return{size:0,syncFunc:E1};const e=A1(n.uniforms,t),{uboElements:s,size:r}=T1(e),i=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<s.length;o++){const l=s[o],a=n.uniforms[l.data.name],c=l.data.name;let h=!1;for(let d=0;d<li.length;d++){const u=li[d];if(u.codeUbo&&u.test(l.data,a)){i.push(`offset = ${l.offset/4};`,li[d].codeUbo(l.data.name,a)),h=!0;break}}if(!h)if(l.data.size>1){const d=vm(l.data.type),u=Math.max(Um[l.data.type]/16,1),f=d/u,m=(4-f%4)%4;i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};

                t = 0;

                for(var i=0; i < ${l.data.size*u}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${m};
                }

                `)}else{const d=S1[l.data.type];i.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${l.offset/4};
                ${d};
                `)}}return i.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",i.join(`
`))}}let k1=0;const _a={textureCount:0,uboCount:0};class vh{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=k1++}systemCheck(){if(!Jy())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,r=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(r.program)),e||(_a.textureCount=0,_a.uboCount=0,this.syncUniformGroup(t.uniformGroup,_a)),r}setUniforms(t){const e=this.shader.program,s=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,e){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,e))}syncUniforms(t,e,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=Hy(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const r=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,e);t.buffer.update(),r(s.uniformData,t.uniforms,this.renderer,_a,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[e])}createSyncBufferGroup(t,e,s){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const i=this.gl.getUniformBlockIndex(e.program,s);e.uniformBufferBindings[s]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let l=this._uboCache[o];if(l||(l=this._uboCache[o]=C1(t,this.shader.program.uniformData)),t.autoManage){const a=new Float32Array(l.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=l.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,s){const r=t.uniforms,i=[`${s}-`];for(const o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,s=t.program,r=_1(e,s);return s.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}vh.extension={type:it.RendererSystem,name:"shader"};pt.add(vh);class to{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.2 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}to.defaultOptions={hello:!1},to.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"startup"};pt.add(to);function I1(n,t=[]){return t[ht.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.ADD]=[n.ONE,n.ONE],t[ht.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.NONE]=[0,0],t[ht.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],t[ht.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],t[ht.SRC_IN]=[n.DST_ALPHA,n.ZERO],t[ht.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],t[ht.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[ht.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],t[ht.DST_IN]=[n.ZERO,n.SRC_ALPHA],t[ht.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],t[ht.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],t[ht.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],t[ht.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],t}const R1=0,M1=1,P1=2,N1=3,F1=4,B1=5,jm=class fc{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ht.NONE,this._blendEq=!1,this.map=[],this.map[R1]=this.setBlend,this.map[M1]=this.setOffset,this.map[P1]=this.setCullFace,this.map[N1]=this.setDepthTest,this.map[F1]=this.setFrontFace,this.map[B1]=this.setDepthMask,this.checks=[],this.defaultState=new mn,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=I1(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,s=0;for(;e;)e&1&&this.map[s].call(this,!!(t.data&1<<s)),e=e>>1,s++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(fc.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(fc.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],s=this.gl;e.length===2?s.blendFunc(e[0],e[1]):s.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,s.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,s.blendEquationSeparate(s.FUNC_ADD,s.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const s=this.checks.indexOf(t);e&&s===-1?this.checks.push(t):!e&&s!==-1&&this.checks.splice(s,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};jm.extension={type:it.RendererSystem,name:"state"};let D1=jm;pt.add(D1);class L1 extends sa{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(r=>t.systems[r]),s=[...e,...Object.keys(t.systems).filter(r=>!e.includes(r))];for(const r of s)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach(e=>{this.runners[e]=new Gs(e)})}addSystem(t,e){const s=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=s,this._systemsHash[e]=s;for(const r in this.runners)this.runners[r].add(s);return this}emitWithCustomOptions(t,e){const s=Object.keys(this._systemsHash);t.items.forEach(r=>{const i=s.find(o=>this._systemsHash[o]===r);r[t.name](e[i])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Di=class Oa{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Oa.defaultMaxIdle,this.checkCountMax=Oa.defaultCheckCountMax,this.mode=Oa.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==bh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let s=!1;for(let r=0;r<e.length;r++){const i=e[r];i.resource&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,s=!0)}if(s){let r=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[r++]=e[i]);e.length=r}}unload(t){const e=this.renderer.texture,s=t._texture;s&&!s.framebuffer&&e.destroyTexture(s);for(let r=t.children.length-1;r>=0;r--)this.unload(t.children[r])}destroy(){this.renderer=null}};Di.defaultMode=bh.AUTO,Di.defaultMaxIdle=60*60,Di.defaultCheckCountMax=60*10,Di.extension={type:it.RendererSystem,name:"textureGC"};let vr=Di;pt.add(vr);class vl{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=bt.UNSIGNED_BYTE,this.internalFormat=et.RGBA,this.samplerType=0}}function O1(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[n.RGB]:dt.FLOAT,[n.RGBA]:dt.FLOAT,[n.ALPHA]:dt.FLOAT,[n.LUMINANCE]:dt.FLOAT,[n.LUMINANCE_ALPHA]:dt.FLOAT,[n.R8]:dt.FLOAT,[n.R8_SNORM]:dt.FLOAT,[n.RG8]:dt.FLOAT,[n.RG8_SNORM]:dt.FLOAT,[n.RGB8]:dt.FLOAT,[n.RGB8_SNORM]:dt.FLOAT,[n.RGB565]:dt.FLOAT,[n.RGBA4]:dt.FLOAT,[n.RGB5_A1]:dt.FLOAT,[n.RGBA8]:dt.FLOAT,[n.RGBA8_SNORM]:dt.FLOAT,[n.RGB10_A2]:dt.FLOAT,[n.RGB10_A2UI]:dt.FLOAT,[n.SRGB8]:dt.FLOAT,[n.SRGB8_ALPHA8]:dt.FLOAT,[n.R16F]:dt.FLOAT,[n.RG16F]:dt.FLOAT,[n.RGB16F]:dt.FLOAT,[n.RGBA16F]:dt.FLOAT,[n.R32F]:dt.FLOAT,[n.RG32F]:dt.FLOAT,[n.RGB32F]:dt.FLOAT,[n.RGBA32F]:dt.FLOAT,[n.R11F_G11F_B10F]:dt.FLOAT,[n.RGB9_E5]:dt.FLOAT,[n.R8I]:dt.INT,[n.R8UI]:dt.UINT,[n.R16I]:dt.INT,[n.R16UI]:dt.UINT,[n.R32I]:dt.INT,[n.R32UI]:dt.UINT,[n.RG8I]:dt.INT,[n.RG8UI]:dt.UINT,[n.RG16I]:dt.INT,[n.RG16UI]:dt.UINT,[n.RG32I]:dt.INT,[n.RG32UI]:dt.UINT,[n.RGB8I]:dt.INT,[n.RGB8UI]:dt.UINT,[n.RGB16I]:dt.INT,[n.RGB16UI]:dt.UINT,[n.RGB32I]:dt.INT,[n.RGB32UI]:dt.UINT,[n.RGBA8I]:dt.INT,[n.RGBA8UI]:dt.UINT,[n.RGBA16I]:dt.INT,[n.RGBA16UI]:dt.UINT,[n.RGBA32I]:dt.INT,[n.RGBA32UI]:dt.UINT,[n.DEPTH_COMPONENT16]:dt.FLOAT,[n.DEPTH_COMPONENT24]:dt.FLOAT,[n.DEPTH_COMPONENT32F]:dt.FLOAT,[n.DEPTH_STENCIL]:dt.FLOAT,[n.DEPTH24_STENCIL8]:dt.FLOAT,[n.DEPTH32F_STENCIL8]:dt.FLOAT}:t={[n.RGB]:dt.FLOAT,[n.RGBA]:dt.FLOAT,[n.ALPHA]:dt.FLOAT,[n.LUMINANCE]:dt.FLOAT,[n.LUMINANCE_ALPHA]:dt.FLOAT,[n.DEPTH_STENCIL]:dt.FLOAT},t}function V1(n){let t;return"WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?t={[bt.UNSIGNED_BYTE]:{[et.RGBA]:n.RGBA8,[et.RGB]:n.RGB8,[et.RG]:n.RG8,[et.RED]:n.R8,[et.RGBA_INTEGER]:n.RGBA8UI,[et.RGB_INTEGER]:n.RGB8UI,[et.RG_INTEGER]:n.RG8UI,[et.RED_INTEGER]:n.R8UI,[et.ALPHA]:n.ALPHA,[et.LUMINANCE]:n.LUMINANCE,[et.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[bt.BYTE]:{[et.RGBA]:n.RGBA8_SNORM,[et.RGB]:n.RGB8_SNORM,[et.RG]:n.RG8_SNORM,[et.RED]:n.R8_SNORM,[et.RGBA_INTEGER]:n.RGBA8I,[et.RGB_INTEGER]:n.RGB8I,[et.RG_INTEGER]:n.RG8I,[et.RED_INTEGER]:n.R8I},[bt.UNSIGNED_SHORT]:{[et.RGBA_INTEGER]:n.RGBA16UI,[et.RGB_INTEGER]:n.RGB16UI,[et.RG_INTEGER]:n.RG16UI,[et.RED_INTEGER]:n.R16UI,[et.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[bt.SHORT]:{[et.RGBA_INTEGER]:n.RGBA16I,[et.RGB_INTEGER]:n.RGB16I,[et.RG_INTEGER]:n.RG16I,[et.RED_INTEGER]:n.R16I},[bt.UNSIGNED_INT]:{[et.RGBA_INTEGER]:n.RGBA32UI,[et.RGB_INTEGER]:n.RGB32UI,[et.RG_INTEGER]:n.RG32UI,[et.RED_INTEGER]:n.R32UI,[et.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[bt.INT]:{[et.RGBA_INTEGER]:n.RGBA32I,[et.RGB_INTEGER]:n.RGB32I,[et.RG_INTEGER]:n.RG32I,[et.RED_INTEGER]:n.R32I},[bt.FLOAT]:{[et.RGBA]:n.RGBA32F,[et.RGB]:n.RGB32F,[et.RG]:n.RG32F,[et.RED]:n.R32F,[et.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[bt.HALF_FLOAT]:{[et.RGBA]:n.RGBA16F,[et.RGB]:n.RGB16F,[et.RG]:n.RG16F,[et.RED]:n.R16F},[bt.UNSIGNED_SHORT_5_6_5]:{[et.RGB]:n.RGB565},[bt.UNSIGNED_SHORT_4_4_4_4]:{[et.RGBA]:n.RGBA4},[bt.UNSIGNED_SHORT_5_5_5_1]:{[et.RGBA]:n.RGB5_A1},[bt.UNSIGNED_INT_2_10_10_10_REV]:{[et.RGBA]:n.RGB10_A2,[et.RGBA_INTEGER]:n.RGB10_A2UI},[bt.UNSIGNED_INT_10F_11F_11F_REV]:{[et.RGB]:n.R11F_G11F_B10F},[bt.UNSIGNED_INT_5_9_9_9_REV]:{[et.RGB]:n.RGB9_E5},[bt.UNSIGNED_INT_24_8]:{[et.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[bt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[et.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:t={[bt.UNSIGNED_BYTE]:{[et.RGBA]:n.RGBA,[et.RGB]:n.RGB,[et.ALPHA]:n.ALPHA,[et.LUMINANCE]:n.LUMINANCE,[et.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[bt.UNSIGNED_SHORT_5_6_5]:{[et.RGB]:n.RGB},[bt.UNSIGNED_SHORT_4_4_4_4]:{[et.RGBA]:n.RGBA},[bt.UNSIGNED_SHORT_5_5_5_1]:{[et.RGBA]:n.RGBA}},t}class Xm{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Et,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=V1(t),this.samplerTypes=O1(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};const s=new vl(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new vl(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,e=0){const{gl:s}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,s.activeTexture(s.TEXTURE0+e)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<s.length;r++)s[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<s.length;r++)s[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),s[r]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:s,CONTEXT_UID:r}=this;if(s)for(let i=t-1;i>=0;--i){const o=e[i];o&&o._glTextures[r].samplerType!==dt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new vl(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var s;e.internalFormat=((s=this.internalFormats[t.type])==null?void 0:s[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??dt.FLOAT,this.webGLVersion===2&&t.type===bt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var r;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const s=this.renderer;if(this.initTextureType(t,e),(r=t.resource)==null?void 0:r.upload(s,t,e))e.samplerType!==dt.FLOAT&&(this.hasIntegerTextures=!0);else{const i=t.realWidth,o=t.realHeight,l=s.gl;(e.width!==i||e.height!==o||e.dirtyId<0)&&(e.width=i,e.height=o,l.texImage2D(t.target,0,e.internalFormat,i,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const r=this.managedTextures.indexOf(t);r!==-1&&oi(this.managedTextures,r,1)}}updateTextureStyle(t){var s;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===zs.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=rr.CLAMP:e.wrapMode=t.wrapMode,(s=t.resource)!=null&&s.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const s=this.gl;if(e.mipmap&&t.mipmap!==zs.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,e.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===hs.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===hs.LINEAR){const i=Math.min(t.anisotropicLevel,s.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===hs.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===hs.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}Xm.extension={type:it.RendererSystem,name:"texture"};pt.add(Xm);class Gm{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:s,renderer:r}=this;e&&r.shader.bind(e),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:s,CONTEXT_UID:r}=this,i=e.createTransformFeedback();t._glTransformFeedbacks[r]=i,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,i);for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];l&&(s.buffer.update(l),l._glBuffers[r].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,l._glBuffers[r].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),i}disposeTransformFeedback(t,e){const s=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let o=0;o<t.buffers.length;o++){const l=t.buffers[o];if(!l)continue;const a=l._glBuffers[this.CONTEXT_UID];a&&(a.refCount--,a.refCount===0&&!e&&i.dispose(l,e))}s&&(e||r.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Gm.extension={type:it.RendererSystem,name:"transformFeedback"};pt.add(Gm);class eo{constructor(t){this.renderer=t}init(t){this.screen=new _t(0,0,t.width,t.height),this.element=t.view||ct.ADAPTER.createCanvas(),this.resolution=t.resolution||ct.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const s=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=s,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",s,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}eo.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},eo.extension={type:[it.RendererSystem,it.CanvasRendererSystem],name:"_view"};pt.add(eo);ct.PREFER_ENV=Or.WEBGL2;ct.STRICT_TEXTURE_CACHE=!1;ct.RENDER_OPTIONS={...Ja.defaultOptions,...Qa.defaultOptions,...eo.defaultOptions,...to.defaultOptions};Object.defineProperties(ct,{WRAP_MODE:{get(){return Et.defaultOptions.wrapMode},set(n){Nt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Et.defaultOptions.wrapMode=n}},SCALE_MODE:{get(){return Et.defaultOptions.scaleMode},set(n){Nt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Et.defaultOptions.scaleMode=n}},MIPMAP_TEXTURES:{get(){return Et.defaultOptions.mipmap},set(n){Nt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Et.defaultOptions.mipmap=n}},ANISOTROPIC_LEVEL:{get(){return Et.defaultOptions.anisotropicLevel},set(n){Nt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Et.defaultOptions.anisotropicLevel=n}},FILTER_RESOLUTION:{get(){return Nt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ke.defaultResolution},set(n){Ke.defaultResolution=n}},FILTER_MULTISAMPLE:{get(){return Nt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ke.defaultMultisample},set(n){Ke.defaultMultisample=n}},SPRITE_MAX_TEXTURES:{get(){return wr.defaultMaxTextures},set(n){Nt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),wr.defaultMaxTextures=n}},SPRITE_BATCH_SIZE:{get(){return wr.defaultBatchSize},set(n){Nt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),wr.defaultBatchSize=n}},CAN_UPLOAD_SAME_BUFFER:{get(){return wr.canUploadSameBuffer},set(n){Nt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),wr.canUploadSameBuffer=n}},GC_MODE:{get(){return vr.defaultMode},set(n){Nt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),vr.defaultMode=n}},GC_MAX_IDLE:{get(){return vr.defaultMaxIdle},set(n){Nt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),vr.defaultMaxIdle=n}},GC_MAX_CHECK_COUNT:{get(){return vr.defaultCheckCountMax},set(n){Nt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),vr.defaultCheckCountMax=n}},PRECISION_VERTEX:{get(){return kn.defaultVertexPrecision},set(n){Nt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),kn.defaultVertexPrecision=n}},PRECISION_FRAGMENT:{get(){return kn.defaultFragmentPrecision},set(n){Nt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),kn.defaultFragmentPrecision=n}}});var Fr=(n=>(n[n.INTERACTION=50]="INTERACTION",n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(Fr||{});class _l{constructor(t,e=null,s=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=s,this.once=r}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const Ym=class cs{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new _l(null,null,1/0),this.deltaMS=1/cs.targetFPMS,this.elapsedMS=1/cs.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,s=Fr.NORMAL){return this._addListener(new _l(t,e,s))}addOnce(t,e,s=Fr.NORMAL){return this._addListener(new _l(t,e,s,!0))}_addListener(t){let e=this._head.next,s=this._head;if(!e)t.connect(s);else{for(;e;){if(t.priority>e.priority){t.connect(s);break}s=e,e=e.next}t.previous||t.connect(s)}return this._startIfPossible(),this}remove(t,e){let s=this._head.next;for(;s;)s.match(t,e)?s=s.destroy():s=s.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*cs.targetFPMS;const s=this._head;let r=s.next;for(;r;)r=r.emit(this.deltaTime);s.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),s=Math.min(Math.max(0,e)/1e3,cs.targetFPMS);this._maxElapsedMS=1/s}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!cs._shared){const t=cs._shared=new cs;t.autoStart=!0,t._protected=!0}return cs._shared}static get system(){if(!cs._system){const t=cs._system=new cs;t.autoStart=!0,t._protected=!0}return cs._system}};Ym.targetFPMS=.06;let ds=Ym;Object.defineProperties(ct,{TARGET_FPMS:{get(){return ds.targetFPMS},set(n){Nt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),ds.targetFPMS=n}}});class $m{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Fr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?ds.shared:new ds,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}$m.extension=it.Application;pt.add($m);const Wm=[];pt.handleByList(it.Renderer,Wm);function U1(n){for(const t of Wm)if(t.test(n))return new t(n);throw new Error("Unable to auto-detect a suitable renderer.")}var j1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,X1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const G1=j1,zm=X1;class Hm{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}e>=Se.HIGH?this.multisample=Se.HIGH:e>=Se.MEDIUM?this.multisample=Se.MEDIUM:e>=Se.LOW?this.multisample=Se.LOW:this.multisample=Se.NONE}destroy(){}}Hm.extension={type:it.RendererSystem,name:"_multisample"};pt.add(Hm);class Y1{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class qm{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glBuffers[s]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:s,CONTEXT_UID:r}=this;if(this.boundBufferBases[e]!==t){const i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,s.bindBufferBase(s.UNIFORM_BUFFER,e,i.buffer)}}bindBufferRange(t,e,s){const{gl:r,CONTEXT_UID:i}=this;s=s||0;const o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,s*256,256)}update(t){const{gl:e,CONTEXT_UID:s}=this,r=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),s&&(e||r.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let s=0;s<e.length;s++)this.dispose(this.managedBuffers[e[s]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:s}=this;return t._glBuffers[e]=new Y1(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}qm.extension={type:it.RendererSystem,name:"buffer"};pt.add(qm);class Km{constructor(t){this.renderer=t}render(t,e){const s=this.renderer;let r,i,o,l;if(e&&(r=e.renderTexture,i=e.clear,o=e.transform,l=e.skipUpdateTransform),this.renderingToScreen=!r,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(r||(this.lastObjectRendered=t),!l){const a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}s.renderTexture.bind(r),s.batch.currentRenderer.start(),(i??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),r&&(e.blit&&s.framebuffer.blit(),r.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Km.extension={type:it.RendererSystem,name:"objectRenderer"};pt.add(Km);const Va=class mc extends L1{constructor(t){super(),this.type=im.WEBGL,t=Object.assign({},ct.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ys({projectionMatrix:new Ht},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:mc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(Nt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=mc.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:fy()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Nt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Nt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Nt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Nt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){Nt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return Nt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){Nt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return Nt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Va.extension={type:it.Renderer,priority:1},Va.__plugins={},Va.__systems={};let _h=Va;pt.handleByMap(it.RendererPlugin,_h.__plugins);pt.handleByMap(it.RendererSystem,_h.__systems);pt.add(_h);class Zm extends Zi{constructor(t,e){const{width:s,height:r}=e||{};super(s,r),this.items=[],this.itemDirtyIds=[];for(let i=0;i<t;i++){const o=new Et;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof Zi?this.addResourceAt(t[s],s):this.addResourceAt(gm(t[s],e),s))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:s}=this.items[0];return this.resize(e,s),this.update(),Promise.resolve(this)}),this._load}}class $1 extends Zm{constructor(t,e){const{width:s,height:r}=e||{};let i,o;Array.isArray(t)?(i=t,o=t.length):o=t,super(o,{width:s,height:r}),i&&this.initFromArray(i,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=ai.TEXTURE_2D_ARRAY}upload(t,e,s){const{length:r,itemDirtyIds:i,items:o}=this,{gl:l}=t;s.dirtyId<0&&l.texImage3D(l.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,r,0,e.format,s.type,null);for(let a=0;a<r;a++){const c=o[a];i[a]<c.dirtyId&&(i[a]=c.dirtyId,c.valid&&l.texSubImage3D(l.TEXTURE_2D_ARRAY,0,0,0,a,c.resource.width,c.resource.height,1,e.format,s.type,c.resource.source))}return!0}}class W1 extends Pn{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Qm=class Li extends Zm{constructor(t,e){const{width:s,height:r,autoLoad:i,linkBaseTexture:o}=e||{};if(t&&t.length!==Li.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:s,height:r});for(let l=0;l<Li.SIDES;l++)this.items[l].target=ai.TEXTURE_CUBE_MAP_POSITIVE_X+l;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=ai.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,s){if(s===void 0&&(s=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=ai.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,s){const r=this.itemDirtyIds;for(let i=0;i<Li.SIDES;i++){const o=this.items[i];(r[i]<o.dirtyId||s.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,s),r[i]=o.dirtyId):r[i]<-1&&(t.gl.texImage2D(o.target,0,s.internalFormat,e.realWidth,e.realHeight,0,e.format,s.type,null),r[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===Li.SIDES}};Qm.SIDES=6;let z1=Qm;class ri extends Pn{constructor(t,e){e=e||{};let s,r,i;typeof t=="string"?(s=ri.EMPTY,r=t,i=!0):(s=t,r=null,i=!1),super(s),this.url=r,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??i,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const s=await ct.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await s.blob();if(this.destroyed)return;const i=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===qe.UNPACK?"premultiply":"none"});if(this.destroyed){i.close();return}this.source=i,this.update(),t(this)}catch(s){if(this.destroyed)return;e(s),this.onError.emit(s)}}),this._load)}upload(t,e,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,s)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return ri._EMPTY=ri._EMPTY??ct.ADAPTER.createCanvas(0,0),ri._EMPTY}}const pc=class Ua extends Pn{constructor(t,e){e=e||{},super(ct.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Ua.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Pn.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,s=t.height;if(!e||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let r=e*this.scale,i=s*this.scale;(this._overrideWidth||this._overrideHeight)&&(r=this._overrideWidth||this._overrideHeight/s*e,i=this._overrideHeight||this._overrideWidth/e*s),r=Math.round(r),i=Math.round(i);const o=this.source;o.width=r,o.height=i,o._pixiId=`canvas_${Nr()}`,o.getContext("2d").drawImage(t,0,0,e,s,0,0,r,i),this._resolve(),this._resolve=null}}static getSize(t){const e=Ua.SVG_SIZE.exec(t),s={};return e&&(s[e[1]]=Math.round(parseFloat(e[3])),s[e[5]]=Math.round(parseFloat(e[7]))),s}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Ua.SVG_XML.test(t)}};pc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,pc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let gc=pc;class H1 extends Pn{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const xc=class bc extends Pn{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const s=document.createElement("video");e.autoLoad!==!1&&s.setAttribute("preload","auto"),e.playsinline!==!1&&(s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline","")),e.muted===!0&&(s.setAttribute("muted",""),s.muted=!0),e.loop===!0&&s.setAttribute("loop",""),e.autoPlay!==!1&&s.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const r=t[0].src||t[0];Pn.crossOrigin(s,r,e.crossorigin);for(let i=0;i<t.length;++i){const o=document.createElement("source");let{src:l,mime:a}=t[i];if(l=l||t[i],l.startsWith("data:"))a=l.slice(5,l.indexOf(";"));else if(!l.startsWith("blob:")){const c=l.split("?").shift().toLowerCase(),h=c.slice(c.lastIndexOf(".")+1);a=a||bc.MIME_TYPES[h]||`video/${h}`}o.src=l,a&&(o.type=a),s.appendChild(o)}t=s}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=ds.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,s)=>{this.valid?e(this):(this._resolve=e,this._reject=s,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(ds.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(ds.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(ds.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||bc.TYPES.includes(e)}};xc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],xc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Jm=xc;rc.push(ri,Tm,W1,Jm,H1,gc,To,z1,$1);const q1={vec3(n,t,e,s){(e[0]!==s[0]||e[1]!==s[1]||e[2]!==s[2])&&(e[0]=s[0],e[1]=s[1],e[2]=s[2],n.uniform3f(t,s[0],s[1],s[2]))},int(n,t,e,s){n.uniform1i(t,s)},ivec2(n,t,e,s){n.uniform2i(t,s[0],s[1])},ivec3(n,t,e,s){n.uniform3i(t,s[0],s[1],s[2])},ivec4(n,t,e,s){n.uniform4i(t,s[0],s[1],s[2],s[3])},uint(n,t,e,s){n.uniform1ui(t,s)},uvec2(n,t,e,s){n.uniform2ui(t,s[0],s[1])},uvec3(n,t,e,s){n.uniform3ui(t,s[0],s[1],s[2])},uvec4(n,t,e,s){n.uniform4ui(t,s[0],s[1],s[2],s[3])},bvec2(n,t,e,s){n.uniform2i(t,s[0],s[1])},bvec3(n,t,e,s){n.uniform3i(t,s[0],s[1],s[2])},bvec4(n,t,e,s){n.uniform4i(t,s[0],s[1],s[2],s[3])},mat2(n,t,e,s){n.uniformMatrix2fv(t,!1,s)},mat4(n,t,e,s){n.uniformMatrix4fv(t,!1,s)}},K1={float(n,t,e,s){n.uniform1fv(t,s)},vec2(n,t,e,s){n.uniform2fv(t,s)},vec3(n,t,e,s){n.uniform3fv(t,s)},vec4(n,t,e,s){n.uniform4fv(t,s)},int(n,t,e,s){n.uniform1iv(t,s)},ivec2(n,t,e,s){n.uniform2iv(t,s)},ivec3(n,t,e,s){n.uniform3iv(t,s)},ivec4(n,t,e,s){n.uniform4iv(t,s)},uint(n,t,e,s){n.uniform1uiv(t,s)},uvec2(n,t,e,s){n.uniform2uiv(t,s)},uvec3(n,t,e,s){n.uniform3uiv(t,s)},uvec4(n,t,e,s){n.uniform4uiv(t,s)},bool(n,t,e,s){n.uniform1iv(t,s)},bvec2(n,t,e,s){n.uniform2iv(t,s)},bvec3(n,t,e,s){n.uniform3iv(t,s)},bvec4(n,t,e,s){n.uniform4iv(t,s)},sampler2D(n,t,e,s){n.uniform1iv(t,s)},samplerCube(n,t,e,s){n.uniform1iv(t,s)},sampler2DArray(n,t,e,s){n.uniform1iv(t,s)}};function Z1(n,t,e,s,r){let i=0,o=null,l=null;const a=r.gl;for(const c in n.uniforms){const h=t[c],d=s[c],u=e[c],f=n.uniforms[c];if(!h){f.group===!0&&r.shader.syncUniformGroup(d);continue}h.type==="float"&&h.size===1&&!h.isArray?d!==u.value&&(u.value=d,a.uniform1f(u.location,d)):h.type==="bool"&&h.size===1&&!h.isArray?d!==u.value&&(u.value=d,a.uniform1i(u.location,Number(d))):(h.type==="sampler2D"||h.type==="samplerCube"||h.type==="sampler2DArray")&&h.size===1&&!h.isArray?(r.texture.bind(d,i),u.value!==i&&(u.value=i,a.uniform1i(u.location,i)),i++):h.type==="mat3"&&h.size===1&&!h.isArray?f.a!==void 0?a.uniformMatrix3fv(u.location,!1,d.toArray(!0)):a.uniformMatrix3fv(u.location,!1,d):h.type==="vec2"&&h.size===1&&!h.isArray?f.x!==void 0?(l=u.value,o=d,(l[0]!==o.x||l[1]!==o.y)&&(l[0]=o.x,l[1]=o.y,a.uniform2f(u.location,o.x,o.y))):(l=u.value,o=d,(l[0]!==o[0]||l[1]!==o[1])&&(l[0]=o[0],l[1]=o[1],a.uniform2f(u.location,o[0],o[1]))):h.type==="vec4"&&h.size===1&&!h.isArray?f.width!==void 0?(l=u.value,o=d,(l[0]!==o.x||l[1]!==o.y||l[2]!==o.width||l[3]!==o.height)&&(l[0]=o.x,l[1]=o.y,l[2]=o.width,l[3]=o.height,a.uniform4f(u.location,o.x,o.y,o.width,o.height))):(l=u.value,o=d,(l[0]!==o[0]||l[1]!==o[1]||l[2]!==o[2]||l[3]!==o[3])&&(l[0]=o[0],l[1]=o[1],l[2]=o[2],l[3]=o[3],a.uniform4f(u.location,o[0],o[1],o[2],o[3]))):(h.size===1&&!h.isArray?q1:K1)[h.type].call(null,a,u.location,u.value,d)}}function Q1(){Object.assign(vh.prototype,{systemCheck(){},syncUniforms(n,t){const{shader:e,renderer:s}=this;Z1(n,e.program.uniformData,t.uniformData,n.uniforms,s)}})}Q1();class so{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?_t.EMPTY:(t=t||new _t(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:s,b:r,c:i,d:o,tx:l,ty:a}=t,c=s*e.x+i*e.y+l,h=r*e.x+o*e.y+a;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(t){let e=this.minX,s=this.minY,r=this.maxX,i=this.maxY,o=t[0],l=t[1];e=o<e?o:e,s=l<s?l:s,r=o>r?o:r,i=l>i?l:i,o=t[2],l=t[3],e=o<e?o:e,s=l<s?l:s,r=o>r?o:r,i=l>i?l:i,o=t[4],l=t[5],e=o<e?o:e,s=l<s?l:s,r=o>r?o:r,i=l>i?l:i,o=t[6],l=t[7],e=o<e?o:e,s=l<s?l:s,r=o>r?o:r,i=l>i?l:i,this.minX=e,this.minY=s,this.maxX=r,this.maxY=i}addFrame(t,e,s,r,i){this.addFrameMatrix(t.worldTransform,e,s,r,i)}addFrameMatrix(t,e,s,r,i){const o=t.a,l=t.b,a=t.c,c=t.d,h=t.tx,d=t.ty;let u=this.minX,f=this.minY,m=this.maxX,p=this.maxY,g=o*e+a*s+h,x=l*e+c*s+d;u=g<u?g:u,f=x<f?x:f,m=g>m?g:m,p=x>p?x:p,g=o*r+a*s+h,x=l*r+c*s+d,u=g<u?g:u,f=x<f?x:f,m=g>m?g:m,p=x>p?x:p,g=o*e+a*i+h,x=l*e+c*i+d,u=g<u?g:u,f=x<f?x:f,m=g>m?g:m,p=x>p?x:p,g=o*r+a*i+h,x=l*r+c*i+d,u=g<u?g:u,f=x<f?x:f,m=g>m?g:m,p=x>p?x:p,this.minX=u,this.minY=f,this.maxX=m,this.maxY=p}addVertexData(t,e,s){let r=this.minX,i=this.minY,o=this.maxX,l=this.maxY;for(let a=e;a<s;a+=2){const c=t[a],h=t[a+1];r=c<r?c:r,i=h<i?h:i,o=c>o?c:o,l=h>l?h:l}this.minX=r,this.minY=i,this.maxX=o,this.maxY=l}addVertices(t,e,s,r){this.addVerticesMatrix(t.worldTransform,e,s,r)}addVerticesMatrix(t,e,s,r,i=0,o=i){const l=t.a,a=t.b,c=t.c,h=t.d,d=t.tx,u=t.ty;let f=this.minX,m=this.minY,p=this.maxX,g=this.maxY;for(let x=s;x<r;x+=2){const b=e[x],y=e[x+1],w=l*b+c*y+d,_=h*y+a*b+u;f=Math.min(f,w-i),p=Math.max(p,w+i),m=Math.min(m,_-o),g=Math.max(g,_+o)}this.minX=f,this.minY=m,this.maxX=p,this.maxY=g}addBounds(t){const e=this.minX,s=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i}addBoundsMask(t,e){const s=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(s<=i&&r<=o){const l=this.minX,a=this.minY,c=this.maxX,h=this.maxY;this.minX=s<l?s:l,this.minY=r<a?r:a,this.maxX=i>c?i:c,this.maxY=o>h?o:h}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const s=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(s<=i&&r<=o){const l=this.minX,a=this.minY,c=this.maxX,h=this.maxY;this.minX=s<l?s:l,this.minY=r<a?r:a,this.maxX=i>c?i:c,this.maxY=o>h?o:h}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,s,r,i,o){t-=i,e-=o,s+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r}}class me extends sa{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Io,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new so,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let s=0;s<e.length;++s){const r=e[s];Object.defineProperty(me.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new _t),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new _t),t=this._localBoundsRect),this._localBounds||(this._localBounds=new so);const e=this.transform,s=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(s==null?void 0:s.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=s,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o}toGlobal(t,e,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,s,r){return e&&(t=e.toGlobal(t,s,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,s=1,r=1,i=0,o=0,l=0,a=0,c=0){return this.position.x=t,this.position.y=e,this.scale.x=s||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=l,this.pivot.x=a,this.pivot.y=c,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new J1),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*jy}set angle(t){this.transform.rotation=t*Xy}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class J1 extends me{constructor(){super(...arguments),this.sortDirty=null}}me.prototype.displayObjectUpdateTransform=me.prototype.updateTransform;const tw=new Ht;function ew(n,t){return n.zIndex===t.zIndex?n._lastSortedIndex-t._lastSortedIndex:n.zIndex-t.zIndex}const tp=class yc extends me{constructor(){super(),this.children=[],this.sortableChildren=yc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const s=this.getChildIndex(t),r=this.getChildIndex(e);this.children[s]=e,this.children[r]=t,this.onChildrenChange(s<r?s:r)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const s=this.getChildIndex(t);oi(this.children,s,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],s=this.children.indexOf(e);if(s===-1)return null;e.parent=null,e.transform._parentID=-1,oi(this.children,s,1),this._boundsID++,this.onChildrenChange(s),e.emit("removed",this),this.emit("childRemoved",e,this,s)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,oi(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const s=t,r=e,i=r-s;let o;if(i>0&&i<=r){o=this.children.splice(s,i);for(let l=0;l<o.length;++l)o[l].parent=null,o[l].transform&&(o[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let l=0;l<o.length;++l)o[l].emit("removed",this),this.emit("childRemoved",o[l],this,l);return o}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,s=this.children.length;e<s;++e){const r=this.children[e];r._lastSortedIndex=e,!t&&r.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(ew),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const s=this.children[t];s.visible&&s.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const s=e._mask.isMaskData?e._mask.maskObject:e._mask;s?(s.calculateBounds(),this._bounds.addBoundsMask(e._bounds,s._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const s=super.getLocalBounds(t);if(!e)for(let r=0,i=this.children.length;r<i;++r){const o=this.children[r];o.visible&&o.updateTransform()}return s}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let s,r;this.cullArea?(s=this.cullArea,r=this.worldTransform):this._render!==yc.prototype._render&&(s=this.getBounds(!0));const i=t.projection.transform;if(i&&(r?(r=tw.copyFrom(r),r.prepend(i)):r=i),s&&e.intersects(s,r))this._render(t);else if(this.cullArea)return;for(let o=0,l=this.children.length;o<l;++o){const a=this.children[o],c=a.cullable;a.cullable=c||!this.cullArea,a.render(t),a.cullable=c}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let s=0,r=this.children.length;s<r;++s)this.children[s].render(t)}}renderAdvanced(t){var i,o,l;const e=this.filters,s=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const r=e&&((i=this._enabledFilters)==null?void 0:i.length)||s&&(!s.isMaskData||s.enabled&&(s.autoDetect||s.type!==Te.NONE));if(r&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),s&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,c=this.children.length;a<c;++a)this.children[a].render(t)}r&&t.batch.flush(),s&&t.mask.pop(this),e&&((l=this._enabledFilters)!=null&&l.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,s=this.removeChildren(0,this.children.length);if(e)for(let r=0;r<s.length;++r)s[r].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};tp.defaultSortableChildren=!1;let Ze=tp;Ze.prototype.containerUpdateTransform=Ze.prototype.updateTransform;Object.defineProperties(ct,{SORTABLE_CHILDREN:{get(){return Ze.defaultSortableChildren},set(n){Nt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ze.defaultSortableChildren=n}}});const Ri=new jt,sw=new Uint16Array([0,1,2,0,2,3]);class Ur extends Ze{constructor(t){super(),this._anchor=new Cn(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Zt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=ht.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||ut.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=sw,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ct.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=er(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=er(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,s=e.a,r=e.b,i=e.c,o=e.d,l=e.tx,a=e.ty,c=this.vertexData,h=t.trim,d=t.orig,u=this._anchor;let f=0,m=0,p=0,g=0;if(h?(m=h.x-u._x*d.width,f=m+h.width,g=h.y-u._y*d.height,p=g+h.height):(m=-u._x*d.width,f=m+d.width,g=-u._y*d.height,p=g+d.height),c[0]=s*m+i*g+l,c[1]=o*g+r*m+a,c[2]=s*f+i*g+l,c[3]=o*g+r*f+a,c[4]=s*f+i*p+l,c[5]=o*p+r*f+a,c[6]=s*m+i*p+l,c[7]=o*p+r*m+a,this._roundPixels){const x=ct.RESOLUTION;for(let b=0;b<c.length;++b)c[b]=Math.round(c[b]*x)/x}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,s=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,l=i.b,a=i.c,c=i.d,h=i.tx,d=i.ty,u=-r._x*s.width,f=u+s.width,m=-r._y*s.height,p=m+s.height;if(e[0]=o*u+a*m+h,e[1]=c*m+l*u+d,e[2]=o*f+a*m+h,e[3]=c*m+l*f+d,e[4]=o*f+a*p+h,e[5]=c*p+l*f+d,e[6]=o*u+a*p+h,e[7]=c*p+l*u+d,this._roundPixels){const g=ct.RESOLUTION;for(let x=0;x<e.length;++x)e[x]=Math.round(e[x]*g)/g}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new so),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new _t),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Ri);const e=this._texture.orig.width,s=this._texture.orig.height,r=-e*this.anchor.x;let i=0;return Ri.x>=r&&Ri.x<r+e&&(i=-s*this.anchor.y,Ri.y>=i&&Ri.y<i+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const s=t instanceof ut?t:ut.from(t,e);return new Ur(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=er(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=er(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||ut.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const ep=new Ht;me.prototype._cacheAsBitmap=!1;me.prototype._cacheData=null;me.prototype._cacheAsBitmapResolution=null;me.prototype._cacheAsBitmapMultisample=null;class nw{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(me.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;this._cacheAsBitmap=n;let t;n?(this._cacheData||(this._cacheData=new nw),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});me.prototype._renderCached=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(n),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(n))};me.prototype._initCachedDisplayObject=function(n){var u,f;if((u=this._cacheData)!=null&&u.sprite)return;const t=this.alpha;this.alpha=1,n.batch.flush();const e=this.getLocalBounds(new _t,!0);if((f=this.filters)!=null&&f.length){const m=this.filters[0].padding;e.pad(m)}const s=this.cacheAsBitmapResolution||n.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const r=n.renderTexture.current,i=n.renderTexture.sourceFrame.clone(),o=n.renderTexture.destinationFrame.clone(),l=n.projection.transform,a=Vr.create({width:e.width,height:e.height,resolution:s,multisample:this.cacheAsBitmapMultisample??n.multisample}),c=`cacheAsBitmap_${Nr()}`;this._cacheData.textureCacheId=c,Et.addToCache(a.baseTexture,c),ut.addToCache(a,c);const h=this.transform.localTransform.copyTo(ep).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,n.render(this,{renderTexture:a,clear:!0,transform:h,skipUpdateTransform:!1}),n.framebuffer.blit(),n.projection.transform=l,n.renderTexture.bind(r,i,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const d=new Ur(a);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(e.x/e.width),d.anchor.y=-(e.y/e.height),d.alpha=t,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};me.prototype._renderCachedCanvas=function(n){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(n),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(n))};me.prototype._initCachedDisplayObjectCanvas=function(n){var h;if((h=this._cacheData)!=null&&h.sprite)return;const t=this.getLocalBounds(new _t,!0),e=this.alpha;this.alpha=1;const s=n.canvasContext.activeContext,r=n._projTransform,i=this.cacheAsBitmapResolution||n.resolution;t.ceil(i),t.width=Math.max(t.width,1/i),t.height=Math.max(t.height,1/i);const o=Vr.create({width:t.width,height:t.height,resolution:i}),l=`cacheAsBitmap_${Nr()}`;this._cacheData.textureCacheId=l,Et.addToCache(o.baseTexture,l),ut.addToCache(o,l);const a=ep;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=t.x,a.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,n.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),n.canvasContext.activeContext=s,n._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Ur(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(t.x/t.width),c.anchor.y=-(t.y/t.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=n._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};me.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};me.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};me.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Et.removeFromCache(this._cacheData.textureCacheId),ut.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};me.prototype._cacheAsBitmapDestroy=function(n){this.cacheAsBitmap=!1,this.destroy(n)};me.prototype.name=null;Ze.prototype.getChildByName=function(n,t){for(let e=0,s=this.children.length;e<s;e++)if(this.children[e].name===n)return this.children[e];if(t)for(let e=0,s=this.children.length;e<s;e++){const r=this.children[e];if(!r.getChildByName)continue;const i=r.getChildByName(n,!0);if(i)return i}return null};me.prototype.getGlobalPosition=function(n=new jt,t=!1){return this.parent?this.parent.toGlobal(this.position,n,t):(n.x=this.position.x,n.y=this.position.y),n};var rw=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class iw extends Ke{constructor(t=1){super(G1,rw,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const aw={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ow=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function lw(n){const t=aw[n],e=t.length;let s=ow,r="";const i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let l=0;l<n;l++){let a=i.replace("%index%",l.toString());o=l,l>=e&&(o=n-l-1),a=a.replace("%value%",t[o].toString()),r+=a,r+=`
`}return s=s.replace("%blur%",r),s=s.replace("%size%",n.toString()),s}const cw=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function hw(n,t){const e=Math.ceil(n/2);let s=cw,r="",i;t?i="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":i="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<n;o++){let l=i.replace("%index%",o.toString());l=l.replace("%sampleIndex%",`${o-(e-1)}.0`),r+=l,r+=`
`}return s=s.replace("%blur%",r),s=s.replace("%size%",n.toString()),s}class wc extends Ke{constructor(t,e=8,s=4,r=Ke.defaultResolution,i=5){const o=hw(i,t),l=lw(i);super(o,l),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=s,this.blur=e}apply(t,e,s,r){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/e.width):this.uniforms.strength=1/s.height*(s.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,s,r);else{const i=t.getFilterTexture(),o=t.renderer;let l=e,a=i;this.state.blend=!1,t.applyFilter(this,l,a,hn.CLEAR);for(let c=1;c<this.passes-1;c++){t.bindAndClear(l,hn.BLIT),this.uniforms.uSampler=a;const h=a;a=l,l=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,s,r),t.returnFilterTexture(i)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class dw extends Ke{constructor(t=8,e=4,s=Ke.defaultResolution,r=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new wc(!0,t,e,s,r),this.blurYFilter=new wc(!1,t,e,s,r),this.resolution=s,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,s,r){const i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){const l=t.getFilterTexture();this.blurXFilter.apply(t,e,l,hn.CLEAR),this.blurYFilter.apply(t,l,s,r),t.returnFilterTexture(l)}else o?this.blurYFilter.apply(t,e,s,r):this.blurXFilter.apply(t,e,s,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var uw=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class vc extends Ke{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(zm,uw,t),this.alpha=1}_loadMatrix(t,e=!1){let s=t;e&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,e,s){return t[0]=e[0]*s[0]+e[1]*s[5]+e[2]*s[10]+e[3]*s[15],t[1]=e[0]*s[1]+e[1]*s[6]+e[2]*s[11]+e[3]*s[16],t[2]=e[0]*s[2]+e[1]*s[7]+e[2]*s[12]+e[3]*s[17],t[3]=e[0]*s[3]+e[1]*s[8]+e[2]*s[13]+e[3]*s[18],t[4]=e[0]*s[4]+e[1]*s[9]+e[2]*s[14]+e[3]*s[19]+e[4],t[5]=e[5]*s[0]+e[6]*s[5]+e[7]*s[10]+e[8]*s[15],t[6]=e[5]*s[1]+e[6]*s[6]+e[7]*s[11]+e[8]*s[16],t[7]=e[5]*s[2]+e[6]*s[7]+e[7]*s[12]+e[8]*s[17],t[8]=e[5]*s[3]+e[6]*s[8]+e[7]*s[13]+e[8]*s[18],t[9]=e[5]*s[4]+e[6]*s[9]+e[7]*s[14]+e[8]*s[19]+e[9],t[10]=e[10]*s[0]+e[11]*s[5]+e[12]*s[10]+e[13]*s[15],t[11]=e[10]*s[1]+e[11]*s[6]+e[12]*s[11]+e[13]*s[16],t[12]=e[10]*s[2]+e[11]*s[7]+e[12]*s[12]+e[13]*s[17],t[13]=e[10]*s[3]+e[11]*s[8]+e[12]*s[13]+e[13]*s[18],t[14]=e[10]*s[4]+e[11]*s[9]+e[12]*s[14]+e[13]*s[19]+e[14],t[15]=e[15]*s[0]+e[16]*s[5]+e[17]*s[10]+e[18]*s[15],t[16]=e[15]*s[1]+e[16]*s[6]+e[17]*s[11]+e[18]*s[16],t[17]=e[15]*s[2]+e[16]*s[7]+e[17]*s[12]+e[18]*s[17],t[18]=e[15]*s[3]+e[16]*s[8]+e[17]*s[13]+e[18]*s[18],t[19]=e[15]*s[4]+e[16]*s[9]+e[17]*s[14]+e[18]*s[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}tint(t,e){const[s,r,i]=Zt.shared.setValue(t).toArray(),o=[s,0,0,0,0,0,r,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const s=Math.cos(t),r=Math.sin(t),i=Math.sqrt,o=1/3,l=i(o),a=s+(1-s)*o,c=o*(1-s)-l*r,h=o*(1-s)+l*r,d=o*(1-s)+l*r,u=s+o*(1-s),f=o*(1-s)-l*r,m=o*(1-s)-l*r,p=o*(1-s)+l*r,g=s+o*(1-s),x=[a,c,h,0,0,d,u,f,0,0,m,p,g,0,0,0,0,0,1,0];this._loadMatrix(x,e)}contrast(t,e){const s=(t||0)+1,r=-.5*(s-1),i=[s,0,0,0,r,0,s,0,0,r,0,0,s,0,r,0,0,0,1,0];this._loadMatrix(i,e)}saturate(t=0,e){const s=t*2/3+1,r=(s-1)*-.5,i=[s,r,r,0,0,r,s,r,0,0,r,r,s,0,0,0,0,0,1,0];this._loadMatrix(i,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,s,r,i){t=t||.2,e=e||.15,s=s||16770432,r=r||3375104;const o=Zt.shared,[l,a,c]=o.setValue(s).toArray(),[h,d,u]=o.setValue(r).toArray(),f=[.3,.59,.11,0,0,l,a,c,t,0,h,d,u,e,0,l-h,a-d,c-u,0,0];this._loadMatrix(f,i)}night(t,e){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,e)}predator(t,e){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}vc.prototype.grayscale=vc.prototype.greyscale;var fw=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,mw=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class pw extends Ke{constructor(t,e){const s=new Ht;t.renderable=!1,super(mw,fw,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,e==null&&(e=20),this.scale=new jt(e,e)}apply(t,e,s,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),l=Math.sqrt(i.c*i.c+i.d*i.d);o!==0&&l!==0&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/l,this.uniforms.rotation[3]=i.d/l),t.applyFilter(this,e,s,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var gw=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,xw=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class bw extends Ke{constructor(){super(xw,gw)}}var yw=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class ww extends Ke{constructor(t=.5,e=Math.random()){super(zm,yw,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Vu={AlphaFilter:iw,BlurFilter:dw,BlurFilterPass:wc,ColorMatrixFilter:vc,DisplacementFilter:pw,FXAAFilter:bw,NoiseFilter:ww};Object.entries(Vu).forEach(([n,t])=>{Object.defineProperty(Vu,n,{get(){return Nt("7.1.0",`filters.${n} has moved to ${n}`),t}})});class vw{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(ds.system.add(this.tickerUpdate,this,Fr.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(ds.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Qn=new vw;class na{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=na.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new jt,this.page=new jt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,s,r,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class no extends na{constructor(){super(...arguments),this.client=new jt,this.movement=new jt,this.offset=new jt,this.global=new jt,this.screen=new jt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,s){return t.worldTransform.applyInverse(s||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,s,r,i,o,l,a,c,h,d,u,f,m,p){throw new Error("Method not implemented.")}}class Is extends no{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ci extends no{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ci.DOM_DELTA_PIXEL=0,ci.DOM_DELTA_LINE=1,ci.DOM_DELTA_PAGE=2;const _w=2048,Ew=new jt,El=new jt;class Sw{constructor(t){this.dispatch=new sa,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((s,r)=>s.priority-r.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let s=0,r=e.length;s<r;s++)e[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){Qn.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",r=this[s](this.rootTarget,this.rootTarget.eventMode,Ew.set(t,e),this.hitTestFn,this.hitPruneFn);return r&&r[0]}propagate(t,e){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,i=s.length-1;r<i;r++)if(t.currentTarget=s[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=s.length-2;r>=0;r--)if(t.currentTarget=s[r],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const r=Array.isArray(e)?e:[e];for(let i=s.length-1;i>=0;i--)r.forEach(o=>{t.currentTarget=s[i],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let s=0;s<_w&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,s,r,i,o=!1){let l=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Qn.pauseUpdate=!1),t.interactiveChildren&&t.children){const h=t.children;for(let d=h.length-1;d>=0;d--){const u=h[d],f=this.hitTestMoveRecursive(u,this._isInteractive(e)?e:u.eventMode,s,r,i,o||i(t,s));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const m=t.isInteractive();(f.length>0||m)&&(m&&this._allInteractiveElements.push(t),f.push(t)),this._hitElements.length===0&&(this._hitElements=f),l=!0}}}const a=this._isInteractive(e),c=t.isInteractive();return a&&c&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:l?this._hitElements:a&&!i(t,s)&&r(t,s)?c?[t]:[]:null}hitTestRecursive(t,e,s,r,i){if(this._interactivePrune(t)||i(t,s))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(Qn.pauseUpdate=!1),t.interactiveChildren&&t.children){const a=t.children;for(let c=a.length-1;c>=0;c--){const h=a[c],d=this.hitTestRecursive(h,this._isInteractive(e)?e:h.eventMode,s,r,i);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const u=t.isInteractive();return(d.length>0||u)&&d.push(t),d}}}const o=this._isInteractive(e),l=t.isInteractive();return o&&r(t,s)?l?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var s;if(t.hitArea&&(t.worldTransform.applyInverse(e,El),!t.hitArea.contains(El.x,El.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!((s=r.containsPoint)!=null&&s.call(r,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var i,o;e=e??t.type;const s=`on${e}`;(o=(i=t.currentTarget)[s])==null||o.call(i,t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const r=e.button===2;this.dispatchEvent(e,r?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var a,c;if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=e.pointerType==="mouse"||e.pointerType==="pen",r=this.trackingData(t.pointerId),i=this.findMountedTarget(r.overTargets);if(((a=r.overTargets)==null?void 0:a.length)>0&&i!==e.target){const h=t.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(t,h,i);if(this.dispatchEvent(d,"pointerout"),s&&this.dispatchEvent(d,"mouseout"),!e.composedPath().includes(i)){const u=this.createPointerEvent(t,"pointerleave",i);for(u.eventPhase=u.AT_TARGET;u.target&&!e.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),s&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(d)}if(i!==e.target){const h=t.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(e,h);this.dispatchEvent(d,"pointerover"),s&&this.dispatchEvent(d,"mouseover");let u=i==null?void 0:i.parent;for(;u&&u!==this.rootTarget.parent&&u!==e.target;)u=u.parent;if(!u||u===this.rootTarget.parent){const f=this.clonePointerEvent(e,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==i&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),s&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],l=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),l&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),l&&o.push("globaltouchmove")),s&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),l&&o.push("globalmousemove"),this.cursor=(c=e.target)==null?void 0:c.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,r.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.createPointerEvent(t),r=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),r&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=(o=s.target)==null?void 0:o.cursor);const i=this.clonePointerEvent(s,"pointerenter");for(i.eventPhase=i.AT_TARGET;i.target&&i.target!==this.rootTarget.parent;)i.currentTarget=i.target,this.notifyTarget(i),r&&this.notifyTarget(i,"mouseenter"),i.target=i.target.parent;e.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(i)}mapPointerOut(t){if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(e.overTargets),i=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(i),s&&this.dispatchEvent(i,"mouseout");const o=this.createPointerEvent(t,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),s&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(i),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const l=s.button===2;this.dispatchEvent(s,l?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[t.button]);let o=i;if(i&&!s.composedPath().includes(i)){let l=i;for(;l&&!s.composedPath().includes(l);){if(s.currentTarget=l,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const a=s.button===2;this.notifyTarget(s,a?"rightupoutside":"mouseupoutside")}l=l.parent}delete r.pressTargetsByButton[t.button],o=l}if(o){const l=this.clonePointerEvent(s,"click");l.target=o,l.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:l.target,timeStamp:e});const a=r.clicksByButton[t.button];if(a.target===l.target&&e-a.timeStamp<200?++a.clickCount:a.clickCount=1,a.target=l.target,a.timeStamp=e,l.detail=a.clickCount,l.pointerType==="mouse"){const c=l.button===2;this.dispatchEvent(l,c?"rightclick":"click")}else l.pointerType==="touch"&&this.dispatchEvent(l,"tap");this.dispatchEvent(l,"pointertap"),this.freeEvent(l)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof Is)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),s=this.findMountedTarget(e.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(s){let i=s;for(;i;)r.currentTarget=i,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),i=i.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof ci)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let s=1;s<t.length&&t[s].parent===e;s++)e=t[s];return e}createPointerEvent(t,e,s){const r=this.allocateEvent(Is);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=s??this.hitTest(r.global.x,r.global.y)??this._hitElements[0],typeof e=="string"&&(r.type=e),r}createWheelEvent(t){const e=this.allocateEvent(ci);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const s=this.allocateEvent(Is);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=e??s.type,s}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Is&&e instanceof Is&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof no&&e instanceof no&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const s=t.currentTarget._events[e];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(e,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let r=0,i=s.length;r<i&&!t.propagationImmediatelyStopped;r++)s[r].once&&t.currentTarget.removeListener(e,s[r].fn,void 0,!0),s[r].fn.call(s[r].context,t)}}const Tw=1,Aw={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_c=class Ec{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new Sw(null),Qn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Is(null),this.rootWheelEvent=new ci(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Ec.defaultEventFeatures},{set:(e,s,r)=>(s==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=r),e[s]=r,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:s}=this.renderer;this.setTargetElement(e),this.resolution=s,Ec._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const s=this.cursorStyles[t];if(s)switch(typeof s){case"string":e&&(this.domElement.style.cursor=s);break;case"function":s(t);break;case"object":e&&Object.assign(this.domElement.style,s);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let s=0,r=e.length;s<r;s++){const i=e[s],o=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Qn.pointerMoved();const e=this.normalizeToPointerData(t);for(let s=0,r=e.length;s<r;s++){const i=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const s=e!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let i=0,o=r.length;i<o;i++){const l=this.bootstrapEvent(this.rootPointerEvent,r[i]);l.type+=s,this.rootBoundary.mapEvent(l)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let s=0,r=e.length;s<r;s++){const i=this.bootstrapEvent(this.rootPointerEvent,e[s]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Qn.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Qn.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Qn.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,s){const r=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},i=1/this.resolution;t.x=(e-r.left)*(this.domElement.width/r.width)*i,t.y=(s-r.top)*(this.domElement.height/r.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let s=0,r=t.changedTouches.length;s<r;s++){const i=t.changedTouches[s];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const s=t;typeof s.isPrimary>"u"&&(s.isPrimary=!0),typeof s.width>"u"&&(s.width=1),typeof s.height>"u"&&(s.height=1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="mouse"),typeof s.pointerId>"u"&&(s.pointerId=Tw),typeof s.pressure>"u"&&(s.pressure=.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=Aw[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};_c.extension={name:"events",type:[it.RendererSystem,it.CanvasRendererSystem]},_c.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Sc=_c;pt.add(Sc);function Uu(n){return n==="dynamic"||n==="static"}const Cw={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Uu(Sc.defaultEventMode)},set interactive(n){Nt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=n,this.eventMode=n?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Sc.defaultEventMode},set eventMode(n){this._internalInteractive=Uu(n),this._internalEventMode=n},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof e=="object"?e.signal:void 0,i=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;n=s?`${n}capture`:n;const l=typeof t=="function"?t:t.handleEvent,a=this;r&&r.addEventListener("abort",()=>{a.off(n,l,o)}),i?a.once(n,l,o):a.on(n,l,o)},removeEventListener(n,t,e){const s=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,r=typeof t=="function"?void 0:t;n=s?`${n}capture`:n,t=typeof t=="function"?t:t.handleEvent,this.off(n,t,r)},dispatchEvent(n){if(!(n instanceof na))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};me.mixin(Cw);const kw={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};me.mixin(kw);const Iw=9,Ea=100,Rw=0,Mw=0,ju=2,Xu=1,Pw=-1e3,Nw=-1e3,Fw=2;class sp{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(An.tablet||An.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${Ea}px`,e.style.height=`${Ea}px`,e.style.position="absolute",e.style.top=`${Rw}px`,e.style.left=`${Mw}px`,e.style.zIndex=ju.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${Xu}px`,t.style.height=`${Xu}px`,t.style.position="absolute",t.style.top=`${Pw}px`,t.style.left=`${Nw}px`,t.style.zIndex=Fw.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let s=0;s<e.length;s++)this.updateAccessibleObjects(e[s])}update(){const t=performance.now();if(An.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:s,width:r,height:i}=this.renderer.view.getBoundingClientRect(),{width:o,height:l,resolution:a}=this.renderer,c=r/o*a,h=i/l*a;let d=this.div;d.style.left=`${e}px`,d.style.top=`${s}px`,d.style.width=`${o}px`,d.style.height=`${l}px`;for(let u=0;u<this.children.length;u++){const f=this.children[u];if(f.renderId!==this.renderId)f._accessibleActive=!1,oi(this.children,u,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,u--;else{d=f._accessibleDiv;let m=f.hitArea;const p=f.worldTransform;f.hitArea?(d.style.left=`${(p.tx+m.x*p.a)*c}px`,d.style.top=`${(p.ty+m.y*p.d)*h}px`,d.style.width=`${m.width*p.a*c}px`,d.style.height=`${m.height*p.d*h}px`):(m=f.getBounds(),this.capHitArea(m),d.style.left=`${m.x*c}px`,d.style.top=`${m.y*h}px`,d.style.width=`${m.width*c}px`,d.style.height=`${m.height*h}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:s}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${Ea}px`,e.style.height=`${Ea}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=ju.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:s}=t.target,r=this.renderer.events.rootBoundary,i=Object.assign(new na(r),{target:s});r.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>r.dispatchEvent(i,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===Iw&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}sp.extension={name:"accessibility",type:[it.RendererPlugin,it.CanvasRendererPlugin]};pt.add(sp);const np=class Tc{constructor(t){this.stage=new Ze,t=Object.assign({forceCanvas:!1},t),this.renderer=U1(t),Tc._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const s=Tc._plugins.slice(0);s.reverse(),s.forEach(r=>{r.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};np._plugins=[];let rp=np;pt.handleByList(it.Application,rp._plugins);class ip{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,s;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:i}=this._resizeTo;e=r,s=i}this.renderer.resize(e,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ip.extension=it.Application;pt.add(ip);const Gu={loader:it.LoadParser,resolver:it.ResolveParser,cache:it.CacheParser,detection:it.DetectionParser};pt.handle(it.Asset,n=>{const t=n.ref;Object.entries(Gu).filter(([e])=>!!t[e]).forEach(([e,s])=>pt.add(Object.assign(t[e],{extension:t[e].extension??s})))},n=>{const t=n.ref;Object.keys(Gu).filter(e=>!!t[e]).forEach(e=>pt.remove(t[e]))});class Bw{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<e;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function bi(n,t){if(Array.isArray(t)){for(const e of t)if(n.startsWith(`data:${e}`))return!0;return!1}return n.startsWith(`data:${t}`)}function is(n,t){const e=n.split("?")[0],s=ne.extname(e).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const Us=(n,t,e=!1)=>(Array.isArray(n)||(n=[n]),t?n.map(s=>typeof s=="string"||e?t(s):s):n),Ac=(n,t)=>{const e=t.split("?")[1];return e&&(n+=`?${e}`),n};function ap(n,t,e,s,r){const i=t[e];for(let o=0;o<i.length;o++){const l=i[o];e<t.length-1?ap(n.replace(s[e],l),t,e+1,s,r):r.push(n.replace(s[e],l))}}function Dw(n){const t=/\{(.*?)\}/g,e=n.match(t),s=[];if(e){const r=[];e.forEach(i=>{const o=i.substring(1,i.length-1).split(",");r.push(o)}),ap(n,r,0,e,s)}else s.push(n);return s}const ro=n=>!Array.isArray(n);class Lw{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const s=Us(t);let r;for(let l=0;l<this.parsers.length;l++){const a=this.parsers[l];if(a.test(e)){r=a.getCacheableAssets(s,e);break}}r||(r={},s.forEach(l=>{r[l]=e}));const i=Object.keys(r),o={cacheKeys:i,keys:s};if(s.forEach(l=>{this._cacheMap.set(l,o)}),i.forEach(l=>{this._cache.has(l)&&this._cache.get(l)!==e&&console.warn("[Cache] already has key:",l),this._cache.set(l,r[l])}),e instanceof ut){const l=e;s.forEach(a=>{l.baseTexture!==ut.EMPTY.baseTexture&&Et.addToCache(l.baseTexture,a),ut.addToCache(l,a)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(s=>{this._cache.delete(s)}),e.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const Ar=new Lw;class Ow{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,s)=>(this._parsersValidated=!1,t[e]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const s={promise:null,parser:null};return s.promise=(async()=>{var o,l;let r=null,i=null;if(e.loadParser&&(i=this._parserHash[e.loadParser],i||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!i){for(let a=0;a<this.parsers.length;a++){const c=this.parsers[a];if(c.load&&((o=c.test)!=null&&o.call(c,t,e,this))){i=c;break}}if(!i)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await i.load(t,e,this),s.parser=i;for(let a=0;a<this.parsers.length;a++){const c=this.parsers[a];c.parse&&c.parse&&await((l=c.testParse)==null?void 0:l.call(c,r,e,this))&&(r=await c.parse(r,e,this)||r,s.parser=c)}return r})(),s}async load(t,e){this._parsersValidated||this._validateParsers();let s=0;const r={},i=ro(t),o=Us(t,c=>({alias:[c],src:c})),l=o.length,a=o.map(async c=>{const h=ne.toAbsolute(c.src);if(!r[c.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,c)),r[c.src]=await this.promiseCache[h].promise,e&&e(++s/l)}catch(d){throw delete this.promiseCache[h],delete r[c.src],new Error(`[Loader.load] Failed to load ${h}.
${d}`)}});return await Promise.all(a),i?r[o[0].src]:r}async unload(t){const e=Us(t,s=>({alias:[s],src:s})).map(async s=>{var o,l;const r=ne.toAbsolute(s.src),i=this.promiseCache[r];if(i){const a=await i.promise;delete this.promiseCache[r],(l=(o=i.parser)==null?void 0:o.unload)==null||l.call(o,a,s,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var xs=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(xs||{});const Vw=".json",Uw="application/json",jw={extension:{type:it.LoadParser,priority:xs.Low},name:"loadJson",test(n){return bi(n,Uw)||is(n,Vw)},async load(n){return await(await ct.ADAPTER.fetch(n)).json()}};pt.add(jw);const Xw=".txt",Gw="text/plain",Yw={name:"loadTxt",extension:{type:it.LoadParser,priority:xs.Low},test(n){return bi(n,Gw)||is(n,Xw)},async load(n){return await(await ct.ADAPTER.fetch(n)).text()}};pt.add(Yw);const $w=["normal","bold","100","200","300","400","500","600","700","800","900"],Ww=[".ttf",".otf",".woff",".woff2"],zw=["font/ttf","font/otf","font/woff","font/woff2"],Hw=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function qw(n){const t=ne.extname(n),e=ne.basename(n,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1));let s=e.length>0;for(const i of e)if(!i.match(Hw)){s=!1;break}let r=e.join(" ");return s||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}const Kw=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Zw(n){return Kw.test(n)?n:encodeURI(n)}const Qw={extension:{type:it.LoadParser,priority:xs.Low},name:"loadWebFont",test(n){return bi(n,zw)||is(n,Ww)},async load(n,t){var s,r,i;const e=ct.ADAPTER.getFontFaceSet();if(e){const o=[],l=((s=t.data)==null?void 0:s.family)??qw(n),a=((i=(r=t.data)==null?void 0:r.weights)==null?void 0:i.filter(h=>$w.includes(h)))??["normal"],c=t.data??{};for(let h=0;h<a.length;h++){const d=a[h],u=new FontFace(l,`url(${Zw(n)})`,{...c,weight:d});await u.load(),e.add(u),o.push(u)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(n){(Array.isArray(n)?n:[n]).forEach(t=>ct.ADAPTER.getFontFaceSet().delete(t))}};pt.add(Qw);const Jw=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let hi=null,Cc=class{constructor(){hi||(hi=URL.createObjectURL(new Blob([Jw],{type:"application/javascript"}))),this.worker=new Worker(hi)}};Cc.revokeObjectURL=function(){hi&&(URL.revokeObjectURL(hi),hi=null)};const tv=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let di=null;class op{constructor(){di||(di=URL.createObjectURL(new Blob([tv],{type:"application/javascript"}))),this.worker=new Worker(di)}}op.revokeObjectURL=function(){di&&(URL.revokeObjectURL(di),di=null)};let Yu=0,Sl;class ev{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Cc;e.addEventListener("message",s=>{e.terminate(),Cc.revokeObjectURL(),t(s.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Sl===void 0&&(Sl=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<Sl&&(this._createdWorkers++,t=new op().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const s=new Promise((r,i)=>{this.queue.push({id:t,arguments:e,resolve:r,reject:i})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),s=e.id;this.resolveHash[Yu]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:Yu++,id:s})}}const $u=new ev;function ra(n,t,e){n.resource.internal=!0;const s=new ut(n),r=()=>{delete t.promiseCache[e],Ar.has(e)&&Ar.remove(e)};return s.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),r())}),s.once("destroyed",()=>{n.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),s}const sv=[".jpeg",".jpg",".png",".webp",".avif"],nv=["image/jpeg","image/png","image/webp","image/avif"];async function rv(n){const t=await ct.ADAPTER.fetch(n);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Mo={name:"loadTextures",extension:{type:it.LoadParser,priority:xs.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(n){return bi(n,nv)||is(n,sv)},async load(n,t,e){var l;const s=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let r;s?this.config.preferWorkers&&await $u.isImageBitmapSupported()?r=await $u.loadImageBitmap(n):r=await rv(n):r=await new Promise((a,c)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=n,h.complete?a(h):(h.onload=()=>a(h),h.onerror=d=>c(d))});const i={...t.data};i.resolution??(i.resolution=Mn(n)),s&&((l=i.resourceOptions)==null?void 0:l.ownsImageBitmap)===void 0&&(i.resourceOptions={...i.resourceOptions},i.resourceOptions.ownsImageBitmap=!0);const o=new Et(r,i);return o.resource.src=n,ra(o,e,n)},unload(n){n.destroy(!0)}};pt.add(Mo);const iv=".svg",av="image/svg+xml",ov={extension:{type:it.LoadParser,priority:xs.High},name:"loadSVG",test(n){return bi(n,av)||is(n,iv)},async testParse(n){return gc.test(n)},async parse(n,t,e){var i;const s=new gc(n,(i=t==null?void 0:t.data)==null?void 0:i.resourceOptions);await s.load();const r=new Et(s,{resolution:Mn(n),...t==null?void 0:t.data});return r.resource.src=t.src,ra(r,e,t.src)},async load(n,t){return(await ct.ADAPTER.fetch(n)).text()},unload:Mo.unload};pt.add(ov);const lv=[".mp4",".m4v",".webm",".ogv"],cv=["video/mp4","video/webm","video/ogg"],hv={name:"loadVideo",extension:{type:it.LoadParser,priority:xs.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(n){return bi(n,cv)||is(n,lv)},async load(n,t,e){var o;let s;const r=await(await ct.ADAPTER.fetch(n)).blob(),i=URL.createObjectURL(r);try{const l={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},a=new Jm(i,l);await a.load();const c=new Et(a,{alphaMode:await uy(),resolution:Mn(n),...t==null?void 0:t.data});c.resource.src=n,s=ra(c,e,n),s.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(i)})}catch(l){throw URL.revokeObjectURL(i),l}return s},unload(n){n.destroy(!0)}};pt.add(hv);class dv{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`).join("&")}}getAlias(t){const{alias:e,name:s,src:r,srcs:i}=t;return Us(e||s||r||i,o=>typeof o=="string"?o:Array.isArray(o)?o.map(l=>(l==null?void 0:l.src)??(l==null?void 0:l.srcs)??l):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const s=[];Array.isArray(e)?e.forEach(r=>{const i=r.src??r.srcs,o=r.alias??r.name;let l;if(typeof o=="string"){const a=this._createBundleAssetId(t,o);s.push(a),l=[o,a]}else{const a=o.map(c=>this._createBundleAssetId(t,c));s.push(...a),l=[...o,...a]}this.add({...r,alias:l,src:i})}):Object.keys(e).forEach(r=>{const i=[r,this._createBundleAssetId(t,r)];if(typeof e[r]=="string")this.add({alias:i,src:e[r]});else if(Array.isArray(e[r]))this.add({alias:i,src:e[r]});else{const o=e[r],l=o.src??o.srcs;this.add({...o,alias:i,src:Array.isArray(l)?l:[l]})}s.push(...i)}),this._bundles[t]=s}add(t,e,s,r,i){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(Nt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:s,format:r,loadParser:i})):Array.isArray(t)?o.push(...t):o.push(t);let l;l=a=>{this.hasKey(a)&&console.warn(`[Resolver] already has key: ${a} overwriting`)},Us(o).forEach(a=>{const{src:c,srcs:h}=a;let{data:d,format:u,loadParser:f}=a;const m=Us(c||h).map(x=>typeof x=="string"?Dw(x):Array.isArray(x)?x:[x]),p=this.getAlias(a);Array.isArray(p)?p.forEach(l):l(p);const g=[];m.forEach(x=>{x.forEach(b=>{let y={};if(typeof b!="object"){y.src=b;for(let w=0;w<this._parsers.length;w++){const _=this._parsers[w];if(_.test(b)){y=_.parse(b);break}}}else d=b.data??d,u=b.format??u,f=b.loadParser??f,y={...y,...b};if(!p)throw new Error(`[Resolver] alias is undefined for this asset: ${y.src}`);y=this.buildResolvedAsset(y,{aliases:p,data:d,format:u,loadParser:f}),g.push(y)})}),p.forEach(x=>{this._assetMap[x]=g})})}resolveBundle(t){const e=ro(t);t=Us(t);const s={};return t.forEach(r=>{const i=this._bundles[r];if(i){const o=this.resolve(i),l={};for(const a in o){const c=o[a];l[this._extractAssetIdFromBundle(r,a)]=c}s[r]=l}}),e?s[t[0]]:s}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const s={};for(const r in e)s[r]=e[r].src;return s}return e.src}resolve(t){const e=ro(t);t=Us(t);const s={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let i=this._assetMap[r];const o=i[0],l=this._getPreferredOrder(i);l==null||l.priority.forEach(a=>{l.params[a].forEach(c=>{const h=i.filter(d=>d[a]?d[a]===c:!1);h.length&&(i=h)})}),this._resolverHash[r]=i[0]??o}else this._resolverHash[r]=this.buildResolvedAsset({alias:[r],src:r},{});s[r]=this._resolverHash[r]}),e?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const s=t[0],r=this._preferredOrder.find(i=>i.params.format.includes(s.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:s,data:r,loadParser:i,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=ne.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=s??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=i??t.loadParser,t.format=o??t.format??ne.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class uv{constructor(){this._detections=[],this._initialized=!1,this.resolver=new dv,this.loader=new Ow,this.cache=Ar,this._backgroundLoader=new Bw(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var i,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const e=((i=t.texturePreference)==null?void 0:i.resolution)??1,s=typeof e=="number"?[e]:e,r=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,s,r,i){this.resolver.add(t,e,s,r,i)}async load(t,e){this._initialized||await this.init();const s=ro(t),r=Us(t).map(l=>{if(typeof l!="string"){const a=this.resolver.getAlias(l);return a.some(c=>!this.resolver.hasKey(c))&&this.add(l),Array.isArray(a)?a[0]:a}return this.resolver.hasKey(l)||this.add({alias:l,src:l}),l}),i=this.resolver.resolve(r),o=await this._mapLoadToResolve(i,e);return s?o[r[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const r=this.resolver.resolveBundle(t),i={},o=Object.keys(r);let l=0,a=0;const c=()=>{e==null||e(++l/a)},h=o.map(d=>{const u=r[d];return a+=Object.keys(u).length,this._mapLoadToResolve(u,c).then(f=>{i[d]=f})});return await Promise.all(h),s?i[t[0]]:i}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Ar.get(t);const e={};for(let s=0;s<t.length;s++)e[s]=Ar.get(t[s]);return e}async _mapLoadToResolve(t,e){const s=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const i=await this.loader.load(s,e);this._backgroundLoader.active=!0;const o={};return s.forEach((l,a)=>{const c=i[l.src],h=[l.src];l.alias&&h.push(...l.alias),o[r[a]]=c,Ar.set(h,c)}),o}async unload(t){this._initialized||await this.init();const e=Us(t).map(r=>typeof r!="string"?r.src:r),s=this.resolver.resolve(e);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=Us(t);const e=this.resolver.resolveBundle(t),s=Object.keys(e).map(r=>this._unloadFromResolved(e[r]));await Promise.all(s)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(s=>{Ar.remove(s.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const s of t.detections)t.skipDetections||await s.test()?e=await s.add(e):t.skipDetections||(e=await s.remove(e));return e=e.filter((s,r)=>e.indexOf(s)===r),e}get detections(){return this._detections}get preferWorkers(){return Mo.config.preferWorkers}set preferWorkers(t){Nt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(s=>s in t).forEach(s=>{e.config[s]=t[s]})})}}const Oi=new uv;pt.handleByList(it.LoadParser,Oi.loader.parsers).handleByList(it.ResolveParser,Oi.resolver.parsers).handleByList(it.CacheParser,Oi.cache.parsers).handleByList(it.DetectionParser,Oi.detections);const fv={extension:it.CacheParser,test:n=>Array.isArray(n)&&n.every(t=>t instanceof ut),getCacheableAssets:(n,t)=>{const e={};return n.forEach(s=>{t.forEach((r,i)=>{e[s+(i===0?"":i+1)]=r})}),e}};pt.add(fv);async function lp(n){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=n});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(n)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const mv={extension:{type:it.DetectionParser,priority:1},test:async()=>lp("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async n=>[...n,"avif"],remove:async n=>n.filter(t=>t!=="avif")};pt.add(mv);const pv={extension:{type:it.DetectionParser,priority:0},test:async()=>lp("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async n=>[...n,"webp"],remove:async n=>n.filter(t=>t!=="webp")};pt.add(pv);const Wu=["png","jpg","jpeg"],gv={extension:{type:it.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async n=>[...n,...Wu],remove:async n=>n.filter(t=>!Wu.includes(t))};pt.add(gv);const xv="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Eh(n){return xv?!1:document.createElement("video").canPlayType(n)!==""}const bv={extension:{type:it.DetectionParser,priority:0},test:async()=>Eh("video/webm"),add:async n=>[...n,"webm"],remove:async n=>n.filter(t=>t!=="webm")};pt.add(bv);const yv={extension:{type:it.DetectionParser,priority:0},test:async()=>Eh("video/mp4"),add:async n=>[...n,"mp4","m4v"],remove:async n=>n.filter(t=>t!=="mp4"&&t!=="m4v")};pt.add(yv);const wv={extension:{type:it.DetectionParser,priority:0},test:async()=>Eh("video/ogg"),add:async n=>[...n,"ogv"],remove:async n=>n.filter(t=>t!=="ogv")};pt.add(wv);const vv={extension:it.ResolveParser,test:Mo.test,parse:n=>{var t;return{resolution:parseFloat(((t=ct.RETINA_PREFIX.exec(n))==null?void 0:t[1])??"1"),format:ne.extname(n).slice(1),src:n}}};pt.add(vv);var De=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n[n.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",n[n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",n[n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",n[n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",n))(De||{});const io={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let rn,Zr;function zu(){Zr={bptc:rn.getExtension("EXT_texture_compression_bptc"),astc:rn.getExtension("WEBGL_compressed_texture_astc"),etc:rn.getExtension("WEBGL_compressed_texture_etc"),s3tc:rn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:rn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:rn.getExtension("WEBGL_compressed_texture_pvrtc")||rn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:rn.getExtension("WEBGL_compressed_texture_etc1"),atc:rn.getExtension("WEBGL_compressed_texture_atc")}}const _v={extension:{type:it.DetectionParser,priority:2},test:async()=>{const n=ct.ADAPTER.createCanvas().getContext("webgl");return n?(rn=n,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async n=>{Zr||zu();const t=[];for(const e in Zr)Zr[e]&&t.push(e);return[...t,...n]},remove:async n=>(Zr||zu(),n.filter(t=>!(t in Zr)))};pt.add(_v);class Ev extends To{constructor(t,e={width:1,height:1,autoLoad:!0}){let s,r;typeof t=="string"?(s=t,r=new Uint8Array):(s=null,r=t),super(r,e),this.origin=s,this.buffer=r?new nc(r):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new nc(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Rr extends Ev{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Rr._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Rr._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,s){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;r.pixelStorei(r.UNPACK_ALIGNMENT,4);for(let i=0,o=this.levels;i<o;i++){const{levelID:l,levelWidth:a,levelHeight:c,levelBuffer:h}=this._levelBuffers[i];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,a,c,0,h)}return!0}onBlobLoaded(){this._levelBuffers=Rr._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,s,r,i,o,l){const a=new Array(s);let c=t.byteOffset,h=o,d=l,u=h+r-1&~(r-1),f=d+i-1&~(i-1),m=u*f*io[e];for(let p=0;p<s;p++)a[p]={levelID:p,levelWidth:s>1?h:u,levelHeight:s>1?d:f,levelBuffer:new Uint8Array(t.buffer,c,m)},c+=m,h=h>>1||1,d=d>>1||1,u=h+r-1&~(r-1),f=d+i-1&~(i-1),m=u*f*io[e];return a}}const Tl=4,Sa=124,Sv=32,Hu=20,Tv=542327876,Ta={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Av={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Aa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Cv=1,kv=2,Iv=4,Rv=64,Mv=512,Pv=131072,Nv=827611204,Fv=861165636,Bv=894720068,Dv=808540228,Lv=4,Ov={[Nv]:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Fv]:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Bv]:De.COMPRESSED_RGBA_S3TC_DXT5_EXT},Vv={70:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:De.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:De.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:De.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:De.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:De.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:De.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:De.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:De.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:De.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function Uv(n){const t=new Uint32Array(n);if(t[0]!==Tv)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(n,0,Sa/Uint32Array.BYTES_PER_ELEMENT),s=e[Ta.HEIGHT],r=e[Ta.WIDTH],i=e[Ta.MIPMAP_COUNT],o=new Uint32Array(n,Ta.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Sv/Uint32Array.BYTES_PER_ELEMENT),l=o[Cv];if(l&Iv){const a=o[Av.FOURCC];if(a!==Dv){const b=Ov[a],y=Tl+Sa,w=new Uint8Array(n,y);return[new Rr(w,{format:b,width:r,height:s,levels:i})]}const c=Tl+Sa,h=new Uint32Array(t.buffer,c,Hu/Uint32Array.BYTES_PER_ELEMENT),d=h[Aa.DXGI_FORMAT],u=h[Aa.RESOURCE_DIMENSION],f=h[Aa.MISC_FLAG],m=h[Aa.ARRAY_SIZE],p=Vv[d];if(p===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===Lv)throw new Error("DDSParser does not support cubemap textures");if(u===6)throw new Error("DDSParser does not supported 3D texture data");const g=new Array,x=Tl+Sa+Hu;if(m===1)g.push(new Uint8Array(n,x));else{const b=io[p];let y=0,w=r,_=s;for(let S=0;S<i;S++){const T=Math.max(1,w+3&-4),A=Math.max(1,_+3&-4),C=T*A*b;y+=C,w=w>>>1,_=_>>>1}let E=x;for(let S=0;S<m;S++)g.push(new Uint8Array(n,E,y)),E+=y}return g.map(b=>new Rr(b,{format:p,width:r,height:s,levels:i}))}throw l&Rv?new Error("DDSParser does not support uncompressed texture data."):l&Mv?new Error("DDSParser does not supported YUV uncompressed texture data."):l&Pv?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&kv?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const qu=[171,75,84,88,32,49,49,187,13,10,26,10],jv=67305985,Cs={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},kc=64,Ku={[bt.UNSIGNED_BYTE]:1,[bt.UNSIGNED_SHORT]:2,[bt.INT]:4,[bt.UNSIGNED_INT]:4,[bt.FLOAT]:4,[bt.HALF_FLOAT]:8},Xv={[et.RGBA]:4,[et.RGB]:3,[et.RG]:2,[et.RED]:1,[et.LUMINANCE]:1,[et.LUMINANCE_ALPHA]:2,[et.ALPHA]:1},Gv={[bt.UNSIGNED_SHORT_4_4_4_4]:2,[bt.UNSIGNED_SHORT_5_5_5_1]:2,[bt.UNSIGNED_SHORT_5_6_5]:2};function Yv(n,t,e=!1){const s=new DataView(t);if(!$v(n,s))return null;const r=s.getUint32(Cs.ENDIANNESS,!0)===jv,i=s.getUint32(Cs.GL_TYPE,r),o=s.getUint32(Cs.GL_FORMAT,r),l=s.getUint32(Cs.GL_INTERNAL_FORMAT,r),a=s.getUint32(Cs.PIXEL_WIDTH,r),c=s.getUint32(Cs.PIXEL_HEIGHT,r)||1,h=s.getUint32(Cs.PIXEL_DEPTH,r)||1,d=s.getUint32(Cs.NUMBER_OF_ARRAY_ELEMENTS,r)||1,u=s.getUint32(Cs.NUMBER_OF_FACES,r),f=s.getUint32(Cs.NUMBER_OF_MIPMAP_LEVELS,r),m=s.getUint32(Cs.BYTES_OF_KEY_VALUE_DATA,r);if(c===0||h!==1)throw new Error("Only 2D textures are supported");if(u!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const p=4,g=4,x=a+3&-4,b=c+3&-4,y=new Array(d);let w=a*c;i===0&&(w=x*b);let _;if(i!==0?Ku[i]?_=Ku[i]*Xv[o]:_=Gv[i]:_=io[l],_===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const E=e?zv(s,m,r):null;let S=w*_,T=a,A=c,C=x,I=b,P=kc+m;for(let R=0;R<f;R++){const N=s.getUint32(P,r);let F=P+4;for(let D=0;D<d;D++){let L=y[D];L||(L=y[D]=new Array(f)),L[R]={levelID:R,levelWidth:f>1||i!==0?T:C,levelHeight:f>1||i!==0?A:I,levelBuffer:new Uint8Array(t,F,S)},F+=S}P+=N+4,P=P%4!==0?P+4-P%4:P,T=T>>1||1,A=A>>1||1,C=T+p-1&~(p-1),I=A+g-1&~(g-1),S=C*I*_}return i!==0?{uncompressed:y.map(R=>{let N=R[0].levelBuffer,F=!1;return i===bt.FLOAT?N=new Float32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4):i===bt.UNSIGNED_INT?(F=!0,N=new Uint32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)):i===bt.INT&&(F=!0,N=new Int32Array(R[0].levelBuffer.buffer,R[0].levelBuffer.byteOffset,R[0].levelBuffer.byteLength/4)),{resource:new To(N,{width:R[0].levelWidth,height:R[0].levelHeight}),type:i,format:F?Wv(o):o}}),kvData:E}:{compressed:y.map(R=>new Rr(null,{format:l,width:a,height:c,levels:f,levelBuffers:R})),kvData:E}}function $v(n,t){for(let e=0;e<qu.length;e++)if(t.getUint8(e)!==qu[e])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}function Wv(n){switch(n){case et.RGBA:return et.RGBA_INTEGER;case et.RGB:return et.RGB_INTEGER;case et.RG:return et.RG_INTEGER;case et.RED:return et.RED_INTEGER;default:return n}}function zv(n,t,e){const s=new Map;let r=0;for(;r<t;){const i=n.getUint32(kc+r,e),o=kc+r+4,l=3-(i+3)%4;if(i===0||i>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let a=0;for(;a<i&&n.getUint8(o+a)!==0;a++);if(a===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(n.buffer,o,a)),h=new DataView(n.buffer,o+a+1,i-a-1);s.set(c,h),r+=4+i+l}return s}const Hv={extension:{type:it.LoadParser,priority:xs.High},name:"loadDDS",test(n){return is(n,".dds")},async load(n,t,e){const s=await(await ct.ADAPTER.fetch(n)).arrayBuffer(),r=Uv(s).map(i=>{const o=new Et(i,{mipmap:zs.OFF,alphaMode:qe.NO_PREMULTIPLIED_ALPHA,resolution:Mn(n),...t.data});return ra(o,e,n)});return r.length===1?r[0]:r},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};pt.add(Hv);const qv={extension:{type:it.LoadParser,priority:xs.High},name:"loadKTX",test(n){return is(n,".ktx")},async load(n,t,e){const s=await(await ct.ADAPTER.fetch(n)).arrayBuffer(),{compressed:r,uncompressed:i,kvData:o}=Yv(n,s),l=r??i,a={mipmap:zs.OFF,alphaMode:qe.NO_PREMULTIPLIED_ALPHA,resolution:Mn(n),...t.data},c=l.map(h=>{l===i&&Object.assign(a,{type:h.type,format:h.format});const d=h.resource??h,u=new Et(d,a);return u.ktxKeyValueData=o,ra(u,e,n)});return c.length===1?c[0]:c},unload(n){Array.isArray(n)?n.forEach(t=>t.destroy(!0)):n.destroy(!0)}};pt.add(qv);const Kv=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Zv={extension:it.ResolveParser,test:n=>{const t=ne.extname(n).slice(1);return["basis","ktx","dds"].includes(t)},parse:n=>{var s,r;const t=n.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const i=t.pop();if(Kv.includes(i))return{resolution:parseFloat(((s=ct.RETINA_PREFIX.exec(n))==null?void 0:s[1])??"1"),format:i,src:n}}return{resolution:parseFloat(((r=ct.RETINA_PREFIX.exec(n))==null?void 0:r[1])??"1"),format:e,src:n}}};pt.add(Zv);const Ca=new _t,Qv=4,cp=class Vi{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,s,r){const i=new Image;return i.src=await this.base64(t,e,s,r),i}async base64(t,e,s,r){const i=this.canvas(t,r);if(i.toBlob!==void 0)return new Promise((o,l)=>{i.toBlob(a=>{if(!a){l(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=l,c.readAsDataURL(a)},e,s)});if(i.toDataURL!==void 0)return i.toDataURL(e,s);if(i.convertToBlob!==void 0){const o=await i.convertToBlob({type:e,quality:s});return new Promise((l,a)=>{const c=new FileReader;c.onload=()=>l(c.result),c.onerror=a,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:s,width:r,height:i,flipY:o,premultipliedAlpha:l}=this._rawPixels(t,e);o&&Vi._flipY(s,r,i),l&&Vi._unpremultiplyAlpha(s);const a=new ky(r,i,1),c=new ImageData(new Uint8ClampedArray(s.buffer),r,i);return a.context.putImageData(c,0,0),a.canvas}pixels(t,e){const{pixels:s,width:r,height:i,flipY:o,premultipliedAlpha:l}=this._rawPixels(t,e);return o&&Vi._flipY(s,r,i),l&&Vi._unpremultiplyAlpha(s),s}_rawPixels(t,e){const s=this.renderer;if(!s)throw new Error("The Extract has already been destroyed");let r,i=!1,o=!1,l,a=!1;t&&(t instanceof Vr?l=t:(l=s.generateTexture(t,{region:e,resolution:s.resolution,multisample:s.multisample}),a=!0,e&&(Ca.width=e.width,Ca.height=e.height,e=Ca)));const c=s.gl;if(l){if(r=l.baseTexture.resolution,e=e??l.frame,i=!1,o=l.baseTexture.alphaMode>0&&l.baseTexture.format===et.RGBA,!a){s.renderTexture.bind(l);const f=l.framebuffer.glFramebuffers[s.CONTEXT_UID];f.blitFramebuffer&&s.framebuffer.bind(f.blitFramebuffer)}}else r=s.resolution,e||(e=Ca,e.width=s.width/r,e.height=s.height/r),i=!0,o=this._rendererPremultipliedAlpha,s.renderTexture.bind();const h=Math.max(Math.round(e.width*r),1),d=Math.max(Math.round(e.height*r),1),u=new Uint8Array(Qv*h*d);return c.readPixels(Math.round(e.x*r),Math.round(e.y*r),h,d,c.RGBA,c.UNSIGNED_BYTE,u),a&&(l==null||l.destroy(!0)),{pixels:u,width:h,height:d,flipY:i,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,s){const r=e<<2,i=s>>1,o=new Uint8Array(r);for(let l=0;l<i;l++){const a=l*r,c=(s-l-1)*r;o.set(t.subarray(a,a+r)),t.copyWithin(a,c,c+r),t.set(o,c)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let s=0;s<e;s+=4){const r=t[s+3];if(r!==0){const i=255.001/r;t[s]=t[s]*i+.5,t[s+1]=t[s+1]*i+.5,t[s+2]=t[s+2]*i+.5}}}};cp.extension={name:"extract",type:it.RendererSystem};let Jv=cp;pt.add(Jv);const ao={build(n){const t=n.points;let e,s,r,i,o,l;if(n.type===Oe.CIRC){const m=n.shape;e=m.x,s=m.y,o=l=m.radius,r=i=0}else if(n.type===Oe.ELIP){const m=n.shape;e=m.x,s=m.y,o=m.width,l=m.height,r=i=0}else{const m=n.shape,p=m.width/2,g=m.height/2;e=m.x+p,s=m.y+g,o=l=Math.max(0,Math.min(m.radius,Math.min(p,g))),r=p-o,i=g-l}if(!(o>=0&&l>=0&&r>=0&&i>=0)){t.length=0;return}const a=Math.ceil(2.3*Math.sqrt(o+l)),c=a*8+(r?4:0)+(i?4:0);if(t.length=c,c===0)return;if(a===0){t.length=8,t[0]=t[6]=e+r,t[1]=t[3]=s+i,t[2]=t[4]=e-r,t[5]=t[7]=s-i;return}let h=0,d=a*4+(r?2:0)+2,u=d,f=c;{const m=r+o,p=i,g=e+m,x=e-m,b=s+p;if(t[h++]=g,t[h++]=b,t[--d]=b,t[--d]=x,i){const y=s-p;t[u++]=x,t[u++]=y,t[--f]=y,t[--f]=g}}for(let m=1;m<a;m++){const p=Math.PI/2*(m/a),g=r+Math.cos(p)*o,x=i+Math.sin(p)*l,b=e+g,y=e-g,w=s+x,_=s-x;t[h++]=b,t[h++]=w,t[--d]=w,t[--d]=y,t[u++]=y,t[u++]=_,t[--f]=_,t[--f]=b}{const m=r,p=i+l,g=e+m,x=e-m,b=s+p,y=s-p;t[h++]=g,t[h++]=b,t[--f]=y,t[--f]=g,r&&(t[h++]=x,t[h++]=b,t[--f]=y,t[--f]=x)}},triangulate(n,t){const e=n.points,s=t.points,r=t.indices;if(e.length===0)return;let i=s.length/2;const o=i;let l,a;if(n.type!==Oe.RREC){const h=n.shape;l=h.x,a=h.y}else{const h=n.shape;l=h.x+h.width/2,a=h.y+h.height/2}const c=n.matrix;s.push(n.matrix?c.a*l+c.c*a+c.tx:l,n.matrix?c.b*l+c.d*a+c.ty:a),i++,s.push(e[0],e[1]);for(let h=2;h<e.length;h+=2)s.push(e[h],e[h+1]),r.push(i++,o,i);r.push(o+1,o,i)}};function Zu(n,t=!1){const e=n.length;if(e<6)return;let s=0;for(let r=0,i=n[e-2],o=n[e-1];r<e;r+=2){const l=n[r],a=n[r+1];s+=(l-i)*(a+o),i=l,o=a}if(!t&&s>0||t&&s<=0){const r=e/2;for(let i=r+r%2;i<e;i+=2){const o=e-i-2,l=e-i-1,a=i,c=i+1;[n[o],n[a]]=[n[a],n[o]],[n[l],n[c]]=[n[c],n[l]]}}}const hp={build(n){n.points=n.shape.points.slice()},triangulate(n,t){let e=n.points;const s=n.holes,r=t.points,i=t.indices;if(e.length>=6){Zu(e,!1);const o=[];for(let c=0;c<s.length;c++){const h=s[c];Zu(h.points,!0),o.push(e.length/2),e=e.concat(h.points)}const l=ly(e,o,2);if(!l)return;const a=r.length/2;for(let c=0;c<l.length;c+=3)i.push(l[c]+a),i.push(l[c+1]+a),i.push(l[c+2]+a);for(let c=0;c<e.length;c++)r.push(e[c])}}},t_={build(n){const t=n.shape,e=t.x,s=t.y,r=t.width,i=t.height,o=n.points;o.length=0,r>=0&&i>=0&&o.push(e,s,e+r,s,e+r,s+i,e,s+i)},triangulate(n,t){const e=n.points,s=t.points;if(e.length===0)return;const r=s.length/2;s.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},e_={build(n){ao.build(n)},triangulate(n,t){ao.triangulate(n,t)}};var ws=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(ws||{}),sr=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(sr||{});const fi={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,t=20){if(!this.adaptive||!n||isNaN(n))return t;let e=Math.ceil(n/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class Qu{static curveTo(t,e,s,r,i,o){const l=o[o.length-2],a=o[o.length-1]-e,c=l-t,h=r-e,d=s-t,u=Math.abs(a*d-c*h);if(u<1e-8||i===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const f=a*a+c*c,m=h*h+d*d,p=a*h+c*d,g=i*Math.sqrt(f)/u,x=i*Math.sqrt(m)/u,b=g*p/f,y=x*p/m,w=g*d+x*c,_=g*h+x*a,E=c*(x+b),S=a*(x+b),T=d*(g+y),A=h*(g+y),C=Math.atan2(S-_,E-w),I=Math.atan2(A-_,T-w);return{cx:w+t,cy:_+e,radius:i,startAngle:C,endAngle:I,anticlockwise:c*h>d*a}}static arc(t,e,s,r,i,o,l,a,c){const h=l-o,d=fi._segmentsCount(Math.abs(h)*i,Math.ceil(Math.abs(h)/Za)*40),u=h/(d*2),f=u*2,m=Math.cos(u),p=Math.sin(u),g=d-1,x=g%1/g;for(let b=0;b<=g;++b){const y=b+x*b,w=u+o+f*y,_=Math.cos(w),E=-Math.sin(w);c.push((m*_+p*E)*i+s,(m*-E+p*_)*i+r)}}}class s_{constructor(){this.reset()}begin(t,e,s){this.reset(),this.style=t,this.start=e,this.attribStart=s}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Sh{static curveLength(t,e,s,r,i,o,l,a){let c=0,h=0,d=0,u=0,f=0,m=0,p=0,g=0,x=0,b=0,y=0,w=t,_=e;for(let E=1;E<=10;++E)h=E/10,d=h*h,u=d*h,f=1-h,m=f*f,p=m*f,g=p*t+3*m*h*s+3*f*d*i+u*l,x=p*e+3*m*h*r+3*f*d*o+u*a,b=w-g,y=_-x,w=g,_=x,c+=Math.sqrt(b*b+y*y);return c}static curveTo(t,e,s,r,i,o,l){const a=l[l.length-2],c=l[l.length-1];l.length-=2;const h=fi._segmentsCount(Sh.curveLength(a,c,t,e,s,r,i,o));let d=0,u=0,f=0,m=0,p=0;l.push(a,c);for(let g=1,x=0;g<=h;++g)x=g/h,d=1-x,u=d*d,f=u*d,m=x*x,p=m*x,l.push(f*a+3*u*x*t+3*d*m*s+p*i,f*c+3*u*x*e+3*d*m*r+p*o)}}function Ju(n,t,e,s,r,i,o,l){const a=n-e*r,c=t-s*r,h=n+e*i,d=t+s*i;let u,f;o?(u=s,f=-e):(u=-s,f=e);const m=a+u,p=c+f,g=h+u,x=d+f;return l.push(m,p,g,x),2}function pr(n,t,e,s,r,i,o,l){const a=e-n,c=s-t;let h=Math.atan2(a,c),d=Math.atan2(r-n,i-t);l&&h<d?h+=Math.PI*2:!l&&h>d&&(d+=Math.PI*2);let u=h;const f=d-h,m=Math.abs(f),p=Math.sqrt(a*a+c*c),g=(15*m*Math.sqrt(p)/Math.PI>>0)+1,x=f/g;if(u+=x,l){o.push(n,t,e,s);for(let b=1,y=u;b<g;b++,y+=x)o.push(n,t,n+Math.sin(y)*p,t+Math.cos(y)*p);o.push(n,t,r,i)}else{o.push(e,s,n,t);for(let b=1,y=u;b<g;b++,y+=x)o.push(n+Math.sin(y)*p,t+Math.cos(y)*p,n,t);o.push(r,i,n,t)}return g*2}function n_(n,t){const e=n.shape;let s=n.points||e.points.slice();const r=t.closePointEps;if(s.length===0)return;const i=n.lineStyle,o=new jt(s[0],s[1]),l=new jt(s[s.length-2],s[s.length-1]),a=e.type!==Oe.POLY||e.closeStroke,c=Math.abs(o.x-l.x)<r&&Math.abs(o.y-l.y)<r;if(a){s=s.slice(),c&&(s.pop(),s.pop(),l.set(s[s.length-2],s[s.length-1]));const L=(o.x+l.x)*.5,O=(l.y+o.y)*.5;s.unshift(L,O),s.push(L,O)}const h=t.points,d=s.length/2;let u=s.length;const f=h.length/2,m=i.width/2,p=m*m,g=i.miterLimit*i.miterLimit;let x=s[0],b=s[1],y=s[2],w=s[3],_=0,E=0,S=-(b-w),T=x-y,A=0,C=0,I=Math.sqrt(S*S+T*T);S/=I,T/=I,S*=m,T*=m;const P=i.alignment,R=(1-P)*2,N=P*2;a||(i.cap===sr.ROUND?u+=pr(x-S*(R-N)*.5,b-T*(R-N)*.5,x-S*R,b-T*R,x+S*N,b+T*N,h,!0)+2:i.cap===sr.SQUARE&&(u+=Ju(x,b,S,T,R,N,!0,h))),h.push(x-S*R,b-T*R,x+S*N,b+T*N);for(let L=1;L<d-1;++L){x=s[(L-1)*2],b=s[(L-1)*2+1],y=s[L*2],w=s[L*2+1],_=s[(L+1)*2],E=s[(L+1)*2+1],S=-(b-w),T=x-y,I=Math.sqrt(S*S+T*T),S/=I,T/=I,S*=m,T*=m,A=-(w-E),C=y-_,I=Math.sqrt(A*A+C*C),A/=I,C/=I,A*=m,C*=m;const O=y-x,j=b-w,U=y-_,B=E-w,G=O*U+j*B,H=j*U-B*O,K=H<0;if(Math.abs(H)<.001*Math.abs(G)){h.push(y-S*R,w-T*R,y+S*N,w+T*N),G>=0&&(i.join===ws.ROUND?u+=pr(y,w,y-S*R,w-T*R,y-A*R,w-C*R,h,!1)+4:u+=2,h.push(y-A*N,w-C*N,y+A*R,w+C*R));continue}const z=(-S+x)*(-T+w)-(-S+y)*(-T+b),J=(-A+_)*(-C+w)-(-A+y)*(-C+E),Q=(O*J-U*z)/H,X=(B*z-j*J)/H,W=(Q-y)*(Q-y)+(X-w)*(X-w),Z=y+(Q-y)*R,at=w+(X-w)*R,gt=y-(Q-y)*N,yt=w-(X-w)*N,nt=Math.min(O*O+j*j,U*U+B*B),It=K?R:N,Ct=nt+It*It*p,wt=W<=Ct;let Qt=i.join;if(Qt===ws.MITER&&W/p>g&&(Qt=ws.BEVEL),wt)switch(Qt){case ws.MITER:{h.push(Z,at,gt,yt);break}case ws.BEVEL:{K?h.push(Z,at,y+S*N,w+T*N,Z,at,y+A*N,w+C*N):h.push(y-S*R,w-T*R,gt,yt,y-A*R,w-C*R,gt,yt),u+=2;break}case ws.ROUND:{K?(h.push(Z,at,y+S*N,w+T*N),u+=pr(y,w,y+S*N,w+T*N,y+A*N,w+C*N,h,!0)+4,h.push(Z,at,y+A*N,w+C*N)):(h.push(y-S*R,w-T*R,gt,yt),u+=pr(y,w,y-S*R,w-T*R,y-A*R,w-C*R,h,!1)+4,h.push(y-A*R,w-C*R,gt,yt));break}}else{switch(h.push(y-S*R,w-T*R,y+S*N,w+T*N),Qt){case ws.MITER:{K?h.push(gt,yt,gt,yt):h.push(Z,at,Z,at),u+=2;break}case ws.ROUND:{K?u+=pr(y,w,y+S*N,w+T*N,y+A*N,w+C*N,h,!0)+2:u+=pr(y,w,y-S*R,w-T*R,y-A*R,w-C*R,h,!1)+2;break}}h.push(y-A*R,w-C*R,y+A*N,w+C*N),u+=2}}x=s[(d-2)*2],b=s[(d-2)*2+1],y=s[(d-1)*2],w=s[(d-1)*2+1],S=-(b-w),T=x-y,I=Math.sqrt(S*S+T*T),S/=I,T/=I,S*=m,T*=m,h.push(y-S*R,w-T*R,y+S*N,w+T*N),a||(i.cap===sr.ROUND?u+=pr(y-S*(R-N)*.5,w-T*(R-N)*.5,y-S*R,w-T*R,y+S*N,w+T*N,h,!1)+2:i.cap===sr.SQUARE&&(u+=Ju(y,w,S,T,R,N,!1,h)));const F=t.indices,D=fi.epsilon*fi.epsilon;for(let L=f;L<u+f-2;++L)x=h[L*2],b=h[L*2+1],y=h[(L+1)*2],w=h[(L+1)*2+1],_=h[(L+2)*2],E=h[(L+2)*2+1],!(Math.abs(x*(w-E)+y*(E-b)+_*(b-w))<D)&&F.push(L,L+1,L+2)}function r_(n,t){let e=0;const s=n.shape,r=n.points||s.points,i=s.type!==Oe.POLY||s.closeStroke;if(r.length===0)return;const o=t.points,l=t.indices,a=r.length/2,c=o.length/2;let h=c;for(o.push(r[0],r[1]),e=1;e<a;e++)o.push(r[e*2],r[e*2+1]),l.push(h,h+1),h++;i&&l.push(h,c)}function tf(n,t){n.lineStyle.native?r_(n,t):n_(n,t)}class Th{static curveLength(t,e,s,r,i,o){const l=t-2*s+i,a=e-2*r+o,c=2*s-2*t,h=2*r-2*e,d=4*(l*l+a*a),u=4*(l*c+a*h),f=c*c+h*h,m=2*Math.sqrt(d+u+f),p=Math.sqrt(d),g=2*d*p,x=2*Math.sqrt(f),b=u/p;return(g*m+p*u*(m-x)+(4*f*d-u*u)*Math.log((2*p+b+m)/(b+x)))/(4*g)}static curveTo(t,e,s,r,i){const o=i[i.length-2],l=i[i.length-1],a=fi._segmentsCount(Th.curveLength(o,l,t,e,s,r));let c=0,h=0;for(let d=1;d<=a;++d){const u=d/a;c=o+(t-o)*u,h=l+(e-l)*u,i.push(c+(t+(s-t)*u-c)*u,h+(e+(r-e)*u-h)*u)}}}const Al={[Oe.POLY]:hp,[Oe.CIRC]:ao,[Oe.ELIP]:ao,[Oe.RECT]:t_,[Oe.RREC]:e_},ef=[],ka=[];class oo{constructor(t,e=null,s=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=e,this.matrix=r,this.type=t.type}clone(){return new oo(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Wr=new jt,dp=class up extends xm{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new so,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),ka.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),ef.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,s=null,r=null){const i=new oo(t,e,s,r);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const s=new oo(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return s.lineStyle=r.lineStyle,r.holes.push(s),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let s=0;s<e.length;++s){const r=e[s];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,Wr):Wr.copyFrom(t),r.shape.contains(Wr.x,Wr.y))){let i=!1;if(r.holes){for(let o=0;o<r.holes.length;o++)if(r.holes[o].shape.contains(Wr.x,Wr.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let s=null,r=null;this.batches.length>0&&(s=this.batches[this.batches.length-1],r=s.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const c=e[a],h=c.fillStyle,d=c.lineStyle;Al[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(h.visible||d.visible)&&this.processHoles(c.holes);for(let u=0;u<2;u++){const f=u===0?h:d;if(!f.visible)continue;const m=f.texture.baseTexture,p=this.indices.length,g=this.points.length/2;m.wrapMode=rr.REPEAT,u===0?this.processFill(c):this.processLine(c);const x=this.points.length/2-g;x!==0&&(s&&!this._compareStyles(r,f)&&(s.end(p,g),s=null),s||(s=ef.pop()||new s_,s.begin(f,p,g),this.batches.push(s),r=f),this.addUvs(this.points,t,f.texture,g,x,f.matrix))}}const i=this.indices.length,o=this.points.length/2;if(s&&s.end(i,o),this.batches.length===0){this.batchable=!0;return}const l=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&l===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=l?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const s=this.graphicsData[t],r=s.fillStyle,i=s.lineStyle;if(r&&!r.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,s=t.length;e<s;e++){const r=t[e];for(let i=0;i<r.size;i++){const o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<up.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Et._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),ka.push(this.drawCalls[d]);this.drawCalls.length=0;const e=this.colors,s=this.textureIds;let r=ka.pop();r||(r=new ac,r.texArray=new hc),r.texArray.count=0,r.start=0,r.size=0,r.type=Xs.TRIANGLES;let i=0,o=null,l=0,a=!1,c=Xs.TRIANGLES,h=0;this.drawCalls.push(r);for(let d=0;d<this.batches.length;d++){const u=this.batches[d],f=8,m=u.style,p=m.texture.baseTexture;a!==!!m.native&&(a=!!m.native,c=a?Xs.LINES:Xs.TRIANGLES,o=null,i=f,t++),o!==p&&(o=p,p._batchEnabled!==t&&(i===f&&(t++,i=0,r.size>0&&(r=ka.pop(),r||(r=new ac,r.texArray=new hc),this.drawCalls.push(r)),r.start=h,r.size=0,r.texArray.count=0,r.type=c),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=rr.REPEAT,r.texArray.elements[r.texArray.count++]=p,i++)),r.size+=u.size,h+=u.size,l=p._batchLocation,this.addColors(e,m.color,m.alpha,u.attribSize,u.attribStart),this.addTextureIds(s,l,u.attribSize,u.attribStart)}Et._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,s=this.colors,r=this.textureIds,i=new ArrayBuffer(t.length*3*4),o=new Float32Array(i),l=new Uint32Array(i);let a=0;for(let c=0;c<t.length/2;c++)o[a++]=t[c*2],o[a++]=t[c*2+1],o[a++]=e[c*2],o[a++]=e[c*2+1],l[a++]=s[c],o[a++]=r[c];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?hp.triangulate(t,this):Al[t.type].triangulate(t,this)}processLine(t){tf(t,this);for(let e=0;e<t.holes.length;e++)tf(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const s=t[e];Al[s.type].build(s),s.matrix&&this.transformPoints(s.points,s.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let s=0;s<t.length/2;s++){const r=t[s*2],i=t[s*2+1];t[s*2]=e.a*r+e.c*i+e.tx,t[s*2+1]=e.b*r+e.d*i+e.ty}}addColors(t,e,s,r,i=0){const o=Zt.shared.setValue(e).toLittleEndianNumber(),l=Zt.shared.setValue(o).toPremultiplied(s);t.length=Math.max(t.length,i+r);for(let a=0;a<r;a++)t[i+a]=l}addTextureIds(t,e,s,r=0){t.length=Math.max(t.length,r+s);for(let i=0;i<s;i++)t[r+i]=e}addUvs(t,e,s,r,i,o=null){let l=0;const a=e.length,c=s.frame;for(;l<i;){let d=t[(r+l)*2],u=t[(r+l)*2+1];if(o){const f=o.a*d+o.c*u+o.tx;u=o.b*d+o.d*u+o.ty,d=f}l++,e.push(d/c.width,u/c.height)}const h=s.baseTexture;(c.width<h.width||c.height<h.height)&&this.adjustUvs(e,s,a,i)}adjustUvs(t,e,s,r){const i=e.baseTexture,o=1e-6,l=s+r*2,a=e.frame,c=a.width/i.width,h=a.height/i.height;let d=a.x/a.width,u=a.y/a.height,f=Math.floor(t[s]+o),m=Math.floor(t[s+1]+o);for(let p=s+2;p<l;p+=2)f=Math.min(f,Math.floor(t[p]+o)),m=Math.min(m,Math.floor(t[p+1]+o));d-=f,u-=m;for(let p=s;p<l;p+=2)t[p]=(t[p]+d)*c,t[p+1]=(t[p+1]+u)*h}};dp.BATCHABLE_SIZE=100;let i_=dp;class Po{constructor(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Po;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Ah extends Po{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=sr.BUTT,this.join=ws.MITER,this.miterLimit=10}clone(){const t=new Ah;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=sr.BUTT,this.join=ws.MITER,this.miterLimit=10}}const Cl={},Ic=class ja extends Ze{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Po,this._lineStyle=new Ah,this._matrix=null,this._holeMode=!1,this.state=mn.for2d(),this._geometry=t||new i_,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Zt(16777215),this.blendMode=ht.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new ja(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,s,r=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:s,alignment:r,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:ut.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:sr.BUTT,join:ws.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.width>0&&t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:s},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new ir,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new ir,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const s=this.currentPath.points,r=s[s.length-2],i=s[s.length-1];return(r!==t||i!==e)&&s.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,s,r){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),Th.curveTo(t,e,s,r,i),this}bezierCurveTo(t,e,s,r,i,o){return this._initCurve(),Sh.curveTo(t,e,s,r,i,o,this.currentPath.points),this}arcTo(t,e,s,r,i){this._initCurve(t,e);const o=this.currentPath.points,l=Qu.curveTo(t,e,s,r,i,o);if(l){const{cx:a,cy:c,radius:h,startAngle:d,endAngle:u,anticlockwise:f}=l;this.arc(a,c,h,d,u,f)}return this}arc(t,e,s,r,i,o=!1){if(r===i)return this;if(!o&&i<=r?i+=Za:o&&r<=i&&(r+=Za),i-r===0)return this;const l=t+Math.cos(r)*s,a=e+Math.sin(r)*s,c=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const d=Math.abs(h[h.length-2]-l),u=Math.abs(h[h.length-1]-a);d<c&&u<c||h.push(l,a)}else this.moveTo(l,a),h=this.currentPath.points;return Qu.arc(l,a,t,e,s,r,i,o,h),this}beginFill(t=0,e){return this.beginTextureFill({texture:ut.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Zt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:ut.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const s=t.alpha>0;return s?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:s},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,s,r){return this.drawShape(new _t(t,e,s,r))}drawRoundedRect(t,e,s,r,i){return this.drawShape(new ko(t,e,s,r,i))}drawCircle(t,e,s){return this.drawShape(new Ao(t,e,s))}drawEllipse(t,e,s,r){return this.drawShape(new Co(t,e,s,r))}drawPolygon(...t){let e,s=!0;const r=t[0];r.points?(s=r.closeStroke,e=r.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new ir(e);return i.closeStroke=s,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Oe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,s=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=s,this.vertexData=new Float32Array(t.points);for(let r=0;r<s;r++){const i=t.batches[r],o=i.style.color,l=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),c=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),h={vertexData:l,blendMode:e,indices:c,uvs:a,_batchRGB:Zt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=h}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,s=this.batches.length;e<s;e++){const r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}}_renderDirect(t){const e=this._resolveDirectShader(t),s=this._geometry,r=this.worldAlpha,i=e.uniforms,o=s.drawCalls;i.translationMatrix=this.transform.worldTransform,Zt.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),t.shader.bind(e),t.geometry.bind(s,e),t.state.set(this.state);for(let l=0,a=o.length;l<a;l++)this._renderDrawCallDirect(t,s.drawCalls[l])}_renderDrawCallDirect(t,e){const{texArray:s,type:r,size:i,start:o}=e,l=s.count;for(let a=0;a<l;a++)t.texture.bind(s.elements[a],a);t.geometry.draw(r,i,o)}_resolveDirectShader(t){let e=this.shader;const s=this.pluginName;if(!e){if(!Cl[s]){const{maxTextures:r}=t.plugins[s],i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=a;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ht,default:Ys.from({uSamplers:i},!0)},l=t.plugins[s]._shader.program;Cl[s]=new un(l,o)}e=Cl[s]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:s,maxX:r,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,s,r,i)}containsPoint(t){return this.worldTransform.applyInverse(t,ja._TEMP_POINT),this._geometry.containsPoint(ja._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Zt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,s=e.a,r=e.b,i=e.c,o=e.d,l=e.tx,a=e.ty,c=this._geometry.points,h=this.vertexData;let d=0;for(let u=0;u<c.length;u+=2){const f=c[u],m=c[u+1];h[d++]=s*f+i*m+l,h[d++]=o*m+r*f+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Ic.curves=fi,Ic._TEMP_POINT=new jt;let Ch=Ic;class a_{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const kl=new jt,sf=new ir,fp=class mp extends Ze{constructor(t,e,s,r=Xs.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=s||mn.for2d(),this.drawMode=r,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ct.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Xs.TRIANGLES&&e.length<mp.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,s=this.shader;s.uvMatrix&&(s.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=s._tintRGB,this._texture=s.texture;const r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const r=this.transform.worldTransform,i=r.a,o=r.b,l=r.c,a=r.d,c=r.tx,h=r.ty,d=this.vertexData;for(let u=0;u<d.length/2;u++){const f=e[u*2],m=e[u*2+1];d[u*2]=i*f+l*m+c,d[u*2+1]=o*f+a*m+h}if(this._roundPixels){const u=ct.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*u)/u}this.vertexDirty=s}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new a_(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,kl);const e=this.geometry.getBuffer("aVertexPosition").data,s=sf.points,r=this.geometry.getIndex().data,i=r.length,o=this.drawMode===4?3:1;for(let l=0;l+2<i;l+=o){const a=r[l]*2,c=r[l+1]*2,h=r[l+2]*2;if(s[0]=e[a],s[1]=e[a+1],s[2]=e[c],s[3]=e[c+1],s[4]=e[h],s[5]=e[h+1],sf.contains(kl.x,kl.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};fp.BATCHABLE_SIZE=100;let Rc=fp;class pp extends or{constructor(t,e,s){super();const r=new ye(t),i=new ye(e,!0),o=new ye(s,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,bt.FLOAT).addAttribute("aTextureCoord",i,2,!1,bt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var o_=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,l_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Mc extends un{constructor(t,e){const s={uSampler:t,alpha:1,uTextureMatrix:Ht.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(s,e.uniforms),super(e.program||kn.from(l_,o_),s),this._colorDirty=!1,this.uvMatrix=new Mm(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Zt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Zt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class c_ extends Rc{constructor(t=ut.EMPTY,e,s,r,i){const o=new pp(e,s,r);o.getBuffer("aVertexPosition").static=!1;const l=new Mc(t);super(o,l,null,i),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class nf{constructor(t,e,s){this.geometry=new or,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let i=t[r];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||bt.FLOAT,offset:i.offset},e[r]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ye(Ay(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];l.offset=e,e+=l.size,this.dynamicStride+=l.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new ye(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];l.offset=r,r+=l.size,this.staticStride+=l.size}const i=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(i),this.staticDataUint32=new Uint32Array(i),this.staticBuffer=new ye(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const l=this.dynamicProperties[o];t.addAttribute(l.attributeName,this.dynamicBuffer,0,l.type===bt.UNSIGNED_BYTE,l.type,this.dynamicStride*4,l.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const l=this.staticProperties[o];t.addAttribute(l.attributeName,this.staticBuffer,0,l.type===bt.UNSIGNED_BYTE,l.type,this.staticStride*4,l.offset*4)}}uploadDynamic(t,e,s){for(let r=0;r<this.dynamicProperties.length;r++){const i=this.dynamicProperties[r];i.uploadFunction(t,e,s,i.type===bt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,s){for(let r=0;r<this.staticProperties.length;r++){const i=this.staticProperties[r];i.uploadFunction(t,e,s,i.type===bt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var h_=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,d_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class gp extends Ro{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Ht,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:bt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=un.from(d_,h_,{}),this.state=mn.for2d()}render(t){const e=t.children,s=t._maxSize,r=t._batchSize,i=this.renderer;let o=e.length;if(o===0)return;o>s&&!t.autoResize&&(o=s);let l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));const a=e[0]._texture.baseTexture,c=a.alphaMode>0;this.state.blendMode=mm(t.blendMode,c),i.state.set(this.state);const h=i.gl,d=t.worldTransform.copyTo(this.tempMatrix);d.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Zt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);let u=!1;for(let f=0,m=0;f<o;f+=r,m+=1){let p=o-f;p>r&&(p=r),m>=l.length&&l.push(this._generateOneMoreBuffer(t));const g=l[m];g.uploadDynamic(e,f,p);const x=t._bufferUpdateIDs[m]||0;u=u||g._updateID<x,u&&(g._updateID=t._updateID,g.uploadStatic(e,f,p)),i.geometry.bind(g.geometry),h.drawElements(h.TRIANGLES,p*6,h.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],s=t._maxSize,r=t._batchSize,i=t._properties;for(let o=0;o<s;o+=r)e.push(new nf(this.properties,i,r));return e}_generateOneMoreBuffer(t){const e=t._batchSize,s=t._properties;return new nf(this.properties,s,e)}uploadVertices(t,e,s,r,i,o){let l=0,a=0,c=0,h=0;for(let d=0;d<s;++d){const u=t[e+d],f=u._texture,m=u.scale.x,p=u.scale.y,g=f.trim,x=f.orig;g?(a=g.x-u.anchor.x*x.width,l=a+g.width,h=g.y-u.anchor.y*x.height,c=h+g.height):(l=x.width*(1-u.anchor.x),a=x.width*-u.anchor.x,c=x.height*(1-u.anchor.y),h=x.height*-u.anchor.y),r[o]=a*m,r[o+1]=h*p,r[o+i]=l*m,r[o+i+1]=h*p,r[o+i*2]=l*m,r[o+i*2+1]=c*p,r[o+i*3]=a*m,r[o+i*3+1]=c*p,o+=i*4}}uploadPosition(t,e,s,r,i,o){for(let l=0;l<s;l++){const a=t[e+l].position;r[o]=a.x,r[o+1]=a.y,r[o+i]=a.x,r[o+i+1]=a.y,r[o+i*2]=a.x,r[o+i*2+1]=a.y,r[o+i*3]=a.x,r[o+i*3+1]=a.y,o+=i*4}}uploadRotation(t,e,s,r,i,o){for(let l=0;l<s;l++){const a=t[e+l].rotation;r[o]=a,r[o+i]=a,r[o+i*2]=a,r[o+i*3]=a,o+=i*4}}uploadUvs(t,e,s,r,i,o){for(let l=0;l<s;++l){const a=t[e+l]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+i]=a.x1,r[o+i+1]=a.y1,r[o+i*2]=a.x2,r[o+i*2+1]=a.y2,r[o+i*3]=a.x3,r[o+i*3+1]=a.y3,o+=i*4):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+i*2]=0,r[o+i*2+1]=0,r[o+i*3]=0,r[o+i*3+1]=0,o+=i*4)}}uploadTint(t,e,s,r,i,o){for(let l=0;l<s;++l){const a=t[e+l],c=Zt.shared.setValue(a._tintRGB).toPremultiplied(a.alpha,a.texture.baseTexture.alphaMode>0);r[o]=c,r[o+i]=c,r[o+i*2]=c,r[o+i*3]=c,o+=i*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}gp.extension={name:"particle",type:it.RendererPlugin};pt.add(gp);var No=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(No||{});const Ia={willReadFrequently:!0},an=class xt{static get experimentalLetterSpacingSupported(){let t=xt._experimentalLetterSpacingSupported;if(t!==void 0){const e=ct.ADAPTER.getCanvasRenderingContext2D().prototype;t=xt._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,s,r,i,o,l,a,c){this.text=t,this.style=e,this.width=s,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=l,this.maxLineWidth=a,this.fontProperties=c}static measureText(t,e,s,r=xt._canvas){s=s??e.wordWrap;const i=e.toFontString(),o=xt.measureFont(i);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const l=r.getContext("2d",Ia);l.font=i;const a=(s?xt.wordWrap(t,e,r):t).split(/(?:\r\n|\r|\n)/),c=new Array(a.length);let h=0;for(let m=0;m<a.length;m++){const p=xt._measureText(a[m],e.letterSpacing,l);c[m]=p,h=Math.max(h,p)}let d=h+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);const u=e.lineHeight||o.fontSize+e.strokeThickness;let f=Math.max(u,o.fontSize+e.strokeThickness*2)+e.leading+(a.length-1)*(u+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new xt(t,e,d,f,a,c,u+e.leading,h,o)}static _measureText(t,e,s){let r=!1;xt.experimentalLetterSpacingSupported&&(xt.experimentalLetterSpacing?(s.letterSpacing=`${e}px`,s.textLetterSpacing=`${e}px`,r=!0):(s.letterSpacing="0px",s.textLetterSpacing="0px"));let i=s.measureText(t).width;return i>0&&(r?i-=e:i+=(xt.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,s=xt._canvas){const r=s.getContext("2d",Ia);let i=0,o="",l="";const a=Object.create(null),{letterSpacing:c,whiteSpace:h}=e,d=xt.collapseSpaces(h),u=xt.collapseNewlines(h);let f=!d;const m=e.wordWrapWidth+c,p=xt.tokenize(t);for(let g=0;g<p.length;g++){let x=p[g];if(xt.isNewline(x)){if(!u){l+=xt.addLine(o),f=!d,o="",i=0;continue}x=" "}if(d){const y=xt.isBreakingSpace(x),w=xt.isBreakingSpace(o[o.length-1]);if(y&&w)continue}const b=xt.getFromCache(x,c,a,r);if(b>m)if(o!==""&&(l+=xt.addLine(o),o="",i=0),xt.canBreakWords(x,e.breakWords)){const y=xt.wordWrapSplit(x);for(let w=0;w<y.length;w++){let _=y[w],E=_,S=1;for(;y[w+S];){const A=y[w+S];if(!xt.canBreakChars(E,A,x,w,e.breakWords))_+=A;else break;E=A,S++}w+=S-1;const T=xt.getFromCache(_,c,a,r);T+i>m&&(l+=xt.addLine(o),f=!1,o="",i=0),o+=_,i+=T}}else{o.length>0&&(l+=xt.addLine(o),o="",i=0);const y=g===p.length-1;l+=xt.addLine(x,!y),f=!1,o="",i=0}else b+i>m&&(f=!1,l+=xt.addLine(o),o="",i=0),(o.length>0||!xt.isBreakingSpace(x)||f)&&(o+=x,i+=b)}return l+=xt.addLine(o,!1),l}static addLine(t,e=!0){return t=xt.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,s,r){let i=s[t];return typeof i!="number"&&(i=xt._measureText(t,e,r)+e,s[t]=i),i}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const s=t[e];if(!xt.isBreakingSpace(s))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:xt._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:xt._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let s="";if(typeof t!="string")return e;for(let r=0;r<t.length;r++){const i=t[r],o=t[r+1];if(xt.isBreakingSpace(i,o)||xt.isNewline(i)){s!==""&&(e.push(s),s=""),e.push(i);continue}s+=i}return s!==""&&e.push(s),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,s,r,i){return!0}static wordWrapSplit(t){return xt.graphemeSegmenter(t)}static measureFont(t){if(xt._fonts[t])return xt._fonts[t];const e={ascent:0,descent:0,fontSize:0},s=xt._canvas,r=xt._context;r.font=t;const i=xt.METRICS_STRING+xt.BASELINE_SYMBOL,o=Math.ceil(r.measureText(i).width);let l=Math.ceil(r.measureText(xt.BASELINE_SYMBOL).width);const a=Math.ceil(xt.HEIGHT_MULTIPLIER*l);if(l=l*xt.BASELINE_MULTIPLIER|0,o===0||a===0)return xt._fonts[t]=e,e;s.width=o,s.height=a,r.fillStyle="#f00",r.fillRect(0,0,o,a),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(i,0,l);const c=r.getImageData(0,0,o,a).data,h=c.length,d=o*4;let u=0,f=0,m=!1;for(u=0;u<l;++u){for(let p=0;p<d;p+=4)if(c[f+p]!==255){m=!0;break}if(!m)f+=d;else break}for(e.ascent=l-u,f=h-d,m=!1,u=a;u>l;--u){for(let p=0;p<d;p+=4)if(c[f+p]!==255){m=!0;break}if(!m)f-=d;else break}return e.descent=u-l,e.fontSize=e.ascent+e.descent,xt._fonts[t]=e,e}static clearMetrics(t=""){t?delete xt._fonts[t]:xt._fonts={}}static get _canvas(){var t;if(!xt.__canvas){let e;try{const s=new OffscreenCanvas(0,0);if((t=s.getContext("2d",Ia))!=null&&t.measureText)return xt.__canvas=s,s;e=ct.ADAPTER.createCanvas()}catch{e=ct.ADAPTER.createCanvas()}e.width=e.height=10,xt.__canvas=e}return xt.__canvas}static get _context(){return xt.__context||(xt.__context=xt._canvas.getContext("2d",Ia)),xt.__context}};an.METRICS_STRING="|q",an.BASELINE_SYMBOL="M",an.BASELINE_MULTIPLIER=1.4,an.HEIGHT_MULTIPLIER=2,an.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const n=new Intl.Segmenter;return t=>[...n.segment(t)].map(e=>e.segment)}return n=>[...n]})(),an.experimentalLetterSpacing=!1,an._fonts={},an._newlines=[10,13],an._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let qn=an;const u_=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],xp=class Ui{constructor(t){this.styleID=0,this.reset(),Rl(this,t,t)}clone(){const t={};return Rl(t,this,Ui.defaultStyle),new Ui(t)}reset(){Rl(this,Ui.defaultStyle,Ui.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Il(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Il(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){f_(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Il(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let s=e.length-1;s>=0;s--){let r=e[s].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!u_.includes(r)&&(r=`"${r}"`),e[s]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};xp.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:No.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let lr=xp;function Il(n){const t=Zt.shared,e=s=>{const r=t.setValue(s);return r.alpha===1?r.toHex():r.toRgbaString()};return Array.isArray(n)?n.map(e):e(n)}function f_(n,t){if(!Array.isArray(n)||!Array.isArray(t)||n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(n[e]!==t[e])return!1;return!0}function Rl(n,t,e){for(const s in e)Array.isArray(t[s])?n[s]=t[s].slice():n[s]=t[s]}const m_={texture:!0,children:!1,baseTexture:!0},bp=class Pc extends Ur{constructor(t,e,s){let r=!1;s||(s=ct.ADAPTER.createCanvas(),r=!0),s.width=3,s.height=3;const i=ut.from(s);i.orig=new _t,i.trim=new _t,super(i),this._ownCanvas=r,this.canvas=s,this.context=s.getContext("2d",{willReadFrequently:!0}),this._resolution=Pc.defaultResolution??ct.RESOLUTION,this._autoResolution=Pc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return qn.experimentalLetterSpacing}static set experimentalLetterSpacing(t){Nt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),qn.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const s=this.context,r=qn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,l=r.lines,a=r.lineHeight,c=r.lineWidths,h=r.maxLineWidth,d=r.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=e.strokeThickness,s.textBaseline=e.textBaseline,s.lineJoin=e.lineJoin,s.miterLimit=e.miterLimit;let u,f;const m=e.dropShadow?2:1;for(let p=0;p<m;++p){const g=e.dropShadow&&p===0,x=g?Math.ceil(Math.max(1,o)+e.padding*2):0,b=x*this._resolution;if(g){s.fillStyle="black",s.strokeStyle="black";const w=e.dropShadowColor,_=e.dropShadowBlur*this._resolution,E=e.dropShadowDistance*this._resolution;s.shadowColor=Zt.shared.setValue(w).setAlpha(e.dropShadowAlpha).toRgbaString(),s.shadowBlur=_,s.shadowOffsetX=Math.cos(e.dropShadowAngle)*E,s.shadowOffsetY=Math.sin(e.dropShadowAngle)*E+b}else s.fillStyle=this._generateFillStyle(e,l,r),s.strokeStyle=e.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;let y=(a-d.fontSize)/2;a-d.fontSize<0&&(y=0);for(let w=0;w<l.length;w++)u=e.strokeThickness/2,f=e.strokeThickness/2+w*a+d.ascent+y,e.align==="right"?u+=h-c[w]:e.align==="center"&&(u+=(h-c[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(l[w],u+e.padding,f+e.padding-x,!0),e.fill&&this.drawLetterSpacing(l[w],u+e.padding,f+e.padding-x)}this.updateTexture()}drawLetterSpacing(t,e,s,r=!1){const i=this._style.letterSpacing;let o=!1;if(qn.experimentalLetterSpacingSupported&&(qn.experimentalLetterSpacing?(this.context.letterSpacing=`${i}px`,this.context.textLetterSpacing=`${i}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),i===0||o){r?this.context.strokeText(t,e,s):this.context.fillText(t,e,s);return}let l=e;const a=qn.graphemeSegmenter(t);let c=this.context.measureText(t).width,h=0;for(let d=0;d<a.length;++d){const u=a[d];r?this.context.strokeText(u,l,s):this.context.fillText(u,l,s);let f="";for(let m=d+1;m<a.length;++m)f+=a[m];h=this.context.measureText(f).width,l+=c-h+i,c=h}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=Ry(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,s=this._style,r=s.trim?0:s.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-r,e.trim.y=-r,e.orig.width=e._frame.width-r*2,e.orig.height=e._frame.height-r*2,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,s){const r=t.fill;if(Array.isArray(r)){if(r.length===1)return r[0]}else return r;let i;const o=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,a=this.canvas.width/this._resolution-o-l*2,c=this.canvas.height/this._resolution-o-l*2,h=r.slice(),d=t.fillGradientStops.slice();if(!d.length){const u=h.length+1;for(let f=1;f<u;++f)d.push(f/u)}if(h.unshift(r[0]),d.unshift(0),h.push(r[r.length-1]),d.push(1),t.fillGradientType===No.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,l,a/2,c+l);const u=s.fontProperties.fontSize+t.strokeThickness;for(let f=0;f<e.length;f++){const m=s.lineHeight*(f-1)+u,p=s.lineHeight*f;let g=p;f>0&&m>p&&(g=(p+m)/2);const x=p+u,b=s.lineHeight*(f+1);let y=x;f+1<e.length&&b<x&&(y=(x+b)/2);const w=(y-g)/c;for(let _=0;_<h.length;_++){let E=0;typeof d[_]=="number"?E=d[_]:E=_/h.length;let S=Math.min(1,Math.max(0,g/c+E*w));S=Number(S.toFixed(5)),i.addColorStop(S,h[_])}}}else{i=this.context.createLinearGradient(l,c/2,a+l,c/2);const u=h.length+1;let f=1;for(let m=0;m<h.length;m++){let p;typeof d[m]=="number"?p=d[m]:p=f/u,i.addColorStop(p,h[m]),f++}}return i}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},m_,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=er(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=er(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof lr?this._style=t:this._style=new lr(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};bp.defaultAutoResolution=!0;let yp=bp;class p_{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function g_(n,t){var s;let e=!1;if((s=n==null?void 0:n._textures)!=null&&s.length){for(let r=0;r<n._textures.length;r++)if(n._textures[r]instanceof ut){const i=n._textures[r].baseTexture;t.includes(i)||(t.push(i),e=!0)}}return e}function x_(n,t){if(n.baseTexture instanceof Et){const e=n.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function b_(n,t){if(n._texture&&n._texture instanceof ut){const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function y_(n,t){return t instanceof yp?(t.updateText(!0),!0):!1}function w_(n,t){if(t instanceof lr){const e=t.toFontString();return qn.measureFont(e),!0}return!1}function v_(n,t){if(n instanceof yp){t.includes(n.style)||t.push(n.style),t.includes(n)||t.push(n);const e=n._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function __(n,t){return n instanceof lr?(t.includes(n)||t.push(n),!0):!1}const wp=class vp{constructor(t){this.limiter=new p_(vp.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(v_),this.registerFindHook(__),this.registerFindHook(g_),this.registerFindHook(x_),this.registerFindHook(b_),this.registerUploadHook(y_),this.registerUploadHook(w_)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,ds.system.addOnce(this.tick,this,Fr.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let s=0,r=this.uploadHooks.length;s<r;s++)if(this.uploadHooks[s](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)ds.system.addOnce(this.tick,this,Fr.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,s=t.length;e<s;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,s=this.addHooks.length;e<s&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ze)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&ds.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};wp.uploadsPerFrame=4;let Nc=wp;Object.defineProperties(ct,{UPLOADS_PER_FRAME:{get(){return Nc.uploadsPerFrame},set(n){Nt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Nc.uploadsPerFrame=n}}});function _p(n,t){return t instanceof Et?(t._glTextures[n.CONTEXT_UID]||n.texture.bind(t),!0):!1}function E_(n,t){if(!(t instanceof Ch))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:s}=e;for(let r=0;r<s.length;r++){const{texture:i}=s[r].style;i&&_p(n,i.baseTexture)}return e.batchable||n.geometry.bind(e,t._resolveDirectShader(n)),!0}function S_(n,t){return n instanceof Ch?(t.push(n),!0):!1}class Ep extends Nc{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(S_),this.registerUploadHook(_p),this.registerUploadHook(E_)}}Ep.extension={name:"prepare",type:it.RendererSystem};pt.add(Ep);var T_=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,A_=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,C_=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,rf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,k_=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ra=new Ht;class Sp extends Ro{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Cm,this.state=mn.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=un.from(rf,k_,e),this.shader=t.context.webGLVersion>1?un.from(A_,T_,e):un.from(rf,C_,e)}render(t){const e=this.renderer,s=this.quad;let r=s.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;r=s.uvs,r[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,s.invalidate();const l=t._texture,a=l.baseTexture,c=a.alphaMode>0,h=t.tileTransform.localTransform,d=t.uvMatrix;let u=a.isPowerOfTwo&&l.frame.width===a.width&&l.frame.height===a.height;u&&(a._glTextures[e.CONTEXT_UID]?u=a.wrapMode!==rr.CLAMP:a.wrapMode===rr.CLAMP&&(a.wrapMode=rr.REPEAT));const f=u?this.simpleShader:this.shader,m=l.width,p=l.height,g=t._width,x=t._height;Ra.set(h.a*m/g,h.b*m/x,h.c*p/g,h.d*p/x,h.tx/g,h.ty/x),Ra.invert(),u?Ra.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=Ra.toArray(!0),f.uniforms.uColor=Zt.shared.setValue(t.tint).premultiply(t.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=l,e.shader.bind(f),e.geometry.bind(s),this.state.blendMode=mm(t.blendMode,c),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Sp.extension={name:"tilingSprite",type:it.RendererPlugin};pt.add(Sp);const Tp=class ji{constructor(t,e,s){this.linkedSheets=[],(t instanceof Et||t instanceof ut)&&(t={texture:t,data:e,resolutionFilename:s});const{texture:r,data:i,resolutionFilename:o=null,cachePrefix:l=""}=t;this.cachePrefix=l,this._texture=r instanceof ut?r:null,this.baseTexture=r instanceof Et?r:this._texture.baseTexture,this.textures={},this.animations={},this.data=i;const a=this.baseTexture.resource;this.resolution=this._updateResolution(o||(a?a.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let s=Mn(t,null);return s===null&&(s=typeof e=="number"?e:parseFloat(e??"1")),s!==1&&this.baseTexture.setResolution(s),s}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=ji.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const s=ji.BATCH_SIZE;for(;e-t<s&&e<this._frameKeys.length;){const r=this._frameKeys[e],i=this._frames[r],o=i.frame;if(o){let l=null,a=null;const c=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,h=new _t(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);i.rotated?l=new _t(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):l=new _t(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new _t(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[r]=new ut(this.baseTexture,l,h,a,i.rotated?2:0,i.anchor,i.borders),ut.addToCache(this.textures[r],this.cachePrefix+r.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let s=0;s<t[e].length;s++){const r=t[e][s];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*ji.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*ji.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const s in this.textures)this.textures[s].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Tp.BATCH_SIZE=1e3;let af=Tp;const I_=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Ap(n,t,e){const s={};if(n.forEach(r=>{s[r]=t}),Object.keys(t.textures).forEach(r=>{s[`${t.cachePrefix}${r}`]=t.textures[r]}),!e){const r=ne.dirname(n[0]);t.linkedSheets.forEach((i,o)=>{Object.assign(s,Ap([`${r}/${t.data.meta.related_multi_packs[o]}`],i,!0))})}return s}const R_={extension:it.Asset,cache:{test:n=>n instanceof af,getCacheableAssets:(n,t)=>Ap(n,t,!1)},resolver:{test:n=>{const t=n.split("?")[0].split("."),e=t.pop(),s=t.pop();return e==="json"&&I_.includes(s)},parse:n=>{var e;const t=n.split(".");return{resolution:parseFloat(((e=ct.RETINA_PREFIX.exec(n))==null?void 0:e[1])??"1"),format:t[t.length-2],src:n}}},loader:{name:"spritesheetLoader",extension:{type:it.LoadParser,priority:xs.Normal},async testParse(n,t){return ne.extname(t.src).toLowerCase()===".json"&&!!n.frames},async parse(n,t,e){var h,d;const{texture:s,imageFilename:r,cachePrefix:i}=(t==null?void 0:t.data)??{};let o=ne.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(s&&s.baseTexture)l=s;else{const u=Ac(o+(r??n.meta.image),t.src);l=(await e.load([u]))[u]}const a=new af({texture:l.baseTexture,data:n,resolutionFilename:t.src,cachePrefix:i});await a.parse();const c=(h=n==null?void 0:n.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(c)){const u=[];for(const m of c){if(typeof m!="string")continue;let p=o+m;(d=t.data)!=null&&d.ignoreMultiPack||(p=Ac(p,t.src),u.push(e.load({src:p,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(u);a.linkedSheets=f,f.forEach(m=>{m.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==m))})}return a},unload(n){n.destroy(!0)}}};pt.add(R_);class lo{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Xa{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const i in e){const o=e[i].match(/^[a-z]+/gm)[0],l=e[i].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(const c in l){const h=l[c].split("="),d=h[0],u=h[1].replace(/"/gm,""),f=parseFloat(u),m=isNaN(f)?u:f;a[d]=m}s[o].push(a)}const r=new lo;return s.info.forEach(i=>r.info.push({face:i.face,size:parseInt(i.size,10)})),s.common.forEach(i=>r.common.push({lineHeight:parseInt(i.lineHeight,10)})),s.page.forEach(i=>r.page.push({id:parseInt(i.id,10),file:i.file})),s.char.forEach(i=>r.char.push({id:parseInt(i.id,10),page:parseInt(i.page,10),x:parseInt(i.x,10),y:parseInt(i.y,10),width:parseInt(i.width,10),height:parseInt(i.height,10),xoffset:parseInt(i.xoffset,10),yoffset:parseInt(i.yoffset,10),xadvance:parseInt(i.xadvance,10)})),s.kerning.forEach(i=>r.kerning.push({first:parseInt(i.first,10),second:parseInt(i.second,10),amount:parseInt(i.amount,10)})),s.distanceField.forEach(i=>r.distanceField.push({distanceRange:parseInt(i.distanceRange,10),fieldType:i.fieldType})),r}}class Fc{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new lo,s=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),l=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField");for(let c=0;c<s.length;c++)e.info.push({face:s[c].getAttribute("face"),size:parseInt(s[c].getAttribute("size"),10)});for(let c=0;c<r.length;c++)e.common.push({lineHeight:parseInt(r[c].getAttribute("lineHeight"),10)});for(let c=0;c<i.length;c++)e.page.push({id:parseInt(i[c].getAttribute("id"),10)||0,file:i[c].getAttribute("file")});for(let c=0;c<o.length;c++){const h=o[c];e.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let c=0;c<l.length;c++)e.kerning.push({first:parseInt(l[c].getAttribute("first"),10),second:parseInt(l[c].getAttribute("second"),10),amount:parseInt(l[c].getAttribute("amount"),10)});for(let c=0;c<a.length;c++)e.distanceField.push({fieldType:a[c].getAttribute("fieldType"),distanceRange:parseInt(a[c].getAttribute("distanceRange"),10)});return e}}class Bc{static test(t){return typeof t=="string"&&t.includes("<font>")?Fc.test(ct.ADAPTER.parseXML(t)):!1}static parse(t){return Fc.parse(ct.ADAPTER.parseXML(t))}}const Ml=[Xa,Fc,Bc];function M_(n){for(let t=0;t<Ml.length;t++)if(Ml[t].test(n))return Ml[t];return null}function P_(n,t,e,s,r,i){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let l;const a=e.dropShadow?e.dropShadowDistance:0,c=e.padding||0,h=n.width/s-a-c*2,d=n.height/s-a-c*2,u=o.slice(),f=e.fillGradientStops.slice();if(!f.length){const m=u.length+1;for(let p=1;p<m;++p)f.push(p/m)}if(u.unshift(o[0]),f.unshift(0),u.push(o[o.length-1]),f.push(1),e.fillGradientType===No.LINEAR_VERTICAL){l=t.createLinearGradient(h/2,c,h/2,d+c);let m=0;const p=(i.fontProperties.fontSize+e.strokeThickness)/d;for(let g=0;g<r.length;g++){const x=i.lineHeight*g;for(let b=0;b<u.length;b++){let y=0;typeof f[b]=="number"?y=f[b]:y=b/u.length;const w=x/d+y*p;let _=Math.max(m,w);_=Math.min(_,1),l.addColorStop(_,u[b]),m=_}}}else{l=t.createLinearGradient(c,d/2,h+c,d/2);const m=u.length+1;let p=1;for(let g=0;g<u.length;g++){let x;typeof f[g]=="number"?x=f[g]:x=p/m,l.addColorStop(x,u[g]),p++}}return l}function N_(n,t,e,s,r,i,o){const l=e.text,a=e.fontProperties;t.translate(s,r),t.scale(i,i);const c=o.strokeThickness/2,h=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=P_(n,t,o,i,[l],e),t.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,u=o.dropShadowBlur*i,f=o.dropShadowDistance*i;t.shadowColor=Zt.shared.setValue(d).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=u,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(l,c,h+e.lineHeight-a.descent),o.fill&&t.fillText(l,c,h+e.lineHeight-a.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Ga(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}function Cp(n){return Array.from?Array.from(n):n.split("")}function F_(n){typeof n=="string"&&(n=[n]);const t=[];for(let e=0,s=n.length;e<s;e++){const r=n[e];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const i=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<i)throw new Error("[BitmapFont]: Invalid character range.");for(let l=i,a=o;l<=a;l++)t.push(String.fromCharCode(l))}else t.push(...Cp(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const jn=class on{constructor(t,e,s){var h;const[r]=t.info,[i]=t.common,[o]=t.page,[l]=t.distanceField,a=Mn(o.file),c={};this._ownsTextures=s,this.font=r.face,this.size=r.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=c;for(let d=0;d<t.page.length;d++){const{id:u,file:f}=t.page[d];c[u]=e instanceof Array?e[d]:e[f],l!=null&&l.fieldType&&l.fieldType!=="none"&&(c[u].baseTexture.alphaMode=qe.NO_PREMULTIPLIED_ALPHA,c[u].baseTexture.mipmap=zs.OFF)}for(let d=0;d<t.char.length;d++){const{id:u,page:f}=t.char[d];let{x:m,y:p,width:g,height:x,xoffset:b,yoffset:y,xadvance:w}=t.char[d];m/=a,p/=a,g/=a,x/=a,b/=a,y/=a,w/=a;const _=new _t(m+c[f].frame.x/a,p+c[f].frame.y/a,g,x);this.chars[u]={xOffset:b,yOffset:y,xAdvance:w,kerning:{},texture:new ut(c[f].baseTexture,_),page:f}}for(let d=0;d<t.kerning.length;d++){let{first:u,second:f,amount:m}=t.kerning[d];u/=a,f/=a,m/=a,this.chars[f]&&(this.chars[f].kerning[u]=m)}this.distanceFieldRange=l==null?void 0:l.distanceRange,this.distanceFieldType=((h=l==null?void 0:l.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,s){let r;if(t instanceof lo)r=t;else{const o=M_(t);if(!o)throw new Error("Unrecognized data format for font.");r=o.parse(t)}e instanceof ut&&(e=[e]);const i=new on(r,e,s);return on.available[i.font]=i,i}static uninstall(t){const e=on.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete on.available[t]}static from(t,e,s){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:i,resolution:o,textureWidth:l,textureHeight:a,...c}=Object.assign({},on.defaultOptions,s),h=F_(r),d=e instanceof lr?e:new lr(e),u=l,f=new lo;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let m=0,p=0,g,x,b,y=0;const w=[];for(let E=0;E<h.length;E++){g||(g=ct.ADAPTER.createCanvas(),g.width=l,g.height=a,x=g.getContext("2d"),b=new Et(g,{resolution:o,...c}),w.push(new ut(b)),f.page.push({id:w.length-1,file:""}));const S=h[E],T=qn.measureText(S,d,!1,g),A=T.width,C=Math.ceil(T.height),I=Math.ceil((d.fontStyle==="italic"?2:1)*A);if(p>=a-C*o){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${S}')`);--E,g=null,x=null,b=null,p=0,m=0,y=0;continue}if(y=Math.max(C+T.fontProperties.descent,y),I*o+m>=u){if(m===0)throw new Error(`[BitmapFont] textureWidth ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${S}')`);--E,p+=y*o,p=Math.ceil(p),m=0,y=0;continue}N_(g,x,T,m,p,o,d);const P=Ga(T.text);f.char.push({id:P,page:w.length-1,x:m/o,y:p/o,width:I,height:C,xoffset:0,yoffset:0,xadvance:A-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),m+=(I+2*i)*o,m=Math.ceil(m)}if(!(s!=null&&s.skipKerning))for(let E=0,S=h.length;E<S;E++){const T=h[E];for(let A=0;A<S;A++){const C=h[A],I=x.measureText(T).width,P=x.measureText(C).width,R=x.measureText(T+C).width-(I+P);R&&f.kerning.push({first:Ga(T),second:Ga(C),amount:R})}}const _=new on(f,w,!0);return on.available[t]!==void 0&&on.uninstall(t),on.available[t]=_,_}};jn.ALPHA=[["a","z"],["A","Z"]," "],jn.NUMERIC=[["0","9"]],jn.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],jn.ASCII=[[" ","~"]],jn.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:jn.ALPHANUMERIC},jn.available={};let Xn=jn;var B_=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,D_=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const of=[],lf=[],cf=[],L_=class kp extends Ze{constructor(t,e={}){super();const{align:s,tint:r,maxWidth:i,letterSpacing:o,fontName:l,fontSize:a}=Object.assign({},kp.styleDefaults,e);if(!Xn.available[l])throw new Error(`Missing BitmapFont "${l}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=s,this._tintColor=new Zt(r),this._font=void 0,this._fontName=l,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Cn(()=>{this.dirty=!0},this,0,0),this._roundPixels=ct.ROUND_PIXELS,this.dirty=!0,this._resolution=ct.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var I;const t=Xn.available[this._fontName],e=this.fontSize,s=e/t.size,r=new jt,i=[],o=[],l=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=Cp(a),h=this._maxWidth*t.size/e,d=t.distanceFieldType==="none"?of:lf;let u=null,f=0,m=0,p=0,g=-1,x=0,b=0,y=0,w=0;for(let P=0;P<c.length;P++){const R=c[P],N=Ga(R);if(/(?:\s)/.test(R)&&(g=P,x=f,w++),R==="\r"||R===`
`){o.push(f),l.push(-1),m=Math.max(m,f),++p,++b,r.x=0,r.y+=t.lineHeight,u=null,w=0;continue}const F=t.chars[N];if(!F)continue;u&&F.kerning[u]&&(r.x+=F.kerning[u]);const D=cf.pop()||{texture:ut.EMPTY,line:0,charCode:0,prevSpaces:0,position:new jt};D.texture=F.texture,D.line=p,D.charCode=N,D.position.x=Math.round(r.x+F.xOffset+this._letterSpacing/2),D.position.y=Math.round(r.y+F.yOffset),D.prevSpaces=w,i.push(D),f=D.position.x+Math.max(F.xAdvance-F.xOffset,F.texture.orig.width),r.x+=F.xAdvance+this._letterSpacing,y=Math.max(y,F.yOffset+F.texture.height),u=N,g!==-1&&h>0&&r.x>h&&(++b,oi(i,1+g-b,1+P-g),P=g,g=-1,o.push(x),l.push(i.length>0?i[i.length-1].prevSpaces:0),m=Math.max(m,x),p++,r.x=0,r.y+=t.lineHeight,u=null,w=0)}const _=c[c.length-1];_!=="\r"&&_!==`
`&&(/(?:\s)/.test(_)&&(f=x),o.push(f),m=Math.max(m,f),l.push(-1));const E=[];for(let P=0;P<=p;P++){let R=0;this._align==="right"?R=m-o[P]:this._align==="center"?R=(m-o[P])/2:this._align==="justify"&&(R=l[P]<0?0:(m-o[P])/l[P]),E.push(R)}const S=i.length,T={},A=[],C=this._activePagesMeshData;d.push(...C);for(let P=0;P<S;P++){const R=i[P].texture,N=R.baseTexture.uid;if(!T[N]){let F=d.pop();if(!F){const L=new pp;let O,j;t.distanceFieldType==="none"?(O=new Mc(ut.EMPTY),j=ht.NORMAL):(O=new Mc(ut.EMPTY,{program:kn.from(D_,B_),uniforms:{uFWidth:0}}),j=ht.NORMAL_NPM);const U=new Rc(L,O);U.blendMode=j,F={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:U,vertices:null,uvs:null,indices:null}}F.index=0,F.indexCount=0,F.vertexCount=0,F.uvsCount=0,F.total=0;const{_textureCache:D}=this;D[N]=D[N]||new ut(R.baseTexture),F.mesh.texture=D[N],F.mesh.tint=this._tintColor.value,A.push(F),T[N]=F}T[N].total++}for(let P=0;P<C.length;P++)A.includes(C[P])||this.removeChild(C[P].mesh);for(let P=0;P<A.length;P++)A[P].mesh.parent!==this&&this.addChild(A[P].mesh);this._activePagesMeshData=A;for(const P in T){const R=T[P],N=R.total;if(!(((I=R.indices)==null?void 0:I.length)>6*N)||R.vertices.length<Rc.BATCHABLE_SIZE*2)R.vertices=new Float32Array(4*2*N),R.uvs=new Float32Array(4*2*N),R.indices=new Uint16Array(6*N);else{const F=R.total,D=R.vertices;for(let L=F*4*2;L<D.length;L++)D[L]=0}R.mesh.size=6*N}for(let P=0;P<S;P++){const R=i[P];let N=R.position.x+E[R.line]*(this._align==="justify"?R.prevSpaces:1);this._roundPixels&&(N=Math.round(N));const F=N*s,D=R.position.y*s,L=R.texture,O=T[L.baseTexture.uid],j=L.frame,U=L._uvs,B=O.index++;O.indices[B*6+0]=0+B*4,O.indices[B*6+1]=1+B*4,O.indices[B*6+2]=2+B*4,O.indices[B*6+3]=0+B*4,O.indices[B*6+4]=2+B*4,O.indices[B*6+5]=3+B*4,O.vertices[B*8+0]=F,O.vertices[B*8+1]=D,O.vertices[B*8+2]=F+j.width*s,O.vertices[B*8+3]=D,O.vertices[B*8+4]=F+j.width*s,O.vertices[B*8+5]=D+j.height*s,O.vertices[B*8+6]=F,O.vertices[B*8+7]=D+j.height*s,O.uvs[B*8+0]=U.x0,O.uvs[B*8+1]=U.y0,O.uvs[B*8+2]=U.x1,O.uvs[B*8+3]=U.y1,O.uvs[B*8+4]=U.x2,O.uvs[B*8+5]=U.y2,O.uvs[B*8+6]=U.x3,O.uvs[B*8+7]=U.y3}this._textWidth=m*s,this._textHeight=(r.y+t.lineHeight)*s;for(const P in T){const R=T[P];if(this.anchor.x!==0||this.anchor.y!==0){let L=0;const O=this._textWidth*this.anchor.x,j=this._textHeight*this.anchor.y;for(let U=0;U<R.total;U++)R.vertices[L++]-=O,R.vertices[L++]-=j,R.vertices[L++]-=O,R.vertices[L++]-=j,R.vertices[L++]-=O,R.vertices[L++]-=j,R.vertices[L++]-=O,R.vertices[L++]-=j}this._maxLineHeight=y*s;const N=R.mesh.geometry.getBuffer("aVertexPosition"),F=R.mesh.geometry.getBuffer("aTextureCoord"),D=R.mesh.geometry.getIndex();N.data=R.vertices,F.data=R.uvs,D.data=R.indices,N.update(),F.update(),D.update()}for(let P=0;P<i.length;P++)cf.push(i[P]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:s,size:r}=Xn.available[this._fontName];if(s!=="none"){const{a:i,b:o,c:l,d:a}=this.worldTransform,c=Math.sqrt(i*i+o*o),h=Math.sqrt(l*l+a*a),d=(Math.abs(c)+Math.abs(h))/2,u=this.fontSize/r,f=t._view.resolution;for(const m of this._activePagesMeshData)m.mesh.shader.uniforms.uFWidth=d*e*u*f}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=Xn.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!Xn.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??Xn.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,s=Xn.available[this._fontName].distanceFieldType==="none"?of:lf;s.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],s.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=ut.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};L_.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const O_=[".xml",".fnt"],V_={extension:{type:it.LoadParser,priority:xs.Normal},name:"loadBitmapFont",test(n){return O_.includes(ne.extname(n).toLowerCase())},async testParse(n){return Xa.test(n)||Bc.test(n)},async parse(n,t,e){const s=Xa.test(n)?Xa.parse(n):Bc.parse(n),{src:r}=t,{page:i}=s,o=[];for(let c=0;c<i.length;++c){const h=i[c].file;let d=ne.join(ne.dirname(r),h);d=Ac(d,r),o.push(d)}const l=await e.load(o),a=o.map(c=>l[c]);return Xn.install(s,a,!0)},async load(n,t){return(await ct.ADAPTER.fetch(n)).text()},unload(n){n.destroy()}};pt.add(V_);const Dc=class Qr extends lr{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Qr(Object.keys(Qr.defaultOptions).reduce((e,s)=>({...e,[s]:t[s]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Qr.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:s}=Qr;if(s[t]){const r=s[t];return this._fonts.push(r),r.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ct.ADAPTER.fetch(t).then(r=>r.blob()).then(async r=>new Promise((i,o)=>{const l=URL.createObjectURL(r),a=new FileReader;a.onload=()=>i([l,a.result]),a.onerror=o,a.readAsDataURL(r)})).then(async([r,i])=>{const o=Object.assign({family:ne.basename(t,ne.extname(t)),weight:"normal",style:"normal",display:"auto",src:r,dataSrc:i,refs:1,originalUrl:t,fontFace:null},e);s[t]=o,this._fonts.push(o),this.styleID++;const l=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=l,await l.load(),document.fonts.add(l),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(s=>!this._overrides.includes(s));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(s=>this._overrides.includes(s));e.length>0&&(this._overrides=this._overrides.filter(s=>!e.includes(s)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=Da(t)),typeof t=="number"?Sy(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,s=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const i=`${s}px ${r}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,Qr.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=ct.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};Dc.availableFonts={},Dc.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let Pl=Dc;const Ma=class Jr extends Ur{constructor(t="",e={}){super(ut.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const s=new Image,r=ut.from(s,{scaleMode:ct.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new _t,r.trim=new _t,this.texture=r;const i="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",l=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),c=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",l.appendChild(a),this.maxWidth=Jr.defaultMaxWidth,this.maxHeight=Jr.defaultMaxHeight,this._domElement=c,this._styleElement=h,this._svgRoot=l,this._foreignObject=a,this._foreignObject.appendChild(h),this._foreignObject.appendChild(c),this._image=s,this._loadImage=new Image,this._autoResolution=Jr.defaultAutoResolution,this._resolution=Jr.defaultResolution??ct.RESOLUTION,this.text=t,this.style=e}measureText(t){var h,d;const{text:e,style:s,resolution:r}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:s.toCSS(r)}),this._styleElement.textContent=s.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:l}=i;(o>this.maxWidth||l>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const a=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(l));return this._svgRoot.setAttribute("width",a.toString()),this._svgRoot.setAttribute("height",c.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),s!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(r)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:a+s.padding*2,height:c+s.padding*2}}async updateText(t=!0){const{style:e,_image:s,_loadImage:r}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:i,height:o}=this.measureText();s.width=r.width=Math.ceil(Math.max(1,i)),s.height=r.height=Math.ceil(Math.max(1,o)),this._updateID++;const l=this._updateID;await new Promise(a=>{r.onload=async()=>{if(l<this._updateID){a();return}await e.onBeforeDraw(),s.src=r.src,r.onload=null,r.src="",this.updateTexture(),a()};const c=new XMLSerializer().serializeToString(this._svgRoot);r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:s,resolution:r}=this,{padding:i}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=s.width/r,e.trim.height=e._frame.height=s.height/r,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),o.setRealSize(s.width,s.height,r),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var s,r,i,o,l;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Jr.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((s=this._style)==null||s.cleanFonts()),this._style=e,(r=this._svgRoot)==null||r.remove(),this._svgRoot=e,(i=this._domElement)==null||i.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(l=this._styleElement)==null||l.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=er(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=er(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Pl?(this.ownsStyle=!1,this._style=t):t instanceof lr?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Pl.from(t)):(this.ownsStyle=!0,this._style=new Pl(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Ma.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Ma.defaultMaxWidth=2024,Ma.defaultMaxHeight=2024,Ma.defaultAutoResolution=!0;var Mt=(n=>(n[n.Region=0]="Region",n[n.BoundingBox=1]="BoundingBox",n[n.Mesh=2]="Mesh",n[n.LinkedMesh=3]="LinkedMesh",n[n.Path=4]="Path",n[n.Point=5]="Point",n[n.Clipping=6]="Clipping",n))(Mt||{});class co{constructor(t,e=new Array,s=0,r=new DataView(t.buffer)){this.strings=e,this.index=s,this.buffer=r}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){const t=this.buffer.getInt16(this.index);return this.index+=2,t}readInt32(){const t=this.buffer.getInt32(this.index);return this.index+=4,t}readInt(t){let e=this.readByte(),s=e&127;return e&128&&(e=this.readByte(),s|=(e&127)<<7,e&128&&(e=this.readByte(),s|=(e&127)<<14,e&128&&(e=this.readByte(),s|=(e&127)<<21,e&128&&(e=this.readByte(),s|=(e&127)<<28)))),t?s:s>>>1^-(s&1)}readStringRef(){const t=this.readInt(!0);return t==0?null:this.strings[t-1]}readString(){let t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;let e="";for(let s=0;s<t;){const r=this.readUnsignedByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((r&31)<<6|this.readByte()&63),s+=2;break;case 14:e+=String.fromCharCode((r&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),s+=3;break;default:e+=String.fromCharCode(r),s++}}return e}readFloat(){const t=this.buffer.getFloat32(this.index);return this.index+=4,t}readBoolean(){return this.readByte()!=0}}var k=(n=>(n[n.setup=0]="setup",n[n.first=1]="first",n[n.replace=2]="replace",n[n.add=3]="add",n))(k||{}),kt=(n=>(n[n.mixIn=0]="mixIn",n[n.mixOut=1]="mixOut",n))(kt||{}),fe=(n=>(n[n.Fixed=0]="Fixed",n[n.Percent=1]="Percent",n))(fe||{}),we=(n=>(n[n.Tangent=0]="Tangent",n[n.Chain=1]="Chain",n[n.ChainScale=2]="ChainScale",n))(we||{}),vt=(n=>(n[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection",n))(vt||{});function hf(n){switch(n.toLowerCase()){case"nearest":return ns.Nearest;case"linear":return ns.Linear;case"mipmap":return ns.MipMap;case"mipmapnearestnearest":return ns.MipMapNearestNearest;case"mipmaplinearnearest":return ns.MipMapLinearNearest;case"mipmapnearestlinear":return ns.MipMapNearestLinear;case"mipmaplinearlinear":return ns.MipMapLinearLinear;default:throw new Error(`Unknown texture filter ${n}`)}}var ns=(n=>(n[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",n))(ns||{}),Cr=(n=>(n[n.MirroredRepeat=33648]="MirroredRepeat",n[n.ClampToEdge=33071]="ClampToEdge",n[n.Repeat=10497]="Repeat",n))(Cr||{});class Lc{constructor(){this.size=null,this.names=null,this.values=null,this.renderObject=null}get width(){const t=this.texture;return t.trim?t.trim.width:t.orig.width}get height(){const t=this.texture;return t.trim?t.trim.height:t.orig.height}get u(){return this.texture._uvs.x0}get v(){return this.texture._uvs.y0}get u2(){return this.texture._uvs.x2}get v2(){return this.texture._uvs.y2}get offsetX(){const t=this.texture;return t.trim?t.trim.x:0}get offsetY(){return this.spineOffsetY}get pixiOffsetY(){const t=this.texture;return t.trim?t.trim.y:0}get spineOffsetY(){const t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)}get originalWidth(){return this.texture.orig.width}get originalHeight(){return this.texture.orig.height}get x(){return this.texture.frame.x}get y(){return this.texture.frame.y}get rotate(){return this.texture.rotate!==0}get degrees(){return(360-this.texture.rotate*45)%360}}class U_{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0}}class Oc{constructor(t,e,s){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,s)}addTexture(t,e){const s=this.pages;let r=null;for(let o=0;o<s.length;o++)if(s[o].baseTexture===e.baseTexture){r=s[o];break}if(r===null){r=new df,r.name="texturePage";const o=e.baseTexture;r.width=o.realWidth,r.height=o.realHeight,r.baseTexture=o,r.minFilter=r.magFilter=ns.Nearest,r.uWrap=Cr.ClampToEdge,r.vWrap=Cr.ClampToEdge,s.push(r)}const i=new uf;return i.name=t,i.page=r,i.texture=e,i.index=-1,this.regions.push(i),i}addTextureHash(t,e){for(const s in t)t.hasOwnProperty(s)&&this.addTexture(e&&s.indexOf(".")!==-1?s.substr(0,s.lastIndexOf(".")):s,t[s])}addSpineAtlas(t,e,s){return this.load(t,e,s)}load(t,e,s){if(e==null)throw new Error("textureLoader cannot be null.");const r=new j_(t),i=new Array(4);let o=null;const l={};let a=null;l.size=()=>{o.width=parseInt(i[1]),o.height=parseInt(i[2])},l.format=()=>{},l.filter=()=>{o.minFilter=hf(i[1]),o.magFilter=hf(i[2])},l.repeat=()=>{i[1].indexOf("x")!=-1&&(o.uWrap=Cr.Repeat),i[1].indexOf("y")!=-1&&(o.vWrap=Cr.Repeat)},l.pma=()=>{o.pma=i[1]=="true"};const c={};c.xy=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2])},c.size=()=>{a.width=parseInt(i[1]),a.height=parseInt(i[2])},c.bounds=()=>{a.x=parseInt(i[1]),a.y=parseInt(i[2]),a.width=parseInt(i[3]),a.height=parseInt(i[4])},c.offset=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2])},c.orig=()=>{a.originalWidth=parseInt(i[1]),a.originalHeight=parseInt(i[2])},c.offsets=()=>{a.offsetX=parseInt(i[1]),a.offsetY=parseInt(i[2]),a.originalWidth=parseInt(i[3]),a.originalHeight=parseInt(i[4])},c.rotate=()=>{const u=i[1];let f=0;u.toLocaleLowerCase()=="true"?f=6:u.toLocaleLowerCase()=="false"?f=0:f=(720-parseFloat(u))%360/45,a.rotate=f},c.index=()=>{a.index=parseInt(i[1])};let h=r.readLine();for(;h!=null&&h.trim().length==0;)h=r.readLine();for(;!(h==null||h.trim().length==0||r.readEntry(i,h)==0);)h=r.readLine();const d=()=>{for(;;){if(h==null)return s&&s(this);if(h.trim().length==0)o=null,h=r.readLine();else if(o===null){for(o=new df,o.name=h.trim();r.readEntry(i,h=r.readLine())!=0;){const u=l[i[0]];u&&u()}this.pages.push(o),e(o.name,u=>{if(u===null)return this.pages.splice(this.pages.indexOf(o),1),s&&s(null);o.baseTexture=u,o.pma&&(u.alphaMode=qe.PMA),u.valid||u.setSize(o.width,o.height),o.setFilters(),(!o.width||!o.height)&&(o.width=u.realWidth,o.height=u.realHeight,(!o.width||!o.height)&&console.log(`ERROR spine atlas page ${o.name}: meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)`)),d()});break}else{a=new U_;const u=new uf;u.name=h,u.page=o;let f=null,m=null;for(;;){const w=r.readEntry(i,h=r.readLine());if(w==0)break;const _=c[i[0]];if(_)_();else{f==null&&(f=[],m=[]),f.push(i[0]);const E=[];for(let S=0;S<w;S++)E.push(parseInt(i[S+1]));m.push(E)}}a.originalWidth==0&&a.originalHeight==0&&(a.originalWidth=a.width,a.originalHeight=a.height);const p=o.baseTexture.resolution;a.x/=p,a.y/=p,a.width/=p,a.height/=p,a.originalWidth/=p,a.originalHeight/=p,a.offsetX/=p,a.offsetY/=p;const g=a.rotate%4!==0,x=new _t(a.x,a.y,g?a.height:a.width,g?a.width:a.height),b=new _t(0,0,a.originalWidth,a.originalHeight),y=new _t(a.offsetX,a.originalHeight-a.height-a.offsetY,a.width,a.height);u.texture=new ut(u.page.baseTexture,x,b,y,a.rotate),u.index=a.index,u.texture.updateUvs(),this.regions.push(u)}}};d()}findRegion(t){for(let e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null}dispose(){for(let t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()}}class j_{constructor(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(t,e){if(e==null||(e=e.trim(),e.length==0))return 0;const s=e.indexOf(":");if(s==-1)return 0;t[0]=e.substr(0,s).trim();for(let r=1,i=s+1;;r++){const o=e.indexOf(",",i);if(o==-1)return t[r]=e.substr(i).trim(),r;if(t[r]=e.substr(i,o-i).trim(),i=o+1,r==4)return 4}}}class df{constructor(){this.minFilter=ns.Nearest,this.magFilter=ns.Nearest,this.uWrap=Cr.ClampToEdge,this.vWrap=Cr.ClampToEdge}setFilters(){const t=this.baseTexture,e=this.minFilter;e==ns.Linear?t.scaleMode=hs.LINEAR:this.minFilter==ns.Nearest?t.scaleMode=hs.NEAREST:(t.mipmap=zs.POW2,e==ns.MipMapNearestNearest?t.scaleMode=hs.NEAREST:t.scaleMode=hs.LINEAR)}}class uf extends Lc{}class Ip{constructor(){this.array=new Array}add(t){const e=this.contains(t);return this.array[t|0]=t|0,!e}contains(t){return this.array[t|0]!=null}remove(t){this.array[t|0]=void 0}clear(){this.array.length=0}}class Rp{constructor(){this.entries={},this.size=0}add(t){const e=this.entries[t];return this.entries[t]=!0,e?!1:(this.size++,!0)}addAll(t){const e=this.size;for(let s=0,r=t.length;s<r;s++)this.add(t[s]);return e!=this.size}contains(t){return this.entries[t]}clear(){this.entries={},this.size=0}}const jr=class{constructor(n=0,t=0,e=0,s=0){this.r=n,this.g=t,this.b=e,this.a=s}set(n,t,e,s){return this.r=n,this.g=t,this.b=e,this.a=s,this.clamp()}setFromColor(n){return this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this}setFromString(n){return n=n.charAt(0)=="#"?n.substr(1):n,this.r=parseInt(n.substr(0,2),16)/255,this.g=parseInt(n.substr(2,2),16)/255,this.b=parseInt(n.substr(4,2),16)/255,this.a=n.length!=8?1:parseInt(n.substr(6,2),16)/255,this}add(n,t,e,s){return this.r+=n,this.g+=t,this.b+=e,this.a+=s,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(n,t){n.r=((t&4278190080)>>>24)/255,n.g=((t&16711680)>>>16)/255,n.b=((t&65280)>>>8)/255,n.a=(t&255)/255}static rgb888ToColor(n,t){n.r=((t&16711680)>>>16)/255,n.g=((t&65280)>>>8)/255,n.b=(t&255)/255}static fromString(n){return new jr().setFromString(n)}};let tt=jr;tt.WHITE=new jr(1,1,1,1);tt.RED=new jr(1,0,0,1);tt.GREEN=new jr(0,1,0,1);tt.BLUE=new jr(0,0,1,1);tt.MAGENTA=new jr(1,0,1,1);const In=class{static clamp(n,t,e){return n<t?t:n>e?e:n}static cosDeg(n){return Math.cos(n*In.degRad)}static sinDeg(n){return Math.sin(n*In.degRad)}static signum(n){return Math.sign(n)}static toInt(n){return n>0?Math.floor(n):Math.ceil(n)}static cbrt(n){const t=Math.pow(Math.abs(n),.3333333333333333);return n<0?-t:t}static randomTriangular(n,t){return In.randomTriangularWith(n,t,(n+t)*.5)}static randomTriangularWith(n,t,e){const s=Math.random(),r=t-n;return s<=(e-n)/r?n+Math.sqrt(s*r*(e-n)):t-Math.sqrt((1-s)*r*(t-e))}static isPowerOfTwo(n){return n&&(n&n-1)===0}};let M=In;M.PI=3.1415927;M.PI2=In.PI*2;M.radiansToDegrees=180/In.PI;M.radDeg=In.radiansToDegrees;M.degreesToRadians=In.PI/180;M.degRad=In.degreesToRadians;class X_{apply(t,e,s){return t+(e-t)*this.applyInternal(s)}}class G_ extends X_{constructor(t){super(),this.power=2,this.power=t}applyInternal(t){return t<=.5?Math.pow(t*2,this.power)/2:Math.pow((t-1)*2,this.power)/(this.power%2==0?-2:2)+1}}class Mp extends G_{applyInternal(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1}}const ti=class{static arrayCopy(n,t,e,s,r){for(let i=t,o=s;i<t+r;i++,o++)e[o]=n[i]}static arrayFill(n,t,e,s){for(let r=t;r<e;r++)n[r]=s}static setArraySize(n,t,e=0){const s=n.length;if(s==t)return n;if(n.length=t,s<t)for(let r=s;r<t;r++)n[r]=e;return n}static ensureArrayCapacity(n,t,e=0){return n.length>=t?n:ti.setArraySize(n,t,e)}static newArray(n,t){const e=new Array(n);for(let s=0;s<n;s++)e[s]=t;return e}static newFloatArray(n){if(ti.SUPPORTS_TYPED_ARRAYS)return new Float32Array(n);const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=0;return t}static newShortArray(n){if(ti.SUPPORTS_TYPED_ARRAYS)return new Int16Array(n);const t=new Array(n);for(let e=0;e<t.length;e++)t[e]=0;return t}static toFloatArray(n){return ti.SUPPORTS_TYPED_ARRAYS?new Float32Array(n):n}static toSinglePrecision(n){return ti.SUPPORTS_TYPED_ARRAYS?Math.fround(n):n}static webkit602BugfixHelper(n,t){}static contains(n,t,e=!0){for(let s=0;s<n.length;s++)if(n[s]==t)return!0;return!1}static enumValue(n,t){return n[t[0].toUpperCase()+t.slice(1)]}};let Y=ti;Y.SUPPORTS_TYPED_ARRAYS=typeof Float32Array<"u";class Fo{constructor(t){this.items=new Array,this.instantiator=t}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(t){t.reset&&t.reset(),this.items.push(t)}freeAll(t){for(let e=0;e<t.length;e++)this.free(t[e])}clear(){this.items.length=0}}class Qi{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){return this.x=t,this.y=e,this}length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}normalize(){const t=this.length();return t!=0&&(this.x/=t,this.y/=t),this}}class kh{constructor(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new Fo(()=>Y.newFloatArray(16))}update(t,e){if(!t)throw new Error("skeleton cannot be null.");const s=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,l=o.length;s.length=0,i.freeAll(r),r.length=0;for(let a=0;a<l;a++){const c=o[a];if(!c.bone.active)continue;const h=c.getAttachment();if(h!=null&&h.type===Mt.BoundingBox){const d=h;s.push(d);let u=i.obtain();u.length!=d.worldVerticesLength&&(u=Y.newFloatArray(d.worldVerticesLength)),r.push(u),d.computeWorldVertices(c,0,d.worldVerticesLength,u,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)}aabbCompute(){let t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const i=this.polygons;for(let o=0,l=i.length;o<l;o++){const a=i[o],c=a;for(let h=0,d=a.length;h<d;h+=2){const u=c[h],f=c[h+1];t=Math.min(t,u),e=Math.min(e,f),s=Math.max(s,u),r=Math.max(r,f)}}this.minX=t,this.minY=e,this.maxX=s,this.maxY=r}aabbContainsPoint(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY}aabbIntersectsSegment(t,e,s,r){const i=this.minX,o=this.minY,l=this.maxX,a=this.maxY;if(t<=i&&s<=i||e<=o&&r<=o||t>=l&&s>=l||e>=a&&r>=a)return!1;const c=(r-e)/(s-t);let h=c*(i-t)+e;if(h>o&&h<a||(h=c*(l-t)+e,h>o&&h<a))return!0;let d=(o-e)/c+t;return d>i&&d<l||(d=(a-e)/c+t,d>i&&d<l)}aabbIntersectsSkeleton(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY}containsPoint(t,e){const s=this.polygons;for(let r=0,i=s.length;r<i;r++)if(this.containsPointPolygon(s[r],t,e))return this.boundingBoxes[r];return null}containsPointPolygon(t,e,s){const r=t,i=t.length;let o=i-2,l=!1;for(let a=0;a<i;a+=2){const c=r[a+1],h=r[o+1];if(c<s&&h>=s||h<s&&c>=s){const d=r[a];d+(s-c)/(h-c)*(r[o]-d)<e&&(l=!l)}o=a}return l}intersectsSegment(t,e,s,r){const i=this.polygons;for(let o=0,l=i.length;o<l;o++)if(this.intersectsSegmentPolygon(i[o],t,e,s,r))return this.boundingBoxes[o];return null}intersectsSegmentPolygon(t,e,s,r,i){const o=t,l=t.length,a=e-r,c=s-i,h=e*i-s*r;let d=o[l-2],u=o[l-1];for(let f=0;f<l;f+=2){const m=o[f],p=o[f+1],g=d*p-u*m,x=d-m,b=u-p,y=a*b-c*x,w=(h*x-a*g)/y;if((w>=d&&w<=m||w>=m&&w<=d)&&(w>=e&&w<=r||w>=r&&w<=e)){const _=(h*b-c*g)/y;if((_>=u&&_<=p||_>=p&&_<=u)&&(_>=s&&_<=i||_>=i&&_<=s))return!0}d=m,u=p}return!1}getPolygon(t){if(!t)throw new Error("boundingBox cannot be null.");const e=this.boundingBoxes.indexOf(t);return e==-1?null:this.polygons[e]}getWidth(){return this.maxX-this.minX}getHeight(){return this.maxY-this.minY}}const Y_={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},Vn=[0,0,0];class $_ extends Ur{constructor(){super(...arguments),this.region=null,this.attachment=null}}class W_ extends c_{constructor(t,e,s,r,i){super(t,e,s,r,i),this.region=null,this.attachment=null}}const Pp=class extends Ze{constructor(n){if(super(),!n)throw new Error("The spineData param is required.");if(typeof n=="string")throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');this.spineData=n,this.createSkeleton(n),this.slotContainers=[],this.tempClipContainers=[];for(let t=0,e=this.skeleton.slots.length;t<e;t++){const s=this.skeleton.slots[t],r=s.getAttachment(),i=this.newContainer();if(this.slotContainers.push(i),this.addChild(i),this.tempClipContainers.push(null),!!r)if(r.type===Mt.Region){const o=r.name,l=this.createSprite(s,r,o);s.currentSprite=l,s.currentSpriteName=o,i.addChild(l)}else if(r.type===Mt.Mesh){const o=this.createMesh(s,r);s.currentMesh=o,s.currentMeshId=r.id,s.currentMeshName=r.name,i.addChild(o)}else r.type===Mt.Clipping&&(this.createGraphics(s,r),i.addChild(s.clippingContainer),i.addChild(s.currentGraphics))}this.tintRgb=new Float32Array([1,1,1]),this.autoUpdate=!0,this.visible=!0}get debug(){return this._debug}set debug(n){var t;n!=this._debug&&((t=this._debug)==null||t.unregisterSpine(this),n==null||n.registerSpine(this),this._debug=n)}get autoUpdate(){return this._autoUpdate}set autoUpdate(n){n!==this._autoUpdate&&(this._autoUpdate=n,this.updateTransform=n?Pp.prototype.autoUpdateTransform:Ze.prototype.updateTransform)}get tint(){return Da(this.tintRgb)}set tint(n){this.tintRgb=Ey(n,this.tintRgb)}get delayLimit(){return(typeof this.localDelayLimit<"u"?this.localDelayLimit:Y_.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE}update(n){var c;const t=this.delayLimit;if(n>t&&(n=t),this.state.update(n),this.state.apply(this.skeleton),!this.skeleton)return;this.skeleton.updateWorldTransform();const e=this.skeleton.slots,s=this.color;let r=null,i=null;s?(r=s.light,i=s.dark):r=this.tintRgb;for(let h=0,d=e.length;h<d;h++){const u=e[h],f=u.getAttachment(),m=this.slotContainers[h];if(!f){m.visible=!1;continue}let p=null;f.sequence&&f.sequence.apply(u,f);let g=f.region;const x=f.color;switch(f!=null&&f.type){case Mt.Region:if(m.transform.setFromMatrix(u.bone.matrix),g=f.region,u.currentMesh&&(u.currentMesh.visible=!1,u.currentMesh=null,u.currentMeshId=void 0,u.currentMeshName=void 0),!g){u.currentSprite&&(u.currentSprite.renderable=!1);break}if(!u.currentSpriteName||u.currentSpriteName!==f.name){const w=f.name;if(u.currentSprite&&(u.currentSprite.visible=!1),u.sprites=u.sprites||{},u.sprites[w]!==void 0)u.sprites[w].visible=!0;else{const _=this.createSprite(u,f,w);m.addChild(_)}u.currentSprite=u.sprites[w],u.currentSpriteName=w}u.currentSprite.renderable=!0,u.hackRegion||this.setSpriteRegion(f,u.currentSprite,g),u.currentSprite.color?p=u.currentSprite.color:(Vn[0]=r[0]*u.color.r*x.r,Vn[1]=r[1]*u.color.g*x.g,Vn[2]=r[2]*u.color.b*x.b,u.currentSprite.tint=Da(Vn)),u.currentSprite.blendMode=u.blendMode;break;case Mt.Mesh:if(u.currentSprite){u.currentSprite.visible=!1,u.currentSprite=null,u.currentSpriteName=void 0;const w=new Io;w._parentID=-1,w._worldID=m.transform._worldID,m.transform=w}if(!g){u.currentMesh&&(u.currentMesh.renderable=!1);break}const y=f.id;if(u.currentMeshId===void 0||u.currentMeshId!==y){const w=y;if(u.currentMesh&&(u.currentMesh.visible=!1),u.meshes=u.meshes||{},u.meshes[w]!==void 0)u.meshes[w].visible=!0;else{const _=this.createMesh(u,f);m.addChild(_)}u.currentMesh=u.meshes[w],u.currentMeshName=f.name,u.currentMeshId=w}u.currentMesh.renderable=!0,f.computeWorldVerticesOld(u,u.currentMesh.vertices),u.currentMesh.color?p=u.currentMesh.color:(Vn[0]=r[0]*u.color.r*x.r,Vn[1]=r[1]*u.color.g*x.g,Vn[2]=r[2]*u.color.b*x.b,u.currentMesh.tint=Da(Vn)),u.currentMesh.blendMode=u.blendMode,u.hackRegion||this.setMeshRegion(f,u.currentMesh,g);break;case Mt.Clipping:u.currentGraphics||(this.createGraphics(u,f),m.addChild(u.clippingContainer),m.addChild(u.currentGraphics)),this.updateGraphics(u,f),m.alpha=1,m.visible=!0;continue;default:m.visible=!1;continue}if(m.visible=!0,p){let b=u.color.r*x.r,y=u.color.g*x.g,w=u.color.b*x.b;p.setLight(r[0]*b+i[0]*(1-b),r[1]*y+i[1]*(1-y),r[2]*w+i[2]*(1-w)),u.darkColor?(b=u.darkColor.r,y=u.darkColor.g,w=u.darkColor.b):(b=0,y=0,w=0),p.setDark(r[0]*b+i[0]*(1-b),r[1]*y+i[1]*(1-y),r[2]*w+i[2]*(1-w))}m.alpha=u.color.a}const o=this.skeleton.drawOrder;let l=null,a=null;for(let h=0,d=o.length;h<d;h++){const u=e[o[h].data.index],f=this.slotContainers[o[h].data.index];if(a||f.parent!==null&&f.parent!==this&&(f.parent.removeChild(f),f.parent=this),u.currentGraphics&&u.getAttachment())a=u.clippingContainer,l=u.getAttachment(),a.children.length=0,this.children[h]=f,l.endSlot===u.data&&(l.endSlot=null);else if(a){let m=this.tempClipContainers[h];m||(m=this.tempClipContainers[h]=this.newContainer(),m.visible=!1),this.children[h]=m,f.parent=null,a.addChild(f),l.endSlot==u.data&&(a.renderable=!0,a=null,l=null)}else this.children[h]=f}(c=this._debug)==null||c.renderDebug(this)}setSpriteRegion(n,t,e){t.attachment===n&&t.region===e||(t.region=e,t.attachment=n,t.texture=e.texture,t.rotation=n.rotation*M.degRad,t.position.x=n.x,t.position.y=n.y,t.alpha=n.color.a,e.size?(t.scale.x=e.size.width/e.originalWidth,t.scale.y=-e.size.height/e.originalHeight):(t.scale.x=n.scaleX*n.width/e.originalWidth,t.scale.y=-n.scaleY*n.height/e.originalHeight))}setMeshRegion(n,t,e){t.attachment===n&&t.region===e||(t.region=e,t.attachment=n,t.texture=e.texture,e.texture.updateUvs(),t.uvBuffer.update(n.regionUVs))}autoUpdateTransform(){{this.lastTime=this.lastTime||Date.now();const n=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(n)}Ze.prototype.updateTransform.call(this)}createSprite(n,t,e){let s=t.region;n.hackAttachment===t&&(s=n.hackRegion);const r=s?s.texture:null,i=this.newSprite(r);return i.anchor.set(.5),s&&this.setSpriteRegion(t,i,t.region),n.sprites=n.sprites||{},n.sprites[e]=i,i}createMesh(n,t){let e=t.region;n.hackAttachment===t&&(e=n.hackRegion,n.hackAttachment=null,n.hackRegion=null);const s=this.newMesh(e?e.texture:null,new Float32Array(t.regionUVs.length),t.regionUVs,new Uint16Array(t.triangles),Xs.TRIANGLES);return typeof s._canvasPadding<"u"&&(s._canvasPadding=1.5),s.alpha=t.color.a,s.region=t.region,e&&this.setMeshRegion(t,s,e),n.meshes=n.meshes||{},n.meshes[t.id]=s,s}createGraphics(n,t){const e=this.newGraphics(),s=new ir([]);return e.clear(),e.beginFill(16777215,1),e.drawPolygon(s),e.renderable=!1,n.currentGraphics=e,n.clippingContainer=this.newContainer(),n.clippingContainer.mask=n.currentGraphics,e}updateGraphics(n,t){const e=n.currentGraphics.geometry,s=e.graphicsData[0].shape.points,r=t.worldVerticesLength;s.length=r,t.computeWorldVertices(n,0,r,s,0,2),e.invalidate()}hackTextureBySlotIndex(n,t=null,e=null){const s=this.skeleton.slots[n];if(!s)return!1;const r=s.getAttachment();let i=r.region;return t?(i=new Lc,i.texture=t,i.size=e,s.hackRegion=i,s.hackAttachment=r):(s.hackRegion=null,s.hackAttachment=null),s.currentSprite?this.setSpriteRegion(r,s.currentSprite,i):s.currentMesh&&this.setMeshRegion(r,s.currentMesh,i),!0}hackTextureBySlotName(n,t=null,e=null){const s=this.skeleton.findSlotIndex(n);return s==-1?!1:this.hackTextureBySlotIndex(s,t,e)}hackTextureAttachment(n,t,e,s=null){const r=this.skeleton.findSlotIndex(n),i=this.skeleton.getAttachmentByName(n,t);i.region.texture=e;const o=this.skeleton.slots[r];if(!o)return!1;const l=o.getAttachment();if(t===l.name){let a=i.region;return e?(a=new Lc,a.texture=e,a.size=s,o.hackRegion=a,o.hackAttachment=l):(o.hackRegion=null,o.hackAttachment=null),o.currentSprite&&o.currentSprite.region!=a?(this.setSpriteRegion(l,o.currentSprite,a),o.currentSprite.region=a):o.currentMesh&&o.currentMesh.region!=a&&this.setMeshRegion(l,o.currentMesh,a),!0}return!1}newContainer(){return new Ze}newSprite(n){return new $_(n)}newGraphics(){return new Ch}newMesh(n,t,e,s,r){return new W_(n,t,e,s,r)}transformHack(){return 1}hackAttachmentGroups(n,t,e){if(!n)return;const s=[],r=[];for(let i=0,o=this.skeleton.slots.length;i<o;i++){const l=this.skeleton.slots[i],a=l.currentSpriteName||l.currentMeshName||"",c=l.currentSprite||l.currentMesh;a.endsWith(n)?(c.parentGroup=t,r.push(c)):e&&c&&(c.parentGroup=e,s.push(c))}return[s,r]}destroy(n){this.debug=null;for(let t=0,e=this.skeleton.slots.length;t<e;t++){const s=this.skeleton.slots[t];for(const r in s.meshes)s.meshes[r].destroy(n);s.meshes=null;for(const r in s.sprites)s.sprites[r].destroy(n);s.sprites=null}for(let t=0,e=this.slotContainers.length;t<e;t++)this.slotContainers[t].destroy(n);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,super.destroy(n)}};let yi=Pp;yi.clippingPolygon=[];Object.defineProperty(yi.prototype,"visible",{get(){return this._visible},set(n){n!==this._visible&&(this._visible=n,n&&(this.lastTime=0))}});const z_={extension:it.Asset,loader:{extension:{type:it.LoadParser,priority:xs.Normal},test(n){return is(n,".atlas")},async load(n){return await(await ct.ADAPTER.fetch(n)).text()},testParse(n,t){const e=is(t.src,".atlas"),s=typeof n=="string";return Promise.resolve(e&&s)},async parse(n,t,e){const s=t.data;let r=ne.dirname(t.src);r&&r.lastIndexOf("/")!==r.length-1&&(r+="/");let i=null,o=null;const l=new Promise((h,d)=>{i=h,o=d});let a;const c=h=>{h||o(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),i(a)};if(s.image||s.images){const h=Object.assign(s.image?{default:s.image}:{},s.images);a=new Oc(n,(d,u)=>{const f=h[d]||h.default;f&&f.baseTexture?u(f.baseTexture):u(f)},c)}else a=new Oc(n,Np(e,r,s.imageMetadata),c);return await l},unload(n){n.dispose()}}},Np=(n,t,e)=>async(s,r)=>{const i=ne.normalize([...t.split(ne.sep),s].join(ne.sep)),o=await n.load({src:i,data:e});r(o.baseTexture)};pt.add(z_);function ff(n){return n.hasOwnProperty("bones")}function H_(n){return n instanceof ArrayBuffer}class q_{constructor(){}installLoader(){const t=this,e={extension:it.Asset,loader:{extension:{type:it.LoadParser,priority:xs.Normal},test(s){return is(s,".skel")},async load(s){return await(await ct.ADAPTER.fetch(s)).arrayBuffer()},testParse(s,r){var a;const i=is(r.src,".json")&&ff(s),o=is(r.src,".skel")&&H_(s),l=((a=r.data)==null?void 0:a.spineAtlas)===!1;return Promise.resolve(i&&!l||o)},async parse(s,r,i){const o=ne.extname(r.src).toLowerCase(),l=ne.basename(r.src,o);let a=ne.dirname(r.src);a&&a.lastIndexOf("/")!==a.length-1&&(a+="/");const c=is(r.src,".json")&&ff(s);let h=null,d=s;c?h=t.createJsonParser():(h=t.createBinaryParser(),d=new Uint8Array(s));const u=r.data||{},f=(u==null?void 0:u.spineSkeletonScale)??null;f&&(h.scale=f);const m=u.spineAtlas;if(m&&m.pages)return t.parseData(h,m,d);const p=u.atlasRawData;if(p){let b=null,y=null;const w=new Promise((S,T)=>{b=S,y=T}),_=new Oc(p,Np(i,a,u.imageMetadata),S=>{S||y(`Something went terribly wrong loading a spine .atlas file
Most likely your texture failed to load.`),b(_)}),E=await w;return t.parseData(h,E,d)}let g=u.spineAtlasFile;g||(g=`${a+l}.atlas`);const x=await i.load({src:g,data:u,alias:u.spineAtlasAlias});return t.parseData(h,x,d)}}};return pt.add(e),e}}let Ih=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const Fp=class extends Ih{constructor(t){super(t),this.id=(Fp.nextID++&65535)<<11,this.worldVerticesLength=0,this.deformAttachment=this}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,s,r,i,o){s=i+(s>>1)*o;const l=t.bone.skeleton,a=t.deform;let c=this.vertices;const h=this.bones;if(h==null){a.length>0&&(c=a);const m=t.bone.matrix,p=m.tx,g=m.ty,x=m.a,b=m.c,y=m.b,w=m.d;for(let _=e,E=i;E<s;_+=2,E+=o){const S=c[_],T=c[_+1];r[E]=S*x+T*b+p,r[E+1]=S*y+T*w+g}return}let d=0,u=0;for(let m=0;m<e;m+=2){const p=h[d];d+=p+1,u+=p}const f=l.bones;if(a.length==0)for(let m=i,p=u*3;m<s;m+=o){let g=0,x=0,b=h[d++];for(b+=d;d<b;d++,p+=3){const y=f[h[d]].matrix,w=c[p],_=c[p+1],E=c[p+2];g+=(w*y.a+_*y.c+y.tx)*E,x+=(w*y.b+_*y.d+y.ty)*E}r[m]=g,r[m+1]=x}else{const m=a;for(let p=i,g=u*3,x=u<<1;p<s;p+=o){let b=0,y=0,w=h[d++];for(w+=d;d<w;d++,g+=3,x+=2){const _=f[h[d]].matrix,E=c[g]+m[x],S=c[g+1]+m[x+1],T=c[g+2];b+=(E*_.a+S*_.c+_.tx)*T,y+=(E*_.b+S*_.d+_.ty)*T}r[p]=b,r[p+1]=y}}}copyTo(t){this.bones!=null?(t.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices!=null?(t.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment}};let dr=Fp;dr.nextID=0;let Bp=class Dp extends dr{constructor(t){super(t),this.type=Mt.BoundingBox,this.color=new tt(1,1,1,1)}copy(){const t=new Dp(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}},Lp=class Op extends dr{constructor(t){super(t),this.type=Mt.Clipping,this.color=new tt(.2275,.2275,.8078,1)}copy(){const t=new Op(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}},Bo=class Vc extends dr{constructor(t){super(t),this.type=Mt.Mesh,this.color=new tt(1,1,1,1),this.tempColor=new tt(0,0,0,0)}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh!=null)return this.newLinkedMesh();const t=new Vc(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges!=null&&(t.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}newLinkedMesh(){const t=new Vc(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh!=null?this.parentMesh:this),t}},Ji=class Vp extends dr{constructor(t){super(t),this.type=Mt.Path,this.closed=!1,this.constantSpeed=!1,this.color=new tt(1,1,1,1)}copy(){const t=new Vp(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}},Up=class jp extends dr{constructor(t){super(t),this.type=Mt.Point,this.color=new tt(.38,.94,0,1)}computeWorldPosition(t,e){const s=t.matrix;return e.x=this.x*s.a+this.y*s.c+t.worldX,e.y=this.x*s.b+this.y*s.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,s=M.cosDeg(this.rotation),r=M.sinDeg(this.rotation),i=s*e.a+r*e.c,o=s*e.b+r*e.d;return Math.atan2(o,i)*M.radDeg}copy(){const t=new jp(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}},Rh=class{constructor(t,e){if(this.deform=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new tt,this.darkColor=t.darkColor==null?null:new tt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const Me=class extends Ih{constructor(t){super(t),this.type=Mt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new tt(1,1,1,1),this.offset=Y.newFloatArray(8),this.uvs=Y.newFloatArray(8),this.tempColor=new tt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,i=s+this.region.width*t,o=r+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),c=Math.sin(l),h=s*a+this.x,d=s*c,u=r*a+this.y,f=r*c,m=i*a+this.x,p=i*c,g=o*a+this.y,x=o*c,b=this.offset;b[Me.OX1]=h-f,b[Me.OY1]=u+d,b[Me.OX2]=h-x,b[Me.OY2]=g+d,b[Me.OX3]=m-x,b[Me.OY3]=g+p,b[Me.OX4]=m-f,b[Me.OY4]=u+p}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,r){const i=this.offset,o=t instanceof Rh?t.bone.matrix:t.matrix,l=o.tx,a=o.ty,c=o.a,h=o.c,d=o.b,u=o.d;let f=0,m=0;f=i[Me.OX1],m=i[Me.OY1],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Me.OX2],m=i[Me.OY2],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Me.OX3],m=i[Me.OY3],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Me.OX4],m=i[Me.OY4],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a}copy(){const t=new Me(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Y.arrayCopy(this.uvs,0,t.uvs,0,8),Y.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t}};let Tt=Me;Tt.OX1=0;Tt.OY1=1;Tt.OX2=2;Tt.OY2=3;Tt.OX3=4;Tt.OY3=5;Tt.OX4=6;Tt.OY4=7;Tt.X1=0;Tt.Y1=1;Tt.C1R=2;Tt.C1G=3;Tt.C1B=4;Tt.C1A=5;Tt.U1=6;Tt.V1=7;Tt.X2=8;Tt.Y2=9;Tt.C2R=10;Tt.C2G=11;Tt.C2B=12;Tt.C2A=13;Tt.U2=14;Tt.V2=15;Tt.X3=16;Tt.Y3=17;Tt.C3R=18;Tt.C3G=19;Tt.C3B=20;Tt.C3A=21;Tt.U3=22;Tt.V3=23;Tt.X4=24;Tt.Y4=25;Tt.C4R=26;Tt.C4G=27;Tt.C4B=28;Tt.C4A=29;Tt.U4=30;Tt.V4=31;let K_=class{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,s,r){t.x+=M.randomTriangular(-this.jitterX,this.jitterY),t.y+=M.randomTriangular(-this.jitterX,this.jitterY)}end(){}};const Xp=class{constructor(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}begin(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY}transform(t,e,s,r){const i=this.angle*M.degreesToRadians,o=t.x-this.worldX,l=t.y-this.worldY,a=Math.sqrt(o*o+l*l);if(a<this.radius){const c=Xp.interpolation.apply(0,i,(this.radius-a)/this.radius),h=Math.cos(c),d=Math.sin(c);t.x=h*o-d*l+this.worldX,t.y=d*o+h*l+this.worldY}}end(){}};let Gp=Xp;Gp.interpolation=new Mp(2);let ve=class{constructor(t,e,s){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(let r=0;r<e.length;r++)this.timelineIds[e[r].getPropertyId()]=!0;this.duration=s}hasTimeline(t){return this.timelineIds[t]==!0}apply(t,e,s,r,i,o,l,a){if(t==null)throw new Error("skeleton cannot be null.");r&&this.duration!=0&&(s%=this.duration,e>0&&(e%=this.duration));const c=this.timelines;for(let h=0,d=c.length;h<d;h++)c[h].apply(t,e,s,i,o,l,a)}static binarySearch(t,e,s=1){let r=0,i=t.length/s-2;if(i==0)return s;let o=i>>>1;for(;;){if(t[(o+1)*s]<=e?r=o+1:i=o,r==i)return(r+1)*s;o=r+i>>>1}}static linearSearch(t,e,s){for(let r=0,i=t.length-s;r<=i;r+=s)if(t[r]>e)return r;return-1}};var Yp=(n=>(n[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor",n))(Yp||{});const xe=class{constructor(t){if(t<=0)throw new Error(`frameCount must be > 0: ${t}`);this.curves=Y.newFloatArray((t-1)*xe.BEZIER_SIZE)}getFrameCount(){return this.curves.length/xe.BEZIER_SIZE+1}setLinear(t){this.curves[t*xe.BEZIER_SIZE]=xe.LINEAR}setStepped(t){this.curves[t*xe.BEZIER_SIZE]=xe.STEPPED}getCurveType(t){const e=t*xe.BEZIER_SIZE;if(e==this.curves.length)return xe.LINEAR;const s=this.curves[e];return s==xe.LINEAR?xe.LINEAR:s==xe.STEPPED?xe.STEPPED:xe.BEZIER}setCurve(t,e,s,r,i){const o=(-e*2+r)*.03,l=(-s*2+i)*.03,a=((e-r)*3+1)*.006,c=((s-i)*3+1)*.006;let h=o*2+a,d=l*2+c,u=e*.3+o+a*.16666667,f=s*.3+l+c*.16666667,m=t*xe.BEZIER_SIZE;const p=this.curves;p[m++]=xe.BEZIER;let g=u,x=f;for(let b=m+xe.BEZIER_SIZE-1;m<b;m+=2)p[m]=g,p[m+1]=x,u+=h,f+=d,h+=a,d+=c,g+=u,x+=f}getCurvePercent(t,e){e=M.clamp(e,0,1);const s=this.curves;let r=t*xe.BEZIER_SIZE;const i=s[r];if(i==xe.LINEAR)return e;if(i==xe.STEPPED)return 0;r++;let o=0;for(let a=r,c=r+xe.BEZIER_SIZE-1;r<c;r+=2)if(o=s[r],o>=e){let h,d;return r==a?(h=0,d=0):(h=s[r-2],d=s[r-1]),d+(s[r+1]-d)*(e-h)/(o-h)}const l=s[r-1];return l+(1-l)*(e-o)/(1-o)}};let as=xe;as.LINEAR=0;as.STEPPED=1;as.BEZIER=2;as.BEZIER_SIZE=10*2-1;const Gn=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+Gn.ROTATION]=s}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.rotation=c.data.rotation;return;case k.first:const p=c.data.rotation-c.rotation;c.rotation+=(p-(16384-(16384.499999999996-p/360|0))*360)*i}return}if(s>=a[a.length-Gn.ENTRIES]){let p=a[a.length+Gn.PREV_ROTATION];switch(o){case k.setup:c.rotation=c.data.rotation+p*i;break;case k.first:case k.replace:p+=c.data.rotation-c.rotation,p-=(16384-(16384.499999999996-p/360|0))*360;case k.add:c.rotation+=p*i}return}const h=ve.binarySearch(a,s,Gn.ENTRIES),d=a[h+Gn.PREV_ROTATION],u=a[h],f=this.getCurvePercent((h>>1)-1,1-(s-u)/(a[h+Gn.PREV_TIME]-u));let m=a[h+Gn.ROTATION]-d;switch(m=d+(m-(16384-(16384.499999999996-m/360|0))*360)*f,o){case k.setup:c.rotation=c.data.rotation+(m-(16384-(16384.499999999996-m/360|0))*360)*i;break;case k.first:case k.replace:m+=c.data.rotation-c.rotation;case k.add:c.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*i}}};let Le=Gn;Le.ENTRIES=2;Le.PREV_TIME=-2;Le.PREV_ROTATION=-1;Le.ROTATION=1;const Xe=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*Xe.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(t,e,s,r){t*=Xe.ENTRIES,this.frames[t]=e,this.frames[t+Xe.X]=s,this.frames[t+Xe.Y]=r}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.x=c.data.x,c.y=c.data.y;return;case k.first:c.x+=(c.data.x-c.x)*i,c.y+=(c.data.y-c.y)*i}return}let h=0,d=0;if(s>=a[a.length-Xe.ENTRIES])h=a[a.length+Xe.PREV_X],d=a[a.length+Xe.PREV_Y];else{const u=ve.binarySearch(a,s,Xe.ENTRIES);h=a[u+Xe.PREV_X],d=a[u+Xe.PREV_Y];const f=a[u],m=this.getCurvePercent(u/Xe.ENTRIES-1,1-(s-f)/(a[u+Xe.PREV_TIME]-f));h+=(a[u+Xe.X]-h)*m,d+=(a[u+Xe.Y]-d)*m}switch(o){case k.setup:c.x=c.data.x+h*i,c.y=c.data.y+d*i;break;case k.first:case k.replace:c.x+=(c.data.x+h-c.x)*i,c.y+=(c.data.y+d-c.y)*i;break;case k.add:c.x+=h*i,c.y+=d*i}}};let us=Xe;us.ENTRIES=3;us.PREV_TIME=-3;us.PREV_X=-2;us.PREV_Y=-1;us.X=1;us.Y=2;let Mh=class Rs extends us{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;return;case k.first:c.scaleX+=(c.data.scaleX-c.scaleX)*i,c.scaleY+=(c.data.scaleY-c.scaleY)*i}return}let h=0,d=0;if(s>=a[a.length-Rs.ENTRIES])h=a[a.length+Rs.PREV_X]*c.data.scaleX,d=a[a.length+Rs.PREV_Y]*c.data.scaleY;else{const u=ve.binarySearch(a,s,Rs.ENTRIES);h=a[u+Rs.PREV_X],d=a[u+Rs.PREV_Y];const f=a[u],m=this.getCurvePercent(u/Rs.ENTRIES-1,1-(s-f)/(a[u+Rs.PREV_TIME]-f));h=(h+(a[u+Rs.X]-h)*m)*c.data.scaleX,d=(d+(a[u+Rs.Y]-d)*m)*c.data.scaleY}if(i==1)o==k.add?(c.scaleX+=h-c.data.scaleX,c.scaleY+=d-c.data.scaleY):(c.scaleX=h,c.scaleY=d);else{let u=0,f=0;if(l==kt.mixOut)switch(o){case k.setup:u=c.data.scaleX,f=c.data.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-u)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-f)*i;break;case k.first:case k.replace:u=c.scaleX,f=c.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-u)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-f)*i;break;case k.add:u=c.scaleX,f=c.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-c.data.scaleX)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-c.data.scaleY)*i}else switch(o){case k.setup:u=Math.abs(c.data.scaleX)*M.signum(h),f=Math.abs(c.data.scaleY)*M.signum(d),c.scaleX=u+(h-u)*i,c.scaleY=f+(d-f)*i;break;case k.first:case k.replace:u=Math.abs(c.scaleX)*M.signum(h),f=Math.abs(c.scaleY)*M.signum(d),c.scaleX=u+(h-u)*i,c.scaleY=f+(d-f)*i;break;case k.add:u=M.signum(h),f=M.signum(d),c.scaleX=Math.abs(c.scaleX)*u+(h-Math.abs(c.data.scaleX)*u)*i,c.scaleY=Math.abs(c.scaleY)*f+(d-Math.abs(c.data.scaleY)*f)*i}}}},Ph=class Ms extends us{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;return;case k.first:c.shearX+=(c.data.shearX-c.shearX)*i,c.shearY+=(c.data.shearY-c.shearY)*i}return}let h=0,d=0;if(s>=a[a.length-Ms.ENTRIES])h=a[a.length+Ms.PREV_X],d=a[a.length+Ms.PREV_Y];else{const u=ve.binarySearch(a,s,Ms.ENTRIES);h=a[u+Ms.PREV_X],d=a[u+Ms.PREV_Y];const f=a[u],m=this.getCurvePercent(u/Ms.ENTRIES-1,1-(s-f)/(a[u+Ms.PREV_TIME]-f));h=h+(a[u+Ms.X]-h)*m,d=d+(a[u+Ms.Y]-d)*m}switch(o){case k.setup:c.shearX=c.data.shearX+h*i,c.shearY=c.data.shearY+d*i;break;case k.first:case k.replace:c.shearX+=(c.data.shearX+h-c.shearX)*i,c.shearY+=(c.data.shearY+d-c.shearY)*i;break;case k.add:c.shearX+=h*i,c.shearY+=d*i}}};const ae=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*ae.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(t,e,s,r,i,o){t*=ae.ENTRIES,this.frames[t]=e,this.frames[t+ae.R]=s,this.frames[t+ae.G]=r,this.frames[t+ae.B]=i,this.frames[t+ae.A]=o}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.color.setFromColor(a.data.color);return;case k.first:const m=a.color,p=a.data.color;m.add((p.r-m.r)*i,(p.g-m.g)*i,(p.b-m.b)*i,(p.a-m.a)*i)}return}let h=0,d=0,u=0,f=0;if(s>=c[c.length-ae.ENTRIES]){const m=c.length;h=c[m+ae.PREV_R],d=c[m+ae.PREV_G],u=c[m+ae.PREV_B],f=c[m+ae.PREV_A]}else{const m=ve.binarySearch(c,s,ae.ENTRIES);h=c[m+ae.PREV_R],d=c[m+ae.PREV_G],u=c[m+ae.PREV_B],f=c[m+ae.PREV_A];const p=c[m],g=this.getCurvePercent(m/ae.ENTRIES-1,1-(s-p)/(c[m+ae.PREV_TIME]-p));h+=(c[m+ae.R]-h)*g,d+=(c[m+ae.G]-d)*g,u+=(c[m+ae.B]-u)*g,f+=(c[m+ae.A]-f)*g}if(i==1)a.color.set(h,d,u,f);else{const m=a.color;o==k.setup&&m.setFromColor(a.data.color),m.add((h-m.r)*i,(d-m.g)*i,(u-m.b)*i,(f-m.a)*i)}}};let Qe=ae;Qe.ENTRIES=5;Qe.PREV_TIME=-5;Qe.PREV_R=-4;Qe.PREV_G=-3;Qe.PREV_B=-2;Qe.PREV_A=-1;Qe.R=1;Qe.G=2;Qe.B=3;Qe.A=4;const Bt=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*Bt.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(t,e,s,r,i,o,l,a,c){t*=Bt.ENTRIES,this.frames[t]=e,this.frames[t+Bt.R]=s,this.frames[t+Bt.G]=r,this.frames[t+Bt.B]=i,this.frames[t+Bt.A]=o,this.frames[t+Bt.R2]=l,this.frames[t+Bt.G2]=a,this.frames[t+Bt.B2]=c}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.color.setFromColor(a.data.color),a.darkColor.setFromColor(a.data.darkColor);return;case k.first:const x=a.color,b=a.darkColor,y=a.data.color,w=a.data.darkColor;x.add((y.r-x.r)*i,(y.g-x.g)*i,(y.b-x.b)*i,(y.a-x.a)*i),b.add((w.r-b.r)*i,(w.g-b.g)*i,(w.b-b.b)*i,0)}return}let h=0,d=0,u=0,f=0,m=0,p=0,g=0;if(s>=c[c.length-Bt.ENTRIES]){const x=c.length;h=c[x+Bt.PREV_R],d=c[x+Bt.PREV_G],u=c[x+Bt.PREV_B],f=c[x+Bt.PREV_A],m=c[x+Bt.PREV_R2],p=c[x+Bt.PREV_G2],g=c[x+Bt.PREV_B2]}else{const x=ve.binarySearch(c,s,Bt.ENTRIES);h=c[x+Bt.PREV_R],d=c[x+Bt.PREV_G],u=c[x+Bt.PREV_B],f=c[x+Bt.PREV_A],m=c[x+Bt.PREV_R2],p=c[x+Bt.PREV_G2],g=c[x+Bt.PREV_B2];const b=c[x],y=this.getCurvePercent(x/Bt.ENTRIES-1,1-(s-b)/(c[x+Bt.PREV_TIME]-b));h+=(c[x+Bt.R]-h)*y,d+=(c[x+Bt.G]-d)*y,u+=(c[x+Bt.B]-u)*y,f+=(c[x+Bt.A]-f)*y,m+=(c[x+Bt.R2]-m)*y,p+=(c[x+Bt.G2]-p)*y,g+=(c[x+Bt.B2]-g)*y}if(i==1)a.color.set(h,d,u,f),a.darkColor.set(m,p,g,1);else{const x=a.color,b=a.darkColor;o==k.setup&&(x.setFromColor(a.data.color),b.setFromColor(a.data.darkColor)),x.add((h-x.r)*i,(d-x.g)*i,(u-x.b)*i,(f-x.a)*i),b.add((m-b.r)*i,(p-b.g)*i,(g-b.b)*i,0)}}};let _e=Bt;_e.ENTRIES=8;_e.PREV_TIME=-8;_e.PREV_R=-7;_e.PREV_G=-6;_e.PREV_B=-5;_e.PREV_A=-4;_e.PREV_R2=-3;_e.PREV_G2=-2;_e.PREV_B2=-1;_e.R=1;_e.G=2;_e.B=3;_e.A=4;_e.R2=5;_e.G2=6;_e.B2=7;let kr=class{constructor(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;if(l==kt.mixOut){o==k.setup&&this.setAttachment(t,a,a.data.attachmentName);return}const c=this.frames;if(s<c[0]){(o==k.setup||o==k.first)&&this.setAttachment(t,a,a.data.attachmentName);return}let h=0;s>=c[c.length-1]?h=c.length-1:h=ve.binarySearch(c,s,1)-1;const d=this.attachmentNames[h];t.slots[this.slotIndex].setAttachment(d==null?null:t.getAttachment(this.slotIndex,d))}setAttachment(t,e,s){e.setAttachment(s==null?null:t.getAttachment(this.slotIndex,s))}},mf=null,Nh=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t),this.frameVertices=new Array(t),mf==null&&(mf=Y.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,s){this.frames[t]=e,this.frameVertices[t]=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=a.getAttachment();if(!(c instanceof dr)||c.deformAttachment!=this.attachment)return;const h=a.deform;h.length==0&&(o=k.setup);const d=this.frameVertices,u=d[0].length,f=this.frames;if(s<f[0]){const w=c;switch(o){case k.setup:h.length=0;return;case k.first:if(i==1){h.length=0;break}const _=Y.setArraySize(h,u);if(w.bones==null){const E=w.vertices;for(let S=0;S<u;S++)_[S]+=(E[S]-_[S])*i}else{i=1-i;for(let E=0;E<u;E++)_[E]*=i}}return}const m=Y.setArraySize(h,u);if(s>=f[f.length-1]){const w=d[f.length-1];if(i==1)if(o==k.add){const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++)m[S]+=w[S]-E[S]}else for(let E=0;E<u;E++)m[E]+=w[E]}else Y.arrayCopy(w,0,m,0,u);else switch(o){case k.setup:{const E=c;if(E.bones==null){const S=E.vertices;for(let T=0;T<u;T++){const A=S[T];m[T]=A+(w[T]-A)*i}}else for(let S=0;S<u;S++)m[S]=w[S]*i;break}case k.first:case k.replace:for(let E=0;E<u;E++)m[E]+=(w[E]-m[E])*i;break;case k.add:const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++)m[S]+=(w[S]-E[S])*i}else for(let E=0;E<u;E++)m[E]+=w[E]*i}return}const p=ve.binarySearch(f,s),g=d[p-1],x=d[p],b=f[p],y=this.getCurvePercent(p-1,1-(s-b)/(f[p-1]-b));if(i==1)if(o==k.add){const w=c;if(w.bones==null){const _=w.vertices;for(let E=0;E<u;E++){const S=g[E];m[E]+=S+(x[E]-S)*y-_[E]}}else for(let _=0;_<u;_++){const E=g[_];m[_]+=E+(x[_]-E)*y}}else for(let w=0;w<u;w++){const _=g[w];m[w]=_+(x[w]-_)*y}else switch(o){case k.setup:{const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++){const T=g[S],A=E[S];m[S]=A+(T+(x[S]-T)*y-A)*i}}else for(let E=0;E<u;E++){const S=g[E];m[E]=(S+(x[E]-S)*y)*i}break}case k.first:case k.replace:for(let _=0;_<u;_++){const E=g[_];m[_]+=(E+(x[_]-E)*y-m[_])*i}break;case k.add:const w=c;if(w.bones==null){const _=w.vertices;for(let E=0;E<u;E++){const S=g[E];m[E]+=(S+(x[E]-S)*y-_[E])*i}}else for(let _=0;_<u;_++){const E=g[_];m[_]+=(E+(x[_]-E)*y)*i}}}},Do=class{constructor(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,r,i,o,l){if(r==null)return;const a=this.frames,c=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,r,i,o,l),e=-1;else if(e>=a[c-1])return;if(s<a[0])return;let h=0;if(e<a[0])h=0;else{h=ve.binarySearch(a,e);const d=a[h];for(;h>0&&a[h-1]==d;)h--}for(;h<c&&s>=a[h];h++)r.push(this.events[h])}},ui=class{constructor(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,r,i,o,l){const a=t.drawOrder,c=t.slots;if(l==kt.mixOut&&o==k.setup){Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const h=this.frames;if(s<h[0]){(o==k.setup||o==k.first)&&Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let d=0;s>=h[h.length-1]?d=h.length-1:d=ve.binarySearch(h,s)-1;const u=this.drawOrders[d];if(u==null)Y.arrayCopy(c,0,a,0,c.length);else for(let f=0,m=u.length;f<m;f++)a[f]=c[u[f]]}};const Ut=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*Ut.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(t,e,s,r,i,o,l){t*=Ut.ENTRIES,this.frames[t]=e,this.frames[t+Ut.MIX]=s,this.frames[t+Ut.SOFTNESS]=r,this.frames[t+Ut.BEND_DIRECTION]=i,this.frames[t+Ut.COMPRESS]=o?1:0,this.frames[t+Ut.STRETCH]=l?1:0}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.ikConstraints[this.ikConstraintIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch;return;case k.first:c.mix+=(c.data.mix-c.mix)*i,c.softness+=(c.data.softness-c.softness)*i,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}return}if(s>=a[a.length-Ut.ENTRIES]){o==k.setup?(c.mix=c.data.mix+(a[a.length+Ut.PREV_MIX]-c.data.mix)*i,c.softness=c.data.softness+(a[a.length+Ut.PREV_SOFTNESS]-c.data.softness)*i,l==kt.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=a[a.length+Ut.PREV_BEND_DIRECTION],c.compress=a[a.length+Ut.PREV_COMPRESS]!=0,c.stretch=a[a.length+Ut.PREV_STRETCH]!=0)):(c.mix+=(a[a.length+Ut.PREV_MIX]-c.mix)*i,c.softness+=(a[a.length+Ut.PREV_SOFTNESS]-c.softness)*i,l==kt.mixIn&&(c.bendDirection=a[a.length+Ut.PREV_BEND_DIRECTION],c.compress=a[a.length+Ut.PREV_COMPRESS]!=0,c.stretch=a[a.length+Ut.PREV_STRETCH]!=0));return}const h=ve.binarySearch(a,s,Ut.ENTRIES),d=a[h+Ut.PREV_MIX],u=a[h+Ut.PREV_SOFTNESS],f=a[h],m=this.getCurvePercent(h/Ut.ENTRIES-1,1-(s-f)/(a[h+Ut.PREV_TIME]-f));o==k.setup?(c.mix=c.data.mix+(d+(a[h+Ut.MIX]-d)*m-c.data.mix)*i,c.softness=c.data.softness+(u+(a[h+Ut.SOFTNESS]-u)*m-c.data.softness)*i,l==kt.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=a[h+Ut.PREV_BEND_DIRECTION],c.compress=a[h+Ut.PREV_COMPRESS]!=0,c.stretch=a[h+Ut.PREV_STRETCH]!=0)):(c.mix+=(d+(a[h+Ut.MIX]-d)*m-c.mix)*i,c.softness+=(u+(a[h+Ut.SOFTNESS]-u)*m-c.softness)*i,l==kt.mixIn&&(c.bendDirection=a[h+Ut.PREV_BEND_DIRECTION],c.compress=a[h+Ut.PREV_COMPRESS]!=0,c.stretch=a[h+Ut.PREV_STRETCH]!=0))}};let Ve=Ut;Ve.ENTRIES=6;Ve.PREV_TIME=-6;Ve.PREV_MIX=-5;Ve.PREV_SOFTNESS=-4;Ve.PREV_BEND_DIRECTION=-3;Ve.PREV_COMPRESS=-2;Ve.PREV_STRETCH=-1;Ve.MIX=1;Ve.SOFTNESS=2;Ve.BEND_DIRECTION=3;Ve.COMPRESS=4;Ve.STRETCH=5;const oe=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*oe.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(t,e,s,r,i,o){t*=oe.ENTRIES,this.frames[t]=e,this.frames[t+oe.ROTATE]=s,this.frames[t+oe.TRANSLATE]=r,this.frames[t+oe.SCALE]=i,this.frames[t+oe.SHEAR]=o}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(!c.active)return;if(s<a[0]){const m=c.data;switch(o){case k.setup:c.rotateMix=m.rotateMix,c.translateMix=m.translateMix,c.scaleMix=m.scaleMix,c.shearMix=m.shearMix;return;case k.first:c.rotateMix+=(m.rotateMix-c.rotateMix)*i,c.translateMix+=(m.translateMix-c.translateMix)*i,c.scaleMix+=(m.scaleMix-c.scaleMix)*i,c.shearMix+=(m.shearMix-c.shearMix)*i}return}let h=0,d=0,u=0,f=0;if(s>=a[a.length-oe.ENTRIES]){const m=a.length;h=a[m+oe.PREV_ROTATE],d=a[m+oe.PREV_TRANSLATE],u=a[m+oe.PREV_SCALE],f=a[m+oe.PREV_SHEAR]}else{const m=ve.binarySearch(a,s,oe.ENTRIES);h=a[m+oe.PREV_ROTATE],d=a[m+oe.PREV_TRANSLATE],u=a[m+oe.PREV_SCALE],f=a[m+oe.PREV_SHEAR];const p=a[m],g=this.getCurvePercent(m/oe.ENTRIES-1,1-(s-p)/(a[m+oe.PREV_TIME]-p));h+=(a[m+oe.ROTATE]-h)*g,d+=(a[m+oe.TRANSLATE]-d)*g,u+=(a[m+oe.SCALE]-u)*g,f+=(a[m+oe.SHEAR]-f)*g}if(o==k.setup){const m=c.data;c.rotateMix=m.rotateMix+(h-m.rotateMix)*i,c.translateMix=m.translateMix+(d-m.translateMix)*i,c.scaleMix=m.scaleMix+(u-m.scaleMix)*i,c.shearMix=m.shearMix+(f-m.shearMix)*i}else c.rotateMix+=(h-c.rotateMix)*i,c.translateMix+=(d-c.translateMix)*i,c.scaleMix+=(u-c.scaleMix)*i,c.shearMix+=(f-c.shearMix)*i}};let Je=oe;Je.ENTRIES=5;Je.PREV_TIME=-5;Je.PREV_ROTATE=-4;Je.PREV_TRANSLATE=-3;Je.PREV_SCALE=-2;Je.PREV_SHEAR=-1;Je.ROTATE=1;Je.TRANSLATE=2;Je.SCALE=3;Je.SHEAR=4;const Ps=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*Ps.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(t,e,s){t*=Ps.ENTRIES,this.frames[t]=e,this.frames[t+Ps.VALUE]=s}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.position=c.data.position;return;case k.first:c.position+=(c.data.position-c.position)*i}return}let h=0;if(s>=a[a.length-Ps.ENTRIES])h=a[a.length+Ps.PREV_VALUE];else{const d=ve.binarySearch(a,s,Ps.ENTRIES);h=a[d+Ps.PREV_VALUE];const u=a[d],f=this.getCurvePercent(d/Ps.ENTRIES-1,1-(s-u)/(a[d+Ps.PREV_TIME]-u));h+=(a[d+Ps.VALUE]-h)*f}o==k.setup?c.position=c.data.position+(h-c.data.position)*i:c.position+=(h-c.position)*i}};let fn=Ps;fn.ENTRIES=2;fn.PREV_TIME=-2;fn.PREV_VALUE=-1;fn.VALUE=1;let Fh=class Yn extends fn{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.spacing=c.data.spacing;return;case k.first:c.spacing+=(c.data.spacing-c.spacing)*i}return}let h=0;if(s>=a[a.length-Yn.ENTRIES])h=a[a.length+Yn.PREV_VALUE];else{const d=ve.binarySearch(a,s,Yn.ENTRIES);h=a[d+Yn.PREV_VALUE];const u=a[d],f=this.getCurvePercent(d/Yn.ENTRIES-1,1-(s-u)/(a[d+Yn.PREV_TIME]-u));h+=(a[d+Yn.VALUE]-h)*f}o==k.setup?c.spacing=c.data.spacing+(h-c.data.spacing)*i:c.spacing+=(h-c.spacing)*i}};const Ge=class extends as{constructor(t){super(t),this.frames=Y.newFloatArray(t*Ge.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(t,e,s,r){t*=Ge.ENTRIES,this.frames[t]=e,this.frames[t+Ge.ROTATE]=s,this.frames[t+Ge.TRANSLATE]=r}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(!c.active)return;if(s<a[0]){switch(o){case k.setup:c.rotateMix=c.data.rotateMix,c.translateMix=c.data.translateMix;return;case k.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*i,c.translateMix+=(c.data.translateMix-c.translateMix)*i}return}let h=0,d=0;if(s>=a[a.length-Ge.ENTRIES])h=a[a.length+Ge.PREV_ROTATE],d=a[a.length+Ge.PREV_TRANSLATE];else{const u=ve.binarySearch(a,s,Ge.ENTRIES);h=a[u+Ge.PREV_ROTATE],d=a[u+Ge.PREV_TRANSLATE];const f=a[u],m=this.getCurvePercent(u/Ge.ENTRIES-1,1-(s-f)/(a[u+Ge.PREV_TIME]-f));h+=(a[u+Ge.ROTATE]-h)*m,d+=(a[u+Ge.TRANSLATE]-d)*m}o==k.setup?(c.rotateMix=c.data.rotateMix+(h-c.data.rotateMix)*i,c.translateMix=c.data.translateMix+(d-c.data.translateMix)*i):(c.rotateMix+=(h-c.rotateMix)*i,c.translateMix+=(d-c.translateMix)*i)}};let Hs=Ge;Hs.ENTRIES=3;Hs.PREV_TIME=-3;Hs.PREV_ROTATE=-2;Hs.PREV_TRANSLATE=-1;Hs.ROTATE=1;Hs.TRANSLATE=2;const le=class{constructor(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Bh(this),this.propertyIDs=new Ip,this.animationsChanged=!1,this.trackEntryPool=new Fo(()=>new Lo),this.data=t}update(t){t*=this.timeScale;const e=this.tracks;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i==null)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let o=t*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}let l=i.next;if(l!=null){const a=i.trackLast-l.delay;if(a>=0){for(l.delay=0,l.trackTime+=i.timeScale==0?0:(a/i.timeScale+t)*l.timeScale,i.trackTime+=o,this.setCurrent(s,l,!0);l.mixingFrom!=null;)l.mixTime+=t,l=l.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&i.mixingFrom==null){e[s]=null,this.queue.end(i),this.disposeNext(i);continue}if(i.mixingFrom!=null&&this.updateMixingFrom(i,t)){let a=i.mixingFrom;for(i.mixingFrom=null,a!=null&&(a.mixingTo=null);a!=null;)this.queue.end(a),a=a.mixingFrom}i.trackTime+=o}this.queue.drain()}updateMixingFrom(t,e){const s=t.mixingFrom;if(s==null)return!0;const r=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((s.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=s.mixingFrom,s.mixingFrom!=null&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),r):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const e=this.events,s=this.tracks;let r=!1;for(let l=0,a=s.length;l<a;l++){const c=s[l];if(c==null||c.delay>0)continue;r=!0;const h=l==0?k.first:c.mixBlend;let d=c.alpha;c.mixingFrom!=null?d*=this.applyMixingFrom(c,t,h):c.trackTime>=c.trackEnd&&c.next==null&&(d=0);const u=c.animationLast,f=c.getAnimationTime(),m=c.animation.timelines.length,p=c.animation.timelines;if(l==0&&d==1||h==k.add)for(let g=0;g<m;g++){const x=p[g];x instanceof kr?this.applyAttachmentTimeline(x,t,f,h,!0):x.apply(t,u,f,e,d,h,kt.mixIn)}else{const g=c.timelineMode,x=c.timelinesRotation.length==0;x&&Y.setArraySize(c.timelinesRotation,m<<1,null);const b=c.timelinesRotation;for(let y=0;y<m;y++){const w=p[y],_=g[y]==le.SUBSEQUENT?h:k.setup;w instanceof Le?this.applyRotateTimeline(w,t,f,d,_,b,y<<1,x):w instanceof kr?this.applyAttachmentTimeline(w,t,f,h,!0):w.apply(t,u,f,e,d,_,kt.mixIn)}}this.queueEvents(c,f),e.length=0,c.nextAnimationLast=f,c.nextTrackLast=c.trackTime}const i=this.unkeyedState+le.SETUP,o=t.slots;for(let l=0,a=t.slots.length;l<a;l++){const c=o[l];if(c.attachmentState==i){const h=c.data.attachmentName;c.setAttachment(h==null?null:t.getAttachment(c.data.index,h))}}return this.unkeyedState+=2,this.queue.drain(),r}applyMixingFrom(t,e,s){const r=t.mixingFrom;r.mixingFrom!=null&&this.applyMixingFrom(r,e,s);let i=0;t.mixDuration==0?(i=1,s==k.first&&(s=k.setup)):(i=t.mixTime/t.mixDuration,i>1&&(i=1),s!=k.first&&(s=r.mixBlend));const o=i<r.eventThreshold?this.events:null,l=i<r.attachmentThreshold,a=i<r.drawOrderThreshold,c=r.animationLast,h=r.getAnimationTime(),d=r.animation.timelines.length,u=r.animation.timelines,f=r.alpha*t.interruptAlpha,m=f*(1-i);if(s==k.add)for(let p=0;p<d;p++)u[p].apply(e,c,h,o,m,s,kt.mixOut);else{const p=r.timelineMode,g=r.timelineHoldMix,x=r.timelinesRotation.length==0;x&&Y.setArraySize(r.timelinesRotation,d<<1,null);const b=r.timelinesRotation;r.totalAlpha=0;for(let y=0;y<d;y++){const w=u[y];let _=kt.mixOut,E,S=0;switch(p[y]){case le.SUBSEQUENT:if(!a&&w instanceof ui)continue;E=s,S=m;break;case le.FIRST:E=k.setup,S=m;break;case le.HOLD_SUBSEQUENT:E=s,S=f;break;case le.HOLD_FIRST:E=k.setup,S=f;break;default:E=k.setup;const T=g[y];S=f*Math.max(0,1-T.mixTime/T.mixDuration);break}r.totalAlpha+=S,w instanceof Le?this.applyRotateTimeline(w,e,h,S,E,b,y<<1,x):w instanceof kr?this.applyAttachmentTimeline(w,e,h,E,l):(a&&w instanceof ui&&E==k.setup&&(_=kt.mixIn),w.apply(e,c,h,o,S,E,_))}}return t.mixDuration>0&&this.queueEvents(r,h),this.events.length=0,r.nextAnimationLast=h,r.nextTrackLast=r.trackTime,i}applyAttachmentTimeline(t,e,s,r,i){const o=e.slots[t.slotIndex];if(!o.bone.active)return;const l=t.frames;if(s<l[0])(r==k.setup||r==k.first)&&this.setAttachment(e,o,o.data.attachmentName,i);else{let a;s>=l[l.length-1]?a=l.length-1:a=ve.binarySearch(l,s)-1,this.setAttachment(e,o,t.attachmentNames[a],i)}o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+le.SETUP)}setAttachment(t,e,s,r){e.setAttachment(s==null?null:t.getAttachment(e.data.index,s)),r&&(e.attachmentState=this.unkeyedState+le.CURRENT)}applyRotateTimeline(t,e,s,r,i,o,l,a){if(a&&(o[l]=0),r==1){t.apply(e,0,s,null,1,i,kt.mixIn);return}const c=t,h=c.frames,d=e.bones[c.boneIndex];if(!d.active)return;let u=0,f=0;if(s<h[0])switch(i){case k.setup:d.rotation=d.data.rotation;default:return;case k.first:u=d.rotation,f=d.data.rotation}else if(u=i==k.setup?d.data.rotation:d.rotation,s>=h[h.length-Le.ENTRIES])f=d.data.rotation+h[h.length+Le.PREV_ROTATION];else{const g=ve.binarySearch(h,s,Le.ENTRIES),x=h[g+Le.PREV_ROTATION],b=h[g],y=c.getCurvePercent((g>>1)-1,1-(s-b)/(h[g+Le.PREV_TIME]-b));f=h[g+Le.ROTATION]-x,f-=(16384-(16384.499999999996-f/360|0))*360,f=x+f*y+d.data.rotation,f-=(16384-(16384.499999999996-f/360|0))*360}let m=0,p=f-u;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)m=o[l];else{let g=0,x=0;a?(g=0,x=p):(g=o[l],x=o[l+1]);const b=p>0;let y=g>=0;M.signum(x)!=M.signum(p)&&Math.abs(x)<=90&&(Math.abs(g)>180&&(g+=360*M.signum(g)),y=b),m=p+g-g%360,y!=b&&(m+=360*M.signum(g)),o[l]=m}o[l+1]=p,u+=m*r,d.rotation=u-(16384-(16384.499999999996-u/360|0))*360}queueEvents(t,e){const s=t.animationStart,r=t.animationEnd,i=r-s,o=t.trackLast%i,l=this.events;let a=0;const c=l.length;for(;a<c;a++){const d=l[a];if(d.time<o)break;d.time>r||this.queue.event(t,d)}let h=!1;for(t.loop?h=i==0||o>t.trackTime%i:h=e>=r&&t.animationLast<r,h&&this.queue.complete(t);a<c;a++)l[a].time<s||this.queue.event(t,l[a])}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(e==null)return;this.queue.end(e),this.disposeNext(e);let s=e;for(;;){const r=s.mixingFrom;if(r==null)break;this.queue.end(r),s.mixingFrom=null,s.mixingTo=null,s=r}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){const r=this.expandToIndex(t);this.tracks[t]=e,r!=null&&(s&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom!=null&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s){const r=this.data.skeletonData.findAnimation(e);if(r==null)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,r,s)}setAnimationWith(t,e,s){if(e==null)throw new Error("animation cannot be null.");let r=!0,i=this.expandToIndex(t);i!=null&&(i.nextTrackLast==-1?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));const o=this.trackEntry(t,e,s,i);return this.setCurrent(t,o,r),this.queue.drain(),o}addAnimation(t,e,s,r){const i=this.data.skeletonData.findAnimation(e);if(i==null)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,i,s,r)}addAnimationWith(t,e,s,r){if(e==null)throw new Error("animation cannot be null.");let i=this.expandToIndex(t);if(i!=null)for(;i.next!=null;)i=i.next;const o=this.trackEntry(t,e,s,i);if(i==null)this.setCurrent(t,o,!0),this.queue.drain();else if(i.next=o,r<=0){const l=i.animationEnd-i.animationStart;l!=0?(i.loop?r+=l*(1+(i.trackTime/l|0)):r+=Math.max(l,i.trackTime),r-=this.data.getMix(i.animation,e)):r=i.trackTime}return o.delay=r,o}setEmptyAnimation(t,e){const s=this.setAnimationWith(t,le.emptyAnimation,!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e,s){s<=0&&(s-=e);const r=this.addAnimationWith(t,le.emptyAnimation,!1,s);return r.mixDuration=e,r.trackEnd=e,r}setEmptyAnimations(t){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let s=0,r=this.tracks.length;s<r;s++){const i=this.tracks[s];i!=null&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,r){const i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=s,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=r==null?0:this.data.getMix(r.animation,e),i.mixBlend=k.replace,i}disposeNext(t){let e=t.next;for(;e!=null;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let s=this.tracks[t];if(s!=null){for(;s.mixingFrom!=null;)s=s.mixingFrom;do(s.mixingFrom==null||s.mixBlend!=k.add)&&this.computeHold(s),s=s.mixingTo;while(s!=null)}}}computeHold(t){const e=t.mixingTo,s=t.animation.timelines,r=t.animation.timelines.length,i=Y.setArraySize(t.timelineMode,r);t.timelineHoldMix.length=0;const o=Y.setArraySize(t.timelineHoldMix,r),l=this.propertyIDs;if(e!=null&&e.holdPrevious){for(let a=0;a<r;a++)i[a]=l.add(s[a].getPropertyId())?le.HOLD_FIRST:le.HOLD_SUBSEQUENT;return}t:for(let a=0;a<r;a++){const c=s[a],h=c.getPropertyId();if(!l.add(h))i[a]=le.SUBSEQUENT;else if(e==null||c instanceof kr||c instanceof ui||c instanceof Do||!e.animation.hasTimeline(h))i[a]=le.FIRST;else{for(let d=e.mixingTo;d!=null;d=d.mixingTo)if(!d.animation.hasTimeline(h)){if(t.mixDuration>0){i[a]=le.HOLD_MIX,o[a]=d;continue t}break}i[a]=le.HOLD_FIRST}}}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(t,e,s){le.deprecatedWarning1||(le.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,s)}addAnimationByName(t,e,s,r){le.deprecatedWarning2||(le.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,s,r)}hasAnimation(t){return this.data.skeletonData.findAnimation(t)!==null}hasAnimationByName(t){return le.deprecatedWarning3||(le.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}};let bs=le;bs.emptyAnimation=new ve("<empty>",[],0);bs.SUBSEQUENT=0;bs.FIRST=1;bs.HOLD_SUBSEQUENT=2;bs.HOLD_FIRST=3;bs.HOLD_MIX=4;bs.SETUP=1;bs.CURRENT=2;bs.deprecatedWarning1=!1;bs.deprecatedWarning2=!1;bs.deprecatedWarning3=!1;const yn=class{constructor(){this.mixBlend=k.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return yn.deprecatedWarning1||(yn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){yn.deprecatedWarning1||(yn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return yn.deprecatedWarning2||(yn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){yn.deprecatedWarning2||(yn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Lo=yn;Lo.deprecatedWarning1=!1;Lo.deprecatedWarning2=!1;const Uc=class{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(ts.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(ts.interrupt),this.objects.push(t)}end(t){this.objects.push(ts.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(ts.dispose),this.objects.push(t)}complete(t){this.objects.push(ts.complete),this.objects.push(t)}event(t,e){this.objects.push(ts.event),this.objects.push(t),this.objects.push(e)}deprecateStuff(){return Uc.deprecatedWarning1||(Uc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){const r=t[s],i=t[s+1];switch(r){case ts.start:i.listener!=null&&i.listener.start&&i.listener.start(i);for(let a=0;a<e.length;a++)e[a].start&&e[a].start(i);i.onStart&&this.deprecateStuff()&&i.onStart(i.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(i.trackIndex);break;case ts.interrupt:i.listener!=null&&i.listener.interrupt&&i.listener.interrupt(i);for(let a=0;a<e.length;a++)e[a].interrupt&&e[a].interrupt(i);break;case ts.end:i.listener!=null&&i.listener.end&&i.listener.end(i);for(let a=0;a<e.length;a++)e[a].end&&e[a].end(i);i.onEnd&&this.deprecateStuff()&&i.onEnd(i.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(i.trackIndex);case ts.dispose:i.listener!=null&&i.listener.dispose&&i.listener.dispose(i);for(let a=0;a<e.length;a++)e[a].dispose&&e[a].dispose(i);this.animState.trackEntryPool.free(i);break;case ts.complete:i.listener!=null&&i.listener.complete&&i.listener.complete(i);for(let a=0;a<e.length;a++)e[a].complete&&e[a].complete(i);const o=M.toInt(i.loopsCount());i.onComplete&&this.deprecateStuff()&&i.onComplete(i.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(i.trackIndex,o);break;case ts.event:const l=t[s+++2];i.listener!=null&&i.listener.event&&i.listener.event(i,l);for(let a=0;a<e.length;a++)e[a].event&&e[a].event(i,l);i.onEvent&&this.deprecateStuff()&&i.onEvent(i.trackIndex,l),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(i.trackIndex,l);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let Bh=Uc;Bh.deprecatedWarning1=!1;var ts=(n=>(n[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event",n))(ts||{});let Z_=class{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}};const jc=class{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,t==null)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){const r=this.skeletonData.findAnimation(t);if(r==null)throw new Error(`Animation not found: ${t}`);const i=this.skeletonData.findAnimation(e);if(i==null)throw new Error(`Animation not found: ${e}`);this.setMixWith(r,i,s)}setMixByName(t,e,s){jc.deprecatedWarning1||(jc.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,s)}setMixWith(t,e,s){if(t==null)throw new Error("from cannot be null.");if(e==null)throw new Error("to cannot be null.");const r=`${t.name}.${e.name}`;this.animationToMixTime[r]=s}getMix(t,e){const s=`${t.name}.${e.name}`,r=this.animationToMixTime[s];return r===void 0?this.defaultMix:r}};let Dh=jc;Dh.deprecatedWarning1=!1;let Lh=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,s){const r=this.atlas.findRegion(s);if(r==null)throw new Error(`Region not found in atlas: ${s} (region attachment: ${e})`);const i=new Tt(e);return i.region=r,i}newMeshAttachment(t,e,s){const r=this.atlas.findRegion(s);if(r==null)throw new Error(`Region not found in atlas: ${s} (mesh attachment: ${e})`);const i=new Bo(e);return i.region=r,i}newBoundingBoxAttachment(t,e){return new Bp(e)}newPathAttachment(t,e){return new Ji(e)}newPointAttachment(t,e){return new Up(e)}newClippingAttachment(t,e){return new Lp(e)}},Xc=class{constructor(t,e,s){if(this.matrix=new Ht,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,r,i,o,l){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=l,this.appliedValid=!0;const a=this.parent,c=this.matrix,h=this.skeleton.scaleX,d=-this.skeleton.scaleY;if(a==null){const g=this.skeleton,x=s+90+l;c.a=M.cosDeg(s+o)*r*h,c.c=M.cosDeg(x)*i*h,c.b=M.sinDeg(s+o)*r*d,c.d=M.sinDeg(x)*i*d,c.tx=t*h+g.x,c.ty=e*d+g.y;return}let u=a.matrix.a,f=a.matrix.c,m=a.matrix.b,p=a.matrix.d;switch(c.tx=u*t+f*e+a.matrix.tx,c.ty=m*t+p*e+a.matrix.ty,this.data.transformMode){case vt.Normal:{const g=s+90+l,x=M.cosDeg(s+o)*r,b=M.cosDeg(g)*i,y=M.sinDeg(s+o)*r,w=M.sinDeg(g)*i;c.a=u*x+f*y,c.c=u*b+f*w,c.b=m*x+p*y,c.d=m*b+p*w;return}case vt.OnlyTranslation:{const g=s+90+l;c.a=M.cosDeg(s+o)*r,c.c=M.cosDeg(g)*i,c.b=M.sinDeg(s+o)*r,c.d=M.sinDeg(g)*i;break}case vt.NoRotationOrReflection:{let g=u*u+m*m,x=0;g>1e-4?(g=Math.abs(u*p-f*m)/g,u/=this.skeleton.scaleX,m/=this.skeleton.scaleY,f=m*g,p=u*g,x=Math.atan2(m,u)*M.radDeg):(u=0,m=0,x=90-Math.atan2(p,f)*M.radDeg);const b=s+o-x,y=s+l-x+90,w=M.cosDeg(b)*r,_=M.cosDeg(y)*i,E=M.sinDeg(b)*r,S=M.sinDeg(y)*i;c.a=u*w-f*E,c.c=u*_-f*S,c.b=m*w+p*E,c.d=m*_+p*S;break}case vt.NoScale:case vt.NoScaleOrReflection:{const g=M.cosDeg(s),x=M.sinDeg(s);let b=(u*g+f*x)/h,y=(m*g+p*x)/d,w=Math.sqrt(b*b+y*y);w>1e-5&&(w=1/w),b*=w,y*=w,w=Math.sqrt(b*b+y*y),this.data.transformMode==vt.NoScale&&u*p-f*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(w=-w);const _=Math.PI/2+Math.atan2(y,b),E=Math.cos(_)*w,S=Math.sin(_)*w,T=M.cosDeg(o)*r,A=M.cosDeg(90+l)*i,C=M.sinDeg(o)*r,I=M.sinDeg(90+l)*i;c.a=b*T+E*C,c.c=b*A+E*I,c.b=y*T+S*C,c.d=y*A+S*I;break}}c.a*=h,c.c*=h,c.b*=d,c.d*=d}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;const t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}const s=t.matrix,r=1/(s.a*s.d-s.b*s.c),i=e.tx-s.tx,o=e.ty-s.ty;this.ax=i*s.d*r-o*s.c*r,this.ay=o*s.a*r-i*s.b*r;const l=r*s.d,a=r*s.a,c=r*s.c,h=r*s.b,d=l*e.a-c*e.b,u=l*e.c-c*e.d,f=a*e.b-h*e.a,m=a*e.d-h*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){const p=d*m-u*f;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(d*u+f*m,p)*M.radDeg,this.arotation=Math.atan2(f,d)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,u)*M.radDeg}worldToLocal(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=1/(s*o-r*i),a=t.x-e.tx,c=t.y-e.ty;return t.x=a*o*l-c*r*l,t.y=c*s*l-a*i*l,t}localToWorld(t){const e=this.matrix,s=t.x,r=t.y;return t.x=s*e.a+r*e.c+e.tx,t.y=s*e.b+r*e.d+e.ty,t}worldToLocalRotation(t){const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*s,r.d*s-r.c*e)*M.radDeg}localToWorldRotation(t){const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(s*r.b+e*r.d,s*r.a+e*r.c)*M.radDeg}rotateWorld(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=M.cosDeg(t),a=M.sinDeg(t);e.a=l*s-a*i,e.c=l*r-a*o,e.b=a*s+l*i,e.d=a*r+l*o,this.appliedValid=!1}},Oh=class{constructor(t,e,s){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=vt.Normal,this.skinRequired=!1,this.color=new tt,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}},Oo=class{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}},Vh=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},Uh=class{constructor(t){this.name=t}},$p=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix);break}}apply1(t,e,s,r,i,o,l){t.appliedValid||t.updateAppliedTransform();const a=t.parent.matrix,c=a.a;let h=a.c;const d=a.b;let u=a.d,f=-t.ashearX-t.arotation,m=0,p=0;switch(t.data.transformMode){case vt.OnlyTranslation:m=e-t.worldX,p=s-t.worldY;break;case vt.NoRotationOrReflection:const b=Math.abs(c*u-h*d)/(c*c+d*d),y=c/t.skeleton.scaleX,w=d/t.skeleton.scaleY;h=-w*b*t.skeleton.scaleX,u=y*b*t.skeleton.scaleY,f+=Math.atan2(w,y)*M.radDeg;default:const _=e-a.tx,E=s-a.ty,S=c*u-h*d;m=(_*u-E*h)/S-t.ax,p=(E*c-_*d)/S-t.ay}f+=Math.atan2(p,m)*M.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let g=t.ascaleX,x=t.ascaleY;if(r||i){switch(t.data.transformMode){case vt.NoScale:case vt.NoScaleOrReflection:m=e-t.worldX,p=s-t.worldY}const b=t.data.length*g,y=Math.sqrt(m*m+p*p);if(r&&y<b||i&&y>b&&b>1e-4){const w=(y/b-1)*l+1;g*=w,o&&(x*=w)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*l,g,x,t.ashearX,t.ashearY)}apply2(t,e,s,r,i,o,l,a){if(a==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();const c=t.ax,h=t.ay;let d=t.ascaleX,u=d,f=t.ascaleY,m=e.ascaleX;const p=t.matrix;let g=0,x=0,b=0;d<0?(d=-d,g=180,b=-1):(g=0,b=1),f<0&&(f=-f,b=-b),m<0?(m=-m,x=180):x=0;const y=e.ax;let w=0,_=0,E=0,S=p.a,T=p.c,A=p.b,C=p.d;const I=Math.abs(d-f)<=1e-4;I?(w=e.ay,_=S*y+T*w+p.tx,E=A*y+C*w+p.ty):(w=0,_=S*y+p.tx,E=A*y+p.ty);const P=t.parent.matrix;S=P.a,T=P.c,A=P.b,C=P.d;const R=1/(S*C-T*A);let N=_-P.tx,F=E-P.ty;const D=(N*C-F*T)*R-c,L=(F*S-N*A)*R-h,O=Math.sqrt(D*D+L*L);let j=e.data.length*m,U,B;if(O<1e-4){this.apply1(t,s,r,!1,o,!1,a),e.updateWorldTransformWith(y,w,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}N=s-P.tx,F=r-P.ty;let G=(N*C-F*T)*R-c,H=(F*S-N*A)*R-h,K=G*G+H*H;if(l!=0){l*=d*(m+1)/2;const Q=Math.sqrt(K),X=Q-O-j*d+l;if(X>0){let W=Math.min(1,X/(l*2))-1;W=(X-l*(1-W*W))/Q,G-=W*G,H-=W*H,K=G*G+H*H}}t:if(I){j*=d;let Q=(K-O*O-j*j)/(2*O*j);Q<-1?Q=-1:Q>1&&(Q=1,o&&(u*=(Math.sqrt(K)/(O+j)-1)*a+1)),B=Math.acos(Q)*i,S=O+j*Q,T=j*Math.sin(B),U=Math.atan2(H*S-G*T,G*S+H*T)}else{S=d*j,T=f*j;const Q=S*S,X=T*T,W=Math.atan2(H,G);A=X*O*O+Q*K-Q*X;const Z=-2*X*O,at=X-Q;if(C=Z*Z-4*at*A,C>=0){let re=Math.sqrt(C);Z<0&&(re=-re),re=-(Z+re)/2;const qt=re/at,Kt=A/re,je=Math.abs(qt)<Math.abs(Kt)?qt:Kt;if(je*je<=K){F=Math.sqrt(K-je*je)*i,U=W-Math.atan2(F,je),B=Math.atan2(F/f,(je-O)/d);break t}}let gt=M.PI,yt=O-S,nt=yt*yt,It=0,Ct=0,wt=O+S,Qt=wt*wt,Jt=0;A=-S*O/(Q-X),A>=-1&&A<=1&&(A=Math.acos(A),N=S*Math.cos(A)+O,F=T*Math.sin(A),C=N*N+F*F,C<nt&&(gt=A,nt=C,yt=N,It=F),C>Qt&&(Ct=A,Qt=C,wt=N,Jt=F)),K<=(nt+Qt)/2?(U=W-Math.atan2(It*i,yt),B=gt*i):(U=W-Math.atan2(Jt*i,wt),B=Ct*i)}const z=Math.atan2(w,y)*b;let J=t.arotation;U=(U-z)*M.radDeg+g-J,U>180?U-=360:U<-180&&(U+=360),t.updateWorldTransformWith(c,h,J+U*a,u,t.ascaleY,0,0),J=e.arotation,B=((B+z)*M.radDeg-e.ashearX)*b+x-J,B>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(y,w,J+B*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},jh=class extends Oo{constructor(t){super(t,0,!1),this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}},Xh=class extends Oo{constructor(t){super(t,0,!1),this.bones=new Array}};var Fe=(n=>(n[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",n))(Fe||{});const _r=class{constructor(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,r=t.bones.length;s<r;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}isActive(){return this.active}apply(){this.update()}update(){const t=this.target.getAttachment();if(!(t instanceof Ji))return;const e=this.rotateMix,s=this.translateMix,r=s>0,i=e>0;if(!r&&!i)return;const o=this.data,l=o.spacingMode,a=l==Fe.Length,c=o.rotateMode,h=c==we.Tangent,d=c==we.ChainScale,u=this.bones.length,f=h?u:u+1,m=this.bones,p=Y.setArraySize(this.spaces,f);let g=null;const x=this.spacing;if(d||a){d&&(g=Y.setArraySize(this.lengths,u));for(let S=0,T=f-1;S<T;){const A=m[S],C=A.data.length;if(C<_r.epsilon)d&&(g[S]=0),p[++S]=0;else{const I=C*A.matrix.a,P=C*A.matrix.b,R=Math.sqrt(I*I+P*P);d&&(g[S]=R),p[++S]=(a?C+x:x)*R/C}}}else for(let S=1;S<f;S++)p[S]=x;const b=this.computeWorldPositions(t,f,h,o.positionMode==fe.Percent,l==Fe.Percent);let y=b[0],w=b[1],_=o.offsetRotation,E=!1;if(_==0)E=c==we.Chain;else{E=!1;const S=this.target.bone.matrix;_*=S.a*S.d-S.b*S.c>0?M.degRad:-M.degRad}for(let S=0,T=3;S<u;S++,T+=3){const A=m[S],C=A.matrix;C.tx+=(y-C.tx)*s,C.ty+=(w-C.ty)*s;const I=b[T],P=b[T+1],R=I-y,N=P-w;if(d){const F=g[S];if(F!=0){const D=(Math.sqrt(R*R+N*N)/F-1)*e+1;C.a*=D,C.b*=D}}if(y=I,w=P,i){const F=C.a,D=C.c,L=C.b,O=C.d;let j=0,U=0,B=0;if(h&&(h?j=b[T-1]:p[S+1]==0?j=b[T+2]:j=Math.atan2(N,R)),j-=Math.atan2(L,F),E){U=Math.cos(j),B=Math.sin(j);const G=A.data.length;y+=(G*(U*F-B*L)-R)*e,w+=(G*(B*F+U*L)-N)*e}else j+=_;j>M.PI?j-=M.PI2:j<-M.PI&&(j+=M.PI2),j*=e,U=Math.cos(j),B=Math.sin(j),C.a=U*F-B*L,C.c=U*D-B*O,C.b=B*F+U*L,C.d=B*D+U*O}A.appliedValid=!1}}computeWorldPositions(t,e,s,r,i){const o=this.target;let l=this.position;const a=this.spaces,c=Y.setArraySize(this.positions,e*3+2);let h=null;const d=t.closed;let u=t.worldVerticesLength,f=u/6,m=_r.NONE;if(!t.constantSpeed){const j=t.lengths;f-=d?1:2;const U=j[f];if(r&&(l*=U),i)for(let B=0;B<e;B++)a[B]*=U;h=Y.setArraySize(this.world,8);for(let B=0,G=0,H=0;B<e;B++,G+=3){const K=a[B];l+=K;let z=l;if(d)z%=U,z<0&&(z+=U),H=0;else if(z<0){m!=_r.BEFORE&&(m=_r.BEFORE,t.computeWorldVertices(o,2,4,h,0,2)),this.addBeforePosition(z,h,0,c,G);continue}else if(z>U){m!=_r.AFTER&&(m=_r.AFTER,t.computeWorldVertices(o,u-6,4,h,0,2)),this.addAfterPosition(z-U,h,0,c,G);continue}for(;;H++){const J=j[H];if(!(z>J)){if(H==0)z/=J;else{const Q=j[H-1];z=(z-Q)/(J-Q)}break}}H!=m&&(m=H,d&&H==f?(t.computeWorldVertices(o,u-4,4,h,0,2),t.computeWorldVertices(o,0,4,h,4,2)):t.computeWorldVertices(o,H*6+2,8,h,0,2)),this.addCurvePosition(z,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],c,G,s||B>0&&K==0)}return c}d?(u+=2,h=Y.setArraySize(this.world,u),t.computeWorldVertices(o,2,u-4,h,0,2),t.computeWorldVertices(o,0,2,h,u-4,2),h[u-2]=h[0],h[u-1]=h[1]):(f--,u-=4,h=Y.setArraySize(this.world,u),t.computeWorldVertices(o,2,u,h,0,2));const p=Y.setArraySize(this.curves,f);let g=0,x=h[0],b=h[1],y=0,w=0,_=0,E=0,S=0,T=0,A=0,C=0,I=0,P=0,R=0,N=0,F=0,D=0;for(let j=0,U=2;j<f;j++,U+=6)y=h[U],w=h[U+1],_=h[U+2],E=h[U+3],S=h[U+4],T=h[U+5],A=(x-y*2+_)*.1875,C=(b-w*2+E)*.1875,I=((y-_)*3-x+S)*.09375,P=((w-E)*3-b+T)*.09375,R=A*2+I,N=C*2+P,F=(y-x)*.75+A+I*.16666667,D=(w-b)*.75+C+P*.16666667,g+=Math.sqrt(F*F+D*D),F+=R,D+=N,R+=I,N+=P,g+=Math.sqrt(F*F+D*D),F+=R,D+=N,g+=Math.sqrt(F*F+D*D),F+=R+I,D+=N+P,g+=Math.sqrt(F*F+D*D),p[j]=g,x=S,b=T;if(r&&(l*=g),i)for(let j=0;j<e;j++)a[j]*=g;const L=this.segments;let O=0;for(let j=0,U=0,B=0,G=0;j<e;j++,U+=3){const H=a[j];l+=H;let K=l;if(d)K%=g,K<0&&(K+=g),B=0;else if(K<0){this.addBeforePosition(K,h,0,c,U);continue}else if(K>g){this.addAfterPosition(K-g,h,u-4,c,U);continue}for(;;B++){const z=p[B];if(!(K>z)){if(B==0)K/=z;else{const J=p[B-1];K=(K-J)/(z-J)}break}}if(B!=m){m=B;let z=B*6;for(x=h[z],b=h[z+1],y=h[z+2],w=h[z+3],_=h[z+4],E=h[z+5],S=h[z+6],T=h[z+7],A=(x-y*2+_)*.03,C=(b-w*2+E)*.03,I=((y-_)*3-x+S)*.006,P=((w-E)*3-b+T)*.006,R=A*2+I,N=C*2+P,F=(y-x)*.3+A+I*.16666667,D=(w-b)*.3+C+P*.16666667,O=Math.sqrt(F*F+D*D),L[0]=O,z=1;z<8;z++)F+=R,D+=N,R+=I,N+=P,O+=Math.sqrt(F*F+D*D),L[z]=O;F+=R,D+=N,O+=Math.sqrt(F*F+D*D),L[8]=O,F+=R+I,D+=N+P,O+=Math.sqrt(F*F+D*D),L[9]=O,G=0}for(K*=O;;G++){const z=L[G];if(!(K>z)){if(G==0)K/=z;else{const J=L[G-1];K=G+(K-J)/(z-J)}break}}this.addCurvePosition(K*.1,x,b,y,w,_,E,S,T,c,U,s||j>0&&H==0)}return c}addBeforePosition(t,e,s,r,i){const o=e[s],l=e[s+1],a=e[s+2]-o,c=e[s+3]-l,h=Math.atan2(c,a);r[i]=o+t*Math.cos(h),r[i+1]=l+t*Math.sin(h),r[i+2]=h}addAfterPosition(t,e,s,r,i){const o=e[s+2],l=e[s+3],a=o-e[s],c=l-e[s+1],h=Math.atan2(c,a);r[i]=o+t*Math.cos(h),r[i+1]=l+t*Math.sin(h),r[i+2]=h}addCurvePosition(t,e,s,r,i,o,l,a,c,h,d,u){(t==0||isNaN(t))&&(t=1e-4);const f=t*t,m=f*t,p=1-t,g=p*p,x=g*p,b=p*t,y=b*3,w=p*y,_=y*t,E=e*x+r*w+o*_+a*m,S=s*x+i*w+l*_+c*m;h[d]=E,h[d+1]=S,u&&(h[d+2]=Math.atan2(S-(s*g+i*b*2+l*f),E-(e*g+r*b*2+o*f)))}};let wi=_r;wi.NONE=-1;wi.BEFORE=-2;wi.AFTER=-3;wi.epsilon=1e-5;let Wp=class{constructor(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new Qi,this.active=!1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}isActive(){return this.active}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,l=o.a,a=o.c,c=o.b,h=o.d,d=l*h-a*c>0?M.degRad:-M.degRad,u=this.data.offsetRotation*d,f=this.data.offsetShearY*d,m=this.bones;for(let p=0,g=m.length;p<g;p++){const x=m[p];let b=!1;const y=x.matrix;if(t!=0){const w=y.a,_=y.c,E=y.b,S=y.d;let T=Math.atan2(c,l)-Math.atan2(E,w)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;const A=Math.cos(T),C=Math.sin(T);y.a=A*w-C*E,y.c=A*_-C*S,y.b=C*w+A*E,y.d=C*_+A*S,b=!0}if(e!=0){const w=this.temp;i.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),y.tx+=(w.x-y.tx)*e,y.ty+=(w.y-y.ty)*e,b=!0}if(s>0){let w=Math.sqrt(y.a*y.a+y.b*y.b),_=Math.sqrt(l*l+c*c);w>1e-5&&(w=(w+(_-w+this.data.offsetScaleX)*s)/w),y.a*=w,y.b*=w,w=Math.sqrt(y.c*y.c+y.d*y.d),_=Math.sqrt(a*a+h*h),w>1e-5&&(w=(w+(_-w+this.data.offsetScaleY)*s)/w),y.c*=w,y.d*=w,b=!0}if(r>0){const w=y.c,_=y.d,E=Math.atan2(_,w);let S=Math.atan2(h,a)-Math.atan2(c,l)-(E-Math.atan2(y.b,y.a));S>M.PI?S-=M.PI2:S<-M.PI&&(S+=M.PI2),S=E+(S+f)*r;const T=Math.sqrt(w*w+_*_);y.c=Math.cos(S)*T,y.d=Math.sin(S)*T,b=!0}b&&(x.appliedValid=!1)}}applyRelativeWorld(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,l=o.a,a=o.c,c=o.b,h=o.d,d=l*h-a*c>0?M.degRad:-M.degRad,u=this.data.offsetRotation*d,f=this.data.offsetShearY*d,m=this.bones;for(let p=0,g=m.length;p<g;p++){const x=m[p];let b=!1;const y=x.matrix;if(t!=0){const w=y.a,_=y.c,E=y.b,S=y.d;let T=Math.atan2(c,l)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;const A=Math.cos(T),C=Math.sin(T);y.a=A*w-C*E,y.c=A*_-C*S,y.b=C*w+A*E,y.d=C*_+A*S,b=!0}if(e!=0){const w=this.temp;i.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),y.tx+=w.x*e,y.ty+=w.y*e,b=!0}if(s>0){let w=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*s+1;y.a*=w,y.b*=w,w=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleY)*s+1,y.c*=w,y.d*=w,b=!0}if(r>0){let w=Math.atan2(h,a)-Math.atan2(c,l);w>M.PI?w-=M.PI2:w<-M.PI&&(w+=M.PI2);const _=y.c,E=y.d;w=Math.atan2(E,_)+(w-M.PI/2+f)*r;const S=Math.sqrt(_*_+E*E);y.c=Math.cos(w)*S,y.d=Math.sin(w)*S,b=!0}b&&(x.appliedValid=!1)}}applyAbsoluteLocal(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let l=0,a=o.length;l<a;l++){const c=o[l];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;if(t!=0){let g=i.arotation-h+this.data.offsetRotation;g-=(16384-(16384.499999999996-g/360|0))*360,h+=g*t}let d=c.ax,u=c.ay;e!=0&&(d+=(i.ax-d+this.data.offsetX)*e,u+=(i.ay-u+this.data.offsetY)*e);let f=c.ascaleX,m=c.ascaleY;s>0&&(f>1e-5&&(f=(f+(i.ascaleX-f+this.data.offsetScaleX)*s)/f),m>1e-5&&(m=(m+(i.ascaleY-m+this.data.offsetScaleY)*s)/m));const p=c.ashearY;if(r>0){let g=i.ashearY-p+this.data.offsetShearY;g-=(16384-(16384.499999999996-g/360|0))*360,c.shearY+=g*r}c.updateWorldTransformWith(d,u,h,f,m,c.ashearX,p)}}applyRelativeLocal(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let l=0,a=o.length;l<a;l++){const c=o[l];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;t!=0&&(h+=(i.arotation+this.data.offsetRotation)*t);let d=c.ax,u=c.ay;e!=0&&(d+=(i.ax+this.data.offsetX)*e,u+=(i.ay+this.data.offsetY)*e);let f=c.ascaleX,m=c.ascaleY;s>0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*s+1),m>1e-5&&(m*=(i.ascaleY-1+this.data.offsetScaleY)*s+1));let p=c.ashearY;r>0&&(p+=(i.ashearY+this.data.offsetShearY)*r),c.updateWorldTransformWith(d,u,h,f,m,c.ashearX,p)}}};const Xi=class{constructor(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){const s=t.bones[e];let r;if(s.parent==null)r=new Xc(s,this,null);else{const i=this.bones[s.parent.index];r=new Xc(s,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const s=t.slots[e],r=this.bones[s.boneData.index],i=new Rh(s,r);this.slots.push(i),this.drawOrder.push(i)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const s=t.ikConstraints[e];this.ikConstraints.push(new $p(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const s=t.transformConstraints[e];this.transformConstraints.push(new Wp(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const s=t.pathConstraints[e];this.pathConstraints.push(new wi(s,this))}this.color=new tt(1,1,1,1),this.updateCache()}updateCache(){const t=this._updateCache;t.length=0,this.updateCacheReset.length=0;const e=this.bones;for(let h=0,d=e.length;h<d;h++){const u=e[h];u.sorted=u.data.skinRequired,u.active=!u.sorted}if(this.skin!=null){const h=this.skin.bones;for(let d=0,u=this.skin.bones.length;d<u;d++){let f=this.bones[h[d].index];do f.sorted=!1,f.active=!0,f=f.parent;while(f!=null)}}const s=this.ikConstraints,r=this.transformConstraints,i=this.pathConstraints,o=s.length,l=r.length,a=i.length,c=o+l+a;t:for(let h=0;h<c;h++){for(let d=0;d<o;d++){const u=s[d];if(u.data.order==h){this.sortIkConstraint(u);continue t}}for(let d=0;d<l;d++){const u=r[d];if(u.data.order==h){this.sortTransformConstraint(u);continue t}}for(let d=0;d<a;d++){const u=i[d];if(u.data.order==h){this.sortPathConstraint(u);continue t}}}for(let h=0,d=e.length;h<d;h++)this.sortBone(e[h])}sortIkConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target;this.sortBone(e);const s=t.bones,r=s[0];if(this.sortBone(r),s.length>1){const i=s[s.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),s[s.length-1].sorted=!0}sortPathConstraint(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!t.active)return;const e=t.target,s=e.data.index,r=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,s,r),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,r);for(let a=0,c=this.data.skins.length;a<c;a++)this.sortPathConstraintAttachment(this.data.skins[a],s,r);const i=e.getAttachment();i instanceof Ji&&this.sortPathConstraintAttachmentWith(i,r);const o=t.bones,l=o.length;for(let a=0;a<l;a++)this.sortBone(o[a]);this._updateCache.push(t);for(let a=0;a<l;a++)this.sortReset(o[a].children);for(let a=0;a<l;a++)o[a].sorted=!0}sortTransformConstraint(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin!=null&&Y.contains(this.skin.constraints,t.data,!0)),!t.active)return;this.sortBone(t.target);const e=t.bones,s=e.length;if(t.data.local)for(let r=0;r<s;r++){const i=e[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(let r=0;r<s;r++)this.sortBone(e[r]);this._updateCache.push(t);for(let r=0;r<s;r++)this.sortReset(e[r].children);for(let r=0;r<s;r++)e[r].sorted=!0}sortPathConstraintAttachment(t,e,s){const r=t.attachments[e];if(r)for(const i in r)this.sortPathConstraintAttachmentWith(r[i],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof Ji))return;const s=t.bones;if(s==null)this.sortBone(e);else{const r=this.bones;let i=0;for(;i<s.length;){const o=s[i++];for(let l=i+o;i<l;i++){const a=s[i];this.sortBone(r[a])}}}}sortBone(t){if(t.sorted)return;const e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){const r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}}updateWorldTransform(){const t=this.updateCacheReset;for(let s=0,r=t.length;s<r;s++){const i=t[s];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}const e=this._updateCache;for(let s=0,r=e.length;s<r;s++)e[s].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let i=0,o=t.length;i<o;i++)t[i].setToSetupPose();const e=this.ikConstraints;for(let i=0,o=e.length;i<o;i++){const l=e[i];l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}const s=this.transformConstraints;for(let i=0,o=s.length;i<o;i++){const l=s[i],a=l.data;l.rotateMix=a.rotateMix,l.translateMix=a.translateMix,l.scaleMix=a.scaleMix,l.shearMix=a.shearMix}const r=this.pathConstraints;for(let i=0,o=r.length;i<o;i++){const l=r[i],a=l.data;l.position=a.position,l.spacing=a.spacing,l.rotateMix=a.rotateMix,l.translateMix=a.translateMix}}setSlotsToSetupPose(){const t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++)if(e[s].data.name==t)return s;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++)if(e[s].data.name==t)return s;return-1}setSkinByName(t){const e=this.data.findSkin(t);if(e==null)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=this.skin){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else{const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s],o=i.data.attachmentName;if(o!=null){const l=t.getAttachment(s,o);l!=null&&i.setAttachment(l)}}}this.skin=t,this.updateCache()}}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){const s=this.skin.getAttachment(t,e);if(s!=null)return s}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(t==null)throw new Error("slotName cannot be null.");const s=this.slots;for(let r=0,i=s.length;r<i;r++){const o=s[r];if(o.data.name==t){let l=null;if(e!=null&&(l=this.getAttachment(r,e),l==null))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);o.setAttachment(l);return}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}getBounds(t,e,s=new Array(2)){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");const r=this.drawOrder;let i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let c=0,h=r.length;c<h;c++){const d=r[c];if(!d.bone.active)continue;let u=0,f=null;const m=d.getAttachment();if(m instanceof Tt)u=8,f=Y.setArraySize(s,u,0),m.computeWorldVertices(d.bone,f,0,2);else if(m instanceof Bo){const p=m;u=p.worldVerticesLength,f=Y.setArraySize(s,u,0),p.computeWorldVertices(d,0,u,f,0,2)}if(f!=null)for(let p=0,g=f.length;p<g;p+=2){const x=f[p],b=f[p+1];i=Math.min(i,x),o=Math.min(o,b),l=Math.max(l,x),a=Math.max(a,b)}}t.set(i,o),e.set(l-i,a-o)}update(t){this.time+=t}get flipX(){return this.scaleX==-1}set flipX(t){Xi.deprecatedWarning1||(Xi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return this.scaleY==-1}set flipY(t){Xi.deprecatedWarning1||(Xi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}};let Gh=Xi;Gh.deprecatedWarning1=!1;let Yh=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}},$h=class{constructor(t,e,s){if(this.color=new tt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(s==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}},Wh=class extends Oo{constructor(t){super(t,0,!1),this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}},Gc=class{constructor(t,e,s){this.slotIndex=t,this.name=e,this.attachment=s}},ho=class{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,t==null)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(s==null)throw new Error("attachment cannot be null.");const r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=s}addSkin(t){for(let s=0;s<t.bones.length;s++){const r=t.bones[s];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==r){i=!0;break}i||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){const r=t.constraints[s];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==r){i=!0;break}i||this.constraints.push(r)}const e=t.getAttachments();for(let s=0;s<e.length;s++){const r=e[s];this.setAttachment(r.slotIndex,r.name,r.attachment)}}copySkin(t){for(let s=0;s<t.bones.length;s++){const r=t.bones[s];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==r){i=!0;break}i||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){const r=t.constraints[s];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==r){i=!0;break}i||this.constraints.push(r)}const e=t.getAttachments();for(let s=0;s<e.length;s++){const r=e[s];r.attachment!=null&&(r.attachment instanceof Bo?(r.attachment=r.attachment.newLinkedMesh(),this.setAttachment(r.slotIndex,r.name,r.attachment)):(r.attachment=r.attachment.copy(),this.setAttachment(r.slotIndex,r.name,r.attachment)))}}getAttachment(t,e){const s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){const s=this.attachments[t];s&&(s[e]=null)}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const s=this.attachments[e];if(s)for(const r in s){const i=s[r];i&&t.push(new Gc(e,r,i))}}return t}getAttachmentsForSlot(t,e){const s=this.attachments[t];if(s)for(const r in s){const i=s[r];i&&e.push(new Gc(t,r,i))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let r=0;r<t.slots.length;r++){const i=t.slots[r],o=i.getAttachment();if(o&&s<e.attachments.length){const l=e.attachments[s];for(const a in l){const c=l[a];if(o==c){const h=this.getAttachment(s,a);h!=null&&i.setAttachment(h);break}}}s++}}};const pe=class{constructor(n){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=n}readSkeletonData(n){const t=this.scale,e=new Yh;e.name="";const s=new co(n);e.hash=s.readString(),e.version=s.readString(),e.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),e.x=s.readFloat(),e.y=s.readFloat(),e.width=s.readFloat(),e.height=s.readFloat();const r=s.readBoolean();r&&(e.fps=s.readFloat(),e.imagesPath=s.readString(),e.audioPath=s.readString());let i=0;i=s.readInt(!0);for(let l=0;l<i;l++)s.strings.push(s.readString());i=s.readInt(!0);for(let l=0;l<i;l++){const a=s.readString(),c=l==0?null:e.bones[s.readInt(!0)],h=new Oh(l,a,c);h.rotation=s.readFloat(),h.x=s.readFloat()*t,h.y=s.readFloat()*t,h.scaleX=s.readFloat(),h.scaleY=s.readFloat(),h.shearX=s.readFloat(),h.shearY=s.readFloat(),h.length=s.readFloat()*t,h.transformMode=pe.TransformModeValues[s.readInt(!0)],h.skinRequired=s.readBoolean(),r&&tt.rgba8888ToColor(h.color,s.readInt32()),e.bones.push(h)}i=s.readInt(!0);for(let l=0;l<i;l++){const a=s.readString(),c=e.bones[s.readInt(!0)],h=new $h(l,a,c);tt.rgba8888ToColor(h.color,s.readInt32());const d=s.readInt32();d!=-1&&tt.rgb888ToColor(h.darkColor=new tt,d),h.attachmentName=s.readStringRef(),h.blendMode=pe.BlendModeValues[s.readInt(!0)],e.slots.push(h)}i=s.readInt(!0);for(let l=0,a;l<i;l++){const c=new jh(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),a=s.readInt(!0);for(let h=0;h<a;h++)c.bones.push(e.bones[s.readInt(!0)]);c.target=e.bones[s.readInt(!0)],c.mix=s.readFloat(),c.softness=s.readFloat()*t,c.bendDirection=s.readByte(),c.compress=s.readBoolean(),c.stretch=s.readBoolean(),c.uniform=s.readBoolean(),e.ikConstraints.push(c)}i=s.readInt(!0);for(let l=0,a;l<i;l++){const c=new Wh(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),a=s.readInt(!0);for(let h=0;h<a;h++)c.bones.push(e.bones[s.readInt(!0)]);c.target=e.bones[s.readInt(!0)],c.local=s.readBoolean(),c.relative=s.readBoolean(),c.offsetRotation=s.readFloat(),c.offsetX=s.readFloat()*t,c.offsetY=s.readFloat()*t,c.offsetScaleX=s.readFloat(),c.offsetScaleY=s.readFloat(),c.offsetShearY=s.readFloat(),c.rotateMix=s.readFloat(),c.translateMix=s.readFloat(),c.scaleMix=s.readFloat(),c.shearMix=s.readFloat(),e.transformConstraints.push(c)}i=s.readInt(!0);for(let l=0,a;l<i;l++){const c=new Xh(s.readString());c.order=s.readInt(!0),c.skinRequired=s.readBoolean(),a=s.readInt(!0);for(let h=0;h<a;h++)c.bones.push(e.bones[s.readInt(!0)]);c.target=e.slots[s.readInt(!0)],c.positionMode=pe.PositionModeValues[s.readInt(!0)],c.spacingMode=pe.SpacingModeValues[s.readInt(!0)],c.rotateMode=pe.RotateModeValues[s.readInt(!0)],c.offsetRotation=s.readFloat(),c.position=s.readFloat(),c.positionMode==fe.Fixed&&(c.position*=t),c.spacing=s.readFloat(),(c.spacingMode==Fe.Length||c.spacingMode==Fe.Fixed)&&(c.spacing*=t),c.rotateMix=s.readFloat(),c.translateMix=s.readFloat(),e.pathConstraints.push(c)}const o=this.readSkin(s,e,!0,r);o!=null&&(e.defaultSkin=o,e.skins.push(o));{let l=e.skins.length;for(Y.setArraySize(e.skins,i=l+s.readInt(!0));l<i;l++)e.skins[l]=this.readSkin(s,e,!1,r)}i=this.linkedMeshes.length;for(let l=0;l<i;l++){const a=this.linkedMeshes[l],c=a.skin==null?e.defaultSkin:e.findSkin(a.skin);if(c==null)throw new Error(`Skin not found: ${a.skin}`);const h=c.getAttachment(a.slotIndex,a.parent);if(h==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?h:a.mesh,a.mesh.setParentMesh(h)}this.linkedMeshes.length=0,i=s.readInt(!0);for(let l=0;l<i;l++){const a=new Uh(s.readStringRef());a.intValue=s.readInt(!1),a.floatValue=s.readFloat(),a.stringValue=s.readString(),a.audioPath=s.readString(),a.audioPath!=null&&(a.volume=s.readFloat(),a.balance=s.readFloat()),e.events.push(a)}i=s.readInt(!0);for(let l=0;l<i;l++)e.animations.push(this.readAnimation(s,s.readString(),e));return e}readSkin(n,t,e,s){let r=null,i=0;if(e){if(i=n.readInt(!0),i==0)return null;r=new ho("default")}else{r=new ho(n.readStringRef()),r.bones.length=n.readInt(!0);for(let o=0,l=r.bones.length;o<l;o++)r.bones[o]=t.bones[n.readInt(!0)];for(let o=0,l=n.readInt(!0);o<l;o++)r.constraints.push(t.ikConstraints[n.readInt(!0)]);for(let o=0,l=n.readInt(!0);o<l;o++)r.constraints.push(t.transformConstraints[n.readInt(!0)]);for(let o=0,l=n.readInt(!0);o<l;o++)r.constraints.push(t.pathConstraints[n.readInt(!0)]);i=n.readInt(!0)}for(let o=0;o<i;o++){const l=n.readInt(!0);for(let a=0,c=n.readInt(!0);a<c;a++){const h=n.readStringRef(),d=this.readAttachment(n,t,r,l,h,s);d!=null&&r.setAttachment(l,h,d)}}return r}readAttachment(n,t,e,s,r,i){const o=this.scale;let l=n.readStringRef();l==null&&(l=r);const a=n.readByte();switch(pe.AttachmentTypeValues[a]){case Mt.Region:{let h=n.readStringRef();const d=n.readFloat(),u=n.readFloat(),f=n.readFloat(),m=n.readFloat(),p=n.readFloat(),g=n.readFloat(),x=n.readFloat(),b=n.readInt32();h==null&&(h=l);const y=this.attachmentLoader.newRegionAttachment(e,l,h);return y==null?null:(y.path=h,y.x=u*o,y.y=f*o,y.scaleX=m,y.scaleY=p,y.rotation=d,y.width=g*o,y.height=x*o,tt.rgba8888ToColor(y.color,b),y)}case Mt.BoundingBox:{const h=n.readInt(!0),d=this.readVertices(n,h),u=i?n.readInt32():0,f=this.attachmentLoader.newBoundingBoxAttachment(e,l);return f==null?null:(f.worldVerticesLength=h<<1,f.vertices=d.vertices,f.bones=d.bones,i&&tt.rgba8888ToColor(f.color,u),f)}case Mt.Mesh:{let h=n.readStringRef();const d=n.readInt32(),u=n.readInt(!0),f=this.readFloatArray(n,u<<1,1),m=this.readShortArray(n),p=this.readVertices(n,u),g=n.readInt(!0);let x=null,b=0,y=0;i&&(x=this.readShortArray(n),b=n.readFloat(),y=n.readFloat()),h==null&&(h=l);const w=this.attachmentLoader.newMeshAttachment(e,l,h);return w==null?null:(w.path=h,tt.rgba8888ToColor(w.color,d),w.bones=p.bones,w.vertices=p.vertices,w.worldVerticesLength=u<<1,w.triangles=m,w.regionUVs=new Float32Array(f),w.hullLength=g<<1,i&&(w.edges=x,w.width=b*o,w.height=y*o),w)}case Mt.LinkedMesh:{let h=n.readStringRef();const d=n.readInt32(),u=n.readStringRef(),f=n.readStringRef(),m=n.readBoolean();let p=0,g=0;i&&(p=n.readFloat(),g=n.readFloat()),h==null&&(h=l);const x=this.attachmentLoader.newMeshAttachment(e,l,h);return x==null?null:(x.path=h,tt.rgba8888ToColor(x.color,d),i&&(x.width=p*o,x.height=g*o),this.linkedMeshes.push(new Q_(x,u,s,f,m)),x)}case Mt.Path:{const h=n.readBoolean(),d=n.readBoolean(),u=n.readInt(!0),f=this.readVertices(n,u),m=Y.newArray(u/3,0);for(let x=0,b=m.length;x<b;x++)m[x]=n.readFloat()*o;const p=i?n.readInt32():0,g=this.attachmentLoader.newPathAttachment(e,l);return g==null?null:(g.closed=h,g.constantSpeed=d,g.worldVerticesLength=u<<1,g.vertices=f.vertices,g.bones=f.bones,g.lengths=m,i&&tt.rgba8888ToColor(g.color,p),g)}case Mt.Point:{const h=n.readFloat(),d=n.readFloat(),u=n.readFloat(),f=i?n.readInt32():0,m=this.attachmentLoader.newPointAttachment(e,l);return m==null?null:(m.x=d*o,m.y=u*o,m.rotation=h,i&&tt.rgba8888ToColor(m.color,f),m)}case Mt.Clipping:{const h=n.readInt(!0),d=n.readInt(!0),u=this.readVertices(n,d),f=i?n.readInt32():0,m=this.attachmentLoader.newClippingAttachment(e,l);return m==null?null:(m.endSlot=t.slots[h],m.worldVerticesLength=d<<1,m.vertices=u.vertices,m.bones=u.bones,i&&tt.rgba8888ToColor(m.color,f),m)}}return null}readVertices(n,t){const e=t<<1,s=new J_,r=this.scale;if(!n.readBoolean())return s.vertices=this.readFloatArray(n,e,r),s;const i=new Array,o=new Array;for(let l=0;l<t;l++){const a=n.readInt(!0);o.push(a);for(let c=0;c<a;c++)o.push(n.readInt(!0)),i.push(n.readFloat()*r),i.push(n.readFloat()*r),i.push(n.readFloat())}return s.vertices=Y.toFloatArray(i),s.bones=o,s}readFloatArray(n,t,e){const s=new Array(t);if(e==1)for(let r=0;r<t;r++)s[r]=n.readFloat();else for(let r=0;r<t;r++)s[r]=n.readFloat()*e;return s}readShortArray(n){const t=n.readInt(!0),e=new Array(t);for(let s=0;s<t;s++)e[s]=n.readShort();return e}readAnimation(n,t,e){const s=new Array,r=this.scale;let i=0;const o=new tt,l=new tt;for(let h=0,d=n.readInt(!0);h<d;h++){const u=n.readInt(!0);for(let f=0,m=n.readInt(!0);f<m;f++){const p=n.readByte(),g=n.readInt(!0);switch(p){case pe.SLOT_ATTACHMENT:{const x=new kr(g);x.slotIndex=u;for(let b=0;b<g;b++)x.setFrame(b,n.readFloat(),n.readStringRef());s.push(x),i=Math.max(i,x.frames[g-1]);break}case pe.SLOT_COLOR:{const x=new Qe(g);x.slotIndex=u;for(let b=0;b<g;b++){const y=n.readFloat();tt.rgba8888ToColor(o,n.readInt32()),x.setFrame(b,y,o.r,o.g,o.b,o.a),b<g-1&&this.readCurve(n,b,x)}s.push(x),i=Math.max(i,x.frames[(g-1)*Qe.ENTRIES]);break}case pe.SLOT_TWO_COLOR:{const x=new _e(g);x.slotIndex=u;for(let b=0;b<g;b++){const y=n.readFloat();tt.rgba8888ToColor(o,n.readInt32()),tt.rgb888ToColor(l,n.readInt32()),x.setFrame(b,y,o.r,o.g,o.b,o.a,l.r,l.g,l.b),b<g-1&&this.readCurve(n,b,x)}s.push(x),i=Math.max(i,x.frames[(g-1)*_e.ENTRIES]);break}}}}for(let h=0,d=n.readInt(!0);h<d;h++){const u=n.readInt(!0);for(let f=0,m=n.readInt(!0);f<m;f++){const p=n.readByte(),g=n.readInt(!0);switch(p){case pe.BONE_ROTATE:{const x=new Le(g);x.boneIndex=u;for(let b=0;b<g;b++)x.setFrame(b,n.readFloat(),n.readFloat()),b<g-1&&this.readCurve(n,b,x);s.push(x),i=Math.max(i,x.frames[(g-1)*Le.ENTRIES]);break}case pe.BONE_TRANSLATE:case pe.BONE_SCALE:case pe.BONE_SHEAR:{let x,b=1;p==pe.BONE_SCALE?x=new Mh(g):p==pe.BONE_SHEAR?x=new Ph(g):(x=new us(g),b=r),x.boneIndex=u;for(let y=0;y<g;y++)x.setFrame(y,n.readFloat(),n.readFloat()*b,n.readFloat()*b),y<g-1&&this.readCurve(n,y,x);s.push(x),i=Math.max(i,x.frames[(g-1)*us.ENTRIES]);break}}}}for(let h=0,d=n.readInt(!0);h<d;h++){const u=n.readInt(!0),f=n.readInt(!0),m=new Ve(f);m.ikConstraintIndex=u;for(let p=0;p<f;p++)m.setFrame(p,n.readFloat(),n.readFloat(),n.readFloat()*r,n.readByte(),n.readBoolean(),n.readBoolean()),p<f-1&&this.readCurve(n,p,m);s.push(m),i=Math.max(i,m.frames[(f-1)*Ve.ENTRIES])}for(let h=0,d=n.readInt(!0);h<d;h++){const u=n.readInt(!0),f=n.readInt(!0),m=new Je(f);m.transformConstraintIndex=u;for(let p=0;p<f;p++)m.setFrame(p,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat()),p<f-1&&this.readCurve(n,p,m);s.push(m),i=Math.max(i,m.frames[(f-1)*Je.ENTRIES])}for(let h=0,d=n.readInt(!0);h<d;h++){const u=n.readInt(!0),f=e.pathConstraints[u];for(let m=0,p=n.readInt(!0);m<p;m++){const g=n.readByte(),x=n.readInt(!0);switch(g){case pe.PATH_POSITION:case pe.PATH_SPACING:{let b,y=1;g==pe.PATH_SPACING?(b=new Fh(x),(f.spacingMode==Fe.Length||f.spacingMode==Fe.Fixed)&&(y=r)):(b=new fn(x),f.positionMode==fe.Fixed&&(y=r)),b.pathConstraintIndex=u;for(let w=0;w<x;w++)b.setFrame(w,n.readFloat(),n.readFloat()*y),w<x-1&&this.readCurve(n,w,b);s.push(b),i=Math.max(i,b.frames[(x-1)*fn.ENTRIES]);break}case pe.PATH_MIX:{const b=new Hs(x);b.pathConstraintIndex=u;for(let y=0;y<x;y++)b.setFrame(y,n.readFloat(),n.readFloat(),n.readFloat()),y<x-1&&this.readCurve(n,y,b);s.push(b),i=Math.max(i,b.frames[(x-1)*Hs.ENTRIES]);break}}}}for(let h=0,d=n.readInt(!0);h<d;h++){const u=e.skins[n.readInt(!0)];for(let f=0,m=n.readInt(!0);f<m;f++){const p=n.readInt(!0);for(let g=0,x=n.readInt(!0);g<x;g++){const b=u.getAttachment(p,n.readStringRef()),y=b.bones!=null,w=b.vertices,_=y?w.length/3*2:w.length,E=n.readInt(!0),S=new Nh(E);S.slotIndex=p,S.attachment=b;for(let T=0;T<E;T++){const A=n.readFloat();let C,I=n.readInt(!0);if(I==0)C=y?Y.newFloatArray(_):w;else{C=Y.newFloatArray(_);const P=n.readInt(!0);if(I+=P,r==1)for(let R=P;R<I;R++)C[R]=n.readFloat();else for(let R=P;R<I;R++)C[R]=n.readFloat()*r;if(!y)for(let R=0,N=C.length;R<N;R++)C[R]+=w[R]}S.setFrame(T,A,C),T<E-1&&this.readCurve(n,T,S)}s.push(S),i=Math.max(i,S.frames[E-1])}}}const a=n.readInt(!0);if(a>0){const h=new ui(a),d=e.slots.length;for(let u=0;u<a;u++){const f=n.readFloat(),m=n.readInt(!0),p=Y.newArray(d,0);for(let y=d-1;y>=0;y--)p[y]=-1;const g=Y.newArray(d-m,0);let x=0,b=0;for(let y=0;y<m;y++){const w=n.readInt(!0);for(;x!=w;)g[b++]=x++;p[x+n.readInt(!0)]=x++}for(;x<d;)g[b++]=x++;for(let y=d-1;y>=0;y--)p[y]==-1&&(p[y]=g[--b]);h.setFrame(u,f,p)}s.push(h),i=Math.max(i,h.frames[a-1])}const c=n.readInt(!0);if(c>0){const h=new Do(c);for(let d=0;d<c;d++){const u=n.readFloat(),f=e.events[n.readInt(!0)],m=new Vh(u,f);m.intValue=n.readInt(!1),m.floatValue=n.readFloat(),m.stringValue=n.readBoolean()?n.readString():f.stringValue,m.data.audioPath!=null&&(m.volume=n.readFloat(),m.balance=n.readFloat()),h.setFrame(d,m)}s.push(h),i=Math.max(i,h.frames[c-1])}return new ve(t,s,i)}readCurve(n,t,e){switch(n.readByte()){case pe.CURVE_STEPPED:e.setStepped(t);break;case pe.CURVE_BEZIER:this.setCurve(e,t,n.readFloat(),n.readFloat(),n.readFloat(),n.readFloat());break}}setCurve(n,t,e,s,r,i){n.setCurve(t,e,s,r,i)}};let Ee=pe;Ee.AttachmentTypeValues=[0,1,2,3,4,5,6];Ee.TransformModeValues=[vt.Normal,vt.OnlyTranslation,vt.NoRotationOrReflection,vt.NoScale,vt.NoScaleOrReflection];Ee.PositionModeValues=[fe.Fixed,fe.Percent];Ee.SpacingModeValues=[Fe.Length,Fe.Fixed,Fe.Percent];Ee.RotateModeValues=[we.Tangent,we.Chain,we.ChainScale];Ee.BlendModeValues=[ht.NORMAL,ht.ADD,ht.MULTIPLY,ht.SCREEN];Ee.BONE_ROTATE=0;Ee.BONE_TRANSLATE=1;Ee.BONE_SCALE=2;Ee.BONE_SHEAR=3;Ee.SLOT_ATTACHMENT=0;Ee.SLOT_COLOR=1;Ee.SLOT_TWO_COLOR=2;Ee.PATH_POSITION=0;Ee.PATH_SPACING=1;Ee.PATH_MIX=2;Ee.CURVE_LINEAR=0;Ee.CURVE_STEPPED=1;Ee.CURVE_BEZIER=2;let Q_=class{constructor(t,e,s,r,i){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritDeform=i}},J_=class{constructor(t=null,e=null){this.bones=t,this.vertices=e}},tE=class extends kh{},zp=class ei{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new Yh,r=typeof t=="string"?JSON.parse(t):t,i=r.skeleton;if(i!=null){if(s.hash=i.hash,s.version=i.spine,s.version.substr(0,3)!=="3.8"){const o=`Spine 3.8 loader cant load version ${i.spine}. Please configure your pixi-spine bundle`;console.error(o)}s.version==="3.8.75"&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height,s.fps=i.fps,s.imagesPath=i.images}if(r.bones)for(let o=0;o<r.bones.length;o++){const l=r.bones[o];let a=null;const c=this.getValue(l,"parent",null);if(c!=null&&(a=s.findBone(c),a==null))throw new Error(`Parent bone not found: ${c}`);const h=new Oh(s.bones.length,l.name,a);h.length=this.getValue(l,"length",0)*e,h.x=this.getValue(l,"x",0)*e,h.y=this.getValue(l,"y",0)*e,h.rotation=this.getValue(l,"rotation",0),h.scaleX=this.getValue(l,"scaleX",1),h.scaleY=this.getValue(l,"scaleY",1),h.shearX=this.getValue(l,"shearX",0),h.shearY=this.getValue(l,"shearY",0),h.transformMode=ei.transformModeFromString(this.getValue(l,"transform","normal")),h.skinRequired=this.getValue(l,"skin",!1),s.bones.push(h)}if(r.slots)for(let o=0;o<r.slots.length;o++){const l=r.slots[o],a=l.name,c=l.bone,h=s.findBone(c);if(h==null)throw new Error(`Slot bone not found: ${c}`);const d=new $h(s.slots.length,a,h),u=this.getValue(l,"color",null);u!=null&&d.color.setFromString(u);const f=this.getValue(l,"dark",null);f!=null&&(d.darkColor=new tt(1,1,1,1),d.darkColor.setFromString(f)),d.attachmentName=this.getValue(l,"attachment",null),d.blendMode=ei.blendModeFromString(this.getValue(l,"blend","normal")),s.slots.push(d)}if(r.ik)for(let o=0;o<r.ik.length;o++){const l=r.ik[o],a=new jh(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`IK bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findBone(c),a.target==null)throw new Error(`IK target bone not found: ${c}`);a.mix=this.getValue(l,"mix",1),a.softness=this.getValue(l,"softness",0)*e,a.bendDirection=this.getValue(l,"bendPositive",!0)?1:-1,a.compress=this.getValue(l,"compress",!1),a.stretch=this.getValue(l,"stretch",!1),a.uniform=this.getValue(l,"uniform",!1),s.ikConstraints.push(a)}if(r.transform)for(let o=0;o<r.transform.length;o++){const l=r.transform[o],a=new Wh(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`Transform constraint bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findBone(c),a.target==null)throw new Error(`Transform constraint target bone not found: ${c}`);a.local=this.getValue(l,"local",!1),a.relative=this.getValue(l,"relative",!1),a.offsetRotation=this.getValue(l,"rotation",0),a.offsetX=this.getValue(l,"x",0)*e,a.offsetY=this.getValue(l,"y",0)*e,a.offsetScaleX=this.getValue(l,"scaleX",0),a.offsetScaleY=this.getValue(l,"scaleY",0),a.offsetShearY=this.getValue(l,"shearY",0),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),a.scaleMix=this.getValue(l,"scaleMix",1),a.shearMix=this.getValue(l,"shearMix",1),s.transformConstraints.push(a)}if(r.path)for(let o=0;o<r.path.length;o++){const l=r.path[o],a=new Xh(l.name);a.order=this.getValue(l,"order",0),a.skinRequired=this.getValue(l,"skin",!1);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`Transform constraint bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findSlot(c),a.target==null)throw new Error(`Path target slot not found: ${c}`);a.positionMode=ei.positionModeFromString(this.getValue(l,"positionMode","percent")),a.spacingMode=ei.spacingModeFromString(this.getValue(l,"spacingMode","length")),a.rotateMode=ei.rotateModeFromString(this.getValue(l,"rotateMode","tangent")),a.offsetRotation=this.getValue(l,"rotation",0),a.position=this.getValue(l,"position",0),a.positionMode==fe.Fixed&&(a.position*=e),a.spacing=this.getValue(l,"spacing",0),(a.spacingMode==Fe.Length||a.spacingMode==Fe.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),s.pathConstraints.push(a)}if(r.skins)for(let o=0;o<r.skins.length;o++){const l=r.skins[o],a=new ho(l.name);if(l.bones)for(let c=0;c<l.bones.length;c++){const h=s.findBone(l.bones[c]);if(h==null)throw new Error(`Skin bone not found: ${l.bones[o]}`);a.bones.push(h)}if(l.ik)for(let c=0;c<l.ik.length;c++){const h=s.findIkConstraint(l.ik[c]);if(h==null)throw new Error(`Skin IK constraint not found: ${l.ik[o]}`);a.constraints.push(h)}if(l.transform)for(let c=0;c<l.transform.length;c++){const h=s.findTransformConstraint(l.transform[c]);if(h==null)throw new Error(`Skin transform constraint not found: ${l.transform[o]}`);a.constraints.push(h)}if(l.path)for(let c=0;c<l.path.length;c++){const h=s.findPathConstraint(l.path[c]);if(h==null)throw new Error(`Skin path constraint not found: ${l.path[o]}`);a.constraints.push(h)}for(const c in l.attachments){const h=s.findSlot(c);if(h==null)throw new Error(`Slot not found: ${c}`);const d=l.attachments[c];for(const u in d){const f=this.readAttachment(d[u],a,h.index,u,s);f!=null&&a.setAttachment(h.index,u,f)}}s.skins.push(a),a.name=="default"&&(s.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],c=a.skin==null?s.defaultSkin:s.findSkin(a.skin);if(c==null)throw new Error(`Skin not found: ${a.skin}`);const h=c.getAttachment(a.slotIndex,a.parent);if(h==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.deformAttachment=a.inheritDeform?h:a.mesh,a.mesh.setParentMesh(h)}if(this.linkedMeshes.length=0,r.events)for(const o in r.events){const l=r.events[o],a=new Uh(o);a.intValue=this.getValue(l,"int",0),a.floatValue=this.getValue(l,"float",0),a.stringValue=this.getValue(l,"string",""),a.audioPath=this.getValue(l,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(l,"volume",1),a.balance=this.getValue(l,"balance",0)),s.events.push(a)}if(r.animations)for(const o in r.animations){const l=r.animations[o];this.readAnimation(l,o,s)}return s}readAttachment(t,e,s,r,i){const o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",r),c=this.attachmentLoader.newRegionAttachment(e,r,a);if(c==null)return null;c.path=a,c.x=this.getValue(t,"x",0)*o,c.y=this.getValue(t,"y",0)*o,c.scaleX=this.getValue(t,"scaleX",1),c.scaleY=this.getValue(t,"scaleY",1),c.rotation=this.getValue(t,"rotation",0),c.width=t.width*o,c.height=t.height*o;const h=this.getValue(t,"color",null);return h!=null&&c.color.setFromString(h),c}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",r),c=this.attachmentLoader.newMeshAttachment(e,r,a);if(c==null)return null;c.path=a;const h=this.getValue(t,"color",null);h!=null&&c.color.setFromString(h),c.width=this.getValue(t,"width",0)*o,c.height=this.getValue(t,"height",0)*o;const d=this.getValue(t,"parent",null);if(d!=null)return this.linkedMeshes.push(new eE(c,this.getValue(t,"skin",null),s,d,this.getValue(t,"deform",!0))),c;const u=t.uvs;return this.readVertices(t,c,u.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(u),c.edges=this.getValue(t,"edges",null),c.hullLength=this.getValue(t,"hull",0)*2,c}case"path":{const a=this.attachmentLoader.newPathAttachment(e,r);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const c=t.vertexCount;this.readVertices(t,a,c<<1);const h=Y.newArray(c/3,0);for(let u=0;u<t.lengths.length;u++)h[u]=t.lengths[u]*o;a.lengths=h;const d=this.getValue(t,"color",null);return d!=null&&a.color.setFromString(d),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,r);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,r);if(a==null)return null;const c=this.getValue(t,"end",null);if(c!=null){const u=i.findSlot(c);if(u==null)throw new Error(`Clipping end slot not found: ${c}`);a.endSlot=u}const h=t.vertexCount;this.readVertices(t,a,h<<1);const d=this.getValue(t,"color",null);return d!=null&&a.color.setFromString(d),a}}return null}readVertices(t,e,s){const r=this.scale;e.worldVerticesLength=s;const i=t.vertices;if(s==i.length){const a=Y.toFloatArray(i);if(r!=1)for(let c=0,h=i.length;c<h;c++)a[c]*=r;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,c=i.length;a<c;){const h=i[a++];l.push(h);for(let d=a+h*4;a<d;a+=4)l.push(i[a]),o.push(i[a+1]*r),o.push(i[a+2]*r),o.push(i[a+3])}e.bones=l,e.vertices=Y.toFloatArray(o)}readAnimation(t,e,s){const r=this.scale,i=new Array;let o=0;if(t.slots)for(const a in t.slots){const c=t.slots[a],h=s.findSlotIndex(a);if(h==-1)throw new Error(`Slot not found: ${a}`);for(const d in c){const u=c[d];if(d=="attachment"){const f=new kr(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p];f.setFrame(m++,this.getValue(g,"time",0),g.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if(d=="color"){const f=new Qe(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p],x=new tt;x.setFromString(g.color||"ffffffff"),f.setFrame(m,this.getValue(g,"time",0),x.r,x.g,x.b,x.a),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Qe.ENTRIES])}else if(d=="twoColor"){const f=new _e(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p],x=new tt,b=new tt;x.setFromString(g.light),b.setFromString(g.dark),f.setFrame(m,this.getValue(g,"time",0),x.r,x.g,x.b,x.a,b.r,b.g,b.b),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*_e.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${d} (${a})`)}}if(t.bones)for(const a in t.bones){const c=t.bones[a],h=s.findBoneIndex(a);if(h==-1)throw new Error(`Bone not found: ${a}`);for(const d in c){const u=c[d];if(d==="rotate"){const f=new Le(u.length);f.boneIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p];f.setFrame(m,this.getValue(g,"time",0),this.getValue(g,"angle",0)),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*Le.ENTRIES])}else if(d==="translate"||d==="scale"||d==="shear"){let f=null,m=1,p=0;d==="scale"?(f=new Mh(u.length),p=1):d==="shear"?f=new Ph(u.length):(f=new us(u.length),m=r),f.boneIndex=h;let g=0;for(let x=0;x<u.length;x++){const b=u[x],y=this.getValue(b,"x",p),w=this.getValue(b,"y",p);f.setFrame(g,this.getValue(b,"time",0),y*m,w*m),this.readCurve(b,f,g),g++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*us.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${d} (${a})`)}}if(t.ik)for(const a in t.ik){const c=t.ik[a],h=s.findIkConstraint(a),d=new Ve(c.length);d.ikConstraintIndex=s.ikConstraints.indexOf(h);let u=0;for(let f=0;f<c.length;f++){const m=c[f];d.setFrame(u,this.getValue(m,"time",0),this.getValue(m,"mix",1),this.getValue(m,"softness",0)*r,this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,d,u),u++}i.push(d),o=Math.max(o,d.frames[(d.getFrameCount()-1)*Ve.ENTRIES])}if(t.transform)for(const a in t.transform){const c=t.transform[a],h=s.findTransformConstraint(a),d=new Je(c.length);d.transformConstraintIndex=s.transformConstraints.indexOf(h);let u=0;for(let f=0;f<c.length;f++){const m=c[f];d.setFrame(u,this.getValue(m,"time",0),this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,d,u),u++}i.push(d),o=Math.max(o,d.frames[(d.getFrameCount()-1)*Je.ENTRIES])}if(t.path)for(const a in t.path){const c=t.path[a],h=s.findPathConstraintIndex(a);if(h==-1)throw new Error(`Path constraint not found: ${a}`);const d=s.pathConstraints[h];for(const u in c){const f=c[u];if(u==="position"||u==="spacing"){let m=null,p=1;u==="spacing"?(m=new Fh(f.length),(d.spacingMode==Fe.Length||d.spacingMode==Fe.Fixed)&&(p=r)):(m=new fn(f.length),d.positionMode==fe.Fixed&&(p=r)),m.pathConstraintIndex=h;let g=0;for(let x=0;x<f.length;x++){const b=f[x];m.setFrame(g,this.getValue(b,"time",0),this.getValue(b,u,0)*p),this.readCurve(b,m,g),g++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*fn.ENTRIES])}else if(u==="mix"){const m=new Hs(f.length);m.pathConstraintIndex=h;let p=0;for(let g=0;g<f.length;g++){const x=f[g];m.setFrame(p,this.getValue(x,"time",0),this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1)),this.readCurve(x,m,p),p++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*Hs.ENTRIES])}}}if(t.deform)for(const a in t.deform){const c=t.deform[a],h=s.findSkin(a);if(h!=null)for(const d in c){const u=c[d],f=s.findSlotIndex(d);if(f==-1)throw new Error(`Slot not found: ${u.name}`);for(const m in u){const p=u[m],g=h.getAttachment(f,m);if(g==null)throw new Error(`Deform attachment not found: ${p.name}`);const x=g.bones!=null,b=g.vertices,y=x?b.length/3*2:b.length,w=new Nh(p.length);w.slotIndex=f,w.attachment=g;let _=0;for(let E=0;E<p.length;E++){const S=p[E];let T;const A=this.getValue(S,"vertices",null);if(A==null)T=x?Y.newFloatArray(y):b;else{T=Y.newFloatArray(y);const C=this.getValue(S,"offset",0);if(Y.arrayCopy(A,0,T,C,A.length),r!=1)for(let I=C,P=I+A.length;I<P;I++)T[I]*=r;if(!x)for(let I=0;I<y;I++)T[I]+=b[I]}w.setFrame(_,this.getValue(S,"time",0),T),this.readCurve(S,w,_),_++}i.push(w),o=Math.max(o,w.frames[w.getFrameCount()-1])}}}let l=t.drawOrder;if(l==null&&(l=t.draworder),l!=null){const a=new ui(l.length),c=s.slots.length;let h=0;for(let d=0;d<l.length;d++){const u=l[d];let f=null;const m=this.getValue(u,"offsets",null);if(m!=null){f=Y.newArray(c,-1);const p=Y.newArray(c-m.length,0);let g=0,x=0;for(let b=0;b<m.length;b++){const y=m[b],w=s.findSlotIndex(y.slot);if(w==-1)throw new Error(`Slot not found: ${y.slot}`);for(;g!=w;)p[x++]=g++;f[g+y.offset]=g++}for(;g<c;)p[x++]=g++;for(let b=c-1;b>=0;b--)f[b]==-1&&(f[b]=p[--x])}a.setFrame(h++,this.getValue(u,"time",0),f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new Do(t.events.length);let c=0;for(let h=0;h<t.events.length;h++){const d=t.events[h],u=s.findEvent(d.name);if(u==null)throw new Error(`Event not found: ${d.name}`);const f=new Vh(Y.toSinglePrecision(this.getValue(d,"time",0)),u);f.intValue=this.getValue(d,"int",u.intValue),f.floatValue=this.getValue(d,"float",u.floatValue),f.stringValue=this.getValue(d,"string",u.stringValue),f.data.audioPath!=null&&(f.volume=this.getValue(d,"volume",1),f.balance=this.getValue(d,"balance",0)),a.setFrame(c++,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");s.animations.push(new ve(e,i,o))}readCurve(t,e,s){if(t.hasOwnProperty("curve"))if(t.curve==="stepped")e.setStepped(s);else{const r=t.curve;e.setCurve(s,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}}getValue(t,e,s){return t[e]!==void 0?t[e]:s}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ht.NORMAL;if(t=="additive")return ht.ADD;if(t=="multiply")return ht.MULTIPLY;if(t=="screen")return ht.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return fe.Fixed;if(t=="percent")return fe.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return Fe.Length;if(t=="fixed")return Fe.Fixed;if(t=="percent")return Fe.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return we.Tangent;if(t=="chain")return we.Chain;if(t=="chainscale")return we.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return vt.Normal;if(t=="onlytranslation")return vt.OnlyTranslation;if(t=="norotationorreflection")return vt.NoRotationOrReflection;if(t=="noscale")return vt.NoScale;if(t=="noscaleorreflection")return vt.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},eE=class{constructor(t,e,s,r,i){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritDeform=i}},sE=class extends yi{createSkeleton(t){this.skeleton=new Gh(t),this.skeleton.updateWorldTransform(),this.stateData=new Dh(t),this.state=new bs(this.stateData)}};const nE=Object.freeze(Object.defineProperty({__proto__:null,Animation:ve,AnimationState:bs,AnimationStateAdapter:Z_,AnimationStateData:Dh,AtlasAttachmentLoader:Lh,Attachment:Ih,AttachmentTimeline:kr,Bone:Xc,BoneData:Oh,BoundingBoxAttachment:Bp,ClippingAttachment:Lp,ColorTimeline:Qe,ConstraintData:Oo,CurveTimeline:as,DeformTimeline:Nh,DrawOrderTimeline:ui,Event:Vh,EventData:Uh,EventQueue:Bh,EventTimeline:Do,EventType:ts,IkConstraint:$p,IkConstraintData:jh,IkConstraintTimeline:Ve,JitterEffect:K_,MeshAttachment:Bo,PathAttachment:Ji,PathConstraint:wi,PathConstraintData:Xh,PathConstraintMixTimeline:Hs,PathConstraintPositionTimeline:fn,PathConstraintSpacingTimeline:Fh,PointAttachment:Up,RegionAttachment:Tt,RotateTimeline:Le,ScaleTimeline:Mh,ShearTimeline:Ph,Skeleton:Gh,SkeletonBinary:Ee,SkeletonBounds:tE,SkeletonData:Yh,SkeletonJson:zp,Skin:ho,SkinEntry:Gc,Slot:Rh,SlotData:$h,SpacingMode:Fe,Spine:sE,SwirlEffect:Gp,TimelineType:Yp,TrackEntry:Lo,TransformConstraint:Wp,TransformConstraintData:Wh,TransformConstraintTimeline:Je,TranslateTimeline:us,TwoColorTimeline:_e,VertexAttachment:dr},Symbol.toStringTag,{value:"Module"}));let zh=class{constructor(t){if(t==null)throw new Error("name cannot be null.");this.name=t}};const Hp=class extends zh{constructor(t){super(t),this.id=(Hp.nextID++&65535)<<11,this.worldVerticesLength=0}computeWorldVerticesOld(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)}computeWorldVertices(t,e,s,r,i,o){s=i+(s>>1)*o;const l=t.bone.skeleton,a=t.attachmentVertices;let c=this.vertices;const h=this.bones;if(h==null){a.length>0&&(c=a);const m=t.bone.matrix,p=m.tx,g=m.ty,x=m.a,b=m.c,y=m.b,w=m.d;for(let _=e,E=i;E<s;_+=2,E+=o){const S=c[_],T=c[_+1];r[E]=S*x+T*b+p,r[E+1]=S*y+T*w+g}return}let d=0,u=0;for(let m=0;m<e;m+=2){const p=h[d];d+=p+1,u+=p}const f=l.bones;if(a.length==0)for(let m=i,p=u*3;m<s;m+=o){let g=0,x=0,b=h[d++];for(b+=d;d<b;d++,p+=3){const y=f[h[d]].matrix,w=c[p],_=c[p+1],E=c[p+2];g+=(w*y.a+_*y.c+y.tx)*E,x+=(w*y.b+_*y.d+y.ty)*E}r[m]=g,r[m+1]=x}else{const m=a;for(let p=i,g=u*3,x=u<<1;p<s;p+=o){let b=0,y=0,w=h[d++];for(w+=d;d<w;d++,g+=3,x+=2){const _=f[h[d]].matrix,E=c[g]+m[x],S=c[g+1]+m[x+1],T=c[g+2];b+=(E*_.a+S*_.c+_.tx)*T,y+=(E*_.b+S*_.d+_.ty)*T}r[p]=b,r[p+1]=y}}}applyDeform(t){return this==t}};let ur=Hp;ur.nextID=0;let qp=class extends ur{constructor(t){super(t),this.type=Mt.BoundingBox,this.color=new tt(1,1,1,1)}},Kp=class extends ur{constructor(t){super(t),this.type=Mt.Clipping,this.color=new tt(.2275,.2275,.8078,1)}},Hh=class extends ur{constructor(t){super(t),this.type=Mt.Mesh,this.color=new tt(1,1,1,1),this.inheritDeform=!1,this.tempColor=new tt(0,0,0,0)}applyDeform(t){return this==t||this.inheritDeform&&this.parentMesh==t}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t!=null&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}},ta=class extends ur{constructor(t){super(t),this.type=Mt.Path,this.closed=!1,this.constantSpeed=!1,this.color=new tt(1,1,1,1)}},Zp=class extends ur{constructor(t){super(t),this.type=Mt.Point,this.color=new tt(.38,.94,0,1)}computeWorldPosition(t,e){const s=t.matrix;return e.x=this.x*s.a+this.y*s.c+t.worldX,e.y=this.x*s.b+this.y*s.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,s=M.cosDeg(this.rotation),r=M.sinDeg(this.rotation),i=s*e.a+r*e.c,o=s*e.b+r*e.d;return Math.atan2(o,i)*M.radDeg}},qh=class{constructor(t,e){if(this.attachmentVertices=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new tt,this.darkColor=t.darkColor==null?null:new tt,this.setToSetupPose(),this.blendMode=this.data.blendMode}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)}setAttachmentTime(t){this.attachmentTime=this.bone.skeleton.time-t}getAttachmentTime(){return this.bone.skeleton.time-this.attachmentTime}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor!=null&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName==null?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))}};const Be=class extends zh{constructor(t){super(t),this.type=Mt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new tt(1,1,1,1),this.offset=Y.newFloatArray(8),this.uvs=Y.newFloatArray(8),this.tempColor=new tt(1,1,1,1)}updateOffset(){const t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,i=s+this.region.width*t,o=r+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),c=Math.sin(l),h=s*a+this.x,d=s*c,u=r*a+this.y,f=r*c,m=i*a+this.x,p=i*c,g=o*a+this.y,x=o*c,b=this.offset;b[Be.OX1]=h-f,b[Be.OY1]=u+d,b[Be.OX2]=h-x,b[Be.OY2]=g+d,b[Be.OX3]=m-x,b[Be.OY3]=g+p,b[Be.OX4]=m-f,b[Be.OY4]=u+p}setRegion(t){this.region=t;const e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)}computeWorldVertices(t,e,s,r){const i=this.offset,o=t instanceof qh?t.bone.matrix:t.matrix,l=o.tx,a=o.ty,c=o.a,h=o.c,d=o.b,u=o.d;let f=0,m=0;f=i[Be.OX1],m=i[Be.OY1],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Be.OX2],m=i[Be.OY2],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Be.OX3],m=i[Be.OY3],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a,s+=r,f=i[Be.OX4],m=i[Be.OY4],e[s]=f*c+m*h+l,e[s+1]=f*d+m*u+a}};let At=Be;At.OX1=0;At.OY1=1;At.OX2=2;At.OY2=3;At.OX3=4;At.OY3=5;At.OX4=6;At.OY4=7;At.X1=0;At.Y1=1;At.C1R=2;At.C1G=3;At.C1B=4;At.C1A=5;At.U1=6;At.V1=7;At.X2=8;At.Y2=9;At.C2R=10;At.C2G=11;At.C2B=12;At.C2A=13;At.U2=14;At.V2=15;At.X3=16;At.Y3=17;At.C3R=18;At.C3G=19;At.C3B=20;At.C3A=21;At.U3=22;At.V3=23;At.X4=24;At.Y4=25;At.C4R=26;At.C4G=27;At.C4B=28;At.C4A=29;At.U4=30;At.V4=31;class rE{constructor(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}begin(t){}transform(t,e,s,r){t.x+=M.randomTriangular(-this.jitterX,this.jitterY),t.y+=M.randomTriangular(-this.jitterX,this.jitterY)}end(){}}const Qp=class{constructor(n){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=n}begin(n){this.worldX=n.x+this.centerX,this.worldY=n.y+this.centerY}transform(n,t,e,s){const r=this.angle*M.degreesToRadians,i=n.x-this.worldX,o=n.y-this.worldY,l=Math.sqrt(i*i+o*o);if(l<this.radius){const a=Qp.interpolation.apply(0,r,(this.radius-l)/this.radius),c=Math.cos(a),h=Math.sin(a);n.x=c*i-h*o+this.worldX,n.y=h*i+c*o+this.worldY}}end(){}};let Jp=Qp;Jp.interpolation=new Mp(2);let Ie=class{constructor(t,e,s){if(t==null)throw new Error("name cannot be null.");if(e==null)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=s}apply(t,e,s,r,i,o,l,a){if(t==null)throw new Error("skeleton cannot be null.");r&&this.duration!=0&&(s%=this.duration,e>0&&(e%=this.duration));const c=this.timelines;for(let h=0,d=c.length;h<d;h++)c[h].apply(t,e,s,i,o,l,a)}static binarySearch(t,e,s=1){let r=0,i=t.length/s-2;if(i==0)return s;let o=i>>>1;for(;;){if(t[(o+1)*s]<=e?r=o+1:i=o,r==i)return(r+1)*s;o=r+i>>>1}}static linearSearch(t,e,s){for(let r=0,i=t.length-s;r<=i;r+=s)if(t[r]>e)return r;return-1}};var tg=(n=>(n[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor",n))(tg||{});const be=class{constructor(n){if(n<=0)throw new Error(`frameCount must be > 0: ${n}`);this.curves=Y.newFloatArray((n-1)*be.BEZIER_SIZE)}getFrameCount(){return this.curves.length/be.BEZIER_SIZE+1}setLinear(n){this.curves[n*be.BEZIER_SIZE]=be.LINEAR}setStepped(n){this.curves[n*be.BEZIER_SIZE]=be.STEPPED}getCurveType(n){const t=n*be.BEZIER_SIZE;if(t==this.curves.length)return be.LINEAR;const e=this.curves[t];return e==be.LINEAR?be.LINEAR:e==be.STEPPED?be.STEPPED:be.BEZIER}setCurve(n,t,e,s,r){const i=(-t*2+s)*.03,o=(-e*2+r)*.03,l=((t-s)*3+1)*.006,a=((e-r)*3+1)*.006;let c=i*2+l,h=o*2+a,d=t*.3+i+l*.16666667,u=e*.3+o+a*.16666667,f=n*be.BEZIER_SIZE;const m=this.curves;m[f++]=be.BEZIER;let p=d,g=u;for(let x=f+be.BEZIER_SIZE-1;f<x;f+=2)m[f]=p,m[f+1]=g,d+=c,u+=h,c+=l,h+=a,p+=d,g+=u}getCurvePercent(n,t){t=M.clamp(t,0,1);const e=this.curves;let s=n*be.BEZIER_SIZE;const r=e[s];if(r==be.LINEAR)return t;if(r==be.STEPPED)return 0;s++;let i=0;for(let l=s,a=s+be.BEZIER_SIZE-1;s<a;s+=2)if(i=e[s],i>=t){let c,h;return s==l?(c=0,h=0):(c=e[s-2],h=e[s-1]),h+(e[s+1]-h)*(t-c)/(i-c)}const o=e[s-1];return o+(1-o)*(t-i)/(1-i)}};let os=be;os.LINEAR=0;os.STEPPED=1;os.BEZIER=2;os.BEZIER_SIZE=10*2-1;const $n=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n<<1)}getPropertyId(){return 0+this.boneIndex}setFrame(n,t,e){n<<=1,this.frames[n]=t,this.frames[n+$n.ROTATION]=e}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.bones[this.boneIndex];if(e<l[0]){switch(i){case k.setup:a.rotation=a.data.rotation;return;case k.first:const m=a.data.rotation-a.rotation;a.rotation+=(m-(16384-(16384.499999999996-m/360|0))*360)*r}return}if(e>=l[l.length-$n.ENTRIES]){let m=l[l.length+$n.PREV_ROTATION];switch(i){case k.setup:a.rotation=a.data.rotation+m*r;break;case k.first:case k.replace:m+=a.data.rotation-a.rotation,m-=(16384-(16384.499999999996-m/360|0))*360;case k.add:a.rotation+=m*r}return}const c=Ie.binarySearch(l,e,$n.ENTRIES),h=l[c+$n.PREV_ROTATION],d=l[c],u=this.getCurvePercent((c>>1)-1,1-(e-d)/(l[c+$n.PREV_TIME]-d));let f=l[c+$n.ROTATION]-h;switch(f=h+(f-(16384-(16384.499999999996-f/360|0))*360)*u,i){case k.setup:a.rotation=a.data.rotation+(f-(16384-(16384.499999999996-f/360|0))*360)*r;break;case k.first:case k.replace:f+=a.data.rotation-a.rotation;case k.add:a.rotation+=(f-(16384-(16384.499999999996-f/360|0))*360)*r}}};let We=$n;We.ENTRIES=2;We.PREV_TIME=-2;We.PREV_ROTATION=-1;We.ROTATION=1;const Ye=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*Ye.ENTRIES)}getPropertyId(){return(1<<24)+this.boneIndex}setFrame(n,t,e,s){n*=Ye.ENTRIES,this.frames[n]=t,this.frames[n+Ye.X]=e,this.frames[n+Ye.Y]=s}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.bones[this.boneIndex];if(e<l[0]){switch(i){case k.setup:a.x=a.data.x,a.y=a.data.y;return;case k.first:a.x+=(a.data.x-a.x)*r,a.y+=(a.data.y-a.y)*r}return}let c=0,h=0;if(e>=l[l.length-Ye.ENTRIES])c=l[l.length+Ye.PREV_X],h=l[l.length+Ye.PREV_Y];else{const d=Ie.binarySearch(l,e,Ye.ENTRIES);c=l[d+Ye.PREV_X],h=l[d+Ye.PREV_Y];const u=l[d],f=this.getCurvePercent(d/Ye.ENTRIES-1,1-(e-u)/(l[d+Ye.PREV_TIME]-u));c+=(l[d+Ye.X]-c)*f,h+=(l[d+Ye.Y]-h)*f}switch(i){case k.setup:a.x=a.data.x+c*r,a.y=a.data.y+h*r;break;case k.first:case k.replace:a.x+=(a.data.x+c-a.x)*r,a.y+=(a.data.y+h-a.y)*r;break;case k.add:a.x+=c*r,a.y+=h*r}}};let qs=Ye;qs.ENTRIES=3;qs.PREV_TIME=-3;qs.PREV_X=-2;qs.PREV_Y=-1;qs.X=1;qs.Y=2;let eg=class Ns extends qs{constructor(t){super(t)}getPropertyId(){return(2<<24)+this.boneIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(s<a[0]){switch(o){case k.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;return;case k.first:c.scaleX+=(c.data.scaleX-c.scaleX)*i,c.scaleY+=(c.data.scaleY-c.scaleY)*i}return}let h=0,d=0;if(s>=a[a.length-Ns.ENTRIES])h=a[a.length+Ns.PREV_X]*c.data.scaleX,d=a[a.length+Ns.PREV_Y]*c.data.scaleY;else{const u=Ie.binarySearch(a,s,Ns.ENTRIES);h=a[u+Ns.PREV_X],d=a[u+Ns.PREV_Y];const f=a[u],m=this.getCurvePercent(u/Ns.ENTRIES-1,1-(s-f)/(a[u+Ns.PREV_TIME]-f));h=(h+(a[u+Ns.X]-h)*m)*c.data.scaleX,d=(d+(a[u+Ns.Y]-d)*m)*c.data.scaleY}if(i==1)o==k.add?(c.scaleX+=h-c.data.scaleX,c.scaleY+=d-c.data.scaleY):(c.scaleX=h,c.scaleY=d);else{let u=0,f=0;if(l==kt.mixOut)switch(o){case k.setup:u=c.data.scaleX,f=c.data.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-u)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-f)*i;break;case k.first:case k.replace:u=c.scaleX,f=c.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-u)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-f)*i;break;case k.add:u=c.scaleX,f=c.scaleY,c.scaleX=u+(Math.abs(h)*M.signum(u)-c.data.scaleX)*i,c.scaleY=f+(Math.abs(d)*M.signum(f)-c.data.scaleY)*i}else switch(o){case k.setup:u=Math.abs(c.data.scaleX)*M.signum(h),f=Math.abs(c.data.scaleY)*M.signum(d),c.scaleX=u+(h-u)*i,c.scaleY=f+(d-f)*i;break;case k.first:case k.replace:u=Math.abs(c.scaleX)*M.signum(h),f=Math.abs(c.scaleY)*M.signum(d),c.scaleX=u+(h-u)*i,c.scaleY=f+(d-f)*i;break;case k.add:u=M.signum(h),f=M.signum(d),c.scaleX=Math.abs(c.scaleX)*u+(h-Math.abs(c.data.scaleX)*u)*i,c.scaleY=Math.abs(c.scaleY)*f+(d-Math.abs(c.data.scaleY)*f)*i}}}},sg=class Fs extends qs{constructor(t){super(t)}getPropertyId(){return(3<<24)+this.boneIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.bones[this.boneIndex];if(s<a[0]){switch(o){case k.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;return;case k.first:c.shearX+=(c.data.shearX-c.shearX)*i,c.shearY+=(c.data.shearY-c.shearY)*i}return}let h=0,d=0;if(s>=a[a.length-Fs.ENTRIES])h=a[a.length+Fs.PREV_X],d=a[a.length+Fs.PREV_Y];else{const u=Ie.binarySearch(a,s,Fs.ENTRIES);h=a[u+Fs.PREV_X],d=a[u+Fs.PREV_Y];const f=a[u],m=this.getCurvePercent(u/Fs.ENTRIES-1,1-(s-f)/(a[u+Fs.PREV_TIME]-f));h=h+(a[u+Fs.X]-h)*m,d=d+(a[u+Fs.Y]-d)*m}switch(o){case k.setup:c.shearX=c.data.shearX+h*i,c.shearY=c.data.shearY+d*i;break;case k.first:case k.replace:c.shearX+=(c.data.shearX+h-c.shearX)*i,c.shearY+=(c.data.shearY+d-c.shearY)*i;break;case k.add:c.shearX+=h*i,c.shearY+=d*i}}};const ce=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*ce.ENTRIES)}getPropertyId(){return(5<<24)+this.slotIndex}setFrame(n,t,e,s,r,i){n*=ce.ENTRIES,this.frames[n]=t,this.frames[n+ce.R]=e,this.frames[n+ce.G]=s,this.frames[n+ce.B]=r,this.frames[n+ce.A]=i}apply(n,t,e,s,r,i,o){const l=n.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(i){case k.setup:l.color.setFromColor(l.data.color);return;case k.first:const f=l.color,m=l.data.color;f.add((m.r-f.r)*r,(m.g-f.g)*r,(m.b-f.b)*r,(m.a-f.a)*r)}return}let c=0,h=0,d=0,u=0;if(e>=a[a.length-ce.ENTRIES]){const f=a.length;c=a[f+ce.PREV_R],h=a[f+ce.PREV_G],d=a[f+ce.PREV_B],u=a[f+ce.PREV_A]}else{const f=Ie.binarySearch(a,e,ce.ENTRIES);c=a[f+ce.PREV_R],h=a[f+ce.PREV_G],d=a[f+ce.PREV_B],u=a[f+ce.PREV_A];const m=a[f],p=this.getCurvePercent(f/ce.ENTRIES-1,1-(e-m)/(a[f+ce.PREV_TIME]-m));c+=(a[f+ce.R]-c)*p,h+=(a[f+ce.G]-h)*p,d+=(a[f+ce.B]-d)*p,u+=(a[f+ce.A]-u)*p}if(r==1)l.color.set(c,h,d,u);else{const f=l.color;i==k.setup&&f.setFromColor(l.data.color),f.add((c-f.r)*r,(h-f.g)*r,(d-f.b)*r,(u-f.a)*r)}}};let fs=ce;fs.ENTRIES=5;fs.PREV_TIME=-5;fs.PREV_R=-4;fs.PREV_G=-3;fs.PREV_B=-2;fs.PREV_A=-1;fs.R=1;fs.G=2;fs.B=3;fs.A=4;const Dt=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*Dt.ENTRIES)}getPropertyId(){return(14<<24)+this.slotIndex}setFrame(n,t,e,s,r,i,o,l,a){n*=Dt.ENTRIES,this.frames[n]=t,this.frames[n+Dt.R]=e,this.frames[n+Dt.G]=s,this.frames[n+Dt.B]=r,this.frames[n+Dt.A]=i,this.frames[n+Dt.R2]=o,this.frames[n+Dt.G2]=l,this.frames[n+Dt.B2]=a}apply(n,t,e,s,r,i,o){const l=n.slots[this.slotIndex],a=this.frames;if(e<a[0]){switch(i){case k.setup:l.color.setFromColor(l.data.color),l.darkColor.setFromColor(l.data.darkColor);return;case k.first:const g=l.color,x=l.darkColor,b=l.data.color,y=l.data.darkColor;g.add((b.r-g.r)*r,(b.g-g.g)*r,(b.b-g.b)*r,(b.a-g.a)*r),x.add((y.r-x.r)*r,(y.g-x.g)*r,(y.b-x.b)*r,0)}return}let c=0,h=0,d=0,u=0,f=0,m=0,p=0;if(e>=a[a.length-Dt.ENTRIES]){const g=a.length;c=a[g+Dt.PREV_R],h=a[g+Dt.PREV_G],d=a[g+Dt.PREV_B],u=a[g+Dt.PREV_A],f=a[g+Dt.PREV_R2],m=a[g+Dt.PREV_G2],p=a[g+Dt.PREV_B2]}else{const g=Ie.binarySearch(a,e,Dt.ENTRIES);c=a[g+Dt.PREV_R],h=a[g+Dt.PREV_G],d=a[g+Dt.PREV_B],u=a[g+Dt.PREV_A],f=a[g+Dt.PREV_R2],m=a[g+Dt.PREV_G2],p=a[g+Dt.PREV_B2];const x=a[g],b=this.getCurvePercent(g/Dt.ENTRIES-1,1-(e-x)/(a[g+Dt.PREV_TIME]-x));c+=(a[g+Dt.R]-c)*b,h+=(a[g+Dt.G]-h)*b,d+=(a[g+Dt.B]-d)*b,u+=(a[g+Dt.A]-u)*b,f+=(a[g+Dt.R2]-f)*b,m+=(a[g+Dt.G2]-m)*b,p+=(a[g+Dt.B2]-p)*b}if(r==1)l.color.set(c,h,d,u),l.darkColor.set(f,m,p,1);else{const g=l.color,x=l.darkColor;i==k.setup&&(g.setFromColor(l.data.color),x.setFromColor(l.data.darkColor)),g.add((c-g.r)*r,(h-g.g)*r,(d-g.b)*r,(u-g.a)*r),x.add((f-x.r)*r,(m-x.g)*r,(p-x.b)*r,0)}}};let ke=Dt;ke.ENTRIES=8;ke.PREV_TIME=-8;ke.PREV_R=-7;ke.PREV_G=-6;ke.PREV_B=-5;ke.PREV_A=-4;ke.PREV_R2=-3;ke.PREV_G2=-2;ke.PREV_B2=-1;ke.R=1;ke.G=2;ke.B=3;ke.A=4;ke.R2=5;ke.G2=6;ke.B2=7;let uo=class{constructor(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}getPropertyId(){return(4<<24)+this.slotIndex}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(l==kt.mixOut&&o==k.setup){const u=a.data.attachmentName;a.setAttachment(u==null?null:t.getAttachment(this.slotIndex,u));return}const c=this.frames;if(s<c[0]){if(o==k.setup||o==k.first){const u=a.data.attachmentName;a.setAttachment(u==null?null:t.getAttachment(this.slotIndex,u))}return}let h=0;s>=c[c.length-1]?h=c.length-1:h=Ie.binarySearch(c,s,1)-1;const d=this.attachmentNames[h];t.slots[this.slotIndex].setAttachment(d==null?null:t.getAttachment(this.slotIndex,d))}},pf=null,ng=class extends os{constructor(t){super(t),this.frames=Y.newFloatArray(t),this.frameVertices=new Array(t),pf==null&&(pf=Y.newFloatArray(64))}getPropertyId(){return(6<<27)+Number(this.attachment.id)+this.slotIndex}setFrame(t,e,s){this.frames[t]=e,this.frameVertices[t]=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex],c=a.getAttachment();if(!(c instanceof ur)||!c.applyDeform(this.attachment))return;const h=a.attachmentVertices;h.length==0&&(o=k.setup);const d=this.frameVertices,u=d[0].length,f=this.frames;if(s<f[0]){const w=c;switch(o){case k.setup:h.length=0;return;case k.first:if(i==1){h.length=0;break}const _=Y.setArraySize(h,u);if(w.bones==null){const E=w.vertices;for(let S=0;S<u;S++)_[S]+=(E[S]-_[S])*i}else{i=1-i;for(let E=0;E<u;E++)_[E]*=i}}return}const m=Y.setArraySize(h,u);if(s>=f[f.length-1]){const w=d[f.length-1];if(i==1)if(o==k.add){const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++)m[S]+=w[S]-E[S]}else for(let E=0;E<u;E++)m[E]+=w[E]}else Y.arrayCopy(w,0,m,0,u);else switch(o){case k.setup:{const E=c;if(E.bones==null){const S=E.vertices;for(let T=0;T<u;T++){const A=S[T];m[T]=A+(w[T]-A)*i}}else for(let S=0;S<u;S++)m[S]=w[S]*i;break}case k.first:case k.replace:for(let E=0;E<u;E++)m[E]+=(w[E]-m[E])*i;case k.add:const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++)m[S]+=(w[S]-E[S])*i}else for(let E=0;E<u;E++)m[E]+=w[E]*i}return}const p=Ie.binarySearch(f,s),g=d[p-1],x=d[p],b=f[p],y=this.getCurvePercent(p-1,1-(s-b)/(f[p-1]-b));if(i==1)if(o==k.add){const w=c;if(w.bones==null){const _=w.vertices;for(let E=0;E<u;E++){const S=g[E];m[E]+=S+(x[E]-S)*y-_[E]}}else for(let _=0;_<u;_++){const E=g[_];m[_]+=E+(x[_]-E)*y}}else for(let w=0;w<u;w++){const _=g[w];m[w]=_+(x[w]-_)*y}else switch(o){case k.setup:{const _=c;if(_.bones==null){const E=_.vertices;for(let S=0;S<u;S++){const T=g[S],A=E[S];m[S]=A+(T+(x[S]-T)*y-A)*i}}else for(let E=0;E<u;E++){const S=g[E];m[E]=(S+(x[E]-S)*y)*i}break}case k.first:case k.replace:for(let _=0;_<u;_++){const E=g[_];m[_]+=(E+(x[_]-E)*y-m[_])*i}break;case k.add:const w=c;if(w.bones==null){const _=w.vertices;for(let E=0;E<u;E++){const S=g[E];m[E]+=(S+(x[E]-S)*y-_[E])*i}}else for(let _=0;_<u;_++){const E=g[_];m[_]+=(E+(x[_]-E)*y)*i}}}},rg=class{constructor(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}getPropertyId(){return 7<<24}getFrameCount(){return this.frames.length}setFrame(t,e){this.frames[t]=e.time,this.events[t]=e}apply(t,e,s,r,i,o,l){if(r==null)return;const a=this.frames,c=this.frames.length;if(e>s)this.apply(t,e,Number.MAX_VALUE,r,i,o,l),e=-1;else if(e>=a[c-1])return;if(s<a[0])return;let h=0;if(e<a[0])h=0;else{h=Ie.binarySearch(a,e);const d=a[h];for(;h>0&&a[h-1]==d;)h--}for(;h<c&&s>=a[h];h++)r.push(this.events[h])}},fo=class{constructor(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}getPropertyId(){return 8<<24}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.drawOrders[t]=s}apply(t,e,s,r,i,o,l){const a=t.drawOrder,c=t.slots;if(l==kt.mixOut&&o==k.setup){Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}const h=this.frames;if(s<h[0]){(o==k.setup||o==k.first)&&Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let d=0;s>=h[h.length-1]?d=h.length-1:d=Ie.binarySearch(h,s)-1;const u=this.drawOrders[d];if(u==null)Y.arrayCopy(c,0,a,0,c.length);else for(let f=0,m=u.length;f<m;f++)a[f]=c[u[f]]}};const zt=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*zt.ENTRIES)}getPropertyId(){return(9<<24)+this.ikConstraintIndex}setFrame(n,t,e,s,r,i){n*=zt.ENTRIES,this.frames[n]=t,this.frames[n+zt.MIX]=e,this.frames[n+zt.BEND_DIRECTION]=s,this.frames[n+zt.COMPRESS]=r?1:0,this.frames[n+zt.STRETCH]=i?1:0}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.ikConstraints[this.ikConstraintIndex];if(e<l[0]){switch(i){case k.setup:a.mix=a.data.mix,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case k.first:a.mix+=(a.data.mix-a.mix)*r,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}if(e>=l[l.length-zt.ENTRIES]){i==k.setup?(a.mix=a.data.mix+(l[l.length+zt.PREV_MIX]-a.data.mix)*r,o==kt.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=l[l.length+zt.PREV_BEND_DIRECTION],a.compress=l[l.length+zt.PREV_COMPRESS]!=0,a.stretch=l[l.length+zt.PREV_STRETCH]!=0)):(a.mix+=(l[l.length+zt.PREV_MIX]-a.mix)*r,o==kt.mixIn&&(a.bendDirection=l[l.length+zt.PREV_BEND_DIRECTION],a.compress=l[l.length+zt.PREV_COMPRESS]!=0,a.stretch=l[l.length+zt.PREV_STRETCH]!=0));return}const c=Ie.binarySearch(l,e,zt.ENTRIES),h=l[c+zt.PREV_MIX],d=l[c],u=this.getCurvePercent(c/zt.ENTRIES-1,1-(e-d)/(l[c+zt.PREV_TIME]-d));i==k.setup?(a.mix=a.data.mix+(h+(l[c+zt.MIX]-h)*u-a.data.mix)*r,o==kt.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=l[c+zt.PREV_BEND_DIRECTION],a.compress=l[c+zt.PREV_COMPRESS]!=0,a.stretch=l[c+zt.PREV_STRETCH]!=0)):(a.mix+=(h+(l[c+zt.MIX]-h)*u-a.mix)*r,o==kt.mixIn&&(a.bendDirection=l[c+zt.PREV_BEND_DIRECTION],a.compress=l[c+zt.PREV_COMPRESS]!=0,a.stretch=l[c+zt.PREV_STRETCH]!=0))}};let ms=zt;ms.ENTRIES=5;ms.PREV_TIME=-5;ms.PREV_MIX=-4;ms.PREV_BEND_DIRECTION=-3;ms.PREV_COMPRESS=-2;ms.PREV_STRETCH=-1;ms.MIX=1;ms.BEND_DIRECTION=2;ms.COMPRESS=3;ms.STRETCH=4;const he=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*he.ENTRIES)}getPropertyId(){return(10<<24)+this.transformConstraintIndex}setFrame(n,t,e,s,r,i){n*=he.ENTRIES,this.frames[n]=t,this.frames[n+he.ROTATE]=e,this.frames[n+he.TRANSLATE]=s,this.frames[n+he.SCALE]=r,this.frames[n+he.SHEAR]=i}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.transformConstraints[this.transformConstraintIndex];if(e<l[0]){const f=a.data;switch(i){case k.setup:a.rotateMix=f.rotateMix,a.translateMix=f.translateMix,a.scaleMix=f.scaleMix,a.shearMix=f.shearMix;return;case k.first:a.rotateMix+=(f.rotateMix-a.rotateMix)*r,a.translateMix+=(f.translateMix-a.translateMix)*r,a.scaleMix+=(f.scaleMix-a.scaleMix)*r,a.shearMix+=(f.shearMix-a.shearMix)*r}return}let c=0,h=0,d=0,u=0;if(e>=l[l.length-he.ENTRIES]){const f=l.length;c=l[f+he.PREV_ROTATE],h=l[f+he.PREV_TRANSLATE],d=l[f+he.PREV_SCALE],u=l[f+he.PREV_SHEAR]}else{const f=Ie.binarySearch(l,e,he.ENTRIES);c=l[f+he.PREV_ROTATE],h=l[f+he.PREV_TRANSLATE],d=l[f+he.PREV_SCALE],u=l[f+he.PREV_SHEAR];const m=l[f],p=this.getCurvePercent(f/he.ENTRIES-1,1-(e-m)/(l[f+he.PREV_TIME]-m));c+=(l[f+he.ROTATE]-c)*p,h+=(l[f+he.TRANSLATE]-h)*p,d+=(l[f+he.SCALE]-d)*p,u+=(l[f+he.SHEAR]-u)*p}if(i==k.setup){const f=a.data;a.rotateMix=f.rotateMix+(c-f.rotateMix)*r,a.translateMix=f.translateMix+(h-f.translateMix)*r,a.scaleMix=f.scaleMix+(d-f.scaleMix)*r,a.shearMix=f.shearMix+(u-f.shearMix)*r}else a.rotateMix+=(c-a.rotateMix)*r,a.translateMix+=(h-a.translateMix)*r,a.scaleMix+=(d-a.scaleMix)*r,a.shearMix+=(u-a.shearMix)*r}};let ps=he;ps.ENTRIES=5;ps.PREV_TIME=-5;ps.PREV_ROTATE=-4;ps.PREV_TRANSLATE=-3;ps.PREV_SCALE=-2;ps.PREV_SHEAR=-1;ps.ROTATE=1;ps.TRANSLATE=2;ps.SCALE=3;ps.SHEAR=4;const Bs=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*Bs.ENTRIES)}getPropertyId(){return(11<<24)+this.pathConstraintIndex}setFrame(n,t,e){n*=Bs.ENTRIES,this.frames[n]=t,this.frames[n+Bs.VALUE]=e}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.pathConstraints[this.pathConstraintIndex];if(e<l[0]){switch(i){case k.setup:a.position=a.data.position;return;case k.first:a.position+=(a.data.position-a.position)*r}return}let c=0;if(e>=l[l.length-Bs.ENTRIES])c=l[l.length+Bs.PREV_VALUE];else{const h=Ie.binarySearch(l,e,Bs.ENTRIES);c=l[h+Bs.PREV_VALUE];const d=l[h],u=this.getCurvePercent(h/Bs.ENTRIES-1,1-(e-d)/(l[h+Bs.PREV_TIME]-d));c+=(l[h+Bs.VALUE]-c)*u}i==k.setup?a.position=a.data.position+(c-a.data.position)*r:a.position+=(c-a.position)*r}};let cr=Bs;cr.ENTRIES=2;cr.PREV_TIME=-2;cr.PREV_VALUE=-1;cr.VALUE=1;let ig=class Wn extends cr{constructor(t){super(t)}getPropertyId(){return(12<<24)+this.pathConstraintIndex}apply(t,e,s,r,i,o,l){const a=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(s<a[0]){switch(o){case k.setup:c.spacing=c.data.spacing;return;case k.first:c.spacing+=(c.data.spacing-c.spacing)*i}return}let h=0;if(s>=a[a.length-Wn.ENTRIES])h=a[a.length+Wn.PREV_VALUE];else{const d=Ie.binarySearch(a,s,Wn.ENTRIES);h=a[d+Wn.PREV_VALUE];const u=a[d],f=this.getCurvePercent(d/Wn.ENTRIES-1,1-(s-u)/(a[d+Wn.PREV_TIME]-u));h+=(a[d+Wn.VALUE]-h)*f}o==k.setup?c.spacing=c.data.spacing+(h-c.data.spacing)*i:c.spacing+=(h-c.spacing)*i}};const $e=class extends os{constructor(n){super(n),this.frames=Y.newFloatArray(n*$e.ENTRIES)}getPropertyId(){return(13<<24)+this.pathConstraintIndex}setFrame(n,t,e,s){n*=$e.ENTRIES,this.frames[n]=t,this.frames[n+$e.ROTATE]=e,this.frames[n+$e.TRANSLATE]=s}apply(n,t,e,s,r,i,o){const l=this.frames,a=n.pathConstraints[this.pathConstraintIndex];if(e<l[0]){switch(i){case k.setup:a.rotateMix=a.data.rotateMix,a.translateMix=a.data.translateMix;return;case k.first:a.rotateMix+=(a.data.rotateMix-a.rotateMix)*r,a.translateMix+=(a.data.translateMix-a.translateMix)*r}return}let c=0,h=0;if(e>=l[l.length-$e.ENTRIES])c=l[l.length+$e.PREV_ROTATE],h=l[l.length+$e.PREV_TRANSLATE];else{const d=Ie.binarySearch(l,e,$e.ENTRIES);c=l[d+$e.PREV_ROTATE],h=l[d+$e.PREV_TRANSLATE];const u=l[d],f=this.getCurvePercent(d/$e.ENTRIES-1,1-(e-u)/(l[d+$e.PREV_TIME]-u));c+=(l[d+$e.ROTATE]-c)*f,h+=(l[d+$e.TRANSLATE]-h)*f}i==k.setup?(a.rotateMix=a.data.rotateMix+(c-a.data.rotateMix)*r,a.translateMix=a.data.translateMix+(h-a.data.translateMix)*r):(a.rotateMix+=(c-a.rotateMix)*r,a.translateMix+=(h-a.translateMix)*r)}};let Nn=$e;Nn.ENTRIES=3;Nn.PREV_TIME=-3;Nn.PREV_ROTATE=-2;Nn.PREV_TRANSLATE=-1;Nn.ROTATE=1;Nn.TRANSLATE=2;const Pe=class{constructor(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new Kh(this),this.propertyIDs=new Ip,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new Fo(()=>new Vo),this.data=t}update(t){t*=this.timeScale;const e=this.tracks;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i==null)continue;i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;let o=t*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}let l=i.next;if(l!=null){const a=i.trackLast-l.delay;if(a>=0){for(l.delay=0,l.trackTime=i.timeScale==0?0:(a/i.timeScale+t)*l.timeScale,i.trackTime+=o,this.setCurrent(s,l,!0);l.mixingFrom!=null;)l.mixTime+=t,l=l.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&i.mixingFrom==null){e[s]=null,this.queue.end(i),this.disposeNext(i);continue}if(i.mixingFrom!=null&&this.updateMixingFrom(i,t)){let a=i.mixingFrom;for(i.mixingFrom=null,a!=null&&(a.mixingTo=null);a!=null;)this.queue.end(a),a=a.mixingFrom}i.trackTime+=o}this.queue.drain()}updateMixingFrom(t,e){const s=t.mixingFrom;if(s==null)return!0;const r=this.updateMixingFrom(s,e);return s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?((s.totalAlpha==0||t.mixDuration==0)&&(t.mixingFrom=s.mixingFrom,s.mixingFrom!=null&&(s.mixingFrom.mixingTo=t),t.interruptAlpha=s.interruptAlpha,this.queue.end(s)),r):(s.trackTime+=e*s.timeScale,t.mixTime+=e,!1)}apply(t){if(t==null)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const e=this.events,s=this.tracks;let r=!1;for(let i=0,o=s.length;i<o;i++){const l=s[i];if(l==null||l.delay>0)continue;r=!0;const a=i==0?k.first:l.mixBlend;let c=l.alpha;l.mixingFrom!=null?c*=this.applyMixingFrom(l,t,a):l.trackTime>=l.trackEnd&&l.next==null&&(c=0);const h=l.animationLast,d=l.getAnimationTime(),u=l.animation.timelines.length,f=l.animation.timelines;if(i==0&&c==1||a==k.add)for(let m=0;m<u;m++)f[m].apply(t,h,d,e,c,a,kt.mixIn);else{const m=l.timelineMode,p=l.timelinesRotation.length==0;p&&Y.setArraySize(l.timelinesRotation,u<<1,null);const g=l.timelinesRotation;for(let x=0;x<u;x++){const b=f[x],y=m[x]==Pe.SUBSEQUENT?a:k.setup;b instanceof We?this.applyRotateTimeline(b,t,d,c,y,g,x<<1,p):b.apply(t,h,d,e,c,y,kt.mixIn)}}this.queueEvents(l,d),e.length=0,l.nextAnimationLast=d,l.nextTrackLast=l.trackTime}return this.queue.drain(),r}applyMixingFrom(t,e,s){const r=t.mixingFrom;r.mixingFrom!=null&&this.applyMixingFrom(r,e,s);let i=0;t.mixDuration==0?(i=1,s==k.first&&(s=k.setup)):(i=t.mixTime/t.mixDuration,i>1&&(i=1),s!=k.first&&(s=r.mixBlend));const o=i<r.eventThreshold?this.events:null,l=i<r.attachmentThreshold,a=i<r.drawOrderThreshold,c=r.animationLast,h=r.getAnimationTime(),d=r.animation.timelines.length,u=r.animation.timelines,f=r.alpha*t.interruptAlpha,m=f*(1-i);if(s==k.add)for(let p=0;p<d;p++)u[p].apply(e,c,h,o,m,s,kt.mixOut);else{const p=r.timelineMode,g=r.timelineHoldMix,x=r.timelinesRotation.length==0;x&&Y.setArraySize(r.timelinesRotation,d<<1,null);const b=r.timelinesRotation;r.totalAlpha=0;for(let y=0;y<d;y++){const w=u[y];let _=kt.mixOut,E,S=0;switch(p[y]){case Pe.SUBSEQUENT:if(!l&&w instanceof uo||!a&&w instanceof fo)continue;E=s,S=m;break;case Pe.FIRST:E=k.setup,S=m;break;case Pe.HOLD:E=k.setup,S=f;break;default:E=k.setup;const T=g[y];S=f*Math.max(0,1-T.mixTime/T.mixDuration);break}r.totalAlpha+=S,w instanceof We?this.applyRotateTimeline(w,e,h,S,E,b,y<<1,x):(E==k.setup&&(w instanceof uo?l&&(_=kt.mixOut):w instanceof fo&&a&&(_=kt.mixOut)),w.apply(e,c,h,o,S,E,_))}}return t.mixDuration>0&&this.queueEvents(r,h),this.events.length=0,r.nextAnimationLast=h,r.nextTrackLast=r.trackTime,i}applyRotateTimeline(t,e,s,r,i,o,l,a){if(a&&(o[l]=0),r==1){t.apply(e,0,s,null,1,i,kt.mixIn);return}const c=t,h=c.frames,d=e.bones[c.boneIndex];let u=0,f=0;if(s<h[0])switch(i){case k.setup:d.rotation=d.data.rotation;default:return;case k.first:u=d.rotation,f=d.data.rotation}else if(u=i==k.setup?d.data.rotation:d.rotation,s>=h[h.length-We.ENTRIES])f=d.data.rotation+h[h.length+We.PREV_ROTATION];else{const g=Ie.binarySearch(h,s,We.ENTRIES),x=h[g+We.PREV_ROTATION],b=h[g],y=c.getCurvePercent((g>>1)-1,1-(s-b)/(h[g+We.PREV_TIME]-b));f=h[g+We.ROTATION]-x,f-=(16384-(16384.499999999996-f/360|0))*360,f=x+f*y+d.data.rotation,f-=(16384-(16384.499999999996-f/360|0))*360}let m=0,p=f-u;if(p-=(16384-(16384.499999999996-p/360|0))*360,p==0)m=o[l];else{let g=0,x=0;a?(g=0,x=p):(g=o[l],x=o[l+1]);const b=p>0;let y=g>=0;M.signum(x)!=M.signum(p)&&Math.abs(x)<=90&&(Math.abs(g)>180&&(g+=360*M.signum(g)),y=b),m=p+g-g%360,y!=b&&(m+=360*M.signum(g)),o[l]=m}o[l+1]=p,u+=m*r,d.rotation=u-(16384-(16384.499999999996-u/360|0))*360}queueEvents(t,e){const s=t.animationStart,r=t.animationEnd,i=r-s,o=t.trackLast%i,l=this.events;let a=0;const c=l.length;for(;a<c;a++){const d=l[a];if(d.time<o)break;d.time>r||this.queue.event(t,d)}let h=!1;for(t.loop?h=i==0||o>t.trackTime%i:h=e>=r&&t.animationLast<r,h&&this.queue.complete(t);a<c;a++)l[a].time<s||this.queue.event(t,l[a])}clearTracks(){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()}clearTrack(t){if(t>=this.tracks.length)return;const e=this.tracks[t];if(e==null)return;this.queue.end(e),this.disposeNext(e);let s=e;for(;;){const r=s.mixingFrom;if(r==null)break;this.queue.end(r),s.mixingFrom=null,s.mixingTo=null,s=r}this.tracks[e.trackIndex]=null,this.queue.drain()}setCurrent(t,e,s){const r=this.expandToIndex(t);this.tracks[t]=e,r!=null&&(s&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom!=null&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)}setAnimation(t,e,s){const r=this.data.skeletonData.findAnimation(e);if(r==null)throw new Error(`Animation not found: ${e}`);return this.setAnimationWith(t,r,s)}setAnimationWith(t,e,s){if(e==null)throw new Error("animation cannot be null.");let r=!0,i=this.expandToIndex(t);i!=null&&(i.nextTrackLast==-1?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));const o=this.trackEntry(t,e,s,i);return this.setCurrent(t,o,r),this.queue.drain(),o}addAnimation(t,e,s,r){const i=this.data.skeletonData.findAnimation(e);if(i==null)throw new Error(`Animation not found: ${e}`);return this.addAnimationWith(t,i,s,r)}addAnimationWith(t,e,s,r){if(e==null)throw new Error("animation cannot be null.");let i=this.expandToIndex(t);if(i!=null)for(;i.next!=null;)i=i.next;const o=this.trackEntry(t,e,s,i);if(i==null)this.setCurrent(t,o,!0),this.queue.drain();else if(i.next=o,r<=0){const l=i.animationEnd-i.animationStart;l!=0?(i.loop?r+=l*(1+(i.trackTime/l|0)):r+=Math.max(l,i.trackTime),r-=this.data.getMix(i.animation,e)):r=i.trackTime}return o.delay=r,o}setEmptyAnimation(t,e){const s=this.setAnimationWith(t,Pe.emptyAnimation,!1);return s.mixDuration=e,s.trackEnd=e,s}addEmptyAnimation(t,e,s){s<=0&&(s-=e);const r=this.addAnimationWith(t,Pe.emptyAnimation,!1,s);return r.mixDuration=e,r.trackEnd=e,r}setEmptyAnimations(t){const e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let s=0,r=this.tracks.length;s<r;s++){const i=this.tracks[s];i!=null&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()}expandToIndex(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)}trackEntry(t,e,s,r){const i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=s,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=r==null?0:this.data.getMix(r.animation,e),i}disposeNext(t){let e=t.next;for(;e!=null;)this.queue.dispose(e),e=e.next;t.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();for(let t=0,e=this.tracks.length;t<e;t++){let s=this.tracks[t];if(s!=null){for(;s.mixingFrom!=null;)s=s.mixingFrom;do(s.mixingFrom==null||s.mixBlend!=k.add)&&this.setTimelineModes(s),s=s.mixingTo;while(s!=null)}}}setTimelineModes(t){const e=t.mixingTo,s=t.animation.timelines,r=t.animation.timelines.length,i=Y.setArraySize(t.timelineMode,r);t.timelineHoldMix.length=0;const o=Y.setArraySize(t.timelineHoldMix,r),l=this.propertyIDs;if(e!=null&&e.holdPrevious){for(let a=0;a<r;a++)l.add(s[a].getPropertyId()),i[a]=Pe.HOLD;return}t:for(let a=0;a<r;a++){const c=s[a].getPropertyId();if(!l.add(c))i[a]=Pe.SUBSEQUENT;else if(e==null||!this.hasTimeline(e,c))i[a]=Pe.FIRST;else{for(let h=e.mixingTo;h!=null;h=h.mixingTo)if(!this.hasTimeline(h,c)){if(t.mixDuration>0){i[a]=Pe.HOLD_MIX,o[a]=h;continue t}break}i[a]=Pe.HOLD}}}hasTimeline(t,e){const s=t.animation.timelines;for(let r=0,i=s.length;r<i;r++)if(s[r].getPropertyId()==e)return!0;return!1}getCurrent(t){return t>=this.tracks.length?null:this.tracks[t]}addListener(t){if(t==null)throw new Error("listener cannot be null.");this.listeners.push(t)}removeListener(t){const e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(t,e,s){Pe.deprecatedWarning1||(Pe.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,s)}addAnimationByName(t,e,s,r){Pe.deprecatedWarning2||(Pe.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,s,r)}hasAnimation(t){return this.data.skeletonData.findAnimation(t)!==null}hasAnimationByName(t){return Pe.deprecatedWarning3||(Pe.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)}};let pn=Pe;pn.emptyAnimation=new Ie("<empty>",[],0);pn.SUBSEQUENT=0;pn.FIRST=1;pn.HOLD=2;pn.HOLD_MIX=3;pn.deprecatedWarning1=!1;pn.deprecatedWarning2=!1;pn.deprecatedWarning3=!1;const wn=class{constructor(){this.mixBlend=k.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const t=this.animationEnd-this.animationStart;return t==0?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(t){this.animationLast=t,this.nextAnimationLast=t}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}get time(){return wn.deprecatedWarning1||(wn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(t){wn.deprecatedWarning1||(wn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t}get endTime(){return wn.deprecatedWarning2||(wn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(t){wn.deprecatedWarning2||(wn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Vo=wn;Vo.deprecatedWarning1=!1;Vo.deprecatedWarning2=!1;const Yc=class{constructor(n){this.objects=[],this.drainDisabled=!1,this.animState=n}start(n){this.objects.push(es.start),this.objects.push(n),this.animState.animationsChanged=!0}interrupt(n){this.objects.push(es.interrupt),this.objects.push(n)}end(n){this.objects.push(es.end),this.objects.push(n),this.animState.animationsChanged=!0}dispose(n){this.objects.push(es.dispose),this.objects.push(n)}complete(n){this.objects.push(es.complete),this.objects.push(n)}event(n,t){this.objects.push(es.event),this.objects.push(n),this.objects.push(t)}deprecateStuff(){return Yc.deprecatedWarning1||(Yc.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const n=this.objects,t=this.animState.listeners;for(let e=0;e<n.length;e+=2){const s=n[e],r=n[e+1];switch(s){case es.start:r.listener!=null&&r.listener.start&&r.listener.start(r);for(let l=0;l<t.length;l++)t[l].start&&t[l].start(r);r.onStart&&this.deprecateStuff()&&r.onStart(r.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(r.trackIndex);break;case es.interrupt:r.listener!=null&&r.listener.interrupt&&r.listener.interrupt(r);for(let l=0;l<t.length;l++)t[l].interrupt&&t[l].interrupt(r);break;case es.end:r.listener!=null&&r.listener.end&&r.listener.end(r);for(let l=0;l<t.length;l++)t[l].end&&t[l].end(r);r.onEnd&&this.deprecateStuff()&&r.onEnd(r.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(r.trackIndex);case es.dispose:r.listener!=null&&r.listener.dispose&&r.listener.dispose(r);for(let l=0;l<t.length;l++)t[l].dispose&&t[l].dispose(r);this.animState.trackEntryPool.free(r);break;case es.complete:r.listener!=null&&r.listener.complete&&r.listener.complete(r);for(let l=0;l<t.length;l++)t[l].complete&&t[l].complete(r);const i=M.toInt(r.loopsCount());r.onComplete&&this.deprecateStuff()&&r.onComplete(r.trackIndex,i),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(r.trackIndex,i);break;case es.event:const o=n[e+++2];r.listener!=null&&r.listener.event&&r.listener.event(r,o);for(let l=0;l<t.length;l++)t[l].event&&t[l].event(r,o);r.onEvent&&this.deprecateStuff()&&r.onEvent(r.trackIndex,o),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(r.trackIndex,o);break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}};let Kh=Yc;Kh.deprecatedWarning1=!1;var es=(n=>(n[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event",n))(es||{});class iE{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const $c=class{constructor(n){if(this.animationToMixTime={},this.defaultMix=0,n==null)throw new Error("skeletonData cannot be null.");this.skeletonData=n}setMix(n,t,e){const s=this.skeletonData.findAnimation(n);if(s==null)throw new Error(`Animation not found: ${n}`);const r=this.skeletonData.findAnimation(t);if(r==null)throw new Error(`Animation not found: ${t}`);this.setMixWith(s,r,e)}setMixByName(n,t,e){$c.deprecatedWarning1||($c.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(n,t,e)}setMixWith(n,t,e){if(n==null)throw new Error("from cannot be null.");if(t==null)throw new Error("to cannot be null.");const s=`${n.name}.${t.name}`;this.animationToMixTime[s]=e}getMix(n,t){const e=`${n.name}.${t.name}`,s=this.animationToMixTime[e];return s===void 0?this.defaultMix:s}};let Zh=$c;Zh.deprecatedWarning1=!1;let ag=class{constructor(t){this.atlas=t}newRegionAttachment(t,e,s){const r=this.atlas.findRegion(s);if(r==null)throw new Error(`Region not found in atlas: ${s} (region attachment: ${e})`);const i=new At(e);return i.region=r,i}newMeshAttachment(t,e,s){const r=this.atlas.findRegion(s);if(r==null)throw new Error(`Region not found in atlas: ${s} (mesh attachment: ${e})`);const i=new Hh(e);return i.region=r,i}newBoundingBoxAttachment(t,e){return new qp(e)}newPathAttachment(t,e){return new ta(e)}newPointAttachment(t,e){return new Zp(e)}newClippingAttachment(t,e){return new Kp(e)}},Wc=class{constructor(t,e,s){if(this.matrix=new Ht,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!0,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}update(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,r,i,o,l){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=l,this.appliedValid=!0;const a=this.parent,c=this.matrix,h=this.skeleton.scaleX,d=-this.skeleton.scaleY;if(a==null){const g=this.skeleton,x=s+90+l;c.a=M.cosDeg(s+o)*r*h,c.c=M.cosDeg(x)*i*h,c.b=M.sinDeg(s+o)*r*d,c.d=M.sinDeg(x)*i*d,c.tx=t*h+g.x,c.ty=e*d+g.y;return}let u=a.matrix.a,f=a.matrix.c,m=a.matrix.b,p=a.matrix.d;switch(c.tx=u*t+f*e+a.matrix.tx,c.ty=m*t+p*e+a.matrix.ty,this.data.transformMode){case vt.Normal:{const g=s+90+l,x=M.cosDeg(s+o)*r,b=M.cosDeg(g)*i,y=M.sinDeg(s+o)*r,w=M.sinDeg(g)*i;c.a=u*x+f*y,c.c=u*b+f*w,c.b=m*x+p*y,c.d=m*b+p*w;return}case vt.OnlyTranslation:{const g=s+90+l;c.a=M.cosDeg(s+o)*r,c.c=M.cosDeg(g)*i,c.b=M.sinDeg(s+o)*r,c.d=M.sinDeg(g)*i;break}case vt.NoRotationOrReflection:{let g=u*u+m*m,x=0;g>1e-4?(g=Math.abs(u*p-f*m)/g,f=m*g,p=u*g,x=Math.atan2(m,u)*M.radDeg):(u=0,m=0,x=90-Math.atan2(p,f)*M.radDeg);const b=s+o-x,y=s+l-x+90,w=M.cosDeg(b)*r,_=M.cosDeg(y)*i,E=M.sinDeg(b)*r,S=M.sinDeg(y)*i;c.a=u*w-f*E,c.c=u*_-f*S,c.b=m*w+p*E,c.d=m*_+p*S;break}case vt.NoScale:case vt.NoScaleOrReflection:{const g=M.cosDeg(s),x=M.sinDeg(s);let b=(u*g+f*x)/h,y=(m*g+p*x)/d,w=Math.sqrt(b*b+y*y);w>1e-5&&(w=1/w),b*=w,y*=w,w=Math.sqrt(b*b+y*y),this.data.transformMode==vt.NoScale&&u*p-f*m<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY>0)&&(w=-w);const _=Math.PI/2+Math.atan2(y,b),E=Math.cos(_)*w,S=Math.sin(_)*w,T=M.cosDeg(o)*r,A=M.cosDeg(90+l)*i,C=M.sinDeg(o)*r,I=M.sinDeg(90+l)*i;c.a=b*T+E*C,c.c=b*A+E*I,c.b=y*T+S*C,c.d=y*A+S*I;break}}c.a*=h,c.c*=h,c.b*=d,c.d*=d}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)}updateAppliedTransform(){this.appliedValid=!0;const t=this.parent,e=this.matrix;if(t==null){this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}const s=t.matrix,r=1/(s.a*s.d-s.b*s.c),i=e.tx-s.tx,o=e.ty-s.ty;this.ax=i*s.d*r-o*s.c*r,this.ay=o*s.a*r-i*s.b*r;const l=r*s.d,a=r*s.a,c=r*s.c,h=r*s.b,d=l*e.a-c*e.b,u=l*e.c-c*e.d,f=a*e.b-h*e.a,m=a*e.d-h*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){const p=d*m-u*f;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(d*u+f*m,p)*M.radDeg,this.arotation=Math.atan2(f,d)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,u)*M.radDeg}worldToLocal(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=1/(s*o-r*i),a=t.x-e.tx,c=t.y-e.ty;return t.x=a*o*l-c*r*l,t.y=c*s*l-a*i*l,t}localToWorld(t){const e=this.matrix,s=t.x,r=t.y;return t.x=s*e.a+r*e.c+e.tx,t.y=s*e.b+r*e.d+e.ty,t}worldToLocalRotation(t){const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*s,r.d*s-r.c*e)*M.radDeg}localToWorldRotation(t){const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(s*r.b+e*r.d,s*r.a+e*r.c)*M.radDeg}rotateWorld(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=M.cosDeg(t),a=M.sinDeg(t);e.a=l*s-a*i,e.c=l*r-a*o,e.b=a*s+l*i,e.d=a*r+l*o,this.appliedValid=!1}},og=class{constructor(t,e,s){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=vt.Normal,t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}},lg=class{constructor(t,e){if(e==null)throw new Error("data cannot be null.");this.time=t,this.data=e}},cg=class{constructor(t){this.name=t}},hg=class{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}getOrder(){return this.data.order}apply(){this.update()}update(){const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix);break}}apply1(t,e,s,r,i,o,l){t.appliedValid||t.updateAppliedTransform();const a=t.parent.matrix,c=1/(a.a*a.d-a.b*a.c),h=e-a.tx,d=s-a.ty,u=(h*a.d-d*a.c)*c-t.ax,f=(d*a.a-h*a.b)*c-t.ay;let m=Math.atan2(f,u)*M.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(m+=180),m>180?m-=360:m<-180&&(m+=360);let p=t.ascaleX,g=t.ascaleY;if(r||i){const x=t.data.length*p,b=Math.sqrt(u*u+f*f);if(r&&b<x||i&&b>x&&x>1e-4){const y=(b/x-1)*l+1;p*=y,o&&(g*=y)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+m*l,p,g,t.ashearX,t.ashearY)}apply2(t,e,s,r,i,o,l){if(l==0){e.updateWorldTransform();return}t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();const a=t.ax,c=t.ay;let h=t.ascaleX,d=h,u=t.ascaleY,f=e.ascaleX;const m=t.matrix;let p=0,g=0,x=0;h<0?(h=-h,p=180,x=-1):(p=0,x=1),u<0&&(u=-u,x=-x),f<0?(f=-f,g=180):g=0;const b=e.ax;let y=0,w=0,_=0,E=m.a,S=m.c,T=m.b,A=m.d;const C=Math.abs(h-u)<=1e-4;C?(y=e.ay,w=E*b+S*y+m.tx,_=T*b+A*y+m.ty):(y=0,w=E*b+m.tx,_=T*b+m.ty);const I=t.parent.matrix;E=I.a,S=I.c,T=I.b,A=I.d;const P=1/(E*A-S*T);let R=s-I.tx,N=r-I.ty;const F=(R*A-N*S)*P-a,D=(N*E-R*T)*P-c,L=F*F+D*D;R=w-I.tx,N=_-I.ty;const O=(R*A-N*S)*P-a,j=(N*E-R*T)*P-c,U=Math.sqrt(O*O+j*j);let B=e.data.length*f,G=0,H=0;t:if(C){B*=h;let J=(L-U*U-B*B)/(2*U*B);J<-1?J=-1:J>1&&(J=1,o&&U+B>1e-4&&(d*=(Math.sqrt(L)/(U+B)-1)*l+1)),H=Math.acos(J)*i,E=U+B*J,S=B*Math.sin(H),G=Math.atan2(D*E-F*S,F*E+D*S)}else{E=h*B,S=u*B;const J=E*E,Q=S*S,X=Math.atan2(D,F);T=Q*U*U+J*L-J*Q;const W=-2*Q*U,Z=Q-J;if(A=W*W-4*Z*T,A>=0){let Jt=Math.sqrt(A);W<0&&(Jt=-Jt),Jt=-(W+Jt)/2;const re=Jt/Z,qt=T/Jt,Kt=Math.abs(re)<Math.abs(qt)?re:qt;if(Kt*Kt<=L){N=Math.sqrt(L-Kt*Kt)*i,G=X-Math.atan2(N,Kt),H=Math.atan2(N/u,(Kt-U)/h);break t}}let at=M.PI,gt=U-E,yt=gt*gt,nt=0,It=0,Ct=U+E,wt=Ct*Ct,Qt=0;T=-E*U/(J-Q),T>=-1&&T<=1&&(T=Math.acos(T),R=E*Math.cos(T)+U,N=S*Math.sin(T),A=R*R+N*N,A<yt&&(at=T,yt=A,gt=R,nt=N),A>wt&&(It=T,wt=A,Ct=R,Qt=N)),L<=(yt+wt)/2?(G=X-Math.atan2(nt*i,gt),H=at*i):(G=X-Math.atan2(Qt*i,Ct),H=It*i)}const K=Math.atan2(y,b)*x;let z=t.arotation;G=(G-K)*M.radDeg+p-z,G>180?G-=360:G<-180&&(G+=360),t.updateWorldTransformWith(a,c,z+G*l,d,t.ascaleY,0,0),z=e.arotation,H=((H+K)*M.radDeg-e.ashearX)*x+g-z,H>180?H-=360:H<-180&&(H+=360),e.updateWorldTransformWith(b,y,z+H*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}},dg=class{constructor(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t}},ug=class{constructor(t){this.order=0,this.bones=new Array,this.name=t}};var Os=(n=>(n[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",n))(Os||{});const Er=class{constructor(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(let s=0,r=t.bones.length;s<r;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}apply(){this.update()}update(){const t=this.target.getAttachment();if(!(t instanceof ta))return;const e=this.rotateMix,s=this.translateMix,r=s>0,i=e>0;if(!r&&!i)return;const o=this.data,l=o.spacingMode,a=l==Os.Length,c=o.rotateMode,h=c==we.Tangent,d=c==we.ChainScale,u=this.bones.length,f=h?u:u+1,m=this.bones,p=Y.setArraySize(this.spaces,f);let g=null;const x=this.spacing;if(d||a){d&&(g=Y.setArraySize(this.lengths,u));for(let S=0,T=f-1;S<T;){const A=m[S],C=A.data.length;if(C<Er.epsilon)d&&(g[S]=0),p[++S]=0;else{const I=C*A.matrix.a,P=C*A.matrix.b,R=Math.sqrt(I*I+P*P);d&&(g[S]=R),p[++S]=(a?C+x:x)*R/C}}}else for(let S=1;S<f;S++)p[S]=x;const b=this.computeWorldPositions(t,f,h,o.positionMode==fe.Percent,l==Os.Percent);let y=b[0],w=b[1],_=o.offsetRotation,E=!1;if(_==0)E=c==we.Chain;else{E=!1;const S=this.target.bone.matrix;_*=S.a*S.d-S.b*S.c>0?M.degRad:-M.degRad}for(let S=0,T=3;S<u;S++,T+=3){const A=m[S],C=A.matrix;C.tx+=(y-C.tx)*s,C.ty+=(w-C.ty)*s;const I=b[T],P=b[T+1],R=I-y,N=P-w;if(d){const F=g[S];if(F!=0){const D=(Math.sqrt(R*R+N*N)/F-1)*e+1;C.a*=D,C.b*=D}}if(y=I,w=P,i){const F=C.a,D=C.c,L=C.b,O=C.d;let j=0,U=0,B=0;if(h&&(h?j=b[T-1]:p[S+1]==0?j=b[T+2]:j=Math.atan2(N,R)),j-=Math.atan2(L,F),E){U=Math.cos(j),B=Math.sin(j);const G=A.data.length;y+=(G*(U*F-B*L)-R)*e,w+=(G*(B*F+U*L)-N)*e}else j+=_;j>M.PI?j-=M.PI2:j<-M.PI&&(j+=M.PI2),j*=e,U=Math.cos(j),B=Math.sin(j),C.a=U*F-B*L,C.c=U*D-B*O,C.b=B*F+U*L,C.d=B*D+U*O}A.appliedValid=!1}}computeWorldPositions(t,e,s,r,i){const o=this.target;let l=this.position;const a=this.spaces,c=Y.setArraySize(this.positions,e*3+2);let h=null;const d=t.closed;let u=t.worldVerticesLength,f=u/6,m=Er.NONE;if(!t.constantSpeed){const j=t.lengths;f-=d?1:2;const U=j[f];if(r&&(l*=U),i)for(let B=0;B<e;B++)a[B]*=U;h=Y.setArraySize(this.world,8);for(let B=0,G=0,H=0;B<e;B++,G+=3){const K=a[B];l+=K;let z=l;if(d)z%=U,z<0&&(z+=U),H=0;else if(z<0){m!=Er.BEFORE&&(m=Er.BEFORE,t.computeWorldVertices(o,2,4,h,0,2)),this.addBeforePosition(z,h,0,c,G);continue}else if(z>U){m!=Er.AFTER&&(m=Er.AFTER,t.computeWorldVertices(o,u-6,4,h,0,2)),this.addAfterPosition(z-U,h,0,c,G);continue}for(;;H++){const J=j[H];if(!(z>J)){if(H==0)z/=J;else{const Q=j[H-1];z=(z-Q)/(J-Q)}break}}H!=m&&(m=H,d&&H==f?(t.computeWorldVertices(o,u-4,4,h,0,2),t.computeWorldVertices(o,0,4,h,4,2)):t.computeWorldVertices(o,H*6+2,8,h,0,2)),this.addCurvePosition(z,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],c,G,s||B>0&&K==0)}return c}d?(u+=2,h=Y.setArraySize(this.world,u),t.computeWorldVertices(o,2,u-4,h,0,2),t.computeWorldVertices(o,0,2,h,u-4,2),h[u-2]=h[0],h[u-1]=h[1]):(f--,u-=4,h=Y.setArraySize(this.world,u),t.computeWorldVertices(o,2,u,h,0,2));const p=Y.setArraySize(this.curves,f);let g=0,x=h[0],b=h[1],y=0,w=0,_=0,E=0,S=0,T=0,A=0,C=0,I=0,P=0,R=0,N=0,F=0,D=0;for(let j=0,U=2;j<f;j++,U+=6)y=h[U],w=h[U+1],_=h[U+2],E=h[U+3],S=h[U+4],T=h[U+5],A=(x-y*2+_)*.1875,C=(b-w*2+E)*.1875,I=((y-_)*3-x+S)*.09375,P=((w-E)*3-b+T)*.09375,R=A*2+I,N=C*2+P,F=(y-x)*.75+A+I*.16666667,D=(w-b)*.75+C+P*.16666667,g+=Math.sqrt(F*F+D*D),F+=R,D+=N,R+=I,N+=P,g+=Math.sqrt(F*F+D*D),F+=R,D+=N,g+=Math.sqrt(F*F+D*D),F+=R+I,D+=N+P,g+=Math.sqrt(F*F+D*D),p[j]=g,x=S,b=T;if(r&&(l*=g),i)for(let j=0;j<e;j++)a[j]*=g;const L=this.segments;let O=0;for(let j=0,U=0,B=0,G=0;j<e;j++,U+=3){const H=a[j];l+=H;let K=l;if(d)K%=g,K<0&&(K+=g),B=0;else if(K<0){this.addBeforePosition(K,h,0,c,U);continue}else if(K>g){this.addAfterPosition(K-g,h,u-4,c,U);continue}for(;;B++){const z=p[B];if(!(K>z)){if(B==0)K/=z;else{const J=p[B-1];K=(K-J)/(z-J)}break}}if(B!=m){m=B;let z=B*6;for(x=h[z],b=h[z+1],y=h[z+2],w=h[z+3],_=h[z+4],E=h[z+5],S=h[z+6],T=h[z+7],A=(x-y*2+_)*.03,C=(b-w*2+E)*.03,I=((y-_)*3-x+S)*.006,P=((w-E)*3-b+T)*.006,R=A*2+I,N=C*2+P,F=(y-x)*.3+A+I*.16666667,D=(w-b)*.3+C+P*.16666667,O=Math.sqrt(F*F+D*D),L[0]=O,z=1;z<8;z++)F+=R,D+=N,R+=I,N+=P,O+=Math.sqrt(F*F+D*D),L[z]=O;F+=R,D+=N,O+=Math.sqrt(F*F+D*D),L[8]=O,F+=R+I,D+=N+P,O+=Math.sqrt(F*F+D*D),L[9]=O,G=0}for(K*=O;;G++){const z=L[G];if(!(K>z)){if(G==0)K/=z;else{const J=L[G-1];K=G+(K-J)/(z-J)}break}}this.addCurvePosition(K*.1,x,b,y,w,_,E,S,T,c,U,s||j>0&&H==0)}return c}addBeforePosition(t,e,s,r,i){const o=e[s],l=e[s+1],a=e[s+2]-o,c=e[s+3]-l,h=Math.atan2(c,a);r[i]=o+t*Math.cos(h),r[i+1]=l+t*Math.sin(h),r[i+2]=h}addAfterPosition(t,e,s,r,i){const o=e[s+2],l=e[s+3],a=o-e[s],c=l-e[s+1],h=Math.atan2(c,a);r[i]=o+t*Math.cos(h),r[i+1]=l+t*Math.sin(h),r[i+2]=h}addCurvePosition(t,e,s,r,i,o,l,a,c,h,d,u){(t==0||isNaN(t))&&(t=1e-4);const f=t*t,m=f*t,p=1-t,g=p*p,x=g*p,b=p*t,y=b*3,w=p*y,_=y*t,E=e*x+r*w+o*_+a*m,S=s*x+i*w+l*_+c*m;h[d]=E,h[d+1]=S,u&&(h[d+2]=Math.atan2(S-(s*g+i*b*2+l*f),E-(e*g+r*b*2+o*f)))}getOrder(){return this.data.order}};let vi=Er;vi.NONE=-1;vi.BEFORE=-2;vi.AFTER=-3;vi.epsilon=1e-5;let fg=class{constructor(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new Qi,t==null)throw new Error("data cannot be null.");if(e==null)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(let s=0;s<t.bones.length;s++)this.bones.push(e.findBone(t.bones[s].name));this.target=e.findBone(t.target.name)}apply(){this.update()}update(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()}applyAbsoluteWorld(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,l=o.a,a=o.c,c=o.b,h=o.d,d=l*h-a*c>0?M.degRad:-M.degRad,u=this.data.offsetRotation*d,f=this.data.offsetShearY*d,m=this.bones;for(let p=0,g=m.length;p<g;p++){const x=m[p];let b=!1;const y=x.matrix;if(t!=0){const w=y.a,_=y.c,E=y.b,S=y.d;let T=Math.atan2(c,l)-Math.atan2(E,w)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;const A=Math.cos(T),C=Math.sin(T);y.a=A*w-C*E,y.c=A*_-C*S,y.b=C*w+A*E,y.d=C*_+A*S,b=!0}if(e!=0){const w=this.temp;i.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),y.tx+=(w.x-y.tx)*e,y.ty+=(w.y-y.ty)*e,b=!0}if(s>0){let w=Math.sqrt(y.a*y.a+y.b*y.b),_=Math.sqrt(l*l+c*c);w>1e-5&&(w=(w+(_-w+this.data.offsetScaleX)*s)/w),y.a*=w,y.b*=w,w=Math.sqrt(y.c*y.c+y.d*y.d),_=Math.sqrt(a*a+h*h),w>1e-5&&(w=(w+(_-w+this.data.offsetScaleY)*s)/w),y.c*=w,y.d*=w,b=!0}if(r>0){const w=y.c,_=y.d,E=Math.atan2(_,w);let S=Math.atan2(h,a)-Math.atan2(c,l)-(E-Math.atan2(y.b,y.a));S>M.PI?S-=M.PI2:S<-M.PI&&(S+=M.PI2),S=E+(S+f)*r;const T=Math.sqrt(w*w+_*_);y.c=Math.cos(S)*T,y.d=Math.sin(S)*T,b=!0}b&&(x.appliedValid=!1)}}applyRelativeWorld(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,l=o.a,a=o.c,c=o.b,h=o.d,d=l*h-a*c>0?M.degRad:-M.degRad,u=this.data.offsetRotation*d,f=this.data.offsetShearY*d,m=this.bones;for(let p=0,g=m.length;p<g;p++){const x=m[p];let b=!1;const y=x.matrix;if(t!=0){const w=y.a,_=y.c,E=y.b,S=y.d;let T=Math.atan2(c,l)+u;T>M.PI?T-=M.PI2:T<-M.PI&&(T+=M.PI2),T*=t;const A=Math.cos(T),C=Math.sin(T);y.a=A*w-C*E,y.c=A*_-C*S,y.b=C*w+A*E,y.d=C*_+A*S,b=!0}if(e!=0){const w=this.temp;i.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),y.tx+=w.x*e,y.ty+=w.y*e,b=!0}if(s>0){let w=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*s+1;y.a*=w,y.b*=w,w=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleY)*s+1,y.c*=w,y.d*=w,b=!0}if(r>0){let w=Math.atan2(h,a)-Math.atan2(c,l);w>M.PI?w-=M.PI2:w<-M.PI&&(w+=M.PI2);const _=y.c,E=y.d;w=Math.atan2(E,_)+(w-M.PI/2+f)*r;const S=Math.sqrt(_*_+E*E);y.c=Math.cos(w)*S,y.d=Math.sin(w)*S,b=!0}b&&(x.appliedValid=!1)}}applyAbsoluteLocal(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let l=0,a=o.length;l<a;l++){const c=o[l];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;if(t!=0){let g=i.arotation-h+this.data.offsetRotation;g-=(16384-(16384.499999999996-g/360|0))*360,h+=g*t}let d=c.ax,u=c.ay;e!=0&&(d+=(i.ax-d+this.data.offsetX)*e,u+=(i.ay-u+this.data.offsetY)*e);let f=c.ascaleX,m=c.ascaleY;s>0&&(f>1e-5&&(f=(f+(i.ascaleX-f+this.data.offsetScaleX)*s)/f),m>1e-5&&(m=(m+(i.ascaleY-m+this.data.offsetScaleY)*s)/m));const p=c.ashearY;if(r>0){let g=i.ashearY-p+this.data.offsetShearY;g-=(16384-(16384.499999999996-g/360|0))*360,c.shearY+=g*r}c.updateWorldTransformWith(d,u,h,f,m,c.ashearX,p)}}applyRelativeLocal(){const t=this.rotateMix,e=this.translateMix,s=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();const o=this.bones;for(let l=0,a=o.length;l<a;l++){const c=o[l];c.appliedValid||c.updateAppliedTransform();let h=c.arotation;t!=0&&(h+=(i.arotation+this.data.offsetRotation)*t);let d=c.ax,u=c.ay;e!=0&&(d+=(i.ax+this.data.offsetX)*e,u+=(i.ay+this.data.offsetY)*e);let f=c.ascaleX,m=c.ascaleY;s>0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*s+1),m>1e-5&&(m*=(i.ascaleY-1+this.data.offsetScaleY)*s+1));let p=c.ashearY;r>0&&(p+=(i.ashearY+this.data.offsetShearY)*r),c.updateWorldTransformWith(d,u,h,f,m,c.ashearX,p)}}getOrder(){return this.data.order}};const Gi=class{constructor(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,t==null)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(let e=0;e<t.bones.length;e++){const s=t.bones[e];let r;if(s.parent==null)r=new Wc(s,this,null);else{const i=this.bones[s.parent.index];r=new Wc(s,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(let e=0;e<t.slots.length;e++){const s=t.slots[e],r=this.bones[s.boneData.index],i=new qh(s,r);this.slots.push(i),this.drawOrder.push(i)}this.ikConstraints=new Array;for(let e=0;e<t.ikConstraints.length;e++){const s=t.ikConstraints[e];this.ikConstraints.push(new hg(s,this))}this.transformConstraints=new Array;for(let e=0;e<t.transformConstraints.length;e++){const s=t.transformConstraints[e];this.transformConstraints.push(new fg(s,this))}this.pathConstraints=new Array;for(let e=0;e<t.pathConstraints.length;e++){const s=t.pathConstraints[e];this.pathConstraints.push(new vi(s,this))}this.color=new tt(1,1,1,1),this.updateCache()}updateCache(){const t=this._updateCache;t.length=0,this.updateCacheReset.length=0;const e=this.bones;for(let h=0,d=e.length;h<d;h++)e[h].sorted=!1;const s=this.ikConstraints,r=this.transformConstraints,i=this.pathConstraints,o=s.length,l=r.length,a=i.length,c=o+l+a;t:for(let h=0;h<c;h++){for(let d=0;d<o;d++){const u=s[d];if(u.data.order==h){this.sortIkConstraint(u);continue t}}for(let d=0;d<l;d++){const u=r[d];if(u.data.order==h){this.sortTransformConstraint(u);continue t}}for(let d=0;d<a;d++){const u=i[d];if(u.data.order==h){this.sortPathConstraint(u);continue t}}}for(let h=0,d=e.length;h<d;h++)this.sortBone(e[h])}sortIkConstraint(t){const e=t.target;this.sortBone(e);const s=t.bones,r=s[0];if(this.sortBone(r),s.length>1){const i=s[s.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),s[s.length-1].sorted=!0}sortPathConstraint(t){const e=t.target,s=e.data.index,r=e.bone;this.skin!=null&&this.sortPathConstraintAttachment(this.skin,s,r),this.data.defaultSkin!=null&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,s,r);for(let a=0,c=this.data.skins.length;a<c;a++)this.sortPathConstraintAttachment(this.data.skins[a],s,r);const i=e.getAttachment();i instanceof ta&&this.sortPathConstraintAttachmentWith(i,r);const o=t.bones,l=o.length;for(let a=0;a<l;a++)this.sortBone(o[a]);this._updateCache.push(t);for(let a=0;a<l;a++)this.sortReset(o[a].children);for(let a=0;a<l;a++)o[a].sorted=!0}sortTransformConstraint(t){this.sortBone(t.target);const e=t.bones,s=e.length;if(t.data.local)for(let r=0;r<s;r++){const i=e[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(let r=0;r<s;r++)this.sortBone(e[r]);this._updateCache.push(t);for(let r=0;r<s;r++)this.sortReset(e[r].children);for(let r=0;r<s;r++)e[r].sorted=!0}sortPathConstraintAttachment(t,e,s){const r=t.attachments[e];if(r)for(const i in r)this.sortPathConstraintAttachmentWith(r[i],s)}sortPathConstraintAttachmentWith(t,e){if(!(t instanceof ta))return;const s=t.bones;if(s==null)this.sortBone(e);else{const r=this.bones;let i=0;for(;i<s.length;){const o=s[i++];for(let l=i+o;i<l;i++){const a=s[i];this.sortBone(r[a])}}}}sortBone(t){if(t.sorted)return;const e=t.parent;e!=null&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}sortReset(t){for(let e=0,s=t.length;e<s;e++){const r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}}updateWorldTransform(){const t=this.updateCacheReset;for(let s=0,r=t.length;s<r;s++){const i=t[s];i.ax=i.x,i.ay=i.y,i.arotation=i.rotation,i.ascaleX=i.scaleX,i.ascaleY=i.scaleY,i.ashearX=i.shearX,i.ashearY=i.shearY,i.appliedValid=!0}const e=this._updateCache;for(let s=0,r=e.length;s<r;s++)e[s].update()}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const t=this.bones;for(let i=0,o=t.length;i<o;i++)t[i].setToSetupPose();const e=this.ikConstraints;for(let i=0,o=e.length;i<o;i++){const l=e[i];l.bendDirection=l.data.bendDirection,l.mix=l.data.mix}const s=this.transformConstraints;for(let i=0,o=s.length;i<o;i++){const l=s[i],a=l.data;l.rotateMix=a.rotateMix,l.translateMix=a.translateMix,l.scaleMix=a.scaleMix,l.shearMix=a.shearMix}const r=this.pathConstraints;for(let i=0,o=r.length;i<o;i++){const l=r[i],a=l.data;l.position=a.position,l.spacing=a.spacing,l.rotateMix=a.rotateMix,l.translateMix=a.translateMix}}setSlotsToSetupPose(){const t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(let e=0,s=t.length;e<s;e++)t[e].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++)if(e[s].data.name==t)return s;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++)if(e[s].data.name==t)return s;return-1}setSkinByName(t){const e=this.data.findSkin(t);if(e==null)throw new Error(`Skin not found: ${t}`);this.setSkin(e)}setSkin(t){if(t!=null)if(this.skin!=null)t.attachAll(this,this.skin);else{const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s],o=i.data.attachmentName;if(o!=null){const l=t.getAttachment(s,o);l!=null&&i.setAttachment(l)}}}this.skin=t}getAttachmentByName(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)}getAttachment(t,e){if(e==null)throw new Error("attachmentName cannot be null.");if(this.skin!=null){const s=this.skin.getAttachment(t,e);if(s!=null)return s}return this.data.defaultSkin!=null?this.data.defaultSkin.getAttachment(t,e):null}setAttachment(t,e){if(t==null)throw new Error("slotName cannot be null.");const s=this.slots;for(let r=0,i=s.length;r<i;r++){const o=s[r];if(o.data.name==t){let l=null;if(e!=null&&(l=this.getAttachment(r,e),l==null))throw new Error(`Attachment not found: ${e}, for slot: ${t}`);o.setAttachment(l);return}}throw new Error(`Slot not found: ${t}`)}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==t)return i}return null}getBounds(t,e,s){if(t==null)throw new Error("offset cannot be null.");if(e==null)throw new Error("size cannot be null.");const r=this.drawOrder;let i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(let c=0,h=r.length;c<h;c++){const d=r[c];let u=0,f=null;const m=d.getAttachment();if(m instanceof At)u=8,f=Y.setArraySize(s,u,0),m.computeWorldVertices(d.bone,f,0,2);else if(m instanceof Hh){const p=m;u=p.worldVerticesLength,f=Y.setArraySize(s,u,0),p.computeWorldVertices(d,0,u,f,0,2)}if(f!=null)for(let p=0,g=f.length;p<g;p+=2){const x=f[p],b=f[p+1];i=Math.min(i,x),o=Math.min(o,b),l=Math.max(l,x),a=Math.max(a,b)}}t.set(i,o),e.set(l-i,a-o)}update(t){this.time+=t}get flipX(){return this.scaleX==-1}set flipX(t){Gi.deprecatedWarning1||(Gi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=t?1:-1}get flipY(){return this.scaleY==-1}set flipY(t){Gi.deprecatedWarning1||(Gi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=t?1:-1}};let Qh=Gi;Qh.deprecatedWarning1=!1;let aE=class extends kh{},mg=class{constructor(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}findBone(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findBoneIndex(t){if(t==null)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSlot(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findSlotIndex(t){if(t==null)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSkin(t){if(t==null)throw new Error("skinName cannot be null.");const e=this.skins;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findEvent(t){if(t==null)throw new Error("eventDataName cannot be null.");const e=this.events;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(t==null)throw new Error("animationName cannot be null.");const e=this.animations;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(t==null)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}},pg=class{constructor(t,e,s){if(this.color=new tt(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(e==null)throw new Error("name cannot be null.");if(s==null)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}},gg=class{constructor(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,t==null)throw new Error("name cannot be null.");this.name=t}},xg=class{constructor(t){if(this.attachments=new Array,t==null)throw new Error("name cannot be null.");this.name=t}addAttachment(t,e,s){if(s==null)throw new Error("attachment cannot be null.");const r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=s}getAttachment(t,e){const s=this.attachments[t];return s?s[e]:null}attachAll(t,e){let s=0;for(let r=0;r<t.slots.length;r++){const i=t.slots[r],o=i.getAttachment();if(o&&s<e.attachments.length){const l=e.attachments[s];for(const a in l){const c=l[a];if(o==c){const h=this.getAttachment(s,a);h!=null&&i.setAttachment(h);break}}}s++}}},bg=class si{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new mg,r=typeof t=="string"?JSON.parse(t):t,i=r.skeleton;if(i!=null&&(s.hash=i.hash,s.version=i.spine,s.width=i.width,s.height=i.height,s.fps=i.fps,s.imagesPath=i.images),r.bones)for(let o=0;o<r.bones.length;o++){const l=r.bones[o];let a=null;const c=this.getValue(l,"parent",null);if(c!=null&&(a=s.findBone(c),a==null))throw new Error(`Parent bone not found: ${c}`);const h=new og(s.bones.length,l.name,a);h.length=this.getValue(l,"length",0)*e,h.x=this.getValue(l,"x",0)*e,h.y=this.getValue(l,"y",0)*e,h.rotation=this.getValue(l,"rotation",0),h.scaleX=this.getValue(l,"scaleX",1),h.scaleY=this.getValue(l,"scaleY",1),h.shearX=this.getValue(l,"shearX",0),h.shearY=this.getValue(l,"shearY",0),h.transformMode=si.transformModeFromString(this.getValue(l,"transform","normal")),s.bones.push(h)}if(r.slots)for(let o=0;o<r.slots.length;o++){const l=r.slots[o],a=l.name,c=l.bone,h=s.findBone(c);if(h==null)throw new Error(`Slot bone not found: ${c}`);const d=new pg(s.slots.length,a,h),u=this.getValue(l,"color",null);u!=null&&d.color.setFromString(u);const f=this.getValue(l,"dark",null);f!=null&&(d.darkColor=new tt(1,1,1,1),d.darkColor.setFromString(f)),d.attachmentName=this.getValue(l,"attachment",null),d.blendMode=si.blendModeFromString(this.getValue(l,"blend","normal")),s.slots.push(d)}if(r.ik)for(let o=0;o<r.ik.length;o++){const l=r.ik[o],a=new dg(l.name);a.order=this.getValue(l,"order",0);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`IK bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findBone(c),a.target==null)throw new Error(`IK target bone not found: ${c}`);a.bendDirection=this.getValue(l,"bendPositive",!0)?1:-1,a.mix=this.getValue(l,"mix",1),s.ikConstraints.push(a)}if(r.transform)for(let o=0;o<r.transform.length;o++){const l=r.transform[o],a=new gg(l.name);a.order=this.getValue(l,"order",0);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`Transform constraint bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findBone(c),a.target==null)throw new Error(`Transform constraint target bone not found: ${c}`);a.local=this.getValue(l,"local",!1),a.relative=this.getValue(l,"relative",!1),a.offsetRotation=this.getValue(l,"rotation",0),a.offsetX=this.getValue(l,"x",0)*e,a.offsetY=this.getValue(l,"y",0)*e,a.offsetScaleX=this.getValue(l,"scaleX",0),a.offsetScaleY=this.getValue(l,"scaleY",0),a.offsetShearY=this.getValue(l,"shearY",0),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),a.scaleMix=this.getValue(l,"scaleMix",1),a.shearMix=this.getValue(l,"shearMix",1),s.transformConstraints.push(a)}if(r.path)for(let o=0;o<r.path.length;o++){const l=r.path[o],a=new ug(l.name);a.order=this.getValue(l,"order",0);for(let h=0;h<l.bones.length;h++){const d=l.bones[h],u=s.findBone(d);if(u==null)throw new Error(`Transform constraint bone not found: ${d}`);a.bones.push(u)}const c=l.target;if(a.target=s.findSlot(c),a.target==null)throw new Error(`Path target slot not found: ${c}`);a.positionMode=si.positionModeFromString(this.getValue(l,"positionMode","percent")),a.spacingMode=si.spacingModeFromString(this.getValue(l,"spacingMode","length")),a.rotateMode=si.rotateModeFromString(this.getValue(l,"rotateMode","tangent")),a.offsetRotation=this.getValue(l,"rotation",0),a.position=this.getValue(l,"position",0),a.positionMode==fe.Fixed&&(a.position*=e),a.spacing=this.getValue(l,"spacing",0),(a.spacingMode==Os.Length||a.spacingMode==Os.Fixed)&&(a.spacing*=e),a.rotateMix=this.getValue(l,"rotateMix",1),a.translateMix=this.getValue(l,"translateMix",1),s.pathConstraints.push(a)}if(r.skins)for(const o in r.skins){const l=r.skins[o],a=new xg(o);for(const c in l){const h=s.findSlotIndex(c);if(h==-1)throw new Error(`Slot not found: ${c}`);const d=l[c];for(const u in d){const f=this.readAttachment(d[u],a,h,u,s);f!=null&&a.addAttachment(h,u,f)}}s.skins.push(a),a.name=="default"&&(s.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],c=a.skin==null?s.defaultSkin:s.findSkin(a.skin);if(c==null)throw new Error(`Skin not found: ${a.skin}`);const h=c.getAttachment(a.slotIndex,a.parent);if(h==null)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.setParentMesh(h)}if(this.linkedMeshes.length=0,r.events)for(const o in r.events){const l=r.events[o],a=new cg(o);a.intValue=this.getValue(l,"int",0),a.floatValue=this.getValue(l,"float",0),a.stringValue=this.getValue(l,"string",""),a.audioPath=this.getValue(l,"audio",null),a.audioPath!=null&&(a.volume=this.getValue(l,"volume",1),a.balance=this.getValue(l,"balance",0)),s.events.push(a)}if(r.animations)for(const o in r.animations){const l=r.animations[o];this.readAnimation(l,o,s)}return s}readAttachment(t,e,s,r,i){const o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":{const a=this.getValue(t,"path",r),c=this.attachmentLoader.newRegionAttachment(e,r,a);if(c==null)return null;c.path=a,c.x=this.getValue(t,"x",0)*o,c.y=this.getValue(t,"y",0)*o,c.scaleX=this.getValue(t,"scaleX",1),c.scaleY=this.getValue(t,"scaleY",1),c.rotation=this.getValue(t,"rotation",0),c.width=t.width*o,c.height=t.height*o;const h=this.getValue(t,"color",null);return h!=null&&c.color.setFromString(h),c}case"boundingbox":{const a=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(a==null)return null;this.readVertices(t,a,t.vertexCount<<1);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"mesh":case"linkedmesh":{const a=this.getValue(t,"path",r),c=this.attachmentLoader.newMeshAttachment(e,r,a);if(c==null)return null;c.path=a;const h=this.getValue(t,"color",null);h!=null&&c.color.setFromString(h);const d=this.getValue(t,"parent",null);if(d!=null)return c.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new oE(c,this.getValue(t,"skin",null),s,d)),c;const u=t.uvs;return this.readVertices(t,c,u.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(u),c.hullLength=this.getValue(t,"hull",0)*2,c}case"path":{const a=this.attachmentLoader.newPathAttachment(e,r);if(a==null)return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);const c=t.vertexCount;this.readVertices(t,a,c<<1);const h=Y.newArray(c/3,0);for(let u=0;u<t.lengths.length;u++)h[u]=t.lengths[u]*o;a.lengths=h;const d=this.getValue(t,"color",null);return d!=null&&a.color.setFromString(d),a}case"point":{const a=this.attachmentLoader.newPointAttachment(e,r);if(a==null)return null;a.x=this.getValue(t,"x",0)*o,a.y=this.getValue(t,"y",0)*o,a.rotation=this.getValue(t,"rotation",0);const c=this.getValue(t,"color",null);return c!=null&&a.color.setFromString(c),a}case"clipping":{const a=this.attachmentLoader.newClippingAttachment(e,r);if(a==null)return null;const c=this.getValue(t,"end",null);if(c!=null){const u=i.findSlot(c);if(u==null)throw new Error(`Clipping end slot not found: ${c}`);a.endSlot=u}const h=t.vertexCount;this.readVertices(t,a,h<<1);const d=this.getValue(t,"color",null);return d!=null&&a.color.setFromString(d),a}}return null}readVertices(t,e,s){const r=this.scale;e.worldVerticesLength=s;const i=t.vertices;if(s==i.length){const a=Y.toFloatArray(i);if(r!=1)for(let c=0,h=i.length;c<h;c++)a[c]*=r;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,c=i.length;a<c;){const h=i[a++];l.push(h);for(let d=a+h*4;a<d;a+=4)l.push(i[a]),o.push(i[a+1]*r),o.push(i[a+2]*r),o.push(i[a+3])}e.bones=l,e.vertices=Y.toFloatArray(o)}readAnimation(t,e,s){const r=this.scale,i=new Array;let o=0;if(t.slots)for(const a in t.slots){const c=t.slots[a],h=s.findSlotIndex(a);if(h==-1)throw new Error(`Slot not found: ${a}`);for(const d in c){const u=c[d];if(d=="attachment"){const f=new uo(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p];f.setFrame(m++,g.time,g.name)}i.push(f),o=Math.max(o,f.frames[f.getFrameCount()-1])}else if(d=="color"){const f=new fs(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p],x=new tt;x.setFromString(g.color||"ffffffff"),f.setFrame(m,g.time,x.r,x.g,x.b,x.a),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*fs.ENTRIES])}else if(d=="twoColor"){const f=new ke(u.length);f.slotIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p],x=new tt,b=new tt;x.setFromString(g.light),b.setFromString(g.dark),f.setFrame(m,g.time,x.r,x.g,x.b,x.a,b.r,b.g,b.b),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*ke.ENTRIES])}else throw new Error(`Invalid timeline type for a slot: ${d} (${a})`)}}if(t.bones)for(const a in t.bones){const c=t.bones[a],h=s.findBoneIndex(a);if(h==-1)throw new Error(`Bone not found: ${a}`);for(const d in c){const u=c[d];if(d==="rotate"){const f=new We(u.length);f.boneIndex=h;let m=0;for(let p=0;p<u.length;p++){const g=u[p];f.setFrame(m,g.time,g.angle),this.readCurve(g,f,m),m++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*We.ENTRIES])}else if(d==="translate"||d==="scale"||d==="shear"){let f=null,m=1;d==="scale"?f=new eg(u.length):d==="shear"?f=new sg(u.length):(f=new qs(u.length),m=r),f.boneIndex=h;let p=0;for(let g=0;g<u.length;g++){const x=u[g],b=this.getValue(x,"x",0),y=this.getValue(x,"y",0);f.setFrame(p,x.time,b*m,y*m),this.readCurve(x,f,p),p++}i.push(f),o=Math.max(o,f.frames[(f.getFrameCount()-1)*qs.ENTRIES])}else throw new Error(`Invalid timeline type for a bone: ${d} (${a})`)}}if(t.ik)for(const a in t.ik){const c=t.ik[a],h=s.findIkConstraint(a),d=new ms(c.length);d.ikConstraintIndex=s.ikConstraints.indexOf(h);let u=0;for(let f=0;f<c.length;f++){const m=c[f];d.setFrame(u,m.time,this.getValue(m,"mix",1),this.getValue(m,"bendPositive",!0)?1:-1,this.getValue(m,"compress",!1),this.getValue(m,"stretch",!1)),this.readCurve(m,d,u),u++}i.push(d),o=Math.max(o,d.frames[(d.getFrameCount()-1)*ms.ENTRIES])}if(t.transform)for(const a in t.transform){const c=t.transform[a],h=s.findTransformConstraint(a),d=new ps(c.length);d.transformConstraintIndex=s.transformConstraints.indexOf(h);let u=0;for(let f=0;f<c.length;f++){const m=c[f];d.setFrame(u,m.time,this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,d,u),u++}i.push(d),o=Math.max(o,d.frames[(d.getFrameCount()-1)*ps.ENTRIES])}if(t.paths)for(const a in t.paths){const c=t.paths[a],h=s.findPathConstraintIndex(a);if(h==-1)throw new Error(`Path constraint not found: ${a}`);const d=s.pathConstraints[h];for(const u in c){const f=c[u];if(u==="position"||u==="spacing"){let m=null,p=1;u==="spacing"?(m=new ig(f.length),(d.spacingMode==Os.Length||d.spacingMode==Os.Fixed)&&(p=r)):(m=new cr(f.length),d.positionMode==fe.Fixed&&(p=r)),m.pathConstraintIndex=h;let g=0;for(let x=0;x<f.length;x++){const b=f[x];m.setFrame(g,b.time,this.getValue(b,u,0)*p),this.readCurve(b,m,g),g++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*cr.ENTRIES])}else if(u==="mix"){const m=new Nn(f.length);m.pathConstraintIndex=h;let p=0;for(let g=0;g<f.length;g++){const x=f[g];m.setFrame(p,x.time,this.getValue(x,"rotateMix",1),this.getValue(x,"translateMix",1)),this.readCurve(x,m,p),p++}i.push(m),o=Math.max(o,m.frames[(m.getFrameCount()-1)*Nn.ENTRIES])}}}if(t.deform)for(const a in t.deform){const c=t.deform[a],h=s.findSkin(a);if(h!=null)for(const d in c){const u=c[d],f=s.findSlotIndex(d);if(f==-1)throw new Error(`Slot not found: ${u.name}`);for(const m in u){const p=u[m],g=h.getAttachment(f,m);if(g==null)throw new Error(`Deform attachment not found: ${p.name}`);const x=g.bones!=null,b=g.vertices,y=x?b.length/3*2:b.length,w=new ng(p.length);w.slotIndex=f,w.attachment=g;let _=0;for(let E=0;E<p.length;E++){const S=p[E];let T;const A=this.getValue(S,"vertices",null);if(A==null)T=x?Y.newFloatArray(y):b;else{T=Y.newFloatArray(y);const C=this.getValue(S,"offset",0);if(Y.arrayCopy(A,0,T,C,A.length),r!=1)for(let I=C,P=I+A.length;I<P;I++)T[I]*=r;if(!x)for(let I=0;I<y;I++)T[I]+=b[I]}w.setFrame(_,S.time,T),this.readCurve(S,w,_),_++}i.push(w),o=Math.max(o,w.frames[w.getFrameCount()-1])}}}let l=t.drawOrder;if(l==null&&(l=t.draworder),l!=null){const a=new fo(l.length),c=s.slots.length;let h=0;for(let d=0;d<l.length;d++){const u=l[d];let f=null;const m=this.getValue(u,"offsets",null);if(m!=null){f=Y.newArray(c,-1);const p=Y.newArray(c-m.length,0);let g=0,x=0;for(let b=0;b<m.length;b++){const y=m[b],w=s.findSlotIndex(y.slot);if(w==-1)throw new Error(`Slot not found: ${y.slot}`);for(;g!=w;)p[x++]=g++;f[g+y.offset]=g++}for(;g<c;)p[x++]=g++;for(let b=c-1;b>=0;b--)f[b]==-1&&(f[b]=p[--x])}a.setFrame(h++,u.time,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(t.events){const a=new rg(t.events.length);let c=0;for(let h=0;h<t.events.length;h++){const d=t.events[h],u=s.findEvent(d.name);if(u==null)throw new Error(`Event not found: ${d.name}`);const f=new lg(Y.toSinglePrecision(d.time),u);f.intValue=this.getValue(d,"int",u.intValue),f.floatValue=this.getValue(d,"float",u.floatValue),f.stringValue=this.getValue(d,"string",u.stringValue),f.data.audioPath!=null&&(f.volume=this.getValue(d,"volume",1),f.balance=this.getValue(d,"balance",0)),a.setFrame(c++,f)}i.push(a),o=Math.max(o,a.frames[a.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");s.animations.push(new Ie(e,i,o))}readCurve(t,e,s){if(t.curve){if(t.curve==="stepped")e.setStepped(s);else if(Object.prototype.toString.call(t.curve)==="[object Array]"){const r=t.curve;e.setCurve(s,r[0],r[1],r[2],r[3])}}}getValue(t,e,s){return t[e]!==void 0?t[e]:s}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ht.NORMAL;if(t=="additive")return ht.ADD;if(t=="multiply")return ht.MULTIPLY;if(t=="screen")return ht.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}static positionModeFromString(t){if(t=t.toLowerCase(),t=="fixed")return fe.Fixed;if(t=="percent")return fe.Percent;throw new Error(`Unknown position mode: ${t}`)}static spacingModeFromString(t){if(t=t.toLowerCase(),t=="length")return Os.Length;if(t=="fixed")return Os.Fixed;if(t=="percent")return Os.Percent;throw new Error(`Unknown position mode: ${t}`)}static rotateModeFromString(t){if(t=t.toLowerCase(),t=="tangent")return we.Tangent;if(t=="chain")return we.Chain;if(t=="chainscale")return we.ChainScale;throw new Error(`Unknown rotate mode: ${t}`)}static transformModeFromString(t){if(t=t.toLowerCase(),t=="normal")return vt.Normal;if(t=="onlytranslation")return vt.OnlyTranslation;if(t=="norotationorreflection")return vt.NoRotationOrReflection;if(t=="noscale")return vt.NoScale;if(t=="noscaleorreflection")return vt.NoScaleOrReflection;throw new Error(`Unknown transform mode: ${t}`)}},oE=class{constructor(t,e,s,r){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r}},lE=class extends yi{createSkeleton(t){this.skeleton=new Qh(t),this.skeleton.updateWorldTransform(),this.stateData=new Zh(t),this.state=new pn(this.stateData)}};const cE=Object.freeze(Object.defineProperty({__proto__:null,Animation:Ie,AnimationState:pn,AnimationStateAdapter2:iE,AnimationStateData:Zh,AtlasAttachmentLoader:ag,Attachment:zh,AttachmentTimeline:uo,Bone:Wc,BoneData:og,BoundingBoxAttachment:qp,ClippingAttachment:Kp,ColorTimeline:fs,CurveTimeline:os,DeformTimeline:ng,DrawOrderTimeline:fo,Event:lg,EventData:cg,EventQueue:Kh,EventTimeline:rg,EventType:es,IkConstraint:hg,IkConstraintData:dg,IkConstraintTimeline:ms,JitterEffect:rE,MeshAttachment:Hh,PathAttachment:ta,PathConstraint:vi,PathConstraintData:ug,PathConstraintMixTimeline:Nn,PathConstraintPositionTimeline:cr,PathConstraintSpacingTimeline:ig,PointAttachment:Zp,RegionAttachment:At,RotateTimeline:We,ScaleTimeline:eg,ShearTimeline:sg,Skeleton:Qh,SkeletonBounds:aE,SkeletonData:mg,SkeletonJson:bg,Skin:xg,Slot:qh,SlotData:pg,SpacingMode:Os,Spine:lE,SwirlEffect:Jp,TimelineType:tg,TrackEntry:Vo,TransformConstraint:fg,TransformConstraintData:gg,TransformConstraintTimeline:ps,TranslateTimeline:qs,TwoColorTimeline:ke,VertexAttachment:ur},Symbol.toStringTag,{value:"Module"}));class Jh{constructor(t){if(!t)throw new Error("name cannot be null.");this.name=t}}const yg=class extends Jh{constructor(n){super(n),this.id=yg.nextID++,this.bones=null,this.vertices=[],this.worldVerticesLength=0,this.timelineAttachment=this}computeWorldVerticesOld(n,t){this.computeWorldVertices(n,0,this.worldVerticesLength,t,0,2)}computeWorldVertices(n,t,e,s,r,i){e=r+(e>>1)*i;const o=n.bone.skeleton,l=n.deform;let a=this.vertices;const c=this.bones;if(!c){l.length>0&&(a=l);const f=n.bone.matrix,m=f.tx,p=f.ty,g=f.a,x=f.c,b=f.b,y=f.d;for(let w=t,_=r;_<e;w+=2,_+=i){const E=a[w],S=a[w+1];s[_]=E*g+S*x+m,s[_+1]=E*b+S*y+p}return}let h=0,d=0;for(let f=0;f<t;f+=2){const m=c[h];h+=m+1,d+=m}const u=o.bones;if(l.length==0)for(let f=r,m=d*3;f<e;f+=i){let p=0,g=0,x=c[h++];for(x+=h;h<x;h++,m+=3){const b=u[c[h]].matrix,y=a[m],w=a[m+1],_=a[m+2];p+=(y*b.a+w*b.c+b.tx)*_,g+=(y*b.b+w*b.d+b.ty)*_}s[f]=p,s[f+1]=g}else{const f=l;for(let m=r,p=d*3,g=d<<1;m<e;m+=i){let x=0,b=0,y=c[h++];for(y+=h;h<y;h++,p+=3,g+=2){const w=u[c[h]].matrix,_=a[p]+f[g],E=a[p+1]+f[g+1],S=a[p+2];x+=(_*w.a+E*w.c+w.tx)*S,b+=(_*w.b+E*w.d+w.ty)*S}s[m]=x,s[m+1]=b}}}copyTo(n){this.bones?(n.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,n.bones,0,this.bones.length)):n.bones=null,this.vertices&&(n.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,n.vertices,0,this.vertices.length)),n.worldVerticesLength=this.worldVerticesLength,n.timelineAttachment=this.timelineAttachment}};let Ks=yg;Ks.nextID=0;class Uo extends Ks{constructor(t){super(t),this.type=Mt.BoundingBox,this.color=new tt(1,1,1,1)}copy(){const t=new Uo(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class jo extends Ks{constructor(t){super(t),this.type=Mt.Clipping,this.endSlot=null,this.color=new tt(.2275,.2275,.8078,1)}copy(){const t=new jo(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Br extends Ks{constructor(t,e){super(t),this.type=Mt.Mesh,this.region=null,this.triangles=[],this.color=new tt(1,1,1,1),this.width=0,this.height=0,this.hullLength=0,this.edges=[],this.parentMesh=null,this.sequence=null,this.tempColor=new tt(0,0,0,0),this.path=e}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();const t=new Br(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,e,s,r,i,o){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,e,s,r,i,o)}newLinkedMesh(){const t=new Br(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t}}class Dr extends Ks{constructor(t){super(t),this.type=Mt.Path,this.lengths=[],this.closed=!1,this.constantSpeed=!1,this.color=new tt(1,1,1,1)}copy(){const t=new Dr(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Xo extends Ks{constructor(t){super(t),this.type=Mt.Point,this.x=0,this.y=0,this.rotation=0,this.color=new tt(.38,.94,0,1)}computeWorldPosition(t,e){const s=t.matrix;return e.x=this.x*s.a+this.y*s.c+t.worldX,e.y=this.x*s.b+this.y*s.d+t.worldY,e}computeWorldRotation(t){const e=t.matrix,s=M.cosDeg(this.rotation),r=M.sinDeg(this.rotation),i=s*e.a+r*e.c,o=s*e.b+r*e.d;return Math.atan2(o,i)*M.radDeg}copy(){const t=new Xo(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const wg=class extends Jh{constructor(n,t){super(n),this.type=Mt.Region,this.x=0,this.y=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.width=0,this.height=0,this.color=new tt(1,1,1,1),this.rendererObject=null,this.region=null,this.sequence=null,this.offset=Y.newFloatArray(8),this.uvs=Y.newFloatArray(8),this.tempColor=new tt(1,1,1,1),this.path=t}updateRegion(){if(!this.region)throw new Error("Region not set.");const n=this.region,t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,s=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,i=s+this.region.width*t,o=r+this.region.height*e,l=this.rotation*Math.PI/180,a=Math.cos(l),c=Math.sin(l),h=this.x,d=this.y,u=s*a+h,f=s*c,m=r*a+d,p=r*c,g=i*a+h,x=i*c,b=o*a+d,y=o*c,w=this.offset;w[0]=u-p,w[1]=m+f,w[2]=u-y,w[3]=b+f,w[4]=g-y,w[5]=b+x,w[6]=g-p,w[7]=m+x;const _=this.uvs;n.degrees==90?(_[2]=n.u,_[3]=n.v2,_[4]=n.u,_[5]=n.v,_[6]=n.u2,_[7]=n.v,_[0]=n.u2,_[1]=n.v2):(_[0]=n.u,_[1]=n.v2,_[2]=n.u,_[3]=n.v,_[4]=n.u2,_[5]=n.v,_[6]=n.u2,_[7]=n.v2)}computeWorldVertices(n,t,e,s){this.sequence!=null&&this.sequence.apply(n,this);const r=n.bone,i=this.offset,o=r.matrix,l=o.tx,a=o.ty,c=o.a,h=o.c,d=o.b,u=o.d;let f=0,m=0;f=i[0],m=i[1],t[e]=f*c+m*h+l,t[e+1]=f*d+m*u+a,e+=s,f=i[2],m=i[3],t[e]=f*c+m*h+l,t[e+1]=f*d+m*u+a,e+=s,f=i[4],m=i[5],t[e]=f*c+m*h+l,t[e+1]=f*d+m*u+a,e+=s,f=i[6],m=i[7],t[e]=f*c+m*h+l,t[e+1]=f*d+m*u+a}copy(){const n=new wg(this.name,this.path);return n.region=this.region,n.rendererObject=this.rendererObject,n.x=this.x,n.y=this.y,n.scaleX=this.scaleX,n.scaleY=this.scaleY,n.rotation=this.rotation,n.width=this.width,n.height=this.height,Y.arrayCopy(this.uvs,0,n.uvs,0,8),Y.arrayCopy(this.offset,0,n.offset,0,8),n.color.setFromColor(this.color),n.sequence=this.sequence!=null?this.sequence.copy():null,n}};let Ot=wg;Ot.X1=0;Ot.Y1=1;Ot.C1R=2;Ot.C1G=3;Ot.C1B=4;Ot.C1A=5;Ot.U1=6;Ot.V1=7;Ot.X2=8;Ot.Y2=9;Ot.C2R=10;Ot.C2G=11;Ot.C2B=12;Ot.C2A=13;Ot.U2=14;Ot.V2=15;Ot.X3=16;Ot.Y3=17;Ot.C3R=18;Ot.C3G=19;Ot.C3B=20;Ot.C3A=21;Ot.U3=22;Ot.V3=23;Ot.X4=24;Ot.Y4=25;Ot.C4R=26;Ot.C4G=27;Ot.C4B=28;Ot.C4A=29;Ot.U4=30;Ot.V4=31;const Ya=class{constructor(n){this.id=Ya.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(n)}copy(){const n=new Ya(this.regions.length);return Y.arrayCopy(this.regions,0,n.regions,0,this.regions.length),n.start=this.start,n.digits=this.digits,n.setupIndex=this.setupIndex,n}apply(n,t){let e=n.sequenceIndex;e==-1&&(e=this.setupIndex),e>=this.regions.length&&(e=this.regions.length-1);const s=this.regions[e];t.region!=s&&(t.region=s)}getPath(n,t){let e=n;const s=(this.start+t).toString();for(let r=this.digits-s.length;r>0;r--)e+="0";return e+=s,e}static nextID(){return Ya._nextID++}};let Go=Ya;Go._nextID=0;var cn=(n=>(n[n.hold=0]="hold",n[n.once=1]="once",n[n.loop=2]="loop",n[n.pingpong=3]="pingpong",n[n.onceReverse=4]="onceReverse",n[n.loopReverse=5]="loopReverse",n[n.pingpongReverse=6]="pingpongReverse",n))(cn||{});const td=[0,1,2,3,4,5,6];class Yo{constructor(t,e,s){if(this.timelines=[],this.timelineIds=new Rp,!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=s}setTimelines(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds.clear();for(let e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())}hasTimeline(t){for(let e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1}apply(t,e,s,r,i,o,l,a){if(!t)throw new Error("skeleton cannot be null.");r&&this.duration!=0&&(s%=this.duration,e>0&&(e%=this.duration));const c=this.timelines;for(let h=0,d=c.length;h<d;h++)c[h].apply(t,e,s,i,o,l,a)}}const Yt={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19};class ge{constructor(t,e){this.propertyIds=e,this.frames=Y.newFloatArray(t*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(t,e){const s=t.length;for(let r=1;r<s;r++)if(t[r]>e)return r-1;return s-1}static search(t,e,s){const r=t.length;for(let i=s;i<r;i+=s)if(t[i]>e)return i-s;return r-s}}class Qs extends ge{constructor(t,e,s){super(t,s),this.curves=Y.newFloatArray(t+e*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){const e=this.getFrameCount()+t*18;if(this.curves.length>e){const s=Y.newFloatArray(e);Y.arrayCopy(this.curves,0,s,0,e),this.curves=s}}setBezier(t,e,s,r,i,o,l,a,c,h,d){const u=this.curves;let f=this.getFrameCount()+t*18;s==0&&(u[e]=2+f);const m=(r-o*2+a)*.03,p=(i-l*2+c)*.03,g=((o-a)*3-r+h)*.006,x=((l-c)*3-i+d)*.006;let b=m*2+g,y=p*2+x,w=(o-r)*.3+m+g*.16666667,_=(l-i)*.3+p+x*.16666667,E=r+w,S=i+_;for(let T=f+18;f<T;f+=2)u[f]=E,u[f+1]=S,w+=b,_+=y,b+=g,y+=x,E+=w,S+=_}getBezierValue(t,e,s,r){const i=this.curves;if(i[r]>t){const c=this.frames[e],h=this.frames[e+s];return h+(t-c)/(i[r]-c)*(i[r+1]-h)}const o=r+18;for(r+=2;r<o;r+=2)if(i[r]>=t){const c=i[r-2],h=i[r-1];return h+(t-c)/(i[r]-c)*(i[r+1]-h)}e+=this.getFrameEntries();const l=i[o-2],a=i[o-1];return a+(t-l)/(this.frames[e]-l)*(this.frames[e+s]-a)}}class Js extends Qs{constructor(t,e,s){super(t,e,[s])}getFrameEntries(){return 2}setFrame(t,e,s){t<<=1,this.frames[t]=e,this.frames[t+1]=s}getCurveValue(t){const e=this.frames;let s=e.length-2;for(let i=2;i<=s;i+=2)if(e[i]>t){s=i-2;break}const r=this.curves[s>>1];switch(r){case 0:const i=e[s],o=e[s+1];return o+(t-i)/(e[s+2]-i)*(e[s+2+1]-o);case 1:return e[s+1]}return this.getBezierValue(t,s,1,r-2)}}class $o extends Qs{constructor(t,e,s,r){super(t,e,[s,r])}getFrameEntries(){return 3}setFrame(t,e,s,r){t*=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r}}class ea extends Js{constructor(t,e,s){super(t,e,`${Yt.rotate}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.rotation=a.data.rotation;return;case k.first:a.rotation+=(a.data.rotation-a.rotation)*i}return}let h=this.getCurveValue(s);switch(o){case k.setup:a.rotation=a.data.rotation+h*i;break;case k.first:case k.replace:h+=a.data.rotation-a.rotation;case k.add:a.rotation+=h*i}}}class ed extends $o{constructor(t,e,s){super(t,e,`${Yt.x}|${s}`,`${Yt.y}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.x=a.data.x,a.y=a.data.y;return;case k.first:a.x+=(a.data.x-a.x)*i,a.y+=(a.data.y-a.y)*i}return}let h=0,d=0;const u=ge.search(c,s,3),f=this.curves[u/3];switch(f){case 0:const m=c[u];h=c[u+1],d=c[u+2];const p=(s-m)/(c[u+3]-m);h+=(c[u+3+1]-h)*p,d+=(c[u+3+2]-d)*p;break;case 1:h=c[u+1],d=c[u+2];break;default:h=this.getBezierValue(s,u,1,f-2),d=this.getBezierValue(s,u,2,f+18-2)}switch(o){case k.setup:a.x=a.data.x+h*i,a.y=a.data.y+d*i;break;case k.first:case k.replace:a.x+=(a.data.x+h-a.x)*i,a.y+=(a.data.y+d-a.y)*i;break;case k.add:a.x+=h*i,a.y+=d*i}}}class sd extends Js{constructor(t,e,s){super(t,e,`${Yt.x}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.x=a.data.x;return;case k.first:a.x+=(a.data.x-a.x)*i}return}const h=this.getCurveValue(s);switch(o){case k.setup:a.x=a.data.x+h*i;break;case k.first:case k.replace:a.x+=(a.data.x+h-a.x)*i;break;case k.add:a.x+=h*i}}}class nd extends Js{constructor(t,e,s){super(t,e,`${Yt.y}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.y=a.data.y;return;case k.first:a.y+=(a.data.y-a.y)*i}return}const h=this.getCurveValue(s);switch(o){case k.setup:a.y=a.data.y+h*i;break;case k.first:case k.replace:a.y+=(a.data.y+h-a.y)*i;break;case k.add:a.y+=h*i}}}class rd extends $o{constructor(t,e,s){super(t,e,`${Yt.scaleX}|${s}`,`${Yt.scaleY}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.scaleX=a.data.scaleX,a.scaleY=a.data.scaleY;return;case k.first:a.scaleX+=(a.data.scaleX-a.scaleX)*i,a.scaleY+=(a.data.scaleY-a.scaleY)*i}return}let h,d;const u=ge.search(c,s,3),f=this.curves[u/3];switch(f){case 0:const m=c[u];h=c[u+1],d=c[u+2];const p=(s-m)/(c[u+3]-m);h+=(c[u+3+1]-h)*p,d+=(c[u+3+2]-d)*p;break;case 1:h=c[u+1],d=c[u+2];break;default:h=this.getBezierValue(s,u,1,f-2),d=this.getBezierValue(s,u,2,f+18-2)}if(h*=a.data.scaleX,d*=a.data.scaleY,i==1)o==k.add?(a.scaleX+=h-a.data.scaleX,a.scaleY+=d-a.data.scaleY):(a.scaleX=h,a.scaleY=d);else{let m=0,p=0;if(l==kt.mixOut)switch(o){case k.setup:m=a.data.scaleX,p=a.data.scaleY,a.scaleX=m+(Math.abs(h)*M.signum(m)-m)*i,a.scaleY=p+(Math.abs(d)*M.signum(p)-p)*i;break;case k.first:case k.replace:m=a.scaleX,p=a.scaleY,a.scaleX=m+(Math.abs(h)*M.signum(m)-m)*i,a.scaleY=p+(Math.abs(d)*M.signum(p)-p)*i;break;case k.add:a.scaleX+=(h-a.data.scaleX)*i,a.scaleY+=(d-a.data.scaleY)*i}else switch(o){case k.setup:m=Math.abs(a.data.scaleX)*M.signum(h),p=Math.abs(a.data.scaleY)*M.signum(d),a.scaleX=m+(h-m)*i,a.scaleY=p+(d-p)*i;break;case k.first:case k.replace:m=Math.abs(a.scaleX)*M.signum(h),p=Math.abs(a.scaleY)*M.signum(d),a.scaleX=m+(h-m)*i,a.scaleY=p+(d-p)*i;break;case k.add:a.scaleX+=(h-a.data.scaleX)*i,a.scaleY+=(d-a.data.scaleY)*i}}}}class id extends Js{constructor(t,e,s){super(t,e,`${Yt.scaleX}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.scaleX=a.data.scaleX;return;case k.first:a.scaleX+=(a.data.scaleX-a.scaleX)*i}return}const h=this.getCurveValue(s)*a.data.scaleX;if(i==1)o==k.add?a.scaleX+=h-a.data.scaleX:a.scaleX=h;else{let d=0;if(l==kt.mixOut)switch(o){case k.setup:d=a.data.scaleX,a.scaleX=d+(Math.abs(h)*M.signum(d)-d)*i;break;case k.first:case k.replace:d=a.scaleX,a.scaleX=d+(Math.abs(h)*M.signum(d)-d)*i;break;case k.add:a.scaleX+=(h-a.data.scaleX)*i}else switch(o){case k.setup:d=Math.abs(a.data.scaleX)*M.signum(h),a.scaleX=d+(h-d)*i;break;case k.first:case k.replace:d=Math.abs(a.scaleX)*M.signum(h),a.scaleX=d+(h-d)*i;break;case k.add:a.scaleX+=(h-a.data.scaleX)*i}}}}class ad extends Js{constructor(t,e,s){super(t,e,`${Yt.scaleY}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.scaleY=a.data.scaleY;return;case k.first:a.scaleY+=(a.data.scaleY-a.scaleY)*i}return}const h=this.getCurveValue(s)*a.data.scaleY;if(i==1)o==k.add?a.scaleY+=h-a.data.scaleY:a.scaleY=h;else{let d=0;if(l==kt.mixOut)switch(o){case k.setup:d=a.data.scaleY,a.scaleY=d+(Math.abs(h)*M.signum(d)-d)*i;break;case k.first:case k.replace:d=a.scaleY,a.scaleY=d+(Math.abs(h)*M.signum(d)-d)*i;break;case k.add:a.scaleY+=(h-a.data.scaleY)*i}else switch(o){case k.setup:d=Math.abs(a.data.scaleY)*M.signum(h),a.scaleY=d+(h-d)*i;break;case k.first:case k.replace:d=Math.abs(a.scaleY)*M.signum(h),a.scaleY=d+(h-d)*i;break;case k.add:a.scaleY+=(h-a.data.scaleY)*i}}}}class od extends $o{constructor(t,e,s){super(t,e,`${Yt.shearX}|${s}`,`${Yt.shearY}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.shearX=a.data.shearX,a.shearY=a.data.shearY;return;case k.first:a.shearX+=(a.data.shearX-a.shearX)*i,a.shearY+=(a.data.shearY-a.shearY)*i}return}let h=0,d=0;const u=ge.search(c,s,3),f=this.curves[u/3];switch(f){case 0:const m=c[u];h=c[u+1],d=c[u+2];const p=(s-m)/(c[u+3]-m);h+=(c[u+3+1]-h)*p,d+=(c[u+3+2]-d)*p;break;case 1:h=c[u+1],d=c[u+2];break;default:h=this.getBezierValue(s,u,1,f-2),d=this.getBezierValue(s,u,2,f+18-2)}switch(o){case k.setup:a.shearX=a.data.shearX+h*i,a.shearY=a.data.shearY+d*i;break;case k.first:case k.replace:a.shearX+=(a.data.shearX+h-a.shearX)*i,a.shearY+=(a.data.shearY+d-a.shearY)*i;break;case k.add:a.shearX+=h*i,a.shearY+=d*i}}}class ld extends Js{constructor(t,e,s){super(t,e,`${Yt.shearX}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.shearX=a.data.shearX;return;case k.first:a.shearX+=(a.data.shearX-a.shearX)*i}return}const h=this.getCurveValue(s);switch(o){case k.setup:a.shearX=a.data.shearX+h*i;break;case k.first:case k.replace:a.shearX+=(a.data.shearX+h-a.shearX)*i;break;case k.add:a.shearX+=h*i}}}class cd extends Js{constructor(t,e,s){super(t,e,`${Yt.shearY}|${s}`),this.boneIndex=0,this.boneIndex=s}apply(t,e,s,r,i,o,l){const a=t.bones[this.boneIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.shearY=a.data.shearY;return;case k.first:a.shearY+=(a.data.shearY-a.shearY)*i}return}const h=this.getCurveValue(s);switch(o){case k.setup:a.shearY=a.data.shearY+h*i;break;case k.first:case k.replace:a.shearY+=(a.data.shearY+h-a.shearY)*i;break;case k.add:a.shearY+=h*i}}}class hd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.rgb}|${s}`,`${Yt.alpha}|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 5}setFrame(t,e,s,r,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames,h=a.color;if(s<c[0]){const x=a.data.color;switch(o){case k.setup:h.setFromColor(x);return;case k.first:h.add((x.r-h.r)*i,(x.g-h.g)*i,(x.b-h.b)*i,(x.a-h.a)*i)}return}let d=0,u=0,f=0,m=0;const p=ge.search(c,s,5),g=this.curves[p/5];switch(g){case 0:const x=c[p];d=c[p+1],u=c[p+2],f=c[p+3],m=c[p+4];const b=(s-x)/(c[p+5]-x);d+=(c[p+5+1]-d)*b,u+=(c[p+5+2]-u)*b,f+=(c[p+5+3]-f)*b,m+=(c[p+5+4]-m)*b;break;case 1:d=c[p+1],u=c[p+2],f=c[p+3],m=c[p+4];break;default:d=this.getBezierValue(s,p,1,g-2),u=this.getBezierValue(s,p,2,g+18-2),f=this.getBezierValue(s,p,3,g+18*2-2),m=this.getBezierValue(s,p,4,g+18*3-2)}i==1?h.set(d,u,f,m):(o==k.setup&&h.setFromColor(a.data.color),h.add((d-h.r)*i,(u-h.g)*i,(f-h.b)*i,(m-h.a)*i))}}class dd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.rgb}|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,r,i){t<<=2,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=i}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames,h=a.color;if(s<c[0]){const g=a.data.color;switch(o){case k.setup:h.r=g.r,h.g=g.g,h.b=g.b;return;case k.first:h.r+=(g.r-h.r)*i,h.g+=(g.g-h.g)*i,h.b+=(g.b-h.b)*i}return}let d=0,u=0,f=0;const m=ge.search(c,s,4),p=this.curves[m>>2];switch(p){case 0:const g=c[m];d=c[m+1],u=c[m+2],f=c[m+3];const x=(s-g)/(c[m+4]-g);d+=(c[m+4+1]-d)*x,u+=(c[m+4+2]-u)*x,f+=(c[m+4+3]-f)*x;break;case 1:d=c[m+1],u=c[m+2],f=c[m+3];break;default:d=this.getBezierValue(s,m,1,p-2),u=this.getBezierValue(s,m,2,p+18-2),f=this.getBezierValue(s,m,3,p+18*2-2)}if(i==1)h.r=d,h.g=u,h.b=f;else{if(o==k.setup){const g=a.data.color;h.r=g.r,h.g=g.g,h.b=g.b}h.r+=(d-h.r)*i,h.g+=(u-h.g)*i,h.b+=(f-h.b)*i}}}class ud extends Js{constructor(t,e,s){super(t,e,`${Yt.alpha}|${s}`),this.slotIndex=0,this.slotIndex=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=a.color;if(s<this.frames[0]){const d=a.data.color;switch(o){case k.setup:c.a=d.a;return;case k.first:c.a+=(d.a-c.a)*i}return}const h=this.getCurveValue(s);i==1?c.a=h:(o==k.setup&&(c.a=a.data.color.a),c.a+=(h-c.a)*i)}}class fd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.rgb}|${s}`,`${Yt.alpha}|${s}`,`${Yt.rgb2}|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 8}setFrame(t,e,s,r,i,o,l,a,c){t<<=3,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=l,this.frames[t+6]=a,this.frames[t+7]=c}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames,h=a.color,d=a.darkColor;if(s<c[0]){const _=a.data.color,E=a.data.darkColor;switch(o){case k.setup:h.setFromColor(_),d.r=E.r,d.g=E.g,d.b=E.b;return;case k.first:h.add((_.r-h.r)*i,(_.g-h.g)*i,(_.b-h.b)*i,(_.a-h.a)*i),d.r+=(E.r-d.r)*i,d.g+=(E.g-d.g)*i,d.b+=(E.b-d.b)*i}return}let u=0,f=0,m=0,p=0,g=0,x=0,b=0;const y=ge.search(c,s,8),w=this.curves[y>>3];switch(w){case 0:const _=c[y];u=c[y+1],f=c[y+2],m=c[y+3],p=c[y+4],g=c[y+5],x=c[y+6],b=c[y+7];const E=(s-_)/(c[y+8]-_);u+=(c[y+8+1]-u)*E,f+=(c[y+8+2]-f)*E,m+=(c[y+8+3]-m)*E,p+=(c[y+8+4]-p)*E,g+=(c[y+8+5]-g)*E,x+=(c[y+8+6]-x)*E,b+=(c[y+8+7]-b)*E;break;case 1:u=c[y+1],f=c[y+2],m=c[y+3],p=c[y+4],g=c[y+5],x=c[y+6],b=c[y+7];break;default:u=this.getBezierValue(s,y,1,w-2),f=this.getBezierValue(s,y,2,w+18-2),m=this.getBezierValue(s,y,3,w+18*2-2),p=this.getBezierValue(s,y,4,w+18*3-2),g=this.getBezierValue(s,y,5,w+18*4-2),x=this.getBezierValue(s,y,6,w+18*5-2),b=this.getBezierValue(s,y,7,w+18*6-2)}if(i==1)h.set(u,f,m,p),d.r=g,d.g=x,d.b=b;else{if(o==k.setup){h.setFromColor(a.data.color);const _=a.data.darkColor;d.r=_.r,d.g=_.g,d.b=_.b}h.add((u-h.r)*i,(f-h.g)*i,(m-h.b)*i,(p-h.a)*i),d.r+=(g-d.r)*i,d.g+=(x-d.g)*i,d.b+=(b-d.b)*i}}}class md extends Qs{constructor(t,e,s){super(t,e,[`${Yt.rgb}|${s}`,`${Yt.rgb2}|${s}`]),this.slotIndex=0,this.slotIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,r,i,o,l,a){t*=7,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=l,this.frames[t+6]=a}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=this.frames,h=a.color,d=a.darkColor;if(s<c[0]){const w=a.data.color,_=a.data.darkColor;switch(o){case k.setup:h.r=w.r,h.g=w.g,h.b=w.b,d.r=_.r,d.g=_.g,d.b=_.b;return;case k.first:h.r+=(w.r-h.r)*i,h.g+=(w.g-h.g)*i,h.b+=(w.b-h.b)*i,d.r+=(_.r-d.r)*i,d.g+=(_.g-d.g)*i,d.b+=(_.b-d.b)*i}return}let u=0,f=0,m=0,p=0,g=0,x=0;const b=ge.search(c,s,7),y=this.curves[b/7];switch(y){case 0:const w=c[b];u=c[b+1],f=c[b+2],m=c[b+3],p=c[b+4],g=c[b+5],x=c[b+6];const _=(s-w)/(c[b+7]-w);u+=(c[b+7+1]-u)*_,f+=(c[b+7+2]-f)*_,m+=(c[b+7+3]-m)*_,p+=(c[b+7+4]-p)*_,g+=(c[b+7+5]-g)*_,x+=(c[b+7+6]-x)*_;break;case 1:u=c[b+1],f=c[b+2],m=c[b+3],p=c[b+4],g=c[b+5],x=c[b+6];break;default:u=this.getBezierValue(s,b,1,y-2),f=this.getBezierValue(s,b,2,y+18-2),m=this.getBezierValue(s,b,3,y+18*2-2),p=this.getBezierValue(s,b,4,y+18*3-2),g=this.getBezierValue(s,b,5,y+18*4-2),x=this.getBezierValue(s,b,6,y+18*5-2)}if(i==1)h.r=u,h.g=f,h.b=m,d.r=p,d.g=g,d.b=x;else{if(o==k.setup){const w=a.data.color,_=a.data.darkColor;h.r=w.r,h.g=w.g,h.b=w.b,d.r=_.r,d.g=_.g,d.b=_.b}h.r+=(u-h.r)*i,h.g+=(f-h.g)*i,h.b+=(m-h.b)*i,d.r+=(p-d.r)*i,d.g+=(g-d.g)*i,d.b+=(x-d.b)*i}}}class Ir extends ge{constructor(t,e){super(t,[`${Yt.attachment}|${e}`]),this.slotIndex=0,this.slotIndex=e,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.attachmentNames[t]=s}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(a.bone.active){if(l==kt.mixOut){o==k.setup&&this.setAttachment(t,a,a.data.attachmentName);return}if(s<this.frames[0]){(o==k.setup||o==k.first)&&this.setAttachment(t,a,a.data.attachmentName);return}this.setAttachment(t,a,this.attachmentNames[ge.search1(this.frames,s)])}}setAttachment(t,e,s){e.setAttachment(s?t.getAttachment(this.slotIndex,s):null)}}class pd extends Qs{constructor(t,e,s,r){super(t,e,[`${Yt.deform}|${s}|${r.id}`]),this.slotIndex=0,this.slotIndex=s,this.attachment=r,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,e,s){this.frames[t]=e,this.vertices[t]=s}setBezier(t,e,s,r,i,o,l,a,c,h,d){const u=this.curves;let f=this.getFrameCount()+t*18;s==0&&(u[e]=2+f);const m=(r-o*2+a)*.03,p=c*.03-l*.06,g=((o-a)*3-r+h)*.006,x=(l-c+.33333333)*.018;let b=m*2+g,y=p*2+x,w=(o-r)*.3+m+g*.16666667,_=l*.3+p+x*.16666667,E=r+w,S=_;for(let T=f+18;f<T;f+=2)u[f]=E,u[f+1]=S,w+=b,_+=y,b+=g,y+=x,E+=w,S+=_}getCurvePercent(t,e){const s=this.curves;let r=s[e];switch(r){case 0:const a=this.frames[e];return(t-a)/(this.frames[e+this.getFrameEntries()]-a);case 1:return 0}if(r-=2,s[r]>t){const a=this.frames[e];return s[r+1]*(t-a)/(s[r]-a)}const i=r+18;for(r+=2;r<i;r+=2)if(s[r]>=t){const a=s[r-2],c=s[r-1];return c+(t-a)/(s[r]-a)*(s[r+1]-c)}const o=s[i-2],l=s[i-1];return l+(1-l)*(t-o)/(this.frames[e+this.getFrameEntries()]-o)}apply(t,e,s,r,i,o,l){const a=t.slots[this.slotIndex];if(!a.bone.active)return;const c=a.getAttachment();if(!c||!(c instanceof Ks)||c.timelineAttachment!=this.attachment)return;const h=a.deform;h.length==0&&(o=k.setup);const d=this.vertices,u=d[0].length,f=this.frames;if(s<f[0]){switch(o){case k.setup:h.length=0;return;case k.first:if(i==1){h.length=0;return}h.length=u;const b=c;if(b.bones){i=1-i;for(let y=0;y<u;y++)h[y]*=i}else{const y=b.vertices;for(let w=0;w<u;w++)h[w]+=(y[w]-h[w])*i}}return}if(h.length=u,s>=f[f.length-1]){const b=d[f.length-1];if(i==1)if(o==k.add){const y=c;if(y.bones)for(let w=0;w<u;w++)h[w]+=b[w];else{const w=y.vertices;for(let _=0;_<u;_++)h[_]+=b[_]-w[_]}}else Y.arrayCopy(b,0,h,0,u);else switch(o){case k.setup:{const w=c;if(w.bones)for(let _=0;_<u;_++)h[_]=b[_]*i;else{const _=w.vertices;for(let E=0;E<u;E++){const S=_[E];h[E]=S+(b[E]-S)*i}}break}case k.first:case k.replace:for(let w=0;w<u;w++)h[w]+=(b[w]-h[w])*i;break;case k.add:const y=c;if(y.bones)for(let w=0;w<u;w++)h[w]+=b[w]*i;else{const w=y.vertices;for(let _=0;_<u;_++)h[_]+=(b[_]-w[_])*i}}return}const m=ge.search1(f,s),p=this.getCurvePercent(s,m),g=d[m],x=d[m+1];if(i==1)if(o==k.add){const b=c;if(b.bones)for(let y=0;y<u;y++){const w=g[y];h[y]+=w+(x[y]-w)*p}else{const y=b.vertices;for(let w=0;w<u;w++){const _=g[w];h[w]+=_+(x[w]-_)*p-y[w]}}}else for(let b=0;b<u;b++){const y=g[b];h[b]=y+(x[b]-y)*p}else switch(o){case k.setup:{const y=c;if(y.bones)for(let w=0;w<u;w++){const _=g[w];h[w]=(_+(x[w]-_)*p)*i}else{const w=y.vertices;for(let _=0;_<u;_++){const E=g[_],S=w[_];h[_]=S+(E+(x[_]-E)*p-S)*i}}break}case k.first:case k.replace:for(let y=0;y<u;y++){const w=g[y];h[y]+=(w+(x[y]-w)*p-h[y])*i}break;case k.add:const b=c;if(b.bones)for(let y=0;y<u;y++){const w=g[y];h[y]+=(w+(x[y]-w)*p)*i}else{const y=b.vertices;for(let w=0;w<u;w++){const _=g[w];h[w]+=(_+(x[w]-_)*p-y[w])*i}}}}}const vg=class extends ge{constructor(n){super(n,vg.propertyIds),this.events=new Array(n)}getFrameCount(){return this.frames.length}setFrame(n,t){this.frames[n]=t.time,this.events[n]=t}apply(n,t,e,s,r,i,o){if(!s)return;const l=this.frames,a=this.frames.length;if(t>e)this.apply(n,t,Number.MAX_VALUE,s,r,i,o),t=-1;else if(t>=l[a-1])return;if(e<l[0])return;let c=0;if(t<l[0])c=0;else{c=ge.search1(l,t)+1;const h=l[c];for(;c>0&&l[c-1]==h;)c--}for(;c<a&&e>=l[c];c++)s.push(this.events[c])}};let ia=vg;ia.propertyIds=[`${Yt.event}`];const _g=class extends ge{constructor(n){super(n,_g.propertyIds),this.drawOrders=new Array(n)}getFrameCount(){return this.frames.length}setFrame(n,t,e){this.frames[n]=t,this.drawOrders[n]=e}apply(n,t,e,s,r,i,o){if(o==kt.mixOut){i==k.setup&&Y.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);return}if(e<this.frames[0]){(i==k.setup||i==k.first)&&Y.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);return}const l=ge.search1(this.frames,e),a=this.drawOrders[l];if(!a)Y.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);else{const c=n.drawOrder,h=n.slots;for(let d=0,u=a.length;d<u;d++)c[d]=h[a[d]]}}};let Mr=_g;Mr.propertyIds=[`${Yt.drawOrder}`];class gd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.ikConstraint}|${s}`]),this.ikConstraintIndex=0,this.ikConstraintIndex=s}getFrameEntries(){return 6}setFrame(t,e,s,r,i,o,l){t*=6,this.frames[t]=e,this.frames[t+1]=s,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o?1:0,this.frames[t+5]=l?1:0}apply(t,e,s,r,i,o,l){const a=t.ikConstraints[this.ikConstraintIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;return;case k.first:a.mix+=(a.data.mix-a.mix)*i,a.softness+=(a.data.softness-a.softness)*i,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}return}let h=0,d=0;const u=ge.search(c,s,6),f=this.curves[u/6];switch(f){case 0:const m=c[u];h=c[u+1],d=c[u+2];const p=(s-m)/(c[u+6]-m);h+=(c[u+6+1]-h)*p,d+=(c[u+6+2]-d)*p;break;case 1:h=c[u+1],d=c[u+2];break;default:h=this.getBezierValue(s,u,1,f-2),d=this.getBezierValue(s,u,2,f+18-2)}o==k.setup?(a.mix=a.data.mix+(h-a.data.mix)*i,a.softness=a.data.softness+(d-a.data.softness)*i,l==kt.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=c[u+3],a.compress=c[u+4]!=0,a.stretch=c[u+5]!=0)):(a.mix+=(h-a.mix)*i,a.softness+=(d-a.softness)*i,l==kt.mixIn&&(a.bendDirection=c[u+3],a.compress=c[u+4]!=0,a.stretch=c[u+5]!=0))}}class xd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.transformConstraint}|${s}`]),this.transformConstraintIndex=0,this.transformConstraintIndex=s}getFrameEntries(){return 7}setFrame(t,e,s,r,i,o,l,a){const c=this.frames;t*=7,c[t]=e,c[t+1]=s,c[t+2]=r,c[t+3]=i,c[t+4]=o,c[t+5]=l,c[t+6]=a}apply(t,e,s,r,i,o,l){const a=t.transformConstraints[this.transformConstraintIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){const b=a.data;switch(o){case k.setup:a.mixRotate=b.mixRotate,a.mixX=b.mixX,a.mixY=b.mixY,a.mixScaleX=b.mixScaleX,a.mixScaleY=b.mixScaleY,a.mixShearY=b.mixShearY;return;case k.first:a.mixRotate+=(b.mixRotate-a.mixRotate)*i,a.mixX+=(b.mixX-a.mixX)*i,a.mixY+=(b.mixY-a.mixY)*i,a.mixScaleX+=(b.mixScaleX-a.mixScaleX)*i,a.mixScaleY+=(b.mixScaleY-a.mixScaleY)*i,a.mixShearY+=(b.mixShearY-a.mixShearY)*i}return}let h,d,u,f,m,p;const g=ge.search(c,s,7),x=this.curves[g/7];switch(x){case 0:const b=c[g];h=c[g+1],d=c[g+2],u=c[g+3],f=c[g+4],m=c[g+5],p=c[g+6];const y=(s-b)/(c[g+7]-b);h+=(c[g+7+1]-h)*y,d+=(c[g+7+2]-d)*y,u+=(c[g+7+3]-u)*y,f+=(c[g+7+4]-f)*y,m+=(c[g+7+5]-m)*y,p+=(c[g+7+6]-p)*y;break;case 1:h=c[g+1],d=c[g+2],u=c[g+3],f=c[g+4],m=c[g+5],p=c[g+6];break;default:h=this.getBezierValue(s,g,1,x-2),d=this.getBezierValue(s,g,2,x+18-2),u=this.getBezierValue(s,g,3,x+18*2-2),f=this.getBezierValue(s,g,4,x+18*3-2),m=this.getBezierValue(s,g,5,x+18*4-2),p=this.getBezierValue(s,g,6,x+18*5-2)}if(o==k.setup){const b=a.data;a.mixRotate=b.mixRotate+(h-b.mixRotate)*i,a.mixX=b.mixX+(d-b.mixX)*i,a.mixY=b.mixY+(u-b.mixY)*i,a.mixScaleX=b.mixScaleX+(f-b.mixScaleX)*i,a.mixScaleY=b.mixScaleY+(m-b.mixScaleY)*i,a.mixShearY=b.mixShearY+(p-b.mixShearY)*i}else a.mixRotate+=(h-a.mixRotate)*i,a.mixX+=(d-a.mixX)*i,a.mixY+=(u-a.mixY)*i,a.mixScaleX+=(f-a.mixScaleX)*i,a.mixScaleY+=(m-a.mixScaleY)*i,a.mixShearY+=(p-a.mixShearY)*i}}class bd extends Js{constructor(t,e,s){super(t,e,`${Yt.pathConstraintPosition}|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,r,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.position=a.data.position;return;case k.first:a.position+=(a.data.position-a.position)*i}return}const h=this.getCurveValue(s);o==k.setup?a.position=a.data.position+(h-a.data.position)*i:a.position+=(h-a.position)*i}}class yd extends Js{constructor(t,e,s){super(t,e,`${Yt.pathConstraintSpacing}|${s}`),this.pathConstraintIndex=0,this.pathConstraintIndex=s}apply(t,e,s,r,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.spacing=a.data.spacing;return;case k.first:a.spacing+=(a.data.spacing-a.spacing)*i}return}const h=this.getCurveValue(s);o==k.setup?a.spacing=a.data.spacing+(h-a.data.spacing)*i:a.spacing+=(h-a.spacing)*i}}class wd extends Qs{constructor(t,e,s){super(t,e,[`${Yt.pathConstraintMix}|${s}`]),this.pathConstraintIndex=0,this.pathConstraintIndex=s}getFrameEntries(){return 4}setFrame(t,e,s,r,i){const o=this.frames;t<<=2,o[t]=e,o[t+1]=s,o[t+2]=r,o[t+3]=i}apply(t,e,s,r,i,o,l){const a=t.pathConstraints[this.pathConstraintIndex];if(!a.active)return;const c=this.frames;if(s<c[0]){switch(o){case k.setup:a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,a.mixY=a.data.mixY;return;case k.first:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*i,a.mixX+=(a.data.mixX-a.mixX)*i,a.mixY+=(a.data.mixY-a.mixY)*i}return}let h,d,u;const f=ge.search(c,s,4),m=this.curves[f>>2];switch(m){case 0:const p=c[f];h=c[f+1],d=c[f+2],u=c[f+3];const g=(s-p)/(c[f+4]-p);h+=(c[f+4+1]-h)*g,d+=(c[f+4+2]-d)*g,u+=(c[f+4+3]-u)*g;break;case 1:h=c[f+1],d=c[f+2],u=c[f+3];break;default:h=this.getBezierValue(s,f,1,m-2),d=this.getBezierValue(s,f,2,m+18-2),u=this.getBezierValue(s,f,3,m+18*2-2)}if(o==k.setup){const p=a.data;a.mixRotate=p.mixRotate+(h-p.mixRotate)*i,a.mixX=p.mixX+(d-p.mixX)*i,a.mixY=p.mixY+(u-p.mixY)*i}else a.mixRotate+=(h-a.mixRotate)*i,a.mixX+=(d-a.mixX)*i,a.mixY+=(u-a.mixY)*i}}const zn=class extends ge{constructor(n,t,e){super(n,[`${Yt.sequence}|${t}|${e.sequence.id}`]),this.slotIndex=t,this.attachment=e}getFrameEntries(){return zn.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(n,t,e,s,r){const i=this.frames;n*=zn.ENTRIES,i[n]=t,i[n+zn.MODE]=e|s<<4,i[n+zn.DELAY]=r}apply(n,t,e,s,r,i,o){const l=n.slots[this.slotIndex];if(!l.bone.active)return;const a=l.attachment,c=this.attachment;if(a!=c&&(!(a instanceof Ks)||a.timelineAttachment!=c))return;const h=this.frames;if(e<h[0]){(i==k.setup||i==k.first)&&(l.sequenceIndex=-1);return}const d=ge.search(h,e,zn.ENTRIES),u=h[d],f=h[d+zn.MODE],m=h[d+zn.DELAY];if(!this.attachment.sequence)return;let p=f>>4;const g=this.attachment.sequence.regions.length,x=td[f&15];if(x!=cn.hold)switch(p+=(e-u)/m+1e-5|0,x){case cn.once:p=Math.min(g-1,p);break;case cn.loop:p%=g;break;case cn.pingpong:{const b=(g<<1)-2;p=b==0?0:p%b,p>=g&&(p=b-p);break}case cn.onceReverse:p=Math.max(g-1-p,0);break;case cn.loopReverse:p=g-1-p%g;break;case cn.pingpongReverse:{const b=(g<<1)-2;p=b==0?0:(p+g-1)%b,p>=g&&(p=b-p)}}l.sequenceIndex=p}};let _i=zn;_i.ENTRIES=3;_i.MODE=1;_i.DELAY=2;const ln=class{constructor(n){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Eg(this),this.propertyIDs=new Rp,this.animationsChanged=!1,this.trackEntryPool=new Fo(()=>new Wo),this.data=n}static emptyAnimation(){return ln._emptyAnimation}update(n){n*=this.timeScale;const t=this.tracks;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(!r)continue;r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;let i=n*r.timeScale;if(r.delay>0){if(r.delay-=i,r.delay>0)continue;i=-r.delay,r.delay=0}let o=r.next;if(o){const l=r.trackLast-o.delay;if(l>=0){for(o.delay=0,o.trackTime+=r.timeScale==0?0:(l/r.timeScale+n)*o.timeScale,r.trackTime+=i,this.setCurrent(e,o,!0);o.mixingFrom;)o.mixTime+=n,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&!r.mixingFrom){t[e]=null,this.queue.end(r),this.clearNext(r);continue}if(r.mixingFrom&&this.updateMixingFrom(r,n)){let l=r.mixingFrom;for(r.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}r.trackTime+=i}this.queue.drain()}updateMixingFrom(n,t){const e=n.mixingFrom;if(!e)return!0;const s=this.updateMixingFrom(e,t);return e.animationLast=e.nextAnimationLast,e.trackLast=e.nextTrackLast,n.mixTime>0&&n.mixTime>=n.mixDuration?((e.totalAlpha==0||n.mixDuration==0)&&(n.mixingFrom=e.mixingFrom,e.mixingFrom&&(e.mixingFrom.mixingTo=n),n.interruptAlpha=e.interruptAlpha,this.queue.end(e)),s):(e.trackTime+=t*e.timeScale,n.mixTime+=t,!1)}apply(n){if(!n)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();const t=this.events,e=this.tracks;let s=!1;for(let o=0,l=e.length;o<l;o++){const a=e[o];if(!a||a.delay>0)continue;s=!0;const c=o==0?k.first:a.mixBlend;let h=a.alpha;a.mixingFrom?h*=this.applyMixingFrom(a,n,c):a.trackTime>=a.trackEnd&&!a.next&&(h=0);const d=a.animationLast,u=a.getAnimationTime();let f=u,m=t;a.reverse&&(f=a.animation.duration-f,m=null);const p=a.animation.timelines,g=p.length;if(o==0&&h==1||c==k.add)for(let x=0;x<g;x++){const b=p[x];b instanceof Ir?this.applyAttachmentTimeline(b,n,f,c,!0):b.apply(n,d,f,m,h,c,kt.mixIn)}else{const x=a.timelineMode,b=a.shortestRotation,y=!b&&a.timelinesRotation.length!=g<<1;y&&(a.timelinesRotation.length=g<<1);for(let w=0;w<g;w++){const _=p[w],E=x[w]==Nl?c:k.setup;!b&&_ instanceof ea?this.applyRotateTimeline(_,n,f,h,E,a.timelinesRotation,w<<1,y):_ instanceof Ir?this.applyAttachmentTimeline(_,n,f,c,!0):_.apply(n,d,f,m,h,E,kt.mixIn)}}this.queueEvents(a,u),t.length=0,a.nextAnimationLast=u,a.nextTrackLast=a.trackTime}const r=this.unkeyedState+bf,i=n.slots;for(let o=0,l=n.slots.length;o<l;o++){const a=i[o];if(a.attachmentState==r){const c=a.data.attachmentName;a.setAttachment(c?n.getAttachment(a.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),s}applyMixingFrom(n,t,e){const s=n.mixingFrom;s.mixingFrom&&this.applyMixingFrom(s,t,e);let r=0;n.mixDuration==0?(r=1,e==k.first&&(e=k.setup)):(r=n.mixTime/n.mixDuration,r>1&&(r=1),e!=k.first&&(e=s.mixBlend));const i=r<s.attachmentThreshold,o=r<s.drawOrderThreshold,l=s.animation.timelines,a=l.length,c=s.alpha*n.interruptAlpha,h=c*(1-r),d=s.animationLast,u=s.getAnimationTime();let f=u,m=null;if(s.reverse?f=s.animation.duration-f:r<s.eventThreshold&&(m=this.events),e==k.add)for(let p=0;p<a;p++)l[p].apply(t,d,f,m,h,e,kt.mixOut);else{const p=s.timelineMode,g=s.timelineHoldMix,x=s.shortestRotation,b=!x&&s.timelinesRotation.length!=a<<1;b&&(s.timelinesRotation.length=a<<1),s.totalAlpha=0;for(let y=0;y<a;y++){const w=l[y];let _=kt.mixOut,E,S=0;switch(p[y]){case Nl:if(!o&&w instanceof Mr)continue;E=e,S=h;break;case gf:E=k.setup,S=h;break;case xf:E=e,S=c;break;case Fl:E=k.setup,S=c;break;default:E=k.setup;const T=g[y];S=c*Math.max(0,1-T.mixTime/T.mixDuration);break}s.totalAlpha+=S,!x&&w instanceof ea?this.applyRotateTimeline(w,t,f,S,E,s.timelinesRotation,y<<1,b):w instanceof Ir?this.applyAttachmentTimeline(w,t,f,E,i):(o&&w instanceof Mr&&E==k.setup&&(_=kt.mixIn),w.apply(t,d,f,m,S,E,_))}}return n.mixDuration>0&&this.queueEvents(s,u),this.events.length=0,s.nextAnimationLast=u,s.nextTrackLast=s.trackTime,r}applyAttachmentTimeline(n,t,e,s,r){const i=t.slots[n.slotIndex];i.bone.active&&(e<n.frames[0]?(s==k.setup||s==k.first)&&this.setAttachment(t,i,i.data.attachmentName,r):this.setAttachment(t,i,n.attachmentNames[ge.search1(n.frames,e)],r),i.attachmentState<=this.unkeyedState&&(i.attachmentState=this.unkeyedState+bf))}setAttachment(n,t,e,s){t.setAttachment(e?n.getAttachment(t.data.index,e):null),s&&(t.attachmentState=this.unkeyedState+uE)}applyRotateTimeline(n,t,e,s,r,i,o,l){if(l&&(i[o]=0),s==1){n.apply(t,0,e,null,1,r,kt.mixIn);return}const a=t.bones[n.boneIndex];if(!a.active)return;const c=n.frames;let h=0,d=0;if(e<c[0])switch(r){case k.setup:a.rotation=a.data.rotation;default:return;case k.first:h=a.rotation,d=a.data.rotation}else h=r==k.setup?a.data.rotation:a.rotation,d=a.data.rotation+n.getCurveValue(e);let u=0,f=d-h;if(f-=(16384-(16384.499999999996-f/360|0))*360,f==0)u=i[o];else{let m=0,p=0;l?(m=0,p=f):(m=i[o],p=i[o+1]);const g=f>0;let x=m>=0;M.signum(p)!=M.signum(f)&&Math.abs(p)<=90&&(Math.abs(m)>180&&(m+=360*M.signum(m)),x=g),u=f+m-m%360,x!=g&&(u+=360*M.signum(m)),i[o]=u}i[o+1]=f,a.rotation=h+u*s}queueEvents(n,t){const e=n.animationStart,s=n.animationEnd,r=s-e,i=n.trackLast%r,o=this.events;let l=0;const a=o.length;for(;l<a;l++){const h=o[l];if(h.time<i)break;h.time>s||this.queue.event(n,h)}let c=!1;for(n.loop?c=r==0||i>n.trackTime%r:c=t>=s&&n.animationLast<s,c&&this.queue.complete(n);l<a;l++){const h=o[l];h.time<e||this.queue.event(n,h)}}clearTracks(){const n=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,e=this.tracks.length;t<e;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=n,this.queue.drain()}clearTrack(n){if(n>=this.tracks.length)return;const t=this.tracks[n];if(!t)return;this.queue.end(t),this.clearNext(t);let e=t;for(;;){const s=e.mixingFrom;if(!s)break;this.queue.end(s),e.mixingFrom=null,e.mixingTo=null,e=s}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(n,t,e){const s=this.expandToIndex(n);this.tracks[n]=t,t.previous=null,s&&(e&&this.queue.interrupt(s),t.mixingFrom=s,s.mixingTo=t,t.mixTime=0,s.mixingFrom&&s.mixDuration>0&&(t.interruptAlpha*=Math.min(1,s.mixTime/s.mixDuration)),s.timelinesRotation.length=0),this.queue.start(t)}setAnimation(n,t,e=!1){const s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error(`Animation not found: ${t}`);return this.setAnimationWith(n,s,e)}setAnimationWith(n,t,e=!1){if(!t)throw new Error("animation cannot be null.");let s=!0,r=this.expandToIndex(n);r&&(r.nextTrackLast==-1?(this.tracks[n]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.clearNext(r),r=r.mixingFrom,s=!1):this.clearNext(r));const i=this.trackEntry(n,t,e,r);return this.setCurrent(n,i,s),this.queue.drain(),i}addAnimation(n,t,e=!1,s=0){const r=this.data.skeletonData.findAnimation(t);if(!r)throw new Error(`Animation not found: ${t}`);return this.addAnimationWith(n,r,e,s)}addAnimationWith(n,t,e=!1,s=0){if(!t)throw new Error("animation cannot be null.");let r=this.expandToIndex(n);if(r)for(;r.next;)r=r.next;const i=this.trackEntry(n,t,e,r);return r?(r.next=i,i.previous=r,s<=0&&(s+=r.getTrackComplete()-i.mixDuration)):(this.setCurrent(n,i,!0),this.queue.drain()),i.delay=s,i}setEmptyAnimation(n,t=0){const e=this.setAnimationWith(n,ln.emptyAnimation(),!1);return e.mixDuration=t,e.trackEnd=t,e}addEmptyAnimation(n,t=0,e=0){const s=this.addAnimationWith(n,ln.emptyAnimation(),!1,e);return e<=0&&(s.delay+=s.mixDuration-t),s.mixDuration=t,s.trackEnd=t,s}setEmptyAnimations(n=0){const t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let e=0,s=this.tracks.length;e<s;e++){const r=this.tracks[e];r&&this.setEmptyAnimation(r.trackIndex,n)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(n){return n<this.tracks.length?this.tracks[n]:(Y.ensureArrayCapacity(this.tracks,n+1,null),this.tracks.length=n+1,null)}trackEntry(n,t,e,s){const r=this.trackEntryPool.obtain();return r.reset(),r.trackIndex=n,r.animation=t,r.loop=e,r.holdPrevious=!1,r.reverse=!1,r.shortestRotation=!1,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=t.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixTime=0,r.mixDuration=s?this.data.getMix(s.animation,t):0,r.interruptAlpha=1,r.totalAlpha=0,r.mixBlend=k.replace,r}clearNext(n){let t=n.next;for(;t;)this.queue.dispose(t),t=t.next;n.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();const n=this.tracks;for(let t=0,e=n.length;t<e;t++){let s=n[t];if(s){for(;s.mixingFrom;)s=s.mixingFrom;do(!s.mixingTo||s.mixBlend!=k.add)&&this.computeHold(s),s=s.mixingTo;while(s)}}}computeHold(n){const t=n.mixingTo,e=n.animation.timelines,s=n.animation.timelines.length,r=n.timelineMode;r.length=s;const i=n.timelineHoldMix;i.length=0;const o=this.propertyIDs;if(t&&t.holdPrevious){for(let l=0;l<s;l++)r[l]=o.addAll(e[l].getPropertyIds())?Fl:xf;return}t:for(let l=0;l<s;l++){const a=e[l],c=a.getPropertyIds();if(!o.addAll(c))r[l]=Nl;else if(!t||a instanceof Ir||a instanceof Mr||a instanceof ia||!t.animation.hasTimeline(c))r[l]=gf;else{for(let h=t.mixingTo;h;h=h.mixingTo)if(!h.animation.hasTimeline(c)){if(n.mixDuration>0){r[l]=dE,i[l]=h;continue t}break}r[l]=Fl}}}getCurrent(n){return n>=this.tracks.length?null:this.tracks[n]}addListener(n){if(!n)throw new Error("listener cannot be null.");this.listeners.push(n)}removeListener(n){const t=this.listeners.indexOf(n);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}setAnimationByName(n,t,e){ln.deprecatedWarning1||(ln.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(n,t,e)}addAnimationByName(n,t,e,s){ln.deprecatedWarning2||(ln.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(n,t,e,s)}hasAnimation(n){return this.data.skeletonData.findAnimation(n)!==null}hasAnimationByName(n){return ln.deprecatedWarning3||(ln.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(n)}};let Ei=ln;Ei._emptyAnimation=new Yo("<empty>",[],0);Ei.deprecatedWarning1=!1;Ei.deprecatedWarning2=!1;Ei.deprecatedWarning3=!1;const vn=class{constructor(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=k.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){const n=this.animationEnd-this.animationStart;return n==0?this.animationStart:this.trackTime%n+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(n){this.animationLast=n,this.nextAnimationLast=n}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){const n=this.animationEnd-this.animationStart;if(n!=0){if(this.loop)return n*(1+(this.trackTime/n|0));if(this.trackTime<n)return n}return this.trackTime}get time(){return vn.deprecatedWarning1||(vn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime}set time(n){vn.deprecatedWarning1||(vn.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=n}get endTime(){return vn.deprecatedWarning2||(vn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime}set endTime(n){vn.deprecatedWarning2||(vn.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=n}loopsCount(){return Math.floor(this.trackTime/this.trackEnd)}};let Wo=vn;Wo.deprecatedWarning1=!1;Wo.deprecatedWarning2=!1;class Eg{constructor(t){this.objects=[],this.drainDisabled=!1,this.animState=t}start(t){this.objects.push(ss.start),this.objects.push(t),this.animState.animationsChanged=!0}interrupt(t){this.objects.push(ss.interrupt),this.objects.push(t)}end(t){this.objects.push(ss.end),this.objects.push(t),this.animState.animationsChanged=!0}dispose(t){this.objects.push(ss.dispose),this.objects.push(t)}complete(t){this.objects.push(ss.complete),this.objects.push(t)}event(t,e){this.objects.push(ss.event),this.objects.push(t),this.objects.push(e)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;const t=this.objects,e=this.animState.listeners;for(let s=0;s<t.length;s+=2){const r=t[s],i=t[s+1];switch(r){case ss.start:i.listener&&i.listener.start&&i.listener.start(i);for(let l=0;l<e.length;l++){const a=e[l];a.start&&a.start(i)}break;case ss.interrupt:i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(let l=0;l<e.length;l++){const a=e[l];a.interrupt&&a.interrupt(i)}break;case ss.end:i.listener&&i.listener.end&&i.listener.end(i);for(let l=0;l<e.length;l++){const a=e[l];a.end&&a.end(i)}case ss.dispose:i.listener&&i.listener.dispose&&i.listener.dispose(i);for(let l=0;l<e.length;l++){const a=e[l];a.dispose&&a.dispose(i)}this.animState.trackEntryPool.free(i);break;case ss.complete:i.listener&&i.listener.complete&&i.listener.complete(i);for(let l=0;l<e.length;l++){const a=e[l];a.complete&&a.complete(i)}break;case ss.event:const o=t[s+++2];i.listener&&i.listener.event&&i.listener.event(i,o);for(let l=0;l<e.length;l++){const a=e[l];a.event&&a.event(i,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var ss=(n=>(n[n.start=0]="start",n[n.interrupt=1]="interrupt",n[n.end=2]="end",n[n.dispose=3]="dispose",n[n.complete=4]="complete",n[n.event=5]="event",n))(ss||{});class hE{start(t){}interrupt(t){}end(t){}dispose(t){}complete(t){}event(t,e){}}const Nl=0,gf=1,xf=2,Fl=3,dE=4,bf=1,uE=2;class Sg{constructor(t){if(this.animationToMixTime={},this.defaultMix=0,!t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}setMix(t,e,s){const r=this.skeletonData.findAnimation(t);if(!r)throw new Error(`Animation not found: ${t}`);const i=this.skeletonData.findAnimation(e);if(!i)throw new Error(`Animation not found: ${e}`);this.setMixWith(r,i,s)}setMixWith(t,e,s){if(!t)throw new Error("from cannot be null.");if(!e)throw new Error("to cannot be null.");const r=`${t.name}.${e.name}`;this.animationToMixTime[r]=s}getMix(t,e){const s=`${t.name}.${e.name}`,r=this.animationToMixTime[s];return r===void 0?this.defaultMix:r}}class vd{constructor(t){this.atlas=t}loadSequence(t,e,s){const r=s.regions;for(let i=0,o=r.length;i<o;i++){const l=s.getPath(e,i),a=this.atlas.findRegion(l);if(a==null)throw new Error(`Region not found in atlas: ${l} (sequence: ${t})`);r[i]=a,r[i].renderObject=r[i]}}newRegionAttachment(t,e,s,r){const i=new Ot(e,s);if(r!=null)this.loadSequence(e,s,r);else{const o=this.atlas.findRegion(s);if(!o)throw new Error(`Region not found in atlas: ${s} (region attachment: ${e})`);o.renderObject=o,i.region=o}return i}newMeshAttachment(t,e,s,r){const i=new Br(e,s);if(r!=null)this.loadSequence(e,s,r);else{const o=this.atlas.findRegion(s);if(!o)throw new Error(`Region not found in atlas: ${s} (mesh attachment: ${e})`);o.renderObject=o,i.region=o}return i}newBoundingBoxAttachment(t,e){return new Uo(e)}newPathAttachment(t,e){return new Dr(e)}newPointAttachment(t,e){return new Xo(e)}newClippingAttachment(t,e){return new jo(e)}}class zc{constructor(t,e,s){if(this.matrix=new Ht,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=s,this.setToSetupPose()}get worldX(){return this.matrix.tx}get worldY(){return this.matrix.ty}isActive(){return this.active}update(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(t,e,s,r,i,o,l){this.ax=t,this.ay=e,this.arotation=s,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=l;const a=this.parent,c=this.matrix,h=this.skeleton.scaleX,d=-this.skeleton.scaleY;if(!a){const g=this.skeleton,x=s+90+l;c.a=M.cosDeg(s+o)*r*h,c.c=M.cosDeg(x)*i*h,c.b=M.sinDeg(s+o)*r*d,c.d=M.sinDeg(x)*i*d,c.tx=t*h+g.x,c.ty=e*d+g.y;return}let u=a.matrix.a,f=a.matrix.c,m=a.matrix.b,p=a.matrix.d;switch(c.tx=u*t+f*e+a.matrix.tx,c.ty=m*t+p*e+a.matrix.ty,this.data.transformMode){case vt.Normal:{const g=s+90+l,x=M.cosDeg(s+o)*r,b=M.cosDeg(g)*i,y=M.sinDeg(s+o)*r,w=M.sinDeg(g)*i;c.a=u*x+f*y,c.c=u*b+f*w,c.b=m*x+p*y,c.d=m*b+p*w;return}case vt.OnlyTranslation:{const g=s+90+l;c.a=M.cosDeg(s+o)*r,c.c=M.cosDeg(g)*i,c.b=M.sinDeg(s+o)*r,c.d=M.sinDeg(g)*i;break}case vt.NoRotationOrReflection:{let g=u*u+m*m,x=0;g>1e-4?(g=Math.abs(u*p-f*m)/g,u/=h,m/=d,f=m*g,p=u*g,x=Math.atan2(m,u)*M.radDeg):(u=0,m=0,x=90-Math.atan2(p,f)*M.radDeg);const b=s+o-x,y=s+l-x+90,w=M.cosDeg(b)*r,_=M.cosDeg(y)*i,E=M.sinDeg(b)*r,S=M.sinDeg(y)*i;c.a=u*w-f*E,c.c=u*_-f*S,c.b=m*w+p*E,c.d=m*_+p*S;break}case vt.NoScale:case vt.NoScaleOrReflection:{const g=M.cosDeg(s),x=M.sinDeg(s);let b=(u*g+f*x)/h,y=(m*g+p*x)/d,w=Math.sqrt(b*b+y*y);w>1e-5&&(w=1/w),b*=w,y*=w,w=Math.sqrt(b*b+y*y),this.data.transformMode==vt.NoScale&&u*p-f*m<0!=(h<0!=d<0)&&(w=-w);const _=Math.PI/2+Math.atan2(y,b),E=Math.cos(_)*w,S=Math.sin(_)*w,T=M.cosDeg(o)*r,A=M.cosDeg(90+l)*i,C=M.sinDeg(o)*r,I=M.sinDeg(90+l)*i;c.a=b*T+E*C,c.c=b*A+E*I,c.b=y*T+S*C,c.d=y*A+S*I;break}}c.a*=h,c.c*=h,c.b*=d,c.d*=d}setToSetupPose(){const t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY}getWorldRotationX(){return Math.atan2(this.matrix.b,this.matrix.a)*M.radDeg}getWorldRotationY(){return Math.atan2(this.matrix.d,this.matrix.c)*M.radDeg}getWorldScaleX(){const t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)}getWorldScaleY(){const t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)}updateAppliedTransform(){const t=this.parent,e=this.matrix;if(!t){this.ax=e.tx-this.skeleton.x,this.ay=e.ty-this.skeleton.y,this.arotation=Math.atan2(e.b,e.a)*M.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*M.radDeg;return}const s=t.matrix,r=1/(s.a*s.d-s.b*s.c),i=e.tx-s.tx,o=e.ty-s.ty;this.ax=i*s.d*r-o*s.c*r,this.ay=o*s.a*r-i*s.b*r;const l=r*s.d,a=r*s.a,c=r*s.c,h=r*s.b,d=l*e.a-c*e.b,u=l*e.c-c*e.d,f=a*e.b-h*e.a,m=a*e.d-h*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){const p=d*m-u*f;this.ascaleY=p/this.ascaleX,this.ashearY=Math.atan2(d*u+f*m,p)*M.radDeg,this.arotation=Math.atan2(f,d)*M.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(u*u+m*m),this.ashearY=0,this.arotation=90-Math.atan2(m,u)*M.radDeg}worldToLocal(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=1/(s*o-r*i),a=t.x-e.tx,c=t.y-e.ty;return t.x=a*o*l-c*r*l,t.y=c*s*l-a*i*l,t}localToWorld(t){const e=this.matrix,s=t.x,r=t.y;return t.x=s*e.a+r*e.c+e.tx,t.y=s*e.b+r*e.d+e.ty,t}worldToLocalRotation(t){const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*s,r.d*s-r.c*e)*M.radDeg}localToWorldRotation(t){t-=this.rotation-this.shearX;const e=M.sinDeg(t),s=M.cosDeg(t),r=this.matrix;return Math.atan2(s*r.b+e*r.d,s*r.a+e*r.c)*M.radDeg}rotateWorld(t){const e=this.matrix,s=e.a,r=e.c,i=e.b,o=e.d,l=M.cosDeg(t),a=M.sinDeg(t);e.a=l*s-a*i,e.c=l*r-a*o,e.b=a*s+l*i,e.d=a*r+l*o}}class _d{constructor(t,e,s){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=vt.Normal,this.skinRequired=!1,this.color=new tt,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=s}}class zo{constructor(t,e,s){this.name=t,this.order=e,this.skinRequired=s}}let Ed=class{constructor(t,e){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!e)throw new Error("data cannot be null.");this.time=t,this.data=e}};class Sd{constructor(t){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=t}}class Tg{constructor(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(let r=0;r<t.bones.length;r++){const i=e.findBone(t.bones[r].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[r].name}`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find bone ${t.target.name}`);this.target=s}isActive(){return this.active}update(){if(this.mix==0)return;const t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(t,e,s,r,i,o,l){const a=t.parent.matrix;if(!a)throw new Error("IK bone must have parent.");const c=a.a;let h=a.c;const d=a.b;let u=a.d,f=-t.ashearX-t.arotation,m=0,p=0;const g=t.skeleton.scaleX,x=-t.skeleton.scaleY;switch(t.data.transformMode){case vt.OnlyTranslation:m=e-t.worldX,p=s-t.worldY,p=-p;break;case vt.NoRotationOrReflection:const w=Math.abs(c*u-h*d)/(c*c+d*d),_=c/g,E=d/x;h=-E*w*g,u=_*w*x,f+=Math.atan2(E,_)*M.radDeg;default:const S=e-a.tx,T=s-a.ty,A=c*u-h*d;m=(S*u-T*h)/A-t.ax,p=(T*c-S*d)/A-t.ay}f+=Math.atan2(p,m)*M.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let b=t.ascaleX,y=t.ascaleY;if(r||i){switch(t.data.transformMode){case vt.NoScale:case vt.NoScaleOrReflection:m=e-t.worldX,p=s-t.worldY}const w=t.data.length*b,_=Math.sqrt(m*m+p*p);if(r&&_<w||i&&_>w&&w>1e-4){const E=(_/w-1)*l+1;b*=E,o&&(y*=E)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*l,b,y,t.ashearX,t.ashearY)}apply2(t,e,s,r,i,o,l,a,c){const h=t.ax,d=t.ay;let u=t.ascaleX,f=t.ascaleY,m=u,p=f,g=e.ascaleX;const x=t.matrix;let b=0,y=0,w=0;u<0?(u=-u,b=180,w=-1):(b=0,w=1),f<0&&(f=-f,w=-w),g<0?(g=-g,y=180):y=0;const _=e.ax;let E=0,S=0,T=0,A=x.a,C=x.c,I=x.b,P=x.d;const R=Math.abs(u-f)<=1e-4;!R||o?(E=0,S=A*_+x.tx,T=I*_+x.ty):(E=e.ay,S=A*_+C*E+x.tx,T=I*_+P*E+x.ty);const N=t.parent.matrix;if(!N)throw new Error("IK parent must itself have a parent.");A=N.a,C=N.c,I=N.b,P=N.d;const F=1/(A*P-C*I);let D=S-N.tx,L=T-N.ty;const O=(D*P-L*C)*F-h,j=(L*A-D*I)*F-d,U=Math.sqrt(O*O+j*j);let B=e.data.length*g,G,H;if(U<1e-4){this.apply1(t,s,r,!1,o,!1,c),e.updateWorldTransformWith(_,E,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);return}D=s-N.tx,L=r-N.ty;let K=(D*P-L*C)*F-h,z=(L*A-D*I)*F-d,J=K*K+z*z;if(a!=0){a*=u*(g+1)*.5;const W=Math.sqrt(J),Z=W-U-B*u+a;if(Z>0){let at=Math.min(1,Z/(a*2))-1;at=(Z-a*(1-at*at))/W,K-=at*K,z-=at*z,J=K*K+z*z}}t:if(R){B*=u;let W=(J-U*U-B*B)/(2*U*B);W<-1?(W=-1,H=Math.PI*i):W>1?(W=1,H=0,o&&(A=(Math.sqrt(J)/(U+B)-1)*c+1,m*=A,l&&(p*=A))):H=Math.acos(W)*i,A=U+B*W,C=B*Math.sin(H),G=Math.atan2(z*A-K*C,K*A+z*C)}else{A=u*B,C=f*B;const W=A*A,Z=C*C,at=Math.atan2(z,K);I=Z*U*U+W*J-W*Z;const gt=-2*Z*U,yt=Z-W;if(P=gt*gt-4*yt*I,P>=0){let Kt=Math.sqrt(P);gt<0&&(Kt=-Kt),Kt=-(gt+Kt)*.5;const je=Kt/yt,Ln=I/Kt,Ss=Math.abs(je)<Math.abs(Ln)?je:Ln;if(Ss*Ss<=J){L=Math.sqrt(J-Ss*Ss)*i,G=at-Math.atan2(L,Ss),H=Math.atan2(L/f,(Ss-U)/u);break t}}let nt=M.PI,It=U-A,Ct=It*It,wt=0,Qt=0,Jt=U+A,re=Jt*Jt,qt=0;I=-A*U/(W-Z),I>=-1&&I<=1&&(I=Math.acos(I),D=A*Math.cos(I)+U,L=C*Math.sin(I),P=D*D+L*L,P<Ct&&(nt=I,Ct=P,It=D,wt=L),P>re&&(Qt=I,re=P,Jt=D,qt=L)),J<=(Ct+re)*.5?(G=at-Math.atan2(wt*i,It),H=nt*i):(G=at-Math.atan2(qt*i,Jt),H=Qt*i)}const Q=Math.atan2(E,_)*w;let X=t.arotation;G=(G-Q)*M.radDeg+b-X,G>180?G-=360:G<-180&&(G+=360),t.updateWorldTransformWith(h,d,X+G*c,m,p,0,0),X=e.arotation,H=((H+Q)*M.radDeg-e.ashearX)*w+y-X,H>180?H-=360:H<-180&&(H+=360),e.updateWorldTransformWith(_,E,X+H*c,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}}class Td extends zo{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.softness=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class Ad extends zo{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.positionMode=fe.Fixed,this.spacingMode=Ae.Fixed,this.rotateMode=we.Chain,this.offsetRotation=0,this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var Ae=(n=>(n[n.Length=0]="Length",n[n.Fixed=1]="Fixed",n[n.Percent=2]="Percent",n[n.Proportional=3]="Proportional",n))(Ae||{});const _n=class{constructor(n,t){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!n)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=n,this.bones=new Array;for(let s=0,r=n.bones.length;s<r;s++){const i=t.findBone(n.bones[s].name);if(!i)throw new Error(`Couldn't find bone ${n.bones[s].name}.`);this.bones.push(i)}const e=t.findSlot(n.target.name);if(!e)throw new Error(`Couldn't find target bone ${n.target.name}`);this.target=e,this.position=n.position,this.spacing=n.spacing,this.mixRotate=n.mixRotate,this.mixX=n.mixX,this.mixY=n.mixY}isActive(){return this.active}update(){const n=this.target.getAttachment();if(!(n instanceof Dr))return;const t=this.mixRotate,e=this.mixX,s=this.mixY;if(t==0&&e==0&&s==0)return;const r=this.data,i=r.rotateMode==we.Tangent,o=r.rotateMode==we.ChainScale,l=this.bones,a=l.length,c=i?a:a+1,h=Y.setArraySize(this.spaces,c),d=o?this.lengths=Y.setArraySize(this.lengths,a):[],u=this.spacing;switch(r.spacingMode){case Ae.Percent:if(o)for(let w=0,_=c-1;w<_;w++){const E=l[w],S=E.data.length;if(S<_n.epsilon)d[w]=0;else{const T=S*E.matrix.a,A=S*E.matrix.b;d[w]=Math.sqrt(T*T+A*A)}}Y.arrayFill(h,1,c,u);break;case Ae.Proportional:let b=0;for(let w=0,_=c-1;w<_;){const E=l[w],S=E.data.length;if(S<_n.epsilon)o&&(d[w]=0),h[++w]=u;else{const T=S*E.matrix.a,A=S*E.matrix.b,C=Math.sqrt(T*T+A*A);o&&(d[w]=C),h[++w]=C,b+=C}}if(b>0){b=c/b*u;for(let w=1;w<c;w++)h[w]*=b}break;default:const y=r.spacingMode==Ae.Length;for(let w=0,_=c-1;w<_;){const E=l[w],S=E.data.length;if(S<_n.epsilon)o&&(d[w]=0),h[++w]=u;else{const T=S*E.matrix.a,A=S*E.matrix.b,C=Math.sqrt(T*T+A*A);o&&(d[w]=C),h[++w]=(y?S+u:u)*C/S}}}const f=this.computeWorldPositions(n,c,i);let m=f[0],p=f[1],g=r.offsetRotation,x=!1;if(g==0)x=r.rotateMode==we.Chain;else{x=!1;const b=this.target.bone.matrix;g*=b.a*b.d-b.b*b.c>0?M.degRad:-M.degRad}for(let b=0,y=3;b<a;b++,y+=3){const w=l[b],_=w.matrix;_.tx+=(m-_.tx)*e,_.ty+=(p-_.ty)*s;const E=f[y],S=f[y+1],T=E-m,A=S-p;if(o){const C=d[b];if(C!=0){const I=(Math.sqrt(T*T+A*A)/C-1)*t+1;_.a*=I,_.b*=I}}if(m=E,p=S,t>0){const C=_.a,I=_.c,P=_.b,R=_.d;let N=0,F=0,D=0;if(i?N=f[y-1]:h[b+1]==0?N=f[y+2]:N=Math.atan2(A,T),N-=Math.atan2(P,C),x){F=Math.cos(N),D=Math.sin(N);const L=w.data.length;m+=(L*(F*C-D*P)-T)*t,p+=(L*(D*C+F*P)-A)*t}else N+=g;N>M.PI?N-=M.PI2:N<-M.PI&&(N+=M.PI2),N*=t,F=Math.cos(N),D=Math.sin(N),_.a=F*C-D*P,_.c=F*I-D*R,_.b=D*C+F*P,_.d=D*I+F*R}w.updateAppliedTransform()}}computeWorldPositions(n,t,e){const s=this.target;let r=this.position;const i=this.spaces,o=Y.setArraySize(this.positions,t*3+2);let l=this.world;const a=n.closed;let c=n.worldVerticesLength,h=c/6,d=_n.NONE;if(!n.constantSpeed){const L=n.lengths;h-=a?1:2;const O=L[h];this.data.positionMode==fe.Percent&&(r*=O);let j;switch(this.data.spacingMode){case Ae.Percent:j=O;break;case Ae.Proportional:j=O/t;break;default:j=1}l=Y.setArraySize(this.world,8);for(let U=0,B=0,G=0;U<t;U++,B+=3){const H=i[U]*j;r+=H;let K=r;if(a)K%=O,K<0&&(K+=O),G=0;else if(K<0){d!=_n.BEFORE&&(d=_n.BEFORE,n.computeWorldVertices(s,2,4,l,0,2)),this.addBeforePosition(K,l,0,o,B);continue}else if(K>O){d!=_n.AFTER&&(d=_n.AFTER,n.computeWorldVertices(s,c-6,4,l,0,2)),this.addAfterPosition(K-O,l,0,o,B);continue}for(;;G++){const z=L[G];if(!(K>z)){if(G==0)K/=z;else{const J=L[G-1];K=(K-J)/(z-J)}break}}G!=d&&(d=G,a&&G==h?(n.computeWorldVertices(s,c-4,4,l,0,2),n.computeWorldVertices(s,0,4,l,4,2)):n.computeWorldVertices(s,G*6+2,8,l,0,2)),this.addCurvePosition(K,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],o,B,e||U>0&&H==0)}return o}a?(c+=2,l=Y.setArraySize(this.world,c),n.computeWorldVertices(s,2,c-4,l,0,2),n.computeWorldVertices(s,0,2,l,c-4,2),l[c-2]=l[0],l[c-1]=l[1]):(h--,c-=4,l=Y.setArraySize(this.world,c),n.computeWorldVertices(s,2,c,l,0,2));const u=Y.setArraySize(this.curves,h);let f=0,m=l[0],p=l[1],g=0,x=0,b=0,y=0,w=0,_=0,E=0,S=0,T=0,A=0,C=0,I=0,P=0,R=0;for(let L=0,O=2;L<h;L++,O+=6)g=l[O],x=l[O+1],b=l[O+2],y=l[O+3],w=l[O+4],_=l[O+5],E=(m-g*2+b)*.1875,S=(p-x*2+y)*.1875,T=((g-b)*3-m+w)*.09375,A=((x-y)*3-p+_)*.09375,C=E*2+T,I=S*2+A,P=(g-m)*.75+E+T*.16666667,R=(x-p)*.75+S+A*.16666667,f+=Math.sqrt(P*P+R*R),P+=C,R+=I,C+=T,I+=A,f+=Math.sqrt(P*P+R*R),P+=C,R+=I,f+=Math.sqrt(P*P+R*R),P+=C+T,R+=I+A,f+=Math.sqrt(P*P+R*R),u[L]=f,m=w,p=_;this.data.positionMode==fe.Percent&&(r*=f);let N;switch(this.data.spacingMode){case Ae.Percent:N=f;break;case Ae.Proportional:N=f/t;break;default:N=1}const F=this.segments;let D=0;for(let L=0,O=0,j=0,U=0;L<t;L++,O+=3){const B=i[L]*N;r+=B;let G=r;if(a)G%=f,G<0&&(G+=f),j=0;else if(G<0){this.addBeforePosition(G,l,0,o,O);continue}else if(G>f){this.addAfterPosition(G-f,l,c-4,o,O);continue}for(;;j++){const H=u[j];if(!(G>H)){if(j==0)G/=H;else{const K=u[j-1];G=(G-K)/(H-K)}break}}if(j!=d){d=j;let H=j*6;for(m=l[H],p=l[H+1],g=l[H+2],x=l[H+3],b=l[H+4],y=l[H+5],w=l[H+6],_=l[H+7],E=(m-g*2+b)*.03,S=(p-x*2+y)*.03,T=((g-b)*3-m+w)*.006,A=((x-y)*3-p+_)*.006,C=E*2+T,I=S*2+A,P=(g-m)*.3+E+T*.16666667,R=(x-p)*.3+S+A*.16666667,D=Math.sqrt(P*P+R*R),F[0]=D,H=1;H<8;H++)P+=C,R+=I,C+=T,I+=A,D+=Math.sqrt(P*P+R*R),F[H]=D;P+=C,R+=I,D+=Math.sqrt(P*P+R*R),F[8]=D,P+=C+T,R+=I+A,D+=Math.sqrt(P*P+R*R),F[9]=D,U=0}for(G*=D;;U++){const H=F[U];if(!(G>H)){if(U==0)G/=H;else{const K=F[U-1];G=U+(G-K)/(H-K)}break}}this.addCurvePosition(G*.1,m,p,g,x,b,y,w,_,o,O,e||L>0&&B==0)}return o}addBeforePosition(n,t,e,s,r){const i=t[e],o=t[e+1],l=t[e+2]-i,a=t[e+3]-o,c=Math.atan2(a,l);s[r]=i+n*Math.cos(c),s[r+1]=o+n*Math.sin(c),s[r+2]=c}addAfterPosition(n,t,e,s,r){const i=t[e+2],o=t[e+3],l=i-t[e],a=o-t[e+1],c=Math.atan2(a,l);s[r]=i+n*Math.cos(c),s[r+1]=o+n*Math.sin(c),s[r+2]=c}addCurvePosition(n,t,e,s,r,i,o,l,a,c,h,d){if(n==0||isNaN(n)){c[h]=t,c[h+1]=e,c[h+2]=Math.atan2(r-e,s-t);return}const u=n*n,f=u*n,m=1-n,p=m*m,g=p*m,x=m*n,b=x*3,y=m*b,w=b*n,_=t*g+s*y+i*w+l*f,E=e*g+r*y+o*w+a*f;c[h]=_,c[h+1]=E,d&&(n<.001?c[h+2]=Math.atan2(r-e,s-t):c[h+2]=Math.atan2(E-(e*p+r*x*2+o*u),_-(t*p+s*x*2+i*u)))}};let Si=_n;Si.NONE=-1;Si.BEFORE=-2;Si.AFTER=-3;Si.epsilon=1e-5;class Ag{constructor(t,e){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!t)throw new Error("data cannot be null.");if(!e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new tt,this.darkColor=t.darkColor?new tt:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(t){this.attachment!=t&&((!(t instanceof Ks)||!(this.attachment instanceof Ks)||t.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=t,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class Cg{constructor(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new Qi,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(let r=0;r<t.bones.length;r++){const i=e.findBone(t.bones[r].name);if(!i)throw new Error(`Couldn't find bone ${t.bones[r].name}.`);this.bones.push(i)}const s=e.findBone(t.target.name);if(!s)throw new Error(`Couldn't find target bone ${t.target.name}.`);this.target=s}isActive(){return this.active}update(){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleX==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,l=e!=0||s!=0,a=this.target,c=a.matrix,h=c.a,d=c.c,u=c.b,f=c.d,m=h*f-d*u>0?M.degRad:-M.degRad,p=this.data.offsetRotation*m,g=this.data.offsetShearY*m,x=this.bones;for(let b=0,y=x.length;b<y;b++){const w=x[b],_=w.matrix;if(t!=0){const E=_.a,S=_.c,T=_.b,A=_.d;let C=Math.atan2(u,h)-Math.atan2(T,E)+p;C>M.PI?C-=M.PI2:C<-M.PI&&(C+=M.PI2),C*=t;const I=Math.cos(C),P=Math.sin(C);_.a=I*E-P*T,_.c=I*S-P*A,_.b=P*E+I*T,_.d=P*S+I*A}if(l){const E=this.temp;a.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),_.tx+=(E.x-_.tx)*e,_.ty+=(E.y-_.ty)*s}if(r!=0){let E=Math.sqrt(_.a*_.a+_.b*_.b);E!=0&&(E=(E+(Math.sqrt(h*h+u*u)-E+this.data.offsetScaleX)*r)/E),_.a*=E,_.b*=E}if(i!=0){let E=Math.sqrt(_.c*_.c+_.d*_.d);E!=0&&(E=(E+(Math.sqrt(d*d+f*f)-E+this.data.offsetScaleY)*i)/E),_.c*=E,_.d*=E}if(o>0){const E=_.c,S=_.d,T=Math.atan2(S,E);let A=Math.atan2(f,d)-Math.atan2(u,h)-(T-Math.atan2(_.b,_.a));A>M.PI?A-=M.PI2:A<-M.PI&&(A+=M.PI2),A=T+(A+g)*o;const C=Math.sqrt(E*E+S*S);_.c=Math.cos(A)*C,_.d=Math.sin(A)*C}w.updateAppliedTransform()}}applyRelativeWorld(){const t=this.mixRotate,e=this.mixX,s=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,l=e!=0||s!=0,a=this.target,c=a.matrix,h=c.a,d=c.c,u=c.b,f=c.d,m=h*f-d*u>0?M.degRad:-M.degRad,p=this.data.offsetRotation*m,g=this.data.offsetShearY*m,x=this.bones;for(let b=0,y=x.length;b<y;b++){const w=x[b],_=w.matrix;if(t!=0){const E=_.a,S=_.c,T=_.b,A=_.d;let C=Math.atan2(u,h)+p;C>M.PI?C-=M.PI2:C<-M.PI&&(C+=M.PI2),C*=t;const I=Math.cos(C),P=Math.sin(C);_.a=I*E-P*T,_.c=I*S-P*A,_.b=P*E+I*T,_.d=P*S+I*A}if(l){const E=this.temp;a.localToWorld(E.set(this.data.offsetX,this.data.offsetY)),_.tx+=E.x*e,_.ty+=E.y*s}if(r!=0){const E=(Math.sqrt(h*h+u*u)-1+this.data.offsetScaleX)*r+1;_.a*=E,_.b*=E}if(i!=0){const E=(Math.sqrt(d*d+f*f)-1+this.data.offsetScaleY)*i+1;_.c*=E,_.d*=E}if(o>0){let E=Math.atan2(f,d)-Math.atan2(u,h);E>M.PI?E-=M.PI2:E<-M.PI&&(E+=M.PI2);const S=_.c,T=_.d;E=Math.atan2(T,S)+(E-M.PI/2+g)*o;const A=Math.sqrt(S*S+T*T);_.c=Math.cos(E)*A,_.d=Math.sin(E)*A}w.updateAppliedTransform()}}applyAbsoluteLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,l=this.target,a=this.bones;for(let c=0,h=a.length;c<h;c++){const d=a[c];let u=d.arotation;if(t!=0){let b=l.arotation-u+this.data.offsetRotation;b-=(16384-(16384.499999999996-b/360|0))*360,u+=b*t}let f=d.ax,m=d.ay;f+=(l.ax-f+this.data.offsetX)*e,m+=(l.ay-m+this.data.offsetY)*s;let p=d.ascaleX,g=d.ascaleY;r!=0&&p!=0&&(p=(p+(l.ascaleX-p+this.data.offsetScaleX)*r)/p),i!=0&&g!=0&&(g=(g+(l.ascaleY-g+this.data.offsetScaleY)*i)/g);let x=d.ashearY;if(o!=0){let b=l.ashearY-x+this.data.offsetShearY;b-=(16384-(16384.499999999996-b/360|0))*360,x+=b*o}d.updateWorldTransformWith(f,m,u,p,g,d.ashearX,x)}}applyRelativeLocal(){const t=this.mixRotate,e=this.mixX,s=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,l=this.target,a=this.bones;for(let c=0,h=a.length;c<h;c++){const d=a[c],u=d.arotation+(l.arotation+this.data.offsetRotation)*t,f=d.ax+(l.ax+this.data.offsetX)*e,m=d.ay+(l.ay+this.data.offsetY)*s,p=d.ascaleX*((l.ascaleX-1+this.data.offsetScaleX)*r+1),g=d.ascaleY*((l.ascaleY-1+this.data.offsetScaleY)*i+1),x=d.ashearY+(l.ashearY+this.data.offsetShearY)*o;d.updateWorldTransformWith(f,m,u,p,g,d.ashearX,x)}}}const Yi=class{constructor(n){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!n)throw new Error("data cannot be null.");this.data=n,this.bones=new Array;for(let t=0;t<n.bones.length;t++){const e=n.bones[t];let s;if(!e.parent)s=new zc(e,this,null);else{const r=this.bones[e.parent.index];s=new zc(e,this,r),r.children.push(s)}this.bones.push(s)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<n.slots.length;t++){const e=n.slots[t],s=this.bones[e.boneData.index],r=new Ag(e,s);this.slots.push(r),this.drawOrder.push(r)}this.ikConstraints=new Array;for(let t=0;t<n.ikConstraints.length;t++){const e=n.ikConstraints[t];this.ikConstraints.push(new Tg(e,this))}this.transformConstraints=new Array;for(let t=0;t<n.transformConstraints.length;t++){const e=n.transformConstraints[t];this.transformConstraints.push(new Cg(e,this))}this.pathConstraints=new Array;for(let t=0;t<n.pathConstraints.length;t++){const e=n.pathConstraints[t];this.pathConstraints.push(new Si(e,this))}this.color=new tt(1,1,1,1),this.updateCache()}updateCache(){const n=this._updateCache;n.length=0;const t=this.bones;for(let c=0,h=t.length;c<h;c++){const d=t[c];d.sorted=d.data.skinRequired,d.active=!d.sorted}if(this.skin){const c=this.skin.bones;for(let h=0,d=this.skin.bones.length;h<d;h++){let u=this.bones[c[h].index];do u.sorted=!1,u.active=!0,u=u.parent;while(u)}}const e=this.ikConstraints,s=this.transformConstraints,r=this.pathConstraints,i=e.length,o=s.length,l=r.length,a=i+o+l;t:for(let c=0;c<a;c++){for(let h=0;h<i;h++){const d=e[h];if(d.data.order==c){this.sortIkConstraint(d);continue t}}for(let h=0;h<o;h++){const d=s[h];if(d.data.order==c){this.sortTransformConstraint(d);continue t}}for(let h=0;h<l;h++){const d=r[h];if(d.data.order==c){this.sortPathConstraint(d);continue t}}}for(let c=0,h=t.length;c<h;c++)this.sortBone(t[c])}sortIkConstraint(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,n.data,!0)),!n.active)return;const t=n.target;this.sortBone(t);const e=n.bones,s=e[0];if(this.sortBone(s),e.length==1)this._updateCache.push(n),this.sortReset(s.children);else{const r=e[e.length-1];this.sortBone(r),this._updateCache.push(n),this.sortReset(s.children),r.sorted=!0}}sortPathConstraint(n){if(n.active=n.target.bone.isActive()&&(!n.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,n.data,!0)),!n.active)return;const t=n.target,e=t.data.index,s=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,e,s),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,e,s);for(let l=0,a=this.data.skins.length;l<a;l++)this.sortPathConstraintAttachment(this.data.skins[l],e,s);const r=t.getAttachment();r instanceof Dr&&this.sortPathConstraintAttachmentWith(r,s);const i=n.bones,o=i.length;for(let l=0;l<o;l++)this.sortBone(i[l]);this._updateCache.push(n);for(let l=0;l<o;l++)this.sortReset(i[l].children);for(let l=0;l<o;l++)i[l].sorted=!0}sortTransformConstraint(n){if(n.active=n.target.isActive()&&(!n.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,n.data,!0)),!n.active)return;this.sortBone(n.target);const t=n.bones,e=t.length;if(n.data.local)for(let s=0;s<e;s++){const r=t[s];this.sortBone(r.parent),this.sortBone(r)}else for(let s=0;s<e;s++)this.sortBone(t[s]);this._updateCache.push(n);for(let s=0;s<e;s++)this.sortReset(t[s].children);for(let s=0;s<e;s++)t[s].sorted=!0}sortPathConstraintAttachment(n,t,e){const s=n.attachments[t];if(s)for(const r in s)this.sortPathConstraintAttachmentWith(s[r],e)}sortPathConstraintAttachmentWith(n,t){if(!(n instanceof Dr))return;const e=n.bones;if(!e)this.sortBone(t);else{const s=this.bones;for(let r=0,i=e.length;r<i;){let o=e[r++];for(o+=r;r<o;)this.sortBone(s[e[r++]])}}}sortBone(n){if(!n||n.sorted)return;const t=n.parent;t&&this.sortBone(t),n.sorted=!0,this._updateCache.push(n)}sortReset(n){for(let t=0,e=n.length;t<e;t++){const s=n[t];s.active&&(s.sorted&&this.sortReset(s.children),s.sorted=!1)}}updateWorldTransform(){const n=this.bones;for(let e=0,s=n.length;e<s;e++){const r=n[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}const t=this._updateCache;for(let e=0,s=t.length;e<s;e++)t[e].update()}updateWorldTransformWith(n){const t=this.getRootBone(),e=n.matrix.a,s=n.matrix.c,r=n.matrix.b,i=n.matrix.d;t.matrix.tx=e*this.x+s*this.y+n.worldX,t.matrix.ty=r*this.x+i*this.y+n.worldY;const o=t.rotation+90+t.shearY,l=M.cosDeg(t.rotation+t.shearX)*t.scaleX,a=M.cosDeg(o)*t.scaleY,c=M.sinDeg(t.rotation+t.shearX)*t.scaleX,h=M.sinDeg(o)*t.scaleY,d=this.scaleX,u=-this.scaleY;t.matrix.a=(e*l+s*c)*d,t.matrix.c=(e*a+s*h)*d,t.matrix.b=(r*l+i*c)*u,t.matrix.d=(r*a+i*h)*u;const f=this._updateCache;for(let m=0,p=f.length;m<p;m++){const g=f[m];g!=t&&g.update()}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){const n=this.bones;for(let r=0,i=n.length;r<i;r++)n[r].setToSetupPose();const t=this.ikConstraints;for(let r=0,i=t.length;r<i;r++){const o=t[r];o.mix=o.data.mix,o.softness=o.data.softness,o.bendDirection=o.data.bendDirection,o.compress=o.data.compress,o.stretch=o.data.stretch}const e=this.transformConstraints;for(let r=0,i=e.length;r<i;r++){const o=e[r],l=o.data;o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY,o.mixScaleX=l.mixScaleX,o.mixScaleY=l.mixScaleY,o.mixShearY=l.mixShearY}const s=this.pathConstraints;for(let r=0,i=s.length;r<i;r++){const o=s[r],l=o.data;o.position=l.position,o.spacing=l.spacing,o.mixRotate=l.mixRotate,o.mixX=l.mixX,o.mixY=l.mixY}}setSlotsToSetupPose(){const n=this.slots;Y.arrayCopy(n,0,this.drawOrder,0,n.length);for(let t=0,e=n.length;t<e;t++)n[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(n){if(!n)throw new Error("boneName cannot be null.");const t=this.bones;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(r.data.name==n)return r}return null}findBoneIndex(n){if(!n)throw new Error("boneName cannot be null.");const t=this.bones;for(let e=0,s=t.length;e<s;e++)if(t[e].data.name==n)return e;return-1}findSlot(n){if(!n)throw new Error("slotName cannot be null.");const t=this.slots;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(r.data.name==n)return r}return null}findSlotIndex(n){if(!n)throw new Error("slotName cannot be null.");const t=this.slots;for(let e=0,s=t.length;e<s;e++)if(t[e].data.name==n)return e;return-1}setSkinByName(n){const t=this.data.findSkin(n);if(!t)throw new Error(`Skin not found: ${n}`);this.setSkin(t)}setSkin(n){if(n!=this.skin){if(n)if(this.skin)n.attachAll(this,this.skin);else{const t=this.slots;for(let e=0,s=t.length;e<s;e++){const r=t[e],i=r.data.attachmentName;if(i){const o=n.getAttachment(e,i);o&&r.setAttachment(o)}}}this.skin=n,this.updateCache()}}getAttachmentByName(n,t){const e=this.data.findSlot(n);if(!e)throw new Error(`Can't find slot with name ${n}`);return this.getAttachment(e.index,t)}getAttachment(n,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){const e=this.skin.getAttachment(n,t);if(e)return e}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(n,t):null}setAttachment(n,t){if(!n)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.data.name==n){let o=null;if(t&&(o=this.getAttachment(s,t),!o))throw new Error(`Attachment not found: ${t}, for slot: ${n}`);i.setAttachment(o);return}}throw new Error(`Slot not found: ${n}`)}findIkConstraint(n){if(!n)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(r.data.name==n)return r}return null}findTransformConstraint(n){if(!n)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(r.data.name==n)return r}return null}findPathConstraint(n){if(!n)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let e=0,s=t.length;e<s;e++){const r=t[e];if(r.data.name==n)return r}return null}getBoundsRect(){const n=new Qi,t=new Qi;return this.getBounds(n,t),{x:n.x,y:n.y,width:t.x,height:t.y}}getBounds(n,t,e=new Array(2)){if(!n)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");const s=this.drawOrder;let r=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let a=0,c=s.length;a<c;a++){const h=s[a];if(!h.bone.active)continue;let d=0,u=null;const f=h.getAttachment();if(f instanceof Ot)d=8,u=Y.setArraySize(e,d,0),f.computeWorldVertices(h,u,0,2);else if(f instanceof Br){const m=f;d=m.worldVerticesLength,u=Y.setArraySize(e,d,0),m.computeWorldVertices(h,0,d,u,0,2)}if(u)for(let m=0,p=u.length;m<p;m+=2){const g=u[m],x=u[m+1];r=Math.min(r,g),i=Math.min(i,x),o=Math.max(o,g),l=Math.max(l,x)}}n.set(r,i),t.set(o-r,l-i)}get flipX(){return this.scaleX==-1}set flipX(n){Yi.deprecatedWarning1||(Yi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=n?1:-1}get flipY(){return this.scaleY==-1}set flipY(n){Yi.deprecatedWarning1||(Yi.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=n?1:-1}};let Cd=Yi;Cd.deprecatedWarning1=!1;class kd{constructor(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}findBone(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findBoneIndex(t){if(!t)throw new Error("boneName cannot be null.");const e=this.bones;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSlot(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findSlotIndex(t){if(!t)throw new Error("slotName cannot be null.");const e=this.slots;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}findSkin(t){if(!t)throw new Error("skinName cannot be null.");const e=this.skins;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findEvent(t){if(!t)throw new Error("eventDataName cannot be null.");const e=this.events;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findAnimation(t){if(!t)throw new Error("animationName cannot be null.");const e=this.animations;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findIkConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.ikConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findTransformConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.transformConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraint(t){if(!t)throw new Error("constraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++){const i=e[s];if(i.name==t)return i}return null}findPathConstraintIndex(t){if(t==null)throw new Error("pathConstraintName cannot be null.");const e=this.pathConstraints;for(let s=0,r=e.length;s<r;s++)if(e[s].name==t)return s;return-1}}class Id{constructor(t,e,s){if(this.index=0,this.color=new tt(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=ht.NORMAL,t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!s)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=s}}class Rd extends zo{constructor(t){super(t,0,!1),this.bones=new Array,this._target=null,this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class Hc{constructor(t,e,s){this.slotIndex=t,this.name=e,this.attachment=s}}class mo{constructor(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}setAttachment(t,e,s){if(!s)throw new Error("attachment cannot be null.");const r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=s}addSkin(t){for(let s=0;s<t.bones.length;s++){const r=t.bones[s];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==r){i=!0;break}i||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){const r=t.constraints[s];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==r){i=!0;break}i||this.constraints.push(r)}const e=t.getAttachments();for(let s=0;s<e.length;s++){const r=e[s];this.setAttachment(r.slotIndex,r.name,r.attachment)}}copySkin(t){for(let s=0;s<t.bones.length;s++){const r=t.bones[s];let i=!1;for(let o=0;o<this.bones.length;o++)if(this.bones[o]==r){i=!0;break}i||this.bones.push(r)}for(let s=0;s<t.constraints.length;s++){const r=t.constraints[s];let i=!1;for(let o=0;o<this.constraints.length;o++)if(this.constraints[o]==r){i=!0;break}i||this.constraints.push(r)}const e=t.getAttachments();for(let s=0;s<e.length;s++){const r=e[s];r.attachment&&(r.attachment instanceof Br?(r.attachment=r.attachment.newLinkedMesh(),this.setAttachment(r.slotIndex,r.name,r.attachment)):(r.attachment=r.attachment.copy(),this.setAttachment(r.slotIndex,r.name,r.attachment)))}}getAttachment(t,e){const s=this.attachments[t];return s?s[e]:null}removeAttachment(t,e){const s=this.attachments[t];s&&delete s[e]}getAttachments(){const t=new Array;for(let e=0;e<this.attachments.length;e++){const s=this.attachments[e];if(s)for(const r in s){const i=s[r];i&&t.push(new Hc(e,r,i))}}return t}getAttachmentsForSlot(t,e){const s=this.attachments[t];if(s)for(const r in s){const i=s[r];i&&e.push(new Hc(t,r,i))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(t,e){let s=0;for(let r=0;r<t.slots.length;r++){const i=t.slots[r],o=i.getAttachment();if(o&&s<e.attachments.length){const l=e.attachments[s];for(const a in l){const c=l[a];if(o==c){const h=this.getAttachment(s,a);h&&i.setAttachment(h);break}}}s++}}}class Md{constructor(t){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new kd;s.name="";const r=new co(t),i=r.readInt32(),o=r.readInt32();s.hash=o==0&&i==0?null:o.toString(16)+i.toString(16),s.version=r.readString();const l=s.version.substr(0,3);if(l!=="4.0"&&l!=="4.1"){const d=`Spine 4.1 loader cant load version ${s.version}. Please configure your pixi-spine bundle`;console.error(d)}this.ver40=l==="4.0",s.x=r.readFloat(),s.y=r.readFloat(),s.width=r.readFloat(),s.height=r.readFloat();const a=r.readBoolean();a&&(s.fps=r.readFloat(),s.imagesPath=r.readString(),s.audioPath=r.readString());let c=0;c=r.readInt(!0);for(let d=0;d<c;d++){const u=r.readString();if(!u)throw new Error("String in string table must not be null.");r.strings.push(u)}c=r.readInt(!0);for(let d=0;d<c;d++){const u=r.readString();if(!u)throw new Error("Bone name must not be null.");const f=d==0?null:s.bones[r.readInt(!0)],m=new _d(d,u,f);m.rotation=r.readFloat(),m.x=r.readFloat()*e,m.y=r.readFloat()*e,m.scaleX=r.readFloat(),m.scaleY=r.readFloat(),m.shearX=r.readFloat(),m.shearY=r.readFloat(),m.length=r.readFloat()*e,m.transformMode=r.readInt(!0),m.skinRequired=r.readBoolean(),a&&tt.rgba8888ToColor(m.color,r.readInt32()),s.bones.push(m)}c=r.readInt(!0);for(let d=0;d<c;d++){const u=r.readString();if(!u)throw new Error("Slot name must not be null.");const f=s.bones[r.readInt(!0)],m=new Id(d,u,f);tt.rgba8888ToColor(m.color,r.readInt32());const p=r.readInt32();p!=-1&&tt.rgb888ToColor(m.darkColor=new tt,p),m.attachmentName=r.readStringRef(),m.blendMode=r.readInt(!0),s.slots.push(m)}c=r.readInt(!0);for(let d=0,u;d<c;d++){const f=r.readString();if(!f)throw new Error("IK constraint data name must not be null.");const m=new Td(f);m.order=r.readInt(!0),m.skinRequired=r.readBoolean(),u=r.readInt(!0);for(let p=0;p<u;p++)m.bones.push(s.bones[r.readInt(!0)]);m.target=s.bones[r.readInt(!0)],m.mix=r.readFloat(),m.softness=r.readFloat()*e,m.bendDirection=r.readByte(),m.compress=r.readBoolean(),m.stretch=r.readBoolean(),m.uniform=r.readBoolean(),s.ikConstraints.push(m)}c=r.readInt(!0);for(let d=0,u;d<c;d++){const f=r.readString();if(!f)throw new Error("Transform constraint data name must not be null.");const m=new Rd(f);m.order=r.readInt(!0),m.skinRequired=r.readBoolean(),u=r.readInt(!0);for(let p=0;p<u;p++)m.bones.push(s.bones[r.readInt(!0)]);m.target=s.bones[r.readInt(!0)],m.local=r.readBoolean(),m.relative=r.readBoolean(),m.offsetRotation=r.readFloat(),m.offsetX=r.readFloat()*e,m.offsetY=r.readFloat()*e,m.offsetScaleX=r.readFloat(),m.offsetScaleY=r.readFloat(),m.offsetShearY=r.readFloat(),m.mixRotate=r.readFloat(),m.mixX=r.readFloat(),m.mixY=r.readFloat(),m.mixScaleX=r.readFloat(),m.mixScaleY=r.readFloat(),m.mixShearY=r.readFloat(),s.transformConstraints.push(m)}c=r.readInt(!0);for(let d=0,u;d<c;d++){const f=r.readString();if(!f)throw new Error("Path constraint data name must not be null.");const m=new Ad(f);m.order=r.readInt(!0),m.skinRequired=r.readBoolean(),u=r.readInt(!0);for(let p=0;p<u;p++)m.bones.push(s.bones[r.readInt(!0)]);m.target=s.slots[r.readInt(!0)],m.positionMode=r.readInt(!0),m.spacingMode=r.readInt(!0),m.rotateMode=r.readInt(!0),m.offsetRotation=r.readFloat(),m.position=r.readFloat(),m.positionMode==fe.Fixed&&(m.position*=e),m.spacing=r.readFloat(),(m.spacingMode==Ae.Length||m.spacingMode==Ae.Fixed)&&(m.spacing*=e),m.mixRotate=r.readFloat(),m.mixX=r.readFloat(),m.mixY=r.readFloat(),s.pathConstraints.push(m)}const h=this.readSkin(r,s,!0,a);h&&(s.defaultSkin=h,s.skins.push(h));{let d=s.skins.length;for(Y.setArraySize(s.skins,c=d+r.readInt(!0));d<c;d++){const u=this.readSkin(r,s,!1,a);if(!u)throw new Error("readSkin() should not have returned null.");s.skins[d]=u}}c=this.linkedMeshes.length;for(let d=0;d<c;d++){const u=this.linkedMeshes[d],f=u.skin?s.findSkin(u.skin):s.defaultSkin;if(!f)throw new Error("Not skin found for linked mesh.");if(!u.parent)throw new Error("Linked mesh parent must not be null");const m=f.getAttachment(u.slotIndex,u.parent);if(!m)throw new Error(`Parent mesh not found: ${u.parent}`);u.mesh.timelineAttachment=u.inheritTimeline?m:u.mesh,u.mesh.setParentMesh(m)}this.linkedMeshes.length=0,c=r.readInt(!0);for(let d=0;d<c;d++){const u=r.readStringRef();if(!u)throw new Error;const f=new Sd(u);f.intValue=r.readInt(!1),f.floatValue=r.readFloat(),f.stringValue=r.readString(),f.audioPath=r.readString(),f.audioPath&&(f.volume=r.readFloat(),f.balance=r.readFloat()),s.events.push(f)}c=r.readInt(!0);for(let d=0;d<c;d++){const u=r.readString();if(!u)throw new Error("Animatio name must not be null.");s.animations.push(this.readAnimation(r,u,s))}return s}readSkin(t,e,s,r){let i=null,o=0;if(s){if(o=t.readInt(!0),o==0)return null;i=new mo("default")}else{const l=t.readStringRef();if(!l)throw new Error("Skin name must not be null.");i=new mo(l),i.bones.length=t.readInt(!0);for(let a=0,c=i.bones.length;a<c;a++)i.bones[a]=e.bones[t.readInt(!0)];for(let a=0,c=t.readInt(!0);a<c;a++)i.constraints.push(e.ikConstraints[t.readInt(!0)]);for(let a=0,c=t.readInt(!0);a<c;a++)i.constraints.push(e.transformConstraints[t.readInt(!0)]);for(let a=0,c=t.readInt(!0);a<c;a++)i.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(let l=0;l<o;l++){const a=t.readInt(!0);for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readStringRef();if(!d)throw new Error("Attachment name must not be null");const u=this.readAttachment(t,e,i,a,d,r);u&&i.setAttachment(a,d,u)}}return i}readAttachment(t,e,s,r,i,o){const l=this.scale;let a=t.readStringRef();switch(a||(a=i),t.readByte()){case Mt.Region:{let c=t.readStringRef();const h=t.readFloat(),d=t.readFloat(),u=t.readFloat(),f=t.readFloat(),m=t.readFloat(),p=t.readFloat(),g=t.readFloat(),x=t.readInt32(),b=this.readSequence(t);c||(c=a);const y=this.attachmentLoader.newRegionAttachment(s,a,c,b);return y?(y.path=c,y.x=d*l,y.y=u*l,y.scaleX=f,y.scaleY=m,y.rotation=h,y.width=p*l,y.height=g*l,tt.rgba8888ToColor(y.color,x),y.sequence=b,b==null&&y.updateRegion(),y):null}case Mt.BoundingBox:{const c=t.readInt(!0),h=this.readVertices(t,c),d=o?t.readInt32():0,u=this.attachmentLoader.newBoundingBoxAttachment(s,a);return u?(u.worldVerticesLength=c<<1,u.vertices=h.vertices,u.bones=h.bones,o&&tt.rgba8888ToColor(u.color,d),u):null}case Mt.Mesh:{let c=t.readStringRef();const h=t.readInt32(),d=t.readInt(!0),u=this.readFloatArray(t,d<<1,1),f=this.readShortArray(t),m=this.readVertices(t,d),p=t.readInt(!0),g=this.readSequence(t);let x=[],b=0,y=0;o&&(x=this.readShortArray(t),b=t.readFloat(),y=t.readFloat()),c||(c=a);const w=this.attachmentLoader.newMeshAttachment(s,a,c,g);return w?(w.path=c,tt.rgba8888ToColor(w.color,h),w.bones=m.bones,w.vertices=m.vertices,w.worldVerticesLength=d<<1,w.triangles=f,w.regionUVs=new Float32Array(u),w.hullLength=p<<1,w.sequence=g,o&&(w.edges=x,w.width=b*l,w.height=y*l),w):null}case Mt.LinkedMesh:{let c=t.readStringRef();const h=t.readInt32(),d=t.readStringRef(),u=t.readStringRef(),f=t.readBoolean(),m=this.readSequence(t);let p=0,g=0;o&&(p=t.readFloat(),g=t.readFloat()),c||(c=a);const x=this.attachmentLoader.newMeshAttachment(s,a,c,m);return x?(x.path=c,tt.rgba8888ToColor(x.color,h),x.sequence=m,o&&(x.width=p*l,x.height=g*l),this.linkedMeshes.push(new fE(x,d,r,u,f)),x):null}case Mt.Path:{const c=t.readBoolean(),h=t.readBoolean(),d=t.readInt(!0),u=this.readVertices(t,d),f=Y.newArray(d/3,0);for(let g=0,x=f.length;g<x;g++)f[g]=t.readFloat()*l;const m=o?t.readInt32():0,p=this.attachmentLoader.newPathAttachment(s,a);return p?(p.closed=c,p.constantSpeed=h,p.worldVerticesLength=d<<1,p.vertices=u.vertices,p.bones=u.bones,p.lengths=f,o&&tt.rgba8888ToColor(p.color,m),p):null}case Mt.Point:{const c=t.readFloat(),h=t.readFloat(),d=t.readFloat(),u=o?t.readInt32():0,f=this.attachmentLoader.newPointAttachment(s,a);return f?(f.x=h*l,f.y=d*l,f.rotation=c,o&&tt.rgba8888ToColor(f.color,u),f):null}case Mt.Clipping:{const c=t.readInt(!0),h=t.readInt(!0),d=this.readVertices(t,h),u=o?t.readInt32():0,f=this.attachmentLoader.newClippingAttachment(s,a);return f?(f.endSlot=e.slots[c],f.worldVerticesLength=h<<1,f.vertices=d.vertices,f.bones=d.bones,o&&tt.rgba8888ToColor(f.color,u),f):null}}return null}readSequence(t){if(this.ver40||!t.readBoolean())return null;const e=new Go(t.readInt(!0));return e.start=t.readInt(!0),e.digits=t.readInt(!0),e.setupIndex=t.readInt(!0),e}readDeformTimelineType(t){return this.ver40?yf:t.readByte()}readVertices(t,e){const s=this.scale,r=e<<1,i=new mE;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,r,s),i;const o=new Array,l=new Array;for(let a=0;a<e;a++){const c=t.readInt(!0);l.push(c);for(let h=0;h<c;h++)l.push(t.readInt(!0)),o.push(t.readFloat()*s),o.push(t.readFloat()*s),o.push(t.readFloat())}return i.vertices=Y.toFloatArray(o),i.bones=l,i}readFloatArray(t,e,s){const r=new Array(e);if(s==1)for(let i=0;i<e;i++)r[i]=t.readFloat();else for(let i=0;i<e;i++)r[i]=t.readFloat()*s;return r}readShortArray(t){const e=t.readInt(!0),s=new Array(e);for(let r=0;r<e;r++)s[r]=t.readShort();return s}readAnimation(t,e,s){t.readInt(!0);const r=new Array,i=this.scale;for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readInt(!0);for(let u=0,f=t.readInt(!0);u<f;u++){const m=t.readByte(),p=t.readInt(!0),g=p-1;switch(m){case TE:{const x=new Ir(p,d);for(let b=0;b<p;b++)x.setFrame(b,t.readFloat(),t.readStringRef());r.push(x);break}case AE:{const x=t.readInt(!0),b=new hd(p,x,d);let y=t.readFloat(),w=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;for(let T=0,A=0;b.setFrame(T,y,w,_,E,S),T!=g;T++){const C=t.readFloat(),I=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case Ds:b.setStepped(T);break;case Ls:Ft(t,b,A++,T,0,y,C,w,I,1),Ft(t,b,A++,T,1,y,C,_,P,1),Ft(t,b,A++,T,2,y,C,E,R,1),Ft(t,b,A++,T,3,y,C,S,N,1)}y=C,w=I,_=P,E=R,S=N}r.push(b);break}case CE:{const x=t.readInt(!0),b=new dd(p,x,d);let y=t.readFloat(),w=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255;for(let S=0,T=0;b.setFrame(S,y,w,_,E),S!=g;S++){const A=t.readFloat(),C=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255;switch(t.readByte()){case Ds:b.setStepped(S);break;case Ls:Ft(t,b,T++,S,0,y,A,w,C,1),Ft(t,b,T++,S,1,y,A,_,I,1),Ft(t,b,T++,S,2,y,A,E,P,1)}y=A,w=C,_=I,E=P}r.push(b);break}case kE:{const x=t.readInt(!0),b=new fd(p,x,d);let y=t.readFloat(),w=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255;for(let I=0,P=0;b.setFrame(I,y,w,_,E,S,T,A,C),I!=g;I++){const R=t.readFloat(),N=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,j=t.readUnsignedByte()/255,U=t.readUnsignedByte()/255;switch(t.readByte()){case Ds:b.setStepped(I);break;case Ls:Ft(t,b,P++,I,0,y,R,w,N,1),Ft(t,b,P++,I,1,y,R,_,F,1),Ft(t,b,P++,I,2,y,R,E,D,1),Ft(t,b,P++,I,3,y,R,S,L,1),Ft(t,b,P++,I,4,y,R,T,O,1),Ft(t,b,P++,I,5,y,R,A,j,1),Ft(t,b,P++,I,6,y,R,C,U,1)}y=R,w=N,_=F,E=D,S=L,T=O,A=j,C=U}r.push(b);break}case IE:{const x=t.readInt(!0),b=new md(p,x,d);let y=t.readFloat(),w=t.readUnsignedByte()/255,_=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,T=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255;for(let C=0,I=0;b.setFrame(C,y,w,_,E,S,T,A),C!=g;C++){const P=t.readFloat(),R=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255,F=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,L=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255;switch(t.readByte()){case Ds:b.setStepped(C);break;case Ls:Ft(t,b,I++,C,0,y,P,w,R,1),Ft(t,b,I++,C,1,y,P,_,N,1),Ft(t,b,I++,C,2,y,P,E,F,1),Ft(t,b,I++,C,3,y,P,S,D,1),Ft(t,b,I++,C,4,y,P,T,L,1),Ft(t,b,I++,C,5,y,P,A,O,1)}y=P,w=R,_=N,E=F,S=D,T=L,A=O}r.push(b);break}case RE:{const x=new ud(p,t.readInt(!0),d);let b=t.readFloat(),y=t.readUnsignedByte()/255;for(let w=0,_=0;x.setFrame(w,b,y),w!=g;w++){const E=t.readFloat(),S=t.readUnsignedByte()/255;switch(t.readByte()){case Ds:x.setStepped(w);break;case Ls:Ft(t,x,_++,w,0,b,E,y,S,1)}b=E,y=S}r.push(x)}}}}for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readInt(!0);for(let u=0,f=t.readInt(!0);u<f;u++){const m=t.readByte(),p=t.readInt(!0),g=t.readInt(!0);switch(m){case pE:r.push(bn(t,new ea(p,g,d),1));break;case gE:r.push(Bl(t,new ed(p,g,d),i));break;case xE:r.push(bn(t,new sd(p,g,d),i));break;case bE:r.push(bn(t,new nd(p,g,d),i));break;case yE:r.push(Bl(t,new rd(p,g,d),1));break;case wE:r.push(bn(t,new id(p,g,d),1));break;case vE:r.push(bn(t,new ad(p,g,d),1));break;case _E:r.push(Bl(t,new od(p,g,d),1));break;case EE:r.push(bn(t,new ld(p,g,d),1));break;case SE:r.push(bn(t,new cd(p,g,d),1))}}}for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readInt(!0),u=t.readInt(!0),f=u-1,m=new gd(u,t.readInt(!0),d);let p=t.readFloat(),g=t.readFloat(),x=t.readFloat()*i;for(let b=0,y=0;m.setFrame(b,p,g,x,t.readByte(),t.readBoolean(),t.readBoolean()),b!=f;b++){const w=t.readFloat(),_=t.readFloat(),E=t.readFloat()*i;switch(t.readByte()){case Ds:m.setStepped(b);break;case Ls:Ft(t,m,y++,b,0,p,w,g,_,1),Ft(t,m,y++,b,1,p,w,x,E,i)}p=w,g=_,x=E}r.push(m)}for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readInt(!0),u=t.readInt(!0),f=u-1,m=new xd(u,t.readInt(!0),d);let p=t.readFloat(),g=t.readFloat(),x=t.readFloat(),b=t.readFloat(),y=t.readFloat(),w=t.readFloat(),_=t.readFloat();for(let E=0,S=0;m.setFrame(E,p,g,x,b,y,w,_),E!=f;E++){const T=t.readFloat(),A=t.readFloat(),C=t.readFloat(),I=t.readFloat(),P=t.readFloat(),R=t.readFloat(),N=t.readFloat();switch(t.readByte()){case Ds:m.setStepped(E);break;case Ls:Ft(t,m,S++,E,0,p,T,g,A,1),Ft(t,m,S++,E,1,p,T,x,C,1),Ft(t,m,S++,E,2,p,T,b,I,1),Ft(t,m,S++,E,3,p,T,y,P,1),Ft(t,m,S++,E,4,p,T,w,R,1),Ft(t,m,S++,E,5,p,T,_,N,1)}p=T,g=A,x=C,b=I,y=P,w=R,_=N}r.push(m)}for(let c=0,h=t.readInt(!0);c<h;c++){const d=t.readInt(!0),u=s.pathConstraints[d];for(let f=0,m=t.readInt(!0);f<m;f++)switch(t.readByte()){case PE:r.push(bn(t,new bd(t.readInt(!0),t.readInt(!0),d),u.positionMode==fe.Fixed?i:1));break;case NE:r.push(bn(t,new yd(t.readInt(!0),t.readInt(!0),d),u.spacingMode==Ae.Length||u.spacingMode==Ae.Fixed?i:1));break;case FE:const p=new wd(t.readInt(!0),t.readInt(!0),d);let g=t.readFloat(),x=t.readFloat(),b=t.readFloat(),y=t.readFloat();for(let w=0,_=0,E=p.getFrameCount()-1;p.setFrame(w,g,x,b,y),w!=E;w++){const S=t.readFloat(),T=t.readFloat(),A=t.readFloat(),C=t.readFloat();switch(t.readByte()){case Ds:p.setStepped(w);break;case Ls:Ft(t,p,_++,w,0,g,S,x,T,1),Ft(t,p,_++,w,1,g,S,b,A,1),Ft(t,p,_++,w,2,g,S,y,C,1)}g=S,x=T,b=A,y=C}r.push(p)}}for(let c=0,h=t.readInt(!0);c<h;c++){const d=s.skins[t.readInt(!0)];for(let u=0,f=t.readInt(!0);u<f;u++){const m=t.readInt(!0);for(let p=0,g=t.readInt(!0);p<g;p++){const x=t.readStringRef();if(!x)throw new Error("attachmentName must not be null.");const b=d.getAttachment(m,x),y=this.readDeformTimelineType(t),w=t.readInt(!0),_=w-1;switch(y){case yf:{const E=b,S=E.bones,T=E.vertices,A=S?T.length/3*2:T.length,C=t.readInt(!0),I=new pd(w,C,m,E);let P=t.readFloat();for(let R=0,N=0;;R++){let F,D=t.readInt(!0);if(D==0)F=S?Y.newFloatArray(A):T;else{F=Y.newFloatArray(A);const O=t.readInt(!0);if(D+=O,i==1)for(let j=O;j<D;j++)F[j]=t.readFloat();else for(let j=O;j<D;j++)F[j]=t.readFloat()*i;if(!S)for(let j=0,U=F.length;j<U;j++)F[j]+=T[j]}if(I.setFrame(R,P,F),R==_)break;const L=t.readFloat();switch(t.readByte()){case Ds:I.setStepped(R);break;case Ls:Ft(t,I,N++,R,0,P,L,0,1,1)}P=L}r.push(I);break}case ME:{const E=new _i(w,m,b);for(let S=0;S<w;S++){const T=t.readFloat(),A=t.readInt32();E.setFrame(S,T,td[A&15],A>>4,t.readFloat())}r.push(E);break}}}}}const o=t.readInt(!0);if(o>0){const c=new Mr(o),h=s.slots.length;for(let d=0;d<o;d++){const u=t.readFloat(),f=t.readInt(!0),m=Y.newArray(h,0);for(let b=h-1;b>=0;b--)m[b]=-1;const p=Y.newArray(h-f,0);let g=0,x=0;for(let b=0;b<f;b++){const y=t.readInt(!0);for(;g!=y;)p[x++]=g++;m[g+t.readInt(!0)]=g++}for(;g<h;)p[x++]=g++;for(let b=h-1;b>=0;b--)m[b]==-1&&(m[b]=p[--x]);c.setFrame(d,u,m)}r.push(c)}const l=t.readInt(!0);if(l>0){const c=new ia(l);for(let h=0;h<l;h++){const d=t.readFloat(),u=s.events[t.readInt(!0)],f=new Ed(d,u);f.intValue=t.readInt(!1),f.floatValue=t.readFloat(),f.stringValue=t.readBoolean()?t.readString():u.stringValue,f.data.audioPath&&(f.volume=t.readFloat(),f.balance=t.readFloat()),c.setFrame(h,f)}r.push(c)}let a=0;for(let c=0,h=r.length;c<h;c++)a=Math.max(a,r[c].getDuration());return new Yo(e,r,a)}}Md.BlendModeValues=[ht.NORMAL,ht.ADD,ht.MULTIPLY,ht.SCREEN];let fE=class{constructor(t,e,s,r,i){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritTimeline=i}};class mE{constructor(t=null,e=null){this.bones=t,this.vertices=e}}function bn(n,t,e){let s=n.readFloat(),r=n.readFloat()*e;for(let i=0,o=0,l=t.getFrameCount()-1;t.setFrame(i,s,r),i!=l;i++){const a=n.readFloat(),c=n.readFloat()*e;switch(n.readByte()){case Ds:t.setStepped(i);break;case Ls:Ft(n,t,o++,i,0,s,a,r,c,e)}s=a,r=c}return t}function Bl(n,t,e){let s=n.readFloat(),r=n.readFloat()*e,i=n.readFloat()*e;for(let o=0,l=0,a=t.getFrameCount()-1;t.setFrame(o,s,r,i),o!=a;o++){const c=n.readFloat(),h=n.readFloat()*e,d=n.readFloat()*e;switch(n.readByte()){case Ds:t.setStepped(o);break;case Ls:Ft(n,t,l++,o,0,s,c,r,h,e),Ft(n,t,l++,o,1,s,c,i,d,e)}s=c,r=h,i=d}return t}function Ft(n,t,e,s,r,i,o,l,a,c){t.setBezier(e,s,r,i,l,n.readFloat(),n.readFloat()*c,n.readFloat(),n.readFloat()*c,o,a)}const pE=0,gE=1,xE=2,bE=3,yE=4,wE=5,vE=6,_E=7,EE=8,SE=9,TE=0,AE=1,CE=2,kE=3,IE=4,RE=5,yf=0,ME=1,PE=0,NE=1,FE=2,Ds=1,Ls=2;class BE extends kh{}class Ho{constructor(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}readSkeletonData(t){const e=this.scale,s=new kd,r=typeof t=="string"?JSON.parse(t):t,i=r.skeleton;if(i){s.hash=i.hash,s.version=i.spine;const o=s.version.substr(0,3);if(o!=="4.0"&&o!=="4.1"){const l=`Spine 4.1 loader cant load version ${i.spine}. Please configure your pixi-spine bundle`;console.error(l)}s.x=i.x,s.y=i.y,s.width=i.width,s.height=i.height,s.fps=i.fps,s.imagesPath=i.images}if(r.bones)for(let o=0;o<r.bones.length;o++){const l=r.bones[o];let a=null;const c=$(l,"parent",null);if(c!=null&&(a=s.findBone(c),a==null))throw new Error(`Parent bone not found: ${c}`);const h=new _d(s.bones.length,l.name,a);h.length=$(l,"length",0)*e,h.x=$(l,"x",0)*e,h.y=$(l,"y",0)*e,h.rotation=$(l,"rotation",0),h.scaleX=$(l,"scaleX",1),h.scaleY=$(l,"scaleY",1),h.shearX=$(l,"shearX",0),h.shearY=$(l,"shearY",0),h.transformMode=Y.enumValue(vt,$(l,"transform","Normal")),h.skinRequired=$(l,"skin",!1);const d=$(l,"color",null);d&&h.color.setFromString(d),s.bones.push(h)}if(r.slots)for(let o=0;o<r.slots.length;o++){const l=r.slots[o],a=s.findBone(l.bone);if(!a)throw new Error(`Couldn't find bone ${l.bone} for slot ${l.name}`);const c=new Id(s.slots.length,l.name,a),h=$(l,"color",null);h&&c.color.setFromString(h);const d=$(l,"dark",null);d&&(c.darkColor=tt.fromString(d)),c.attachmentName=$(l,"attachment",null),c.blendMode=Ho.blendModeFromString($(l,"blend","normal")),s.slots.push(c)}if(r.ik)for(let o=0;o<r.ik.length;o++){const l=r.ik[o],a=new Td(l.name);a.order=$(l,"order",0),a.skinRequired=$(l,"skin",!1);for(let c=0;c<l.bones.length;c++){const h=l.bones[c],d=s.findBone(h);if(d==null)throw new Error(`IK bone not found: ${h}`);a.bones.push(d)}a.target=s.findBone(l.target),a.mix=$(l,"mix",1),a.softness=$(l,"softness",0)*e,a.bendDirection=$(l,"bendPositive",!0)?1:-1,a.compress=$(l,"compress",!1),a.stretch=$(l,"stretch",!1),a.uniform=$(l,"uniform",!1),s.ikConstraints.push(a)}if(r.transform)for(let o=0;o<r.transform.length;o++){const l=r.transform[o],a=new Rd(l.name);a.order=$(l,"order",0),a.skinRequired=$(l,"skin",!1);for(let d=0;d<l.bones.length;d++){const u=l.bones[d],f=s.findBone(u);if(!f)throw new Error(`Couldn't find bone ${u} for transform constraint ${l.name}.`);a.bones.push(f)}const c=l.target,h=s.findBone(c);if(!h)throw new Error(`Couldn't find target bone ${c} for transform constraint ${l.name}.`);a.target=h,a.local=$(l,"local",!1),a.relative=$(l,"relative",!1),a.offsetRotation=$(l,"rotation",0),a.offsetX=$(l,"x",0)*e,a.offsetY=$(l,"y",0)*e,a.offsetScaleX=$(l,"scaleX",0),a.offsetScaleY=$(l,"scaleY",0),a.offsetShearY=$(l,"shearY",0),a.mixRotate=$(l,"mixRotate",1),a.mixX=$(l,"mixX",1),a.mixY=$(l,"mixY",a.mixX),a.mixScaleX=$(l,"mixScaleX",1),a.mixScaleY=$(l,"mixScaleY",a.mixScaleX),a.mixShearY=$(l,"mixShearY",1),s.transformConstraints.push(a)}if(r.path)for(let o=0;o<r.path.length;o++){const l=r.path[o],a=new Ad(l.name);a.order=$(l,"order",0),a.skinRequired=$(l,"skin",!1);for(let d=0;d<l.bones.length;d++){const u=l.bones[d],f=s.findBone(u);if(!f)throw new Error(`Couldn't find bone ${u} for path constraint ${l.name}.`);a.bones.push(f)}const c=l.target,h=s.findSlot(c);if(!h)throw new Error(`Couldn't find target slot ${c} for path constraint ${l.name}.`);a.target=h,a.positionMode=Y.enumValue(fe,$(l,"positionMode","Percent")),a.spacingMode=Y.enumValue(Ae,$(l,"spacingMode","Length")),a.rotateMode=Y.enumValue(we,$(l,"rotateMode","Tangent")),a.offsetRotation=$(l,"rotation",0),a.position=$(l,"position",0),a.positionMode==fe.Fixed&&(a.position*=e),a.spacing=$(l,"spacing",0),(a.spacingMode==Ae.Length||a.spacingMode==Ae.Fixed)&&(a.spacing*=e),a.mixRotate=$(l,"mixRotate",1),a.mixX=$(l,"mixX",1),a.mixY=$(l,"mixY",a.mixX),s.pathConstraints.push(a)}if(r.skins)for(let o=0;o<r.skins.length;o++){const l=r.skins[o],a=new mo(l.name);if(l.bones)for(let c=0;c<l.bones.length;c++){const h=l.bones[c],d=s.findBone(h);if(!d)throw new Error(`Couldn't find bone ${h} for skin ${l.name}.`);a.bones.push(d)}if(l.ik)for(let c=0;c<l.ik.length;c++){const h=l.ik[c],d=s.findIkConstraint(h);if(!d)throw new Error(`Couldn't find IK constraint ${h} for skin ${l.name}.`);a.constraints.push(d)}if(l.transform)for(let c=0;c<l.transform.length;c++){const h=l.transform[c],d=s.findTransformConstraint(h);if(!d)throw new Error(`Couldn't find transform constraint ${h} for skin ${l.name}.`);a.constraints.push(d)}if(l.path)for(let c=0;c<l.path.length;c++){const h=l.path[c],d=s.findPathConstraint(h);if(!d)throw new Error(`Couldn't find path constraint ${h} for skin ${l.name}.`);a.constraints.push(d)}for(const c in l.attachments){const h=s.findSlot(c);if(!h)throw new Error(`Couldn't find slot ${c} for skin ${l.name}.`);const d=l.attachments[c];for(const u in d){const f=this.readAttachment(d[u],a,h.index,u,s);f&&a.setAttachment(h.index,u,f)}}s.skins.push(a),a.name=="default"&&(s.defaultSkin=a)}for(let o=0,l=this.linkedMeshes.length;o<l;o++){const a=this.linkedMeshes[o],c=a.skin?s.findSkin(a.skin):s.defaultSkin;if(!c)throw new Error(`Skin not found: ${a.skin}`);const h=c.getAttachment(a.slotIndex,a.parent);if(!h)throw new Error(`Parent mesh not found: ${a.parent}`);a.mesh.timelineAttachment=a.inheritTimeline?h:a.mesh,a.mesh.setParentMesh(h)}if(this.linkedMeshes.length=0,r.events)for(const o in r.events){const l=r.events[o],a=new Sd(o);a.intValue=$(l,"int",0),a.floatValue=$(l,"float",0),a.stringValue=$(l,"string",""),a.audioPath=$(l,"audio",null),a.audioPath&&(a.volume=$(l,"volume",1),a.balance=$(l,"balance",0)),s.events.push(a)}if(r.animations)for(const o in r.animations){const l=r.animations[o];this.readAnimation(l,o,s)}return s}readAttachment(t,e,s,r,i){const o=this.scale;switch(r=$(t,"name",r),$(t,"type","region")){case"region":{const l=$(t,"path",r),a=this.readSequence($(t,"sequence",null)),c=this.attachmentLoader.newRegionAttachment(e,r,l,a);if(!c)return null;c.path=l,c.x=$(t,"x",0)*o,c.y=$(t,"y",0)*o,c.scaleX=$(t,"scaleX",1),c.scaleY=$(t,"scaleY",1),c.rotation=$(t,"rotation",0),c.width=t.width*o,c.height=t.height*o,c.sequence=a;const h=$(t,"color",null);return h&&c.color.setFromString(h),c}case"boundingbox":{const l=this.attachmentLoader.newBoundingBoxAttachment(e,r);if(!l)return null;this.readVertices(t,l,t.vertexCount<<1);const a=$(t,"color",null);return a&&l.color.setFromString(a),l}case"mesh":case"linkedmesh":{const l=$(t,"path",r),a=this.readSequence($(t,"sequence",null)),c=this.attachmentLoader.newMeshAttachment(e,r,l,a);if(!c)return null;c.path=l;const h=$(t,"color",null);h&&c.color.setFromString(h),c.width=$(t,"width",0)*o,c.height=$(t,"height",0)*o,c.sequence=a;const d=$(t,"parent",null);if(d)return this.linkedMeshes.push(new DE(c,$(t,"skin",null),s,d,$(t,"timelines",!0))),c;const u=t.uvs;return this.readVertices(t,c,u.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(u),c.edges=$(t,"edges",null),c.hullLength=$(t,"hull",0)*2,c}case"path":{const l=this.attachmentLoader.newPathAttachment(e,r);if(!l)return null;l.closed=$(t,"closed",!1),l.constantSpeed=$(t,"constantSpeed",!0);const a=t.vertexCount;this.readVertices(t,l,a<<1);const c=Y.newArray(a/3,0);for(let d=0;d<t.lengths.length;d++)c[d]=t.lengths[d]*o;l.lengths=c;const h=$(t,"color",null);return h&&l.color.setFromString(h),l}case"point":{const l=this.attachmentLoader.newPointAttachment(e,r);if(!l)return null;l.x=$(t,"x",0)*o,l.y=$(t,"y",0)*o,l.rotation=$(t,"rotation",0);const a=$(t,"color",null);return a&&l.color.setFromString(a),l}case"clipping":{const l=this.attachmentLoader.newClippingAttachment(e,r);if(!l)return null;const a=$(t,"end",null);if(a!=null){const d=i.findSlot(a);if(d==null)throw new Error(`Clipping end slot not found: ${a}`);l.endSlot=d}const c=t.vertexCount;this.readVertices(t,l,c<<1);const h=$(t,"color",null);return h&&l.color.setFromString(h),l}}return null}readSequence(t){if(t==null)return null;const e=new Go($(t,"count",0));return e.start=$(t,"start",1),e.digits=$(t,"digits",0),e.setupIndex=$(t,"setup",0),e}readVertices(t,e,s){const r=this.scale;e.worldVerticesLength=s;const i=t.vertices;if(s==i.length){const a=Y.toFloatArray(i);if(r!=1)for(let c=0,h=i.length;c<h;c++)a[c]*=r;e.vertices=a;return}const o=new Array,l=new Array;for(let a=0,c=i.length;a<c;){const h=i[a++];l.push(h);for(let d=a+h*4;a<d;a+=4)l.push(i[a]),o.push(i[a+1]*r),o.push(i[a+2]*r),o.push(i[a+3])}e.bones=l,e.vertices=Y.toFloatArray(o)}readAnimation(t,e,s){const r=this.scale,i=new Array;if(t.slots)for(const l in t.slots){const a=t.slots[l],c=s.findSlot(l);if(!c)throw new Error(`Slot not found: ${l}`);const h=c.index;for(const d in a){const u=a[d];if(!u)continue;const f=u.length;if(d=="attachment"){const m=new Ir(f,h);for(let p=0;p<f;p++){const g=u[p];m.setFrame(p,$(g,"time",0),$(g,"name",null))}i.push(m)}else if(d=="rgba"){const m=new hd(f,f<<2,h);let p=u[0],g=$(p,"time",0),x=tt.fromString(p.color);for(let b=0,y=0;;b++){m.setFrame(b,g,x.r,x.g,x.b,x.a);const w=u[b+1];if(!w){m.shrink(y);break}const _=$(w,"time",0),E=tt.fromString(w.color),S=p.curve;S&&(y=Lt(S,m,y,b,0,g,_,x.r,E.r,1),y=Lt(S,m,y,b,1,g,_,x.g,E.g,1),y=Lt(S,m,y,b,2,g,_,x.b,E.b,1),y=Lt(S,m,y,b,3,g,_,x.a,E.a,1)),g=_,x=E,p=w}i.push(m)}else if(d=="rgb"){const m=new dd(f,f*3,h);let p=u[0],g=$(p,"time",0),x=tt.fromString(p.color);for(let b=0,y=0;;b++){m.setFrame(b,g,x.r,x.g,x.b);const w=u[b+1];if(!w){m.shrink(y);break}const _=$(w,"time",0),E=tt.fromString(w.color),S=p.curve;S&&(y=Lt(S,m,y,b,0,g,_,x.r,E.r,1),y=Lt(S,m,y,b,1,g,_,x.g,E.g,1),y=Lt(S,m,y,b,2,g,_,x.b,E.b,1)),g=_,x=E,p=w}i.push(m)}else if(d=="alpha")i.push(en(u,new ud(f,f,h),0,1));else if(d=="rgba2"){const m=new fd(f,f*7,h);let p=u[0],g=$(p,"time",0),x=tt.fromString(p.light),b=tt.fromString(p.dark);for(let y=0,w=0;;y++){m.setFrame(y,g,x.r,x.g,x.b,x.a,b.r,b.g,b.b);const _=u[y+1];if(!_){m.shrink(w);break}const E=$(_,"time",0),S=tt.fromString(_.light),T=tt.fromString(_.dark),A=p.curve;A&&(w=Lt(A,m,w,y,0,g,E,x.r,S.r,1),w=Lt(A,m,w,y,1,g,E,x.g,S.g,1),w=Lt(A,m,w,y,2,g,E,x.b,S.b,1),w=Lt(A,m,w,y,3,g,E,x.a,S.a,1),w=Lt(A,m,w,y,4,g,E,b.r,T.r,1),w=Lt(A,m,w,y,5,g,E,b.g,T.g,1),w=Lt(A,m,w,y,6,g,E,b.b,T.b,1)),g=E,x=S,b=T,p=_}i.push(m)}else if(d=="rgb2"){const m=new md(f,f*6,h);let p=u[0],g=$(p,"time",0),x=tt.fromString(p.light),b=tt.fromString(p.dark);for(let y=0,w=0;;y++){m.setFrame(y,g,x.r,x.g,x.b,b.r,b.g,b.b);const _=u[y+1];if(!_){m.shrink(w);break}const E=$(_,"time",0),S=tt.fromString(_.light),T=tt.fromString(_.dark),A=p.curve;A&&(w=Lt(A,m,w,y,0,g,E,x.r,S.r,1),w=Lt(A,m,w,y,1,g,E,x.g,S.g,1),w=Lt(A,m,w,y,2,g,E,x.b,S.b,1),w=Lt(A,m,w,y,3,g,E,b.r,T.r,1),w=Lt(A,m,w,y,4,g,E,b.g,T.g,1),w=Lt(A,m,w,y,5,g,E,b.b,T.b,1)),g=E,x=S,b=T,p=_}i.push(m)}}}if(t.bones)for(const l in t.bones){const a=t.bones[l],c=s.findBone(l);if(!c)throw new Error(`Bone not found: ${l}`);const h=c.index;for(const d in a){const u=a[d],f=u.length;if(f!=0){if(d==="rotate")i.push(en(u,new ea(f,f,h),0,1));else if(d==="translate"){const m=new ed(f,f<<1,h);i.push(Dl(u,m,"x","y",0,r))}else if(d==="translatex"){const m=new sd(f,f,h);i.push(en(u,m,0,r))}else if(d==="translatey"){const m=new nd(f,f,h);i.push(en(u,m,0,r))}else if(d==="scale"){const m=new rd(f,f<<1,h);i.push(Dl(u,m,"x","y",1,1))}else if(d==="scalex"){const m=new id(f,f,h);i.push(en(u,m,1,1))}else if(d==="scaley"){const m=new ad(f,f,h);i.push(en(u,m,1,1))}else if(d==="shear"){const m=new od(f,f<<1,h);i.push(Dl(u,m,"x","y",0,1))}else if(d==="shearx"){const m=new ld(f,f,h);i.push(en(u,m,0,1))}else if(d==="sheary"){const m=new cd(f,f,h);i.push(en(u,m,0,1))}}}}if(t.ik)for(const l in t.ik){const a=t.ik[l];let c=a[0];if(!c)continue;const h=s.findIkConstraint(l);if(!h)throw new Error(`IK Constraint not found: ${l}`);const d=s.ikConstraints.indexOf(h),u=new gd(a.length,a.length<<1,d);let f=$(c,"time",0),m=$(c,"mix",1),p=$(c,"softness",0)*r;for(let g=0,x=0;;g++){u.setFrame(g,f,m,p,$(c,"bendPositive",!0)?1:-1,$(c,"compress",!1),$(c,"stretch",!1));const b=a[g+1];if(!b){u.shrink(x);break}const y=$(b,"time",0),w=$(b,"mix",1),_=$(b,"softness",0)*r,E=c.curve;E&&(x=Lt(E,u,x,g,0,f,y,m,w,1),x=Lt(E,u,x,g,1,f,y,p,_,r)),f=y,m=w,p=_,c=b}i.push(u)}if(t.transform)for(const l in t.transform){const a=t.transform[l];let c=a[0];if(!c)continue;const h=s.findTransformConstraint(l);if(!h)throw new Error(`Transform constraint not found: ${l}`);const d=s.transformConstraints.indexOf(h),u=new xd(a.length,a.length*6,d);let f=$(c,"time",0),m=$(c,"mixRotate",1),p=$(c,"mixX",1),g=$(c,"mixY",p),x=$(c,"mixScaleX",1),b=$(c,"mixScaleY",x);const y=$(c,"mixShearY",1);for(let w=0,_=0;;w++){u.setFrame(w,f,m,p,g,x,b,y);const E=a[w+1];if(!E){u.shrink(_);break}const S=$(E,"time",0),T=$(E,"mixRotate",1),A=$(E,"mixX",1),C=$(E,"mixY",A),I=$(E,"mixScaleX",1),P=$(E,"mixScaleY",I),R=$(E,"mixShearY",1),N=c.curve;N&&(_=Lt(N,u,_,w,0,f,S,m,T,1),_=Lt(N,u,_,w,1,f,S,p,A,1),_=Lt(N,u,_,w,2,f,S,g,C,1),_=Lt(N,u,_,w,3,f,S,x,I,1),_=Lt(N,u,_,w,4,f,S,b,P,1),_=Lt(N,u,_,w,5,f,S,y,R,1)),f=S,m=T,p=A,g=C,x=I,b=P,x=I,c=E}i.push(u)}if(t.path)for(const l in t.path){const a=t.path[l],c=s.findPathConstraint(l);if(!c)throw new Error(`Path constraint not found: ${l}`);const h=s.pathConstraints.indexOf(c);for(const d in a){const u=a[d];let f=u[0];if(!f)continue;const m=u.length;if(d==="position"){const p=new bd(m,m,h);i.push(en(u,p,0,c.positionMode==fe.Fixed?r:1))}else if(d==="spacing"){const p=new yd(m,m,h);i.push(en(u,p,0,c.spacingMode==Ae.Length||c.spacingMode==Ae.Fixed?r:1))}else if(d==="mix"){const p=new wd(m,m*3,h);let g=$(f,"time",0),x=$(f,"mixRotate",1),b=$(f,"mixX",1),y=$(f,"mixY",b);for(let w=0,_=0;;w++){p.setFrame(w,g,x,b,y);const E=u[w+1];if(!E){p.shrink(_);break}const S=$(E,"time",0),T=$(E,"mixRotate",1),A=$(E,"mixX",1),C=$(E,"mixY",A),I=f.curve;I&&(_=Lt(I,p,_,w,0,g,S,x,T,1),_=Lt(I,p,_,w,1,g,S,b,A,1),_=Lt(I,p,_,w,2,g,S,y,C,1)),g=S,x=T,b=A,y=C,f=E}i.push(p)}}}if(t.deform){t.attachments={};for(const l in t.deform){const a=t.deform[l],c=t.attachments[l]={};for(const h in a){const d=a[h],u=c[h]={};for(const f in d)u[f]={deform:d[f]}}}}if(t.attachments)for(const l in t.attachments){const a=t.attachments[l],c=s.findSkin(l);if(c!=null)for(const h in a){const d=a[h],u=s.findSlot(h);if(!u)throw new Error(`Slot not found: ${h}`);const f=u.index;for(const m in d){const p=d[m],g=c.getAttachment(f,m);for(const x in p){const b=p[x];let y=b[0];if(y){if(x=="deform"){const w=g.bones,_=g.vertices,E=w?_.length/3*2:_.length,S=new pd(b.length,b.length,f,g);let T=$(y,"time",0);for(let A=0,C=0;;A++){let I;const P=$(y,"vertices",null);if(!P)I=w?Y.newFloatArray(E):_;else{I=Y.newFloatArray(E);const D=$(y,"offset",0);if(Y.arrayCopy(P,0,I,D,P.length),r!=1)for(let L=D,O=L+P.length;L<O;L++)I[L]*=r;if(!w)for(let L=0;L<E;L++)I[L]+=_[L]}S.setFrame(A,T,I);const R=b[A+1];if(!R){S.shrink(C);break}const N=$(R,"time",0),F=y.curve;F&&(C=Lt(F,S,C,A,0,T,N,0,1,1)),T=N,y=R}i.push(S)}else if(x=="sequence"){const w=new _i(b.length,f,g);let _=0;for(let E=0;E<b.length;E++){const S=$(y,"delay",_),T=$(y,"time",0),A=cn[$(y,"mode","hold")],C=$(y,"index",0);w.setFrame(E,T,A,C,S),_=S,y=b[E+1]}i.push(w)}}}}}}if(t.drawOrder){const l=new Mr(t.drawOrder.length),a=s.slots.length;let c=0;for(let h=0;h<t.drawOrder.length;h++,c++){const d=t.drawOrder[h];let u=null;const f=$(d,"offsets",null);if(f){u=Y.newArray(a,-1);const m=Y.newArray(a-f.length,0);let p=0,g=0;for(let x=0;x<f.length;x++){const b=f[x],y=s.findSlot(b.slot);if(!y)throw new Error(`Slot not found: ${y}`);const w=y.index;for(;p!=w;)m[g++]=p++;u[p+b.offset]=p++}for(;p<a;)m[g++]=p++;for(let x=a-1;x>=0;x--)u[x]==-1&&(u[x]=m[--g])}l.setFrame(c,$(d,"time",0),u)}i.push(l)}if(t.events){const l=new ia(t.events.length);let a=0;for(let c=0;c<t.events.length;c++,a++){const h=t.events[c],d=s.findEvent(h.name);if(!d)throw new Error(`Event not found: ${h.name}`);const u=new Ed(Y.toSinglePrecision($(h,"time",0)),d);u.intValue=$(h,"int",d.intValue),u.floatValue=$(h,"float",d.floatValue),u.stringValue=$(h,"string",d.stringValue),u.data.audioPath&&(u.volume=$(h,"volume",1),u.balance=$(h,"balance",0)),l.setFrame(a,u)}i.push(l)}let o=0;for(let l=0,a=i.length;l<a;l++)o=Math.max(o,i[l].getDuration());if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");s.animations.push(new Yo(e,i,o))}static blendModeFromString(t){if(t=t.toLowerCase(),t=="normal")return ht.NORMAL;if(t=="additive")return ht.ADD;if(t=="multiply")return ht.MULTIPLY;if(t=="screen")return ht.SCREEN;throw new Error(`Unknown blend mode: ${t}`)}}class DE{constructor(t,e,s,r,i){this.mesh=t,this.skin=e,this.slotIndex=s,this.parent=r,this.inheritTimeline=i}}function en(n,t,e,s){let r=n[0],i=$(r,"time",0),o=$(r,"value",e)*s,l=0;for(let a=0;;a++){t.setFrame(a,i,o);const c=n[a+1];if(!c)return t.shrink(l),t;const h=$(c,"time",0),d=$(c,"value",e)*s;r.curve&&(l=Lt(r.curve,t,l,a,0,i,h,o,d,s)),i=h,o=d,r=c}}function Dl(n,t,e,s,r,i){let o=n[0],l=$(o,"time",0),a=$(o,e,r)*i,c=$(o,s,r)*i,h=0;for(let d=0;;d++){t.setFrame(d,l,a,c);const u=n[d+1];if(!u)return t.shrink(h),t;const f=$(u,"time",0),m=$(u,e,r)*i,p=$(u,s,r)*i,g=o.curve;g&&(h=Lt(g,t,h,d,0,l,f,a,m,i),h=Lt(g,t,h,d,1,l,f,c,p,i)),l=f,a=m,c=p,o=u}}function Lt(n,t,e,s,r,i,o,l,a,c){if(n=="stepped")return t.setStepped(s),e;const h=r<<2,d=n[h],u=n[h+1]*c,f=n[h+2],m=n[h+3]*c;return t.setBezier(e,s,r,i,l,d,u,f,m,o,a),e+1}function $(n,t,e){return n[t]!==void 0?n[t]:e}let LE=class extends yi{createSkeleton(t){this.skeleton=new Cd(t),this.skeleton.updateWorldTransform(),this.stateData=new Sg(t),this.state=new Ei(this.stateData)}};const OE=Object.freeze(Object.defineProperty({__proto__:null,AlphaTimeline:ud,Animation:Yo,AnimationState:Ei,AnimationStateAdapter:hE,AnimationStateData:Sg,AtlasAttachmentLoader:vd,Attachment:Jh,AttachmentTimeline:Ir,Bone:zc,BoneData:_d,BoundingBoxAttachment:Uo,ClippingAttachment:jo,ConstraintData:zo,CurveTimeline:Qs,CurveTimeline1:Js,CurveTimeline2:$o,DeformTimeline:pd,DrawOrderTimeline:Mr,Event:Ed,EventData:Sd,EventQueue:Eg,EventTimeline:ia,EventType:ss,IkConstraint:Tg,IkConstraintData:Td,IkConstraintTimeline:gd,MeshAttachment:Br,PathAttachment:Dr,PathConstraint:Si,PathConstraintData:Ad,PathConstraintMixTimeline:wd,PathConstraintPositionTimeline:bd,PathConstraintSpacingTimeline:yd,PointAttachment:Xo,RGB2Timeline:md,RGBA2Timeline:fd,RGBATimeline:hd,RGBTimeline:dd,RegionAttachment:Ot,RotateTimeline:ea,ScaleTimeline:rd,ScaleXTimeline:id,ScaleYTimeline:ad,Sequence:Go,SequenceMode:cn,SequenceModeValues:td,SequenceTimeline:_i,ShearTimeline:od,ShearXTimeline:ld,ShearYTimeline:cd,Skeleton:Cd,SkeletonBinary:Md,SkeletonBounds:BE,SkeletonData:kd,SkeletonJson:Ho,Skin:mo,SkinEntry:Hc,Slot:Ag,SlotData:Id,SpacingMode:Ae,Spine:LE,Timeline:ge,TrackEntry:Wo,TransformConstraint:Cg,TransformConstraintData:Rd,TransformConstraintTimeline:xd,TranslateTimeline:ed,TranslateXTimeline:sd,TranslateYTimeline:nd,VertexAttachment:Ks},Symbol.toStringTag,{value:"Module"}));var Es=(n=>(n[n.UNKNOWN=0]="UNKNOWN",n[n.VER37=37]="VER37",n[n.VER38=38]="VER38",n[n.VER40=40]="VER40",n[n.VER41=41]="VER41",n))(Es||{});function po(n){const t=n.substr(0,3),e=Math.floor(Number(t)*10+.001);return t==="3.7"?37:t==="3.8"?38:t==="4.0"?40:t==="4.1"?41:e<37?37:0}class VE{constructor(){this.scale=1}readSkeletonData(t,e){let s=null,r=this.readVersionOldFormat(e),i=po(r);if(i===Es.VER38&&(s=new Ee(new Lh(t))),r=this.readVersionNewFormat(e),i=po(r),(i===Es.VER40||i===Es.VER41)&&(s=new Md(new vd(t))),!s){const o=`Unsupported version of spine model ${r}, please update pixi-spine`;console.error(o)}return s.scale=this.scale,s.readSkeletonData(e)}readVersionOldFormat(t){const e=new co(t);let s;try{e.readString(),s=e.readString()}catch{s=""}return s||""}readVersionNewFormat(t){const e=new co(t);e.readInt32(),e.readInt32();let s;try{s=e.readString()}catch{s=""}return s||""}}class UE{constructor(){this.scale=1}readSkeletonData(t,e){const s=e.skeleton.spine,r=po(s);let i=null;if(r===Es.VER37&&(i=new bg(new ag(t))),r===Es.VER38&&(i=new zp(new Lh(t))),(r===Es.VER40||r===Es.VER41)&&(i=new Ho(new vd(t))),!i){const o=`Unsupported version of spine model ${s}, please update pixi-spine`;console.error(o)}return i.scale=this.scale,i.readSkeletonData(e)}}class jE extends q_{createBinaryParser(){return new VE}createJsonParser(){return new UE}parseData(t,e,s){return{spineData:t.readSkeletonData(e,s),spineAtlas:e}}}class XE extends yi{createSkeleton(t){const e=po(t.version);let s=null;if(e===Es.VER37&&(s=cE),e===Es.VER38&&(s=nE),(e===Es.VER40||e===Es.VER41)&&(s=OE),!s){const r=`Cant detect version of spine model ${t.version}`;console.error(r)}this.skeleton=new s.Skeleton(t),this.skeleton.updateWorldTransform(),this.stateData=new s.AnimationStateData(t),this.state=new s.AnimationState(this.stateData)}}new jE().installLoader();const Pd=V.forwardRef(({path:n,width:t,height:e,defaultSkin:s,scale:r={x:1,y:1},animation:i="animation",coors:o={x:2,y:2},loop:l=!0,onComplete:a,refChild:c})=>{const[h,d]=V.useState(),[u,f]=V.useState(s);V.useEffect(()=>{if(!h)return m(h),()=>{h&&h.destroy(!0)}},[h,u]),V.useEffect(()=>{s!==u&&(h&&h.destroy(!0),d(void 0),f(s))},[s,h]);const m=async p=>{p=new rp({width:t,height:e,backgroundAlpha:0,autoStart:!1,eventMode:"passive",autoDensity:!0,resolution:2,eventFeatures:{move:!1,globalMove:!1,click:!1,wheel:!1},clearBeforeRender:!0,antialias:!0});const g=await Oi.load(n);if(!(g!=null&&g.spineData))return;d(p);const x=new XE(g.spineData);if(x.x=p.screen.width/((o==null?void 0:o.x)||2),x.y=p.screen.height/((o==null?void 0:o.y)||2),u&&x.skeleton.setSkinByName(u),x.scale.set(r.x||1,r.y||1),p.stage.interactive=!0,x.state.hasAnimation(i)&&(x.state.setAnimation(0,i,l),p.stage.on("pointerdown",()=>{x.state.tracks.length?x.state.clearTracks():x.state.setAnimation(0,i,l)})),x.state.addListener({complete:function(){a()}}),p.stage.addChild(x),p.start(),c.current&&c.current.childNodes.length<2)try{const b=c.current;c.current.lastChild&&b.removeChild(c.current.lastChild),b.appendChild(p.view)}catch{}};return v.jsx("div",{ref:c})});function GE({currentCostumeId:n}){const t=V.useRef(),[e,s]=V.useState("");return V.useEffect(()=>{n===ze.DEFAULT?s(Ue.DEFAULT):n===ze.LEVEL1?s(Ue.LEVEL1):n===ze.LEVEL2?s(Ue.LEVEL2):s(Ue.LEVEL3)},[n]),v.jsx("div",{ref:t,id:"123",children:e!==""&&v.jsx(Pd,{path:lt("/img/sasaAnim/sasadance.json"),width:280,height:150,id:"sasa",defaultSkin:e,animation:"dancing",coors:{x:2.4,y:1.1},scale:{x:.08,y:.08},onComplete:()=>{},loop:!0,refChild:t})})}function YE(n){var i,o;const{theme:t,url:e}=n,s=$t(),{user:r}=mt(l=>l.user);return V.useEffect(()=>{const l=document.body,a=window.innerWidth<=1280,c=()=>{var f,m,p,g;const u=document.querySelectorAll('[data-testid="SideNav_AccountSwitcher_Button"]');if(u&&(u==null?void 0:u.length)>0){h.disconnect();const x=document.querySelector(".gif-on-avatar");x&&x.remove();const b=document.createElement("div");a&&(b.style.display="none"),b.className="gif-on-avatar",b.style.position="absolute",b.style.left="-20px",b.style.bottom="50px",Sr(b).render(v.jsx(GE,{currentCostumeId:(r==null?void 0:r.id)!==void 0&&((f=r==null?void 0:r.currentCharacter)==null?void 0:f.currentCostumeId)!==void 0?(m=r==null?void 0:r.currentCharacter)==null?void 0:m.currentCostumeId:0})),(g=(p=u[0])==null?void 0:p.parentElement)==null||g.appendChild(b)}},h=new MutationObserver(c),d={attributes:!0,childList:!0,subtree:!0};h.observe(l,d)},[(i=r==null?void 0:r.currentCharacter)==null?void 0:i.currentCostumeId,r==null?void 0:r.id,t,r.ref,e,r==null?void 0:r.socialUsername,r]),V.useEffect(()=>{const l=document.body,a=()=>{const d=document.querySelectorAll('[data-testid="HoverCard"]');if(d){const u=d[0];if(u){const f=u.querySelectorAll('[data-testid="UserCell"]');if(f&&f.length>0)for(let m=1;m<f.length;m++)f[m].addEventListener("click",function(){chrome.storage.local.clear(),chrome.storage.session.clear(),localStorage.clear(),s(Ul(!1))})}}},c=new MutationObserver(a),h={attributes:!0,childList:!0,subtree:!0};c.observe(l,h)},[(o=r==null?void 0:r.currentCharacter)==null?void 0:o.currentCostumeId,r==null?void 0:r.id,t,r.ref,e,s]),null}const kg=()=>{const[n,t]=V.useState(""),[e,s]=V.useState("");return setInterval(function(){document.location.href!=n&&t(document.location.href)},1e3),V.useEffect(()=>{const r=document.body,i=()=>{const c=document.documentElement.style.getPropertyValue("color-scheme");s(c),localStorage.setItem(St.SAX_THEME,c),chrome.storage.local.set({[St.SAX_THEME]:c})},o=new MutationObserver(i),l={attributes:!0,childList:!0,subtree:!0};o.observe(r,l)},[n]),{url:n,theme:e}},$E=n=>{const{confirmReferralCode:t,getDataInput:e}=n,{saxTheme:s,styles:r}=mt(c=>c.displaySasa),[i,o]=V.useState("");V.useEffect(()=>{e(i)},[i]);const l=c=>o(c.target.value),a=i==="";return v.jsxs("div",{className:"enter-code-referral",children:[v.jsx("h1",{style:r.textStyle,children:"Import code"}),v.jsxs("p",{style:{color:s==="dark"?"#fff":"#000",textAlign:"center",marginBottom:"20px"},children:[q("you_need_a_code"),v.jsx(js,{href:s0,style:{textDecoration:"underline",color:"rgb(29, 155, 240)"},children:q("twitter_profile")})]}),v.jsxs(n0,{isInvalid:a,children:[v.jsx("div",{className:"wra-input",children:v.jsx(Pf,{type:"text",onChange:l,style:r.inputStyle})}),a&&v.jsxs(r0,{children:[" ",q("code_is_required")]})]}),v.jsx(Rt,{onClick:t,style:{background:s==="dark"?"#faad14":"#1890FF",color:s==="dark"?"#000":"#fff"},children:q("confirm")})]})},WE=n=>{const{onclick:t,className:e}=n,{saxTheme:s}=mt(r=>r.displaySasa);return v.jsx("button",{className:`${e}`,onClick:t&&t,style:{borderColor:s==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",background:s==="dark"?"#1c1f25":"#fff"},children:v.jsx(ft,{src:lt("/icon-128.png"),alt:"home"})})};function zE(n){var _;const{token:t}=gs(),{onClose:e,theme:s,changeSkin:r,currentCostumeId:i}=n,o=$t(),{inventory:l}=mt(E=>E.inventory),[a,c]=V.useState(i),[h,d]=V.useState(i),[u,f]=V.useState(!1),m=async E=>{try{if(E||E===0){f(!0);const S=await Jc({itemType:2,itemId:E,quantity:1},t);(S==null?void 0:S.status)===200?(e(),o($s(t)),o(Ws(t)),f(!1),o(Wt(!0)),o(ee("success")),o(se("Success!")),r(E===ze.DEFAULT?Ue.DEFAULT:E===ze.LEVEL1?Ue.LEVEL1:E===ze.LEVEL2?Ue.LEVEL2:Ue.LEVEL3)):(e(),f(!1),o(Wt(!0)),o(ee("error")),o(se("Error!")))}}catch{f(!1)}};V.useEffect(()=>{t&&o($s(t))},[t,o]);const p=E=>{d(E),c(E)},g={color:s==="dark"?"#fff":"#000"},x={color:"#fff",backgroundColor:"#e66e00"},b={backgroundColor:s==="light"?"#fff":"#13161B"},y={borderColor:s==="light"?"#d9d6d6":"rgba(255, 255, 255, 0.10)"},w={border:s==="light"?"1px solid rgba(92, 92, 92, 0.1)":"1px solid rgba(255, 255, 255, 0.1)",background:s==="light"?"#eff1f1":"rgba(19, 22, 27, 0.5)",boxShadow:s==="light"?"0px 4px 10px 0px rgba(172, 172, 172, 0.25),2px 4px 4px 0px #727272 inset":"0px 4px 10px 0px rgba(0, 0, 0, 0.25),2px 4px 4px 0px #000 inset"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:e,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"wear-popup",style:{...b,...y},children:[v.jsxs("div",{className:"popup-header",style:y,children:[v.jsxs("div",{className:"h-title",children:[v.jsx(ft,{src:lt("/icons/santa.png"),alt:"upgrade"}),v.jsx("p",{style:g,children:q("skin")})]}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:e})})]}),v.jsxs("div",{className:"popup-content",style:g,children:[v.jsx("div",{className:"item-img",style:y,children:v.jsx(ft,{src:a===ze.DEFAULT?lt("/img/skin/0.png"):a===ze.LEVEL1?lt("/img/skin/1.png"):a===ze.LEVEL2?lt("/img/skin/2.png"):lt("/img/skin/3.png"),alt:"item"})}),v.jsxs("div",{className:"tools",children:[v.jsx("div",{className:"list-skin",children:(_=l==null?void 0:l.data)==null?void 0:_.filter(E=>E.type===Gt.SKIN).map((E,S)=>{var T,A;return v.jsx(v.Fragment,{children:v.jsxs("div",{onClick:()=>{p(E==null?void 0:E.itemId)},className:`skin-item ${h===E.itemId?"active":""}`,style:w,onKeyDown:()=>{},role:"button",tabIndex:0,children:[v.jsx(ft,{src:(T=E==null?void 0:E.item)!=null&&T.imageUrl?(A=E==null?void 0:E.item)==null?void 0:A.imageUrl:lt("/img/snowflakes.png"),className:"image",alt:"skin"}),v.jsx(ft,{src:lt("/img/check.png"),alt:"check",className:"check"})]},S)})})}),v.jsx(Rt,{className:"btn",style:x,onClick:()=>{m(a)},isLoading:u,children:q("save_change")})]})]})]})]})}function Nd(n){const{onClose:t,onConfirm:e,isLoading:s,theme:r,title:i}=n,{styles:o}=mt(l=>l.displaySasa);return V.useEffect(()=>{function l(a){a.key==="Enter"&&e()}return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[e]),v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay overlay-lv2",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"custom-popup",style:{...o.bgStyle,...o.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:o.borderStyle,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:o.textStyle,children:i})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(r==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsx("div",{className:"popup-content",style:o.textStyle}),v.jsxs("div",{className:"footer",children:[v.jsx(Rt,{isLoading:s,style:{background:"#e66e00",color:"#fff"},onClick:()=>{e()},children:q("confirm")}),v.jsx(Rt,{style:o.btnStyle,onClick:t,children:q("cancel")})]})]})]})}function Ig(n){var _,E,S;const t=$t(),[e,s]=V.useState(!1),{onClose:r,theme:i,max:o,image:l,token:a}=n,[c,h]=V.useState(o<1?0:1),[d,u]=V.useState(!1),{user:f}=mt(T=>T.user),m=async()=>{try{u(!0);const T=await Jc({itemType:0,itemId:1,quantity:c},a);(T==null?void 0:T.status)===200?(r(),t($s(a)),t(Ws(a)),u(!1),s(!1),t(Wt(!0)),t(ee("success")),t(se(`${q("successfully")}`))):(r(),u(!1),t(Wt(!0)),t(ee("error")),t(se(`${q("error_try_again")}`)),s(!1))}catch{r(),u(!1),t(Wt(!0)),t(ee("error")),t(se(`${q("error_try_again")}`)),s(!1)}},p={color:i==="dark"?"#fff":"#000"},g={color:"#fff",backgroundColor:"#e66e00"},x={backgroundColor:i==="light"?"#fff":"#13161B"},b={borderColor:i==="light"?"#d9d6d6":"rgba(255, 255, 255, 0.10)"},y={backgroundColor:"#e66e00",color:"#fff"},w={backgroundColor:i==="light"?"#d9d6d6":"#000",color:i==="light"?"#000":"#fff"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:r,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"custom-popup",style:{...x,...b},children:[v.jsxs("div",{className:"popup-header",style:b,children:[v.jsxs("div",{className:"h-title",children:[v.jsx(ft,{src:lt(i==="dark"?"/icons/upgrade-dark.png":"/icons/upgrade.png"),alt:"upgrade"}),v.jsx("p",{style:p,children:q("upgrade")})]}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(i==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:r})})]}),v.jsxs("div",{className:"popup-content",style:p,children:[v.jsx("div",{className:"item-img",style:b,children:v.jsx(ft,{src:l,alt:"item"})}),v.jsxs("div",{className:"tools",children:[v.jsx("p",{style:{fontSize:"14px",color:i==="dark"?"#fff":"#000",lineHeight:"22px"},children:q("using_snowflake")}),((_=f==null?void 0:f.currentCharacter)==null?void 0:_.currentLevel)>=Pi&&((E=f==null?void 0:f.currentCharacter)==null?void 0:E.currentExp)>=((S=f==null?void 0:f.currentCharacter)==null?void 0:S.maxExp)?v.jsxs(v.Fragment,{children:[v.jsx("p",{className:"text-center text-sm text-[#FAAD14] ",children:q("reached_max_level")}),v.jsx(Rt,{className:"btn disabled",style:g,onClick:()=>{},children:q("upgrade")})]}):v.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[v.jsxs("div",{className:"quantity",children:[v.jsx(ft,{src:lt("/icons/snowflakes.png"),alt:"item"}),v.jsxs(ch,{className:"input-quantity",defaultValue:o<1?0:1,onChange:T=>{h(Number(T)>o?o:Number(T))},min:0,max:o,value:c,children:[v.jsx(ft,{src:lt(i==="dark"?"/icons/menu/minus-dark.png":"/icons/menu/minus.png"),alt:"item",onClick:()=>{c>0&&h(c-1)}}),v.jsx(hh,{style:w}),v.jsx(ft,{src:lt(i==="dark"?"/icons/menu/plus-dark.png":"/icons/menu/plus.png"),alt:"item",onClick:()=>{c<o&&h(c+1)}})]}),v.jsx("div",{className:"max",style:y,onClick:()=>{h(o)},onKeyDown:()=>{},role:"button",tabIndex:0,children:q("max")})]}),v.jsx(Rt,{className:`btn ${(c<1||c>o)&&"disabled"}`,style:g,onClick:()=>{o>0&&c<=o&&c>0&&s(!0)},children:q("upgrade")})]})]})]})]}),e&&v.jsx(Nd,{onClose:()=>{s(!1)},theme:i,title:q("do_your_want_upgrade"),onConfirm:m,isLoading:d})]})}function Rg(n){const t=$t(),{onClose:e}=n,{saxTheme:s,styles:r}=mt(a=>a.displaySasa),i={borderColor:s==="light"?"#d9d6d6":"rgba(255, 255, 255, 0.10)"},o=()=>{e(),t(Nf(1)),t(i0(2))},l=()=>{e(),o()};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:e,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"custom-popup",style:{...r.bgStyle,...r.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:i,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:r.textStyle,children:q("notice")})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:e})})]}),v.jsx("div",{className:"popup-content",style:r.textStyle,children:v.jsxs("div",{className:"tools",children:[v.jsx("p",{style:{color:s==="dark"?"#fff":"#000",textAlign:"center",marginBottom:"20px"},children:q("you_need_to_complete_binding_quests_to_continue")}),v.jsx(Rt,{className:"btn ",style:r.btnStyle,onClick:l,children:q("go_to_binding_quests")})]})})]})]})}function HE(n){const{onClose:t,theme:e}=n,{user:s}=mt(o=>o.user),{styles:r}=mt(o=>o.displaySasa),i={backgroundColor:e==="light"?"#fff":"#13161B"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsx("div",{className:"custom-popup",style:{...i,...r.borderStyle},children:v.jsx("div",{className:"popup-content",style:r.textStyle,children:v.jsxs("div",{className:"tools",children:[v.jsx(ft,{src:lt("/img/fireworks.png"),alt:"close",onClick:t}),v.jsx("p",{style:{color:e==="dark"?"#fff":"#000",textAlign:"center",margin:"20px 0",fontWeight:700,fontSize:"20px"},children:q("golden_bag_open_title")}),v.jsxs("p",{style:{color:e==="dark"?"#fff":"#000",textAlign:"center",marginBottom:"20px"},children:[v.jsx("span",{className:`${e==="dark"?"text-[#FAAD14]":"text-[#1890ff]"}`,children:a0(s==null?void 0:s.walletAddress)+" "}),q("has_won_a_free_mint_whitelist_slot")]}),v.jsxs("div",{className:"tooltip",children:[v.jsxs("div",{className:"title",children:[" ",q("coming_soon")]}),v.jsx(Rt,{className:"mint-vip-pass mint-vip-pass-disable text-[#00000080]",children:q("mint_now")})]})]})})})]})}function Fd({message:n,lv:t,className:e}){const{styles:s,saxTheme:r}=mt(i=>i.displaySasa);return v.jsxs("div",{className:"custom-tooltip",children:[v.jsxs("div",{className:"tooltip-hover",children:[v.jsx(ft,{className:"img-note",src:lt(r==="dark"?"/icons/menu/note-orange.png":"/icons/menu/note.png"),alt:"home"}),t&&v.jsx("span",{children:q("des_skin")})]}),v.jsx("div",{style:s.cardStyle,className:`tooltip-content ${e||""}`,children:n})]})}const wf=[{currentLevel:1,gold:113,goldBag:0,skin1:125,skin2:136,skin3:151},{currentLevel:2,gold:142,goldBag:0,skin1:156,skin2:170,skin3:189},{currentLevel:3,gold:177,goldBag:0,skin1:195,skin2:212,skin3:236},{currentLevel:4,gold:221,goldBag:1,skin1:243,skin2:265,skin3:295},{currentLevel:5,gold:277,goldBag:1,skin1:304,skin2:332,skin3:369},{currentLevel:6,gold:346,goldBag:1,skin1:380,skin2:415,skin3:461},{currentLevel:7,gold:432,goldBag:2,skin1:475,skin2:519,skin3:576},{currentLevel:8,gold:540,goldBag:2,skin1:594,skin2:648,skin3:720},{currentLevel:9,gold:675,goldBag:2,skin1:743,skin2:810,skin3:900},{currentLevel:10,gold:726,goldBag:2,skin1:799,skin2:871,skin3:968},{currentLevel:11,gold:781,goldBag:3,skin1:859,skin2:937,skin3:1041},{currentLevel:12,gold:839,goldBag:3,skin1:923,skin2:1007,skin3:1119},{currentLevel:13,gold:903,goldBag:4,skin1:993,skin2:1083,skin3:1203},{currentLevel:14,gold:970,goldBag:4,skin1:1068,skin2:1165,skin3:1294},{currentLevel:15,gold:1044,goldBag:5,skin1:1148,skin2:1252,skin3:1391},{currentLevel:16,gold:1122,goldBag:5,skin1:1234,skin2:1346,skin3:1496},{currentLevel:17,gold:1207,goldBag:6,skin1:1327,skin2:1448,skin3:1609},{currentLevel:18,gold:1297,goldBag:6,skin1:1427,skin2:1557,skin3:1730},{currentLevel:19,gold:1395,goldBag:7,skin1:1535,skin2:1674,skin3:1860},{currentLevel:20,gold:1500,goldBag:8,skin1:1650,skin2:1800,skin3:2e3}];function vf({lvData:n,saxTheme:t,hasNameGift:e}){return v.jsxs("div",{children:[v.jsxs("div",{className:"gold",children:[e&&q("gold")," +"," ",v.jsx("span",{style:{color:t==="dark"?"#e66e00":"#1890FF"},children:n==null?void 0:n.gold})," ",v.jsx(ft,{className:"img-gold",width:6,height:6,src:lt("/icons/balances/gold.png"),alt:"coin"})," ",q("daily_2")," ",v.jsx("br",{})]}),v.jsxs("div",{className:"gold",children:[e&&q("golden_bag")," +"," ",v.jsx("span",{style:{color:t==="dark"?"#e66e00":"#1890FF"},children:n==null?void 0:n.goldBag})," ",v.jsx(ft,{className:"img-gold",width:6,height:6,src:lt("/img/gold-bag.png"),alt:"coin"})," daily"," ",v.jsx("br",{})]}),v.jsxs("div",{className:"gold",children:[e&&q("spring_skin")," +"," ",v.jsx("span",{style:{color:t==="dark"?"#e66e00":"#1890FF"},children:n==null?void 0:n.skin1})," ",v.jsx(ft,{className:"img-gold",width:6,height:6,src:lt("/icons/balances/gold.png"),alt:"coin"})," ",q("daily_2")," ",v.jsx("br",{})]}),v.jsxs("div",{className:"gold",children:[e&&q("summer_skin")," +"," ",v.jsx("span",{style:{color:t==="dark"?"#e66e00":"#1890FF"},children:n==null?void 0:n.skin2})," ",v.jsx(ft,{className:"img-gold",width:6,height:6,src:lt("/icons/balances/gold.png"),alt:"coin"})," ",q("daily_2")," ",v.jsx("br",{})]}),v.jsxs("div",{className:"gold",children:[e&&q("autumn_skin")," +"," ",v.jsx("span",{style:{color:t==="dark"?"#e66e00":"#1890FF"},children:n==null?void 0:n.skin3})," ",v.jsx(ft,{className:"img-gold",width:6,height:6,src:lt("/icons/balances/gold.png"),alt:"coin"})," ",q("daily_2")," ",v.jsx("br",{})]})]})}const qE=n=>{const t=$t(),{isOpen:e,onClose:s}=n,{saxTheme:r,styles:i}=mt(l=>l.displaySasa),o=()=>{s(),t(nh(!0))};return v.jsxs(th,{classOverlay:"",className:"chakra-modal__content-container modal-select-type-transfer modal-confirm-withdraw-sasa",isOpen:e,onClose:s,children:[v.jsxs(eh,{children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:i.textStyle,children:q("notice")})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(r==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:s})})]}),v.jsxs(sh,{className:`custom-modal theme-${r}`,children:[v.jsx("p",{className:"des",style:i.textStyle,children:q("please_select_a_feature_to_use")}),v.jsxs("div",{className:"group-btn",children:[v.jsx(Rt,{onClick:o,className:"btn-submit-form submit",style:{background:r==="dark"?"#faad14":"#1890FF",color:r==="dark"?"#000":"#fff",display:"flex"},children:q("deposit")}),v.jsxs("div",{className:"tooltip",children:[v.jsxs("div",{className:"title",children:[" ",q("coming_soon")]}),v.jsx(Rt,{className:"border border-gray bg-[#00000080] text-white w-[100px] font-medium opacity-50 cursor-not-allowed hover:bg-[#00000080]",disabled:!0,style:{borderRadius:"0.625rem"},children:q("des_asg_4")})]})]})]})]})},Ll=n=>{const{balance:t,imageUrl:e,name:s,isTransfer:r,onClickCard:i}=n,{styles:o,saxTheme:l}=mt(f=>f.displaySasa),{isOpen:a,onOpen:c,onClose:h}=ar(),d=$t(),u=()=>{c(),d(l0(s))};return v.jsxs(rh,{className:`card-balance theme-${l}`,style:{...o.cardStyle,...i&&{cursor:"pointer"}},onClick:i&&i,children:[v.jsx(ft,{className:"img-currency",src:lt(e),alt:""}),v.jsx("h1",{className:"name-balance",style:o.textStyle,children:s}),v.jsx("h2",{className:`balance ${s.toLowerCase()}`,children:o0(t)||0}),r&&v.jsx(Rt,{className:"text-transfer",onClick:u,children:q("transfer")}),s==="AP"&&v.jsx(Rt,{className:"text-transfer",onClick:i,children:q("claim")}),v.jsx(qE,{isOpen:a,onClose:h})]})};var rs=(n=>(n.AP="AP",n.ASG="ASG",n.GOLD="GOLD",n.SAE="SAE",n.USDT="USDT",n))(rs||{});function Mg(n){const{token:t}=gs(),{onClose:e,balance:s,openNotiWhiteList:r}=n,i=$t(),{saxTheme:o,styles:l}=mt(f=>f.displaySasa),{user:a}=mt(f=>f.user),[c,h]=V.useState(!1),d={color:"#fff",backgroundColor:"#e66e00"},u=async()=>{var f,m,p,g,x,b;if(h(!0),a&&(a!=null&&a.saCode)&&(a==null?void 0:a.saCode)!==null)if(a&&(a!=null&&a.paymentBalancesInfo)&&((f=a==null?void 0:a.paymentBalancesInfo)==null?void 0:f.length)>0&&((p=(m=a==null?void 0:a.paymentBalancesInfo)==null?void 0:m.find(y=>y.symbol===rs.AP))!=null&&p.amount)&&Number((x=(g=a==null?void 0:a.paymentBalancesInfo)==null?void 0:g.find(y=>y.symbol===rs.AP))==null?void 0:x.amount)<=0)i(Wt(!0)),i(ee("error")),i(se("You don't have AP to claim")),h(!1);else try{const y=await c0(t);((b=y==null?void 0:y.data)==null?void 0:b.statusCode)===200?(i(Ws(t)),h(!1),i(Wt(!0)),i(ee("success")),i(se("Success!")),e()):(h(!1),i(Wt(!0)),i(ee("error")),i(se("An error occurred, please try again later!")))}catch{i(Wt(!0)),i(ee("error")),i(se("An error occurred, please try again later!")),h(!1),e()}else e(),r()};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:e,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"custom-popup",style:{...l.bgStyle,...l.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:l.borderStyle,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:l.textStyle,children:q("use_this")})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(o==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:e})})]}),v.jsxs("div",{className:"popup-content",style:l.textStyle,children:[v.jsx("div",{className:"item-img",style:l.borderStyle,children:v.jsx(ft,{src:lt(s===He.AP?"/icons/balances/ap.png":s===He.ASG?"/icons/balances/asg.png":""),alt:"item"})}),v.jsxs("div",{className:"tools detail-balance",children:[v.jsx("p",{style:l.titleStyle,children:s===He.AP?"AP":s===He.ASG?"ASG":""}),s===He.AP?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"inline",margin:"20px 0 20px 0"},children:[v.jsx("span",{style:l.desStyle,children:q("des_ap_1")}),v.jsx(js,{href:Na,target:"_blank",style:{color:"#1890ff",textDecoration:"underline",fontSize:"12px",cursor:"pointer"},children:q("sa_world")})]}),v.jsx(Rt,{className:`btn mt-2 ${!(a!=null&&a.ap)||a!=null&&a.ap&&(a==null?void 0:a.ap)<=0?"btn-claim-disabled":""}`,style:d,isLoading:c,onClick:u,children:"Claim AP"})]}):s===He.ASG?v.jsxs(v.Fragment,{children:[v.jsxs("div",{style:{display:"inline",marginTop:"20px"},children:[v.jsx("span",{style:l.desStyle,children:q("des_asg_1")}),v.jsx(js,{href:Na,target:"_blank",style:{color:"#1890ff",textDecoration:"underline",fontSize:"14px",cursor:"pointer"},children:q("sa_world")}),v.jsx("span",{style:l.desStyle,children:"."})]}),v.jsxs("div",{style:{display:"inline"},children:[v.jsx("span",{style:l.desStyle,children:q("des_asg_2")}),v.jsx(js,{href:Na,target:"_blank",style:{color:"#1890ff",textDecoration:"underline",fontSize:"14px",cursor:"pointer"},children:q("sa_world")}),v.jsx("span",{style:l.desStyle,children:q("des_asg_3")})]}),v.jsx(Rt,{className:"btn mt-2 disabled",style:d,onClick:()=>{},children:q("des_asg_4")})]}):""]})]})]})]})}const KE=()=>{var h,d,u,f,m,p;const{user:n,balancesInGame:t}=mt(g=>g.user),{saxTheme:e}=mt(g=>g.displaySasa),[s,r]=V.useState(!1),[i,o]=V.useState(""),[l,a]=V.useState(!1),c=()=>{r(!0),o(He.AP)};return v.jsxs("div",{className:"list-card-balance",children:[n&&(n==null?void 0:n.paymentBalancesInfo)&&((h=n==null?void 0:n.paymentBalancesInfo)==null?void 0:h.length)>0&&((u=(d=n==null?void 0:n.paymentBalancesInfo)==null?void 0:d.filter(g=>g.symbol===rs.GOLD))==null?void 0:u.map(g=>{var x;return v.jsx(Ll,{balance:g!=null&&g.amount?nr(g==null?void 0:g.amount).toLocaleString("en-US"):0,name:(g==null?void 0:g.symbol)||"",imageUrl:`/icons/balances/${(x=g==null?void 0:g.symbol)==null?void 0:x.toLowerCase()}.png`,isTransfer:!1,onClickCard:(g==null?void 0:g.symbol)===rs.AP&&c},g==null?void 0:g.symbol)})),n&&(n==null?void 0:n.paymentBalancesInfo)&&((f=n==null?void 0:n.paymentBalancesInfo)==null?void 0:f.length)>0&&((p=(m=n==null?void 0:n.paymentBalancesInfo)==null?void 0:m.filter(g=>g.symbol!==rs.GOLD))==null?void 0:p.map(g=>{var x;return v.jsx(Ll,{balance:g!=null&&g.amount?nr(g==null?void 0:g.amount).toLocaleString("en-US"):0,name:(g==null?void 0:g.symbol)||"",imageUrl:`/icons/balances/${(x=g==null?void 0:g.symbol)==null?void 0:x.toLowerCase()}.png`,isTransfer:(g==null?void 0:g.symbol)===rs.ASG,onClickCard:(g==null?void 0:g.symbol)===rs.AP&&c},g==null?void 0:g.symbol)})),v.jsx(Ll,{balance:t&&(t!=null&&t.gem)?nr(t==null?void 0:t.gem).toLocaleString("en-US"):0,name:"GEM",imageUrl:"/icons/balances/gem.png",isTransfer:!1}),s&&v.jsx(Mg,{openNotiWhiteList:()=>a(!0),theme:e,onClose:()=>r(!1),balance:i}),l&&v.jsx(Rg,{onClose:()=>a(!1)})]})};function ZE({isFetchInventory:n}){var F,D,L,O,j,U,B,G,H,K,z,J,Q,X,W,Z,at,gt,yt;const{token:t}=gs(),{saxTheme:e,styles:s}=mt(nt=>nt.displaySasa),{user:r}=mt(nt=>nt.user),{inventory:i}=mt(nt=>nt.inventory),{isNoti:o,notiMessage:l,notiStatus:a}=mt(nt=>nt.isNoti),[c,h]=V.useState(void 0),d=$t(),[u,f]=V.useState(!1),[m,p]=V.useState(!1),[g,x]=V.useState(!1),[b,y]=V.useState(!1),[w,_]=V.useState(""),[E,S]=V.useState(!1),T=V.useRef(),[A,C]=V.useState({gold:0,goldBag:0,skin1:0,skin2:0,skin3:0}),[I,P]=V.useState({gold:0,goldBag:0,skin1:0,skin2:0,skin3:0});V.useEffect(()=>{S(window.innerWidth<=1280)},[]),V.useEffect(()=>{const nt=wf.find(Ct=>{var wt;return(Ct==null?void 0:Ct.currentLevel)===((wt=r==null?void 0:r.currentCharacter)==null?void 0:wt.currentLevel)}),It=wf.find(Ct=>{var wt;return(Ct==null?void 0:Ct.currentLevel)===((wt=r==null?void 0:r.currentCharacter)==null?void 0:wt.currentLevel)+1});nt&&C({gold:nt.gold,goldBag:nt.goldBag,skin1:nt.skin1,skin2:nt.skin2,skin3:nt.skin3}),It&&P({gold:It.gold,goldBag:It.goldBag,skin1:It.skin1,skin2:It.skin2,skin3:It.skin3})},[(F=r==null?void 0:r.currentCharacter)==null?void 0:F.currentLevel]),V.useEffect(()=>{t&&n&&(d($s(t)),d(vo({accessToken:t,type:Gt.FRAGMENT})))},[t,n,d]),V.useEffect(()=>{var nt,It,Ct;r&&(r==null?void 0:r.id)!==void 0&&(r!=null&&r.currentCharacter)&&(((nt=r==null?void 0:r.currentCharacter)==null?void 0:nt.currentCostumeId)===ze.DEFAULT?_(Ue.DEFAULT):((It=r==null?void 0:r.currentCharacter)==null?void 0:It.currentCostumeId)===ze.LEVEL1?_(Ue.LEVEL1):((Ct=r==null?void 0:r.currentCharacter)==null?void 0:Ct.currentCostumeId)===ze.LEVEL2?_(Ue.LEVEL2):_(Ue.LEVEL3))},[r]);const R=()=>{var nt,It,Ct;((nt=r==null?void 0:r.currentCharacter)==null?void 0:nt.currentLevel)<=Pi&&((It=r==null?void 0:r.currentCharacter)==null?void 0:It.currentExp)<=((Ct=r==null?void 0:r.currentCharacter)==null?void 0:Ct.maxExp)&&f(!0)},N=nt=>{navigator.clipboard!==void 0&&(navigator.clipboard.writeText(`${nt}`),h(nt),setTimeout(()=>{h(void 0)},1e3))};return v.jsxs("div",{className:"home",children:[v.jsx(KE,{}),v.jsxs("div",{className:"my-pet",children:[v.jsx("div",{className:"pet-image",style:s.borderStyle,children:v.jsx("div",{ref:T,children:w!==""&&v.jsx(Pd,{path:lt("/img/sasaAnim/sasadance.json"),width:200,height:200,id:"sasa",defaultSkin:w,animation:"idle",coors:{x:3,y:1.2},scale:{x:.12,y:.12},onComplete:()=>{},loop:!0,refChild:T})})}),(r==null?void 0:r.id)!==void 0&&v.jsxs("div",{className:"pet-info",children:[r!=null&&r.saCode?v.jsxs("p",{style:s.textStyle,className:"linked-citizen",children:[q("citizen_link"),": ",r==null?void 0:r.saCode," ",v.jsxs("div",{className:"copy-wrapper",children:[v.jsx(ft,{src:e==="light"?lt("/icons/copy-black.png"):lt("/icons/copy.png"),alt:"copy",className:"icon-copy",onClick:()=>N(r==null?void 0:r.saCode)}),v.jsx("div",{className:`copy-tooltip ${c===(r==null?void 0:r.saCode)&&"tooltip-show"}`,children:"copied"})]})]}):v.jsx(rh,{className:"text-binding",onClick:()=>x(!0),children:q("bind_to_sa")}),v.jsxs("div",{className:"level",children:[v.jsxs("div",{className:"level-header",children:[v.jsxs("div",{className:"current-level",style:s.textStyle,children:["Lv ",(D=r==null?void 0:r.currentCharacter)==null?void 0:D.currentLevel]}),v.jsx("div",{className:"remaining-to-up",style:s.textStyle,children:((L=r==null?void 0:r.currentCharacter)==null?void 0:L.currentLevel)>=Pi&&((O=r==null?void 0:r.currentCharacter)==null?void 0:O.currentExp)>=((j=r==null?void 0:r.currentCharacter)==null?void 0:j.maxExp)?"Max level":v.jsxs(v.Fragment,{children:[(((U=r==null?void 0:r.currentCharacter)==null?void 0:U.maxExp)-((B=r==null?void 0:r.currentCharacter)==null?void 0:B.currentExp)).toLocaleString("en-US")+" ",q("snows"),q("to_lv_up")]})})]}),v.jsx(zf,{className:`progress [&>div]:${e==="dark"?"bg-[#e66e00]":"bg-[#1890ff]"}`,value:((G=r==null?void 0:r.currentCharacter)==null?void 0:G.currentExp)/((H=r==null?void 0:r.currentCharacter)==null?void 0:H.maxExp)*100||0,style:{background:e==="dark"?"#000":"rgb(157 157 157)"}})]}),v.jsxs("div",{style:{display:"flex",marginTop:"6px"},children:[v.jsx(ft,{src:lt("/icons/snowflakes.png"),alt:"",style:{width:"24px",height:"24px"}}),v.jsxs("span",{style:{color:"#1890ff",marginLeft:"4px"},children:[nr(i!=null&&i.data&&((K=i==null?void 0:i.data)==null?void 0:K.filter(nt=>nt.type===0).length)>0?(z=i==null?void 0:i.data)==null?void 0:z.filter(nt=>nt.type===0)[0].quantity:0)," "]})]}),v.jsx("div",{className:"why-lv-up",style:{color:"#e66e00"},children:v.jsx(Fd,{lv:!0,className:"tooltip-level-des",message:v.jsxs("div",{className:"lv-tooltip",children:[v.jsxs("div",{children:[v.jsx("p",{style:{color:"#7F7F7F",textAlign:"center",fontWeight:700},children:"Current LV"}),v.jsx(vf,{lvData:A,saxTheme:e,hasNameGift:!0})]}),((J=r==null?void 0:r.currentCharacter)==null?void 0:J.currentLevel)<Pi&&v.jsxs(v.Fragment,{children:[v.jsx(Lx,{w:6,h:6,color:e==="dark"?"#ffffff80":"#000"}),v.jsxs("div",{children:[v.jsxs("p",{style:{color:"#7F7F7F",textAlign:"center",fontWeight:700},children:["Next LV (Lv ",((Q=r==null?void 0:r.currentCharacter)==null?void 0:Q.currentLevel)+1,")"," "]}),v.jsx(vf,{lvData:I,saxTheme:e,hasNameGift:!E})]})]})]})})}),v.jsxs("div",{className:"action",children:[v.jsxs(Rt,{onClick:()=>{p(!0)},children:[v.jsx(ft,{src:lt("/icons/santa.png"),alt:"santa"}),q("skin")]}),v.jsxs(Rt,{onClick:R,className:((X=r==null?void 0:r.currentCharacter)==null?void 0:X.currentLevel)<=Pi&&((W=r==null?void 0:r.currentCharacter)==null?void 0:W.currentExp)<=((Z=r==null?void 0:r.currentCharacter)==null?void 0:Z.maxExp)?"":"btn-disable",children:[v.jsx(ft,{src:lt("/icons/upgrade.png"),alt:"upgrade"}),q("upgrade")]})]})]})]}),u&&v.jsx(Ig,{onClose:()=>{f(!1)},theme:e,max:i!=null&&i.data&&((at=i==null?void 0:i.data)==null?void 0:at.filter(nt=>nt.type===0).length)>0?(gt=i==null?void 0:i.data)==null?void 0:gt.filter(nt=>nt.type===0)[0].quantity:0,image:lt("/img/sasa.png"),token:t}),m&&v.jsx(zE,{onClose:()=>{p(!1)},theme:e,image:lt("/img/snowflakes.png"),changeSkin:nt=>_(nt),currentCostumeId:(yt=r==null?void 0:r.currentCharacter)==null?void 0:yt.currentCostumeId}),o&&v.jsx(Lr,{onClose:()=>{d(Wt(!1))},message:l,status:a}),g&&v.jsx(Rg,{onClose:()=>x(!1)}),b&&v.jsx(HE,{theme:e,onClose:()=>y(!1)})]})}var Rn=(n=>(n[n.NEW_BIE=0]="NEW_BIE",n[n.DAILY=1]="DAILY",n[n.HUNTING=100]="HUNTING",n))(Rn||{}),Vs=(n=>(n[n.FOLLOW=0]="FOLLOW",n[n.LIKE=1]="LIKE",n[n.RE_POST=2]="RE_POST",n[n.REPLY=3]="REPLY",n))(Vs||{});const ii={CHARACTERS:14,HASHTAG:"#saworld"};function QE(n){var T,A,C,I,P,R,N,F,D,L,O,j,U,B;const{token:t}=gs(),e=$t(),{isChangeQuest:s}=mt(G=>G.listQuests),{saxTheme:r}=mt(G=>G.displaySasa),{item:i,completeQuestDaily:o}=n,[l,a]=V.useState(!1),[c,h]=V.useState(!1),[d,u]=V.useState(!1),[f,m]=V.useState(""),[p,g]=V.useState("");V.useEffect(()=>{const G=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS));if(G){const H=G==null?void 0:G.find(K=>K.questConfigId===(i==null?void 0:i.questConfigId));u(!!(H&&(H!=null&&H.completed)))}},[i==null?void 0:i.questConfigId,i==null?void 0:i.questMode,s]);const x=async G=>{var H,K,z,J;if((H=G==null?void 0:G.quest)!=null&&H.targetUrl){if((G==null?void 0:G.socialMode)===Vs.FOLLOW||(G==null?void 0:G.socialMode)===Vs.REPLY||(G==null?void 0:G.socialMode)===Vs.LIKE||(G==null?void 0:G.socialMode)===Vs.RE_POST){const Q=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS));if(Q===null||Q!==null&&((K=Q==null?void 0:Q.filter(X=>(X==null?void 0:X.questConfigId)===(G==null?void 0:G.questConfigId)))==null?void 0:K.length)===0){const X={questConfigId:G==null?void 0:G.questConfigId,targetUrl:(z=G==null?void 0:G.quest)==null?void 0:z.targetUrl,questMode:G==null?void 0:G.questMode,socialMode:G==null?void 0:G.socialMode,completed:!1,endAt:new Date().setUTCHours(23,59,59,999)},W=Q!==null?[...Q,X]:[X];localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(W))}}window.open((J=G==null?void 0:G.quest)==null?void 0:J.targetUrl)}},b=async(G,H)=>{var K;try{if(h(!0),G){const z=await h0(G,t);if((z==null?void 0:z.status)===200){h(!1),a(!0),m("Claim Successfully!"),g("success");const J=(K=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:K.filter(Q=>(Q==null?void 0:Q.questConfigId)!==H);localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(J)),setTimeout(()=>{e(Ws(t)),e(Ff(t)),e($s(t))},1e3),H===7&&localStorage.removeItem(St.QUEST_PROGRESS)}else h(!1),a(!0),m(q("claim_quest_error")),g("error")}}catch{h(!1),a(!0),m(q("claim_quest_error")),g("error")}},y={borderColor:r==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",backgroundColor:r==="dark"?"#0d0e12":"#F7F9F9",cursor:"pointer"},w={color:r==="dark"?"#fff":"#000",fontSize:"14px",fontWeight:"500"},_={backgroundColor:"#1d9bf0"},E={backgroundColor:"#e66e00"},S={color:"#fff"};return v.jsxs(v.Fragment,{children:[i&&v.jsxs("div",{className:"card-container",children:[v.jsx("div",{className:"quest-card",style:y,onClick:()=>{x(i)},onKeyDown:()=>{},role:"button",tabIndex:0,children:v.jsxs("div",{className:"card-header",children:[v.jsxs("div",{className:"reward",children:[v.jsx(ft,{src:(A=(T=i==null?void 0:i.reward)==null?void 0:T.item)!=null&&A.imageUrl?(I=(C=i==null?void 0:i.reward)==null?void 0:C.item)==null?void 0:I.imageUrl:lt(((R=(P=i==null?void 0:i.reward)==null?void 0:P.item)==null?void 0:R.name)==="Gold"?"/icons/balances/gold.png":((F=(N=i==null?void 0:i.reward)==null?void 0:N.item)==null?void 0:F.name)==="Gold Bag"?"/icons/coin-bag.png":"/icons/balances/gold.png"),alt:"copy"}),v.jsxs("p",{style:w,children:["x",(D=i==null?void 0:i.reward)==null?void 0:D.quantity]})]}),(L=i==null?void 0:i.quest)!=null&&L.targetUrl?v.jsx("div",{style:{fontSize:"14px",fontWeight:"500",color:"rgb(29, 155, 240)",textAlign:"center"},className:"underline quest-name",children:v.jsxs("span",{className:" item-quest-name",children:[" ",(O=i==null?void 0:i.quest)!=null&&O.name?(j=i==null?void 0:i.quest)==null?void 0:j.name:"Quest name"]})}):v.jsx("p",{className:"quest-name",style:{fontSize:"14px",fontWeight:"500",color:r==="dark"?"#fff":"#000",textAlign:"center"},children:v.jsxs("span",{className:" item-quest-name",children:[" ",(U=i==null?void 0:i.quest)!=null&&U.name?(B=i==null?void 0:i.quest)==null?void 0:B.name:"Quest name"]})})]})}),(i==null?void 0:i.questConfigId)!==99&&((i==null?void 0:i.maxClaimTimes)===(i==null?void 0:i.currentClaimTimes)||p==="success"?v.jsx(Rt,{className:"claim-btn completed",style:{color:r==="dark"?"#fff":"#00000080",backgroundColor:r==="dark"?"transparent":"#fff"},onClick:()=>{},children:v.jsx("span",{style:{color:r==="dark"?"#fff":"#00000080"},children:"Completed"})}):(i==null?void 0:i.questConfigId)===7?v.jsx(Rt,{style:E,className:`claim-btn  ${o?"can-claim":"opacity-50 cursor-not-allowed"}
              `,isLoading:c,onClick:()=>{o&&b(i==null?void 0:i.id,i==null?void 0:i.questConfigId)},children:v.jsx("span",{style:S,children:"Claim"})}):d?v.jsx(Rt,{style:E,className:"claim-btn can-claim",isLoading:c,onClick:()=>{b(i==null?void 0:i.id,i==null?void 0:i.questConfigId)},children:v.jsx("span",{style:S,children:"Claim"})}):v.jsx(Rt,{style:_,className:"claim-btn can-claim",isLoading:c,onClick:()=>{x(i)},children:v.jsx("span",{style:S,children:"Go"})}))]}),l&&v.jsx(Lr,{onClose:()=>{a(!1)},message:f,status:p})]})}function _f(n){var s;const{data:t}=n,e=r=>r==null?void 0:r.sort(function(o,l){const a=o.questConfigId===7,c=l.questConfigId===7,h=o.questConfigId===99,d=l.questConfigId===99;return h&&!d?1:!h&&d?-1:a&&!c?1:!a&&c?-1:0});return v.jsx("div",{className:"list-quest",children:t&&((s=e(t))==null?void 0:s.map(r=>{var i,o;return v.jsx(QE,{item:r,completeQuestDaily:t&&((i=t==null?void 0:t.filter(l=>l.questMode===Rn.DAILY&&(l==null?void 0:l.questConfigId)!==7&&l.currentClaimTimes===l.maxClaimTimes))==null?void 0:i.length)===((o=t==null?void 0:t.filter(l=>l.questMode===Rn.DAILY&&(l==null?void 0:l.questConfigId)!==7))==null?void 0:o.length)},r==null?void 0:r.id)}))})}const JE=n=>{const t={method:"GET",url:"/api/v1/request",headers:{Authorization:`Bearer ${n}`}};return xi(t)},tS=(n,t)=>{const e={method:"POST",url:"/api/v1/request/binding",data:n,headers:{Authorization:`Bearer ${t}`}};return xi(e)},eS=n=>{const t={method:"POST",url:"/api/v1/request/cancel",headers:{Authorization:`Bearer ${n}`}};return xi(t)},sS=n=>{const t={method:"GET",url:"/api/v1/request/progress",headers:{Authorization:`Bearer ${n}`}};return xi(t)},nS=n=>{const t={method:"GET",url:"/api/v1/request/check-wallet",headers:{Authorization:`Bearer ${n}`}};return xi(t)},rS=n=>{const t={method:"GET",url:"/api/v1/user-quest/claim-last-fragment",headers:{Authorization:`Bearer ${n}`}};return xi(t)};function iS(n){const{onClose:t,theme:e}=n,{styles:s}=mt(i=>i.displaySasa),r=()=>{t(),window.open(Na)};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"custom-popup",style:{...s.bgStyle,...s.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:s.borderStyle,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:s.textStyle,children:"Notification"})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(e==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsx("div",{className:"popup-content",style:s.textStyle,children:v.jsxs("div",{className:"tools",children:[v.jsx("p",{style:{color:e==="dark"?"#ffffff80":"#00000080",textAlign:"center",marginBottom:"30px"},children:"You have sent a request to link to SA Account. Please visit SAWorld to confirm your request information."}),v.jsx(Rt,{className:"mint-vip-pass mint-vip-pass-active",onClick:r,children:"Go to SAWorld"}),v.jsx(js,{className:"how-to-get-code",href:jl,target:"_blank",style:{color:"#faad14",textAlign:"center",marginTop:"10px",fontSize:"12px"},children:"How to bind to SA Account?"})]})})]})]})}function aS(n){const{token:t,isBindingWallet:e}=n,[s,r]=V.useState(""),[i,o]=V.useState(""),[l,a]=V.useState(""),{isOpen:c,onOpen:h,onClose:d}=ar(),[u,f]=V.useState(!1),[m,p]=V.useState(""),g=$t(),[x,b]=V.useState(!1),[y,w]=V.useState(!1),[_,E]=V.useState(!1),[S,T]=V.useState(!1),[A,C]=V.useState(!1),[I,P]=V.useState(!1),[R,N]=V.useState(!1),[F,D]=V.useState(!1),[L,O]=V.useState(!1),[j,U]=V.useState(0);V.useEffect(()=>{a(localStorage.getItem("sax_theme"))},[i]),V.useEffect(()=>{t&&(G(),K())},[t,e]),setInterval(function(){document.location.href!=s&&r(document.location.href)},1e3),V.useEffect(()=>{const wt=document.body,Qt=()=>{const Kt=document.documentElement.style.getPropertyValue("color-scheme");o(Kt)},Jt=new MutationObserver(Qt),re={attributes:!0,childList:!0,subtree:!0};Jt.observe(wt,re)},[s]);const B=async()=>{try{if(m){T(!0);const wt=await tS({citizenCode:m.toString()},t);(wt==null?void 0:wt.status)===200?(w(!0),T(!1),g(Wt(!0)),g(ee("success")),g(se("Success!")),O(!0),d(),p("")):(T(!1),w(!1),g(Wt(!0)),g(ee("error")),g(se(`${q("this_citizen_code")}`)),d(),p(""))}}catch{T(!1),w(!1),g(Wt(!0)),g(ee("error")),g(se(`${q("this_citizen_code")}`)),d(),p("")}},G=async()=>{var wt,Qt,Jt,re;try{const qt=await JE(t);(qt==null?void 0:qt.status)===200&&(((Qt=(wt=qt==null?void 0:qt.data)==null?void 0:wt.data)==null?void 0:Qt.status)===0?(w(!0),b(!1)):((re=(Jt=qt==null?void 0:qt.data)==null?void 0:Jt.data)==null?void 0:re.status)===1&&(w(!1),b(!0)))}catch{}},H=async()=>{try{C(!0);const wt=await eS(t);(wt==null?void 0:wt.status)===200?(b(!1),w(!1),g(Wt(!0)),g(ee("success")),g(se("Success!")),C(!1),P(!1)):(g(Wt(!0)),g(ee("error")),g(se(`${q("error_try_again")}`)),C(!1))}catch{g(Wt(!0)),g(ee("error")),g(se(`${q("error_try_again")}`)),C(!1)}},K=async()=>{var wt,Qt,Jt,re,qt,Kt,je,Ln,Ss,aa,oa,ot,Vt,ie;try{const Pt=await sS(t);(Pt==null?void 0:Pt.status)===200&&(((Qt=(wt=Pt==null?void 0:Pt.data)==null?void 0:wt.data)==null?void 0:Qt.bindingWallet)===!0?E(!0):E(!1),((re=(Jt=Pt==null?void 0:Pt.data)==null?void 0:Jt.data)==null?void 0:re.bindingAccount)===!0&&b(!0),((Kt=(qt=Pt==null?void 0:Pt.data)==null?void 0:qt.data)==null?void 0:Kt.canClaim)===!0?(N(!0),U(2)):N(!1),((Ln=(je=Pt==null?void 0:Pt.data)==null?void 0:je.data)==null?void 0:Ln.claim)===!0?D(!0):D(!1),(((aa=(Ss=Pt==null?void 0:Pt.data)==null?void 0:Ss.data)==null?void 0:aa.bindingWallet)===!0||((ot=(oa=Pt==null?void 0:Pt.data)==null?void 0:oa.data)==null?void 0:ot.bindingAccount)===!0)&&((ie=(Vt=Pt==null?void 0:Pt.data)==null?void 0:Vt.data)==null?void 0:ie.canClaim)===!1&&U(1))}catch{}},z=async()=>{try{if(t){const wt=await rS(t);(wt==null?void 0:wt.status)===200?(D(!0),g(Wt(!0)),g(ee("success")),g(se("Success!")),g($s(t)),g(vo({accessToken:t,type:Gt.FRAGMENT}))):(g(Wt(!0)),g(ee("error")),g(se(`${q("error_try_again")}`)))}}catch{g(Wt(!0)),g(ee("error")),g(se(`${q("error_try_again")}`))}},J={borderColor:l==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",backgroundColor:l==="dark"?"#0d0e12":"#F7F9F9"},Q={color:l==="dark"?"#fff":"#000",fontSize:"14px",fontWeight:"500"},X={borderColor:l==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",backgroundColor:l==="dark"?"#0d0e12":"#F7F9F9"},W={backgroundColor:l==="light"?"#fff":"#13161B"},Z={borderColor:l==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",color:l==="dark"?"#fff":"#000"},at={backgroundColor:l==="light"?"#d9d6d6":"#000",color:l==="light"?"#000":"#fff",borderColor:l==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)"},gt={color:"#ff6060"},yt=()=>{h()},nt={color:"#fff",backgroundColor:"#e66e00"},It={borderColor:"#e66e00",backgroundColor:"#e66e00"},Ct={color:"#fff"};return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"list-quest",children:[v.jsx("div",{className:"card-container",children:v.jsx("div",{className:"quest-card",style:J,onKeyDown:()=>{},role:"button",tabIndex:0,children:v.jsxs("div",{className:"card-header",children:[v.jsx("p",{style:{color:l==="dark"?"#fff":"#000",fontSize:"14px",fontWeight:"500",width:"calc(100% - 104px)"},children:q("bind_sa_acocunt")}),x?v.jsx(v.Fragment,{children:v.jsx(Rt,{style:{color:l==="dark"?"#fff":"#00000080",backgroundColor:l==="dark"?"transparent":"#fff"},className:"claim-btn completed",children:q("completed")})}):y===!0&&x===!1?v.jsxs(v.Fragment,{children:[v.jsx(Rt,{className:"claim-btn waiting-binding",onClick:()=>{yt()},children:q("waiting")}),v.jsx("div",{style:gt,className:"cancel-binding",onClick:()=>{P(!0)},onKeyDown:()=>{},role:"button",tabIndex:0,children:q("cancel_binding")})]}):v.jsx(Rt,{className:"claim-btn",style:It,onClick:()=>{yt()},children:v.jsxs("span",{style:Ct,children:[" ",q("bind_now")]})})]})})}),v.jsx("div",{className:"card-container",children:v.jsx("div",{className:"quest-card",style:J,onKeyDown:()=>{},role:"button",tabIndex:0,children:v.jsxs("div",{className:"card-header",children:[v.jsx("p",{style:{color:l==="dark"?"#fff":"#000",fontSize:"14px",fontWeight:"500",width:"calc(100% - 104px)"},children:q("add_wallet_airdrop")}),_?v.jsx(Rt,{style:{color:l==="dark"?"#fff":"#00000080",backgroundColor:l==="dark"?"transparent":"#fff"},className:"claim-btn completed",children:q("completed")}):v.jsx(v.Fragment,{children:v.jsx(Rt,{onClick:()=>{f(!!x)},style:It,className:`claim-btn ${x?"":"disabled"}`,children:v.jsxs("span",{style:Ct,children:[" ",q("do_now")]})})})]})})})]}),v.jsxs("div",{className:"big-quest",style:X,children:[v.jsxs("div",{className:"title",style:Q,children:[q("reward"),v.jsx("span",{children:`(${j}/2)`})]}),v.jsx("div",{className:"description",style:Q,children:q("complete_quest")}),v.jsx(ft,{src:lt("/img/store/skin-2.png"),alt:"copy"}),F?v.jsx(v.Fragment,{children:v.jsx(Rt,{style:It,className:"claim-big-quest disabled text-white",onClick:()=>{},children:q("claimed")})}):v.jsx(v.Fragment,{children:v.jsx(Rt,{style:nt,className:`claim-big-quest ${R||"disabled"}`,onClick:()=>{R&&z()},children:v.jsxs("span",{style:Ct,children:[" ",q("claim_now")]})})})]}),c&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:d,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"popup-buy pop-binding",style:{...W,...Z},children:[v.jsxs("div",{className:"popup-header",style:Z,children:[v.jsx("div",{className:"h-title",children:v.jsxs("p",{style:Q,children:[" ",q("binding")]})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(i==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:d})})]}),v.jsx("div",{className:"popup-content",children:v.jsx("input",{type:"number",className:"input-quantity",style:at,placeholder:q("enter_code"),onChange:wt=>{p(wt.target.value)},value:m.toString()})}),v.jsxs("div",{className:"footer",children:[v.jsx("div",{className:"button-buy",children:v.jsx(Rt,{style:nt,onClick:()=>{B()},isLoading:S,children:q("confirm")})}),v.jsxs("div",{className:"sign-up",style:{color:l==="dark"?"#faad14":"#1890FF"},children:[q("do_not_have_an_account"),v.jsx(js,{href:d0,target:"_blank",style:{color:l==="dark"?"#faad14":"#1890FF"},children:q("sign_up")})]}),v.jsx(js,{className:"how-to-get-code",href:jl,target:"_blank",style:Q,children:q("how_to_get_code")})]})]})]}),u&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:()=>{f(!1)},onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"popup-buy pop-binding",style:{...W,...Z},children:[v.jsxs("div",{className:"popup-header",style:Z,children:[v.jsx("div",{className:"h-title",children:v.jsxs("p",{style:Q,children:[" ",q("connect_wallet_sa_account")," "]})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(i==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:()=>{f(!1)}})})]}),v.jsx("div",{className:"popup-content"}),v.jsxs("div",{className:"footer",children:[v.jsx("div",{className:"button-buy",children:v.jsx(js,{href:u0,target:"_blank",style:Q,children:v.jsx(Rt,{style:nt,isLoading:S,children:q("connect_now")})})}),v.jsx(js,{className:"how-to-get-code",href:jl,target:"_blank",style:Q,children:q("how_to_connect_sa_account")})]})]})]}),I&&v.jsx(Nd,{onClose:()=>{P(!1)},theme:l,onConfirm:()=>{H()},title:`${q("do_you_want_binding")}`,isLoading:A}),L&&v.jsx(iS,{onClose:()=>{O(!1)},theme:l})]})}const oS=[{id:"65b9f2e2c7280f011bbbe601",questId:"65b1449842192a4f54106070",questType:1,questMode:Rn.HUNTING,questConfigId:99,quest:{id:"65b1449842192a4f54106070",type:1,mode:1,name:`${q("hunt_this_bag")}`,targetUrl:ih,tag:1,status:0},currentPoint:0,maxPoint:1,currentClaimTimes:0,maxClaimTimes:1,canClaim:!1,reward:{itemId:2,quantity:1,type:1,item:{type:1,itemId:2,name:"Gold Bag",describe:`${q("bag_drops")}`,imageUrl:"https://assets.saworld.io/assets/x-sasa/icon/icon-coin-bag-2.png",usable:!0}}}];function lS({index:n}){var b,y;const t=$t(),{listQuests:e}=mt(w=>w.listQuests),{isNoti:s,notiMessage:r,notiStatus:i}=mt(w=>w.isNoti),{saxTheme:o}=mt(w=>w.displaySasa),{token:l}=gs(),[a,c]=V.useState(0),[h,d]=V.useState(!1),{user:u}=mt(w=>w.user);V.useEffect(()=>{n&&c(n)},[n]),V.useEffect(()=>{l&&t(Ff(l))},[l,t]),V.useEffect(()=>{const w=setInterval(function(){u!=null&&u.saCode&&(u==null?void 0:u.saCode)!==""&&((u==null?void 0:u.walletAddress)===null||(u==null?void 0:u.walletAddress)==="")&&f()},3e3);return()=>clearInterval(w)},[l,u]);const f=async()=>{try{if(l){const w=await nS(l);(w==null?void 0:w.status)!==200&&d(!0)}}catch{d(!0)}},m={borderColor:o==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",color:"#fff",backgroundColor:o==="light"?"#F7F9F9":"#0d0e12"},p={borderColor:"#e66e00",color:"#fff",backgroundColor:"#e66e00"},g={color:o==="dark"?"#868688":"#000"},x={color:"#fff"};return v.jsxs("div",{className:"quest",children:[v.jsxs(Bf,{className:"quest-tab",index:a,onChange:w=>c(w),children:[v.jsxs(Df,{children:[v.jsx(Sn,{style:a===0?p:m,children:v.jsx("span",{style:a===0?x:g,children:q("newbie_quest")})}),v.jsx(Sn,{style:a===1?p:m,children:v.jsx("span",{style:a===1?x:g,children:q("daily_quest")})}),v.jsx(Sn,{style:a===2?p:m,children:v.jsx("span",{style:a===2?x:g,children:q("binding_quests")})})]}),v.jsx("div",{className:"list-items",children:v.jsxs(Lf,{scrollBehavior:"smooth",children:[v.jsx(Tn,{children:v.jsx(_f,{data:(e==null?void 0:e.data)&&((b=e==null?void 0:e.data)==null?void 0:b.filter(w=>w.questMode===Rn.NEW_BIE))})}),v.jsx(Tn,{children:v.jsx(_f,{data:(e==null?void 0:e.data)&&((y=e==null?void 0:e.data)==null?void 0:y.filter(w=>w.questMode===Rn.DAILY))&&[...e.data.filter(w=>w.questMode===Rn.DAILY),...oS]})}),v.jsx(Tn,{children:v.jsx(aS,{token:l,isBindingWallet:h})})]})})]}),s&&v.jsx(Lr,{onClose:()=>{t(Wt(!1))},message:r,status:i})]})}function cS(){const{saxTheme:n}=mt(t=>t.displaySasa);return v.jsx("div",{className:"loading",children:v.jsx(f0,{style:{color:n==="dark"?"#fff":"#000"}})})}function hS(n){var m,p,g,x,b,y,w;const{onClose:t,item:e,theme:s}=n,{token:r}=gs(),i=$t(),[o,l]=V.useState(1),[a,c]=V.useState(!1),{styles:h}=mt(_=>_.displaySasa);V.useEffect(()=>{r&&i(Ws(r))},[r,i]);const d=async()=>{var _,E,S,T,A;try{c(!0);let C;(e==null?void 0:e.itemType)===Gt.ASG_PACKAGE?(_=e==null?void 0:e.item)!=null&&_.itemId&&(C=await m0(Number((E=e==null?void 0:e.item)==null?void 0:E.itemId),r)):(e==null?void 0:e.itemType)===Gt.GEM_PACKAGE?(S=e==null?void 0:e.item)!=null&&S.itemId&&(C=await p0({id:e==null?void 0:e.id,quantity:o},r)):e!=null&&e.id&&(C=await g0({id:e==null?void 0:e.id,quantity:o},r)),(C==null?void 0:C.status)===200?(t(),i(Ws(r)),i(Of(r)),i($s(r)),i(vo({accessToken:r,type:Gt.FRAGMENT})),c(!1),i(Wt(!0)),i(ee("success")),i(se("Success!"))):(t(),i(Wt(!0)),i(ee("error")),i(se("An error occurred, please try again later!")))}catch(C){t(),i(Wt(!0)),i(ee("error")),i(se(((A=(T=C==null?void 0:C.response)==null?void 0:T.data)==null?void 0:A.message).toLowerCase().replaceAll("_"," ")||"An error occurred, please try again later!")),c(!1)}},u={backgroundColor:s==="light"?"rgb(239, 241, 241)":"rgba(255 255 255 / 0.05)"},f={color:"#fff",backgroundColor:"#e66e00"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"popup-buy",style:{...h.bgStyle,...h.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:h.borderStyle,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:h.textStyle,children:"Buy"})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsxs("div",{className:"popup-content",children:[v.jsxs("div",{className:"item-img",style:u,children:[v.jsx(ft,{src:(m=e==null?void 0:e.item)!=null&&m.imageUrl?(p=e==null?void 0:e.item)==null?void 0:p.imageUrl:lt("/img/store/snowflakes.png"),alt:"item",style:{height:(e==null?void 0:e.itemType)===Gt.GEM_PACKAGE?"4rem":"5rem"}}),(((g=e==null?void 0:e.item)==null?void 0:g.itemId)===1&&((x=e==null?void 0:e.item)==null?void 0:x.type)===Gt.EXP||(e==null?void 0:e.itemType)===Gt.GEM_PACKAGE||(e==null?void 0:e.itemType)===Gt.ASG_PACKAGE)&&v.jsxs("p",{className:"absolute left-[65%] top-[12%] bg-white text-black text-xs px-2 py-0.5 rounded font-semibold",children:["x",(b=nr(e!=null&&e.quantity?e==null?void 0:e.quantity:0))==null?void 0:b.toLocaleString("en-US")]})]}),v.jsxs("div",{className:"item-right",children:[v.jsx("div",{className:"item-name",style:h.textStyle,children:(y=e==null?void 0:e.item)==null?void 0:y.name}),v.jsxs("div",{className:"item-price",children:[v.jsx("p",{style:h.textStyle,children:"Price"}),v.jsxs("div",{children:[v.jsx(ft,{src:lt((e==null?void 0:e.itemType)===Gt.ASG_PACKAGE?"/icons/balances/usdt.png":"/icons/balances/gold.png"),alt:"item"}),v.jsx("p",{style:h.textStyle,children:(w=e==null?void 0:e.gold)==null?void 0:w.toLocaleString("en-US")})]})]}),v.jsxs("div",{className:"limit",children:[v.jsxs("p",{style:h.textStyle,children:[" ",q("limit")]}),v.jsx("p",{style:h.textStyle,children:e.limit.toLocaleString("en-US")})]}),(e==null?void 0:e.itemType)!==Gt.ASG_PACKAGE&&v.jsx("div",{className:"quantity",children:v.jsxs(ch,{className:"input-quantity",defaultValue:1,onChange:_=>{l(Number(_)<(e==null?void 0:e.limit)?Number(_):e==null?void 0:e.limit)},min:1,max:e.limit,value:o,children:[v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/minus-dark.png":"/icons/menu/minus.png"),alt:"item",onClick:()=>{o>0&&l(o-1)}}),v.jsx(hh,{style:h.inputStyle}),v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/plus-dark.png":"/icons/menu/plus.png"),alt:"item",onClick:()=>{o<e.limit&&l(o+1)}})]})})]})]}),v.jsxs("div",{className:"footer",children:[v.jsx("div",{className:"quantity"}),v.jsx("div",{className:"button-buy",children:v.jsxs(Rt,{style:f,onClick:()=>{d()},isLoading:a,children:[q("buy_for"),v.jsx(ft,{src:lt((e==null?void 0:e.itemType)===Gt.ASG_PACKAGE?"/icons/balances/usdt.png":"/icons/balances/gold.png"),alt:"item"}),o?o*(e==null?void 0:e.gold):e==null?void 0:e.gold]})})]})]})]})}function dS({shopItems:n,loading:t}){const{token:e}=gs(),[s,r]=V.useState(),{isOpen:i,onOpen:o,onClose:l}=ar(),a=$t(),{isNoti:c,notiMessage:h,notiStatus:d}=mt(_=>_.isNoti),{listPackage:u,listPackageGem:f}=mt(_=>_.store),{saxTheme:m,styles:p}=mt(_=>_.displaySasa),[g,x]=V.useState([]),[b,y]=V.useState([]);V.useEffect(()=>{if(u&&(u==null?void 0:u.length)>0){const _=u==null?void 0:u.map(E=>({id:E==null?void 0:E.id,itemId:100,gold:E==null?void 0:E.fromAmount,itemType:Gt.ASG_PACKAGE,limit:9999,status:0,quantity:E==null?void 0:E.toAmount,item:{type:100,itemId:E==null?void 0:E.packageId,name:"ASG package",describe:"",imageUrl:E.image_url,usable:!1}}));x(_)}},[u]),V.useEffect(()=>{if(f&&(f==null?void 0:f.length)>0){const _=f==null?void 0:f.map(E=>({id:E==null?void 0:E.id,itemId:100,gold:E==null?void 0:E.price,itemType:Gt.GEM_PACKAGE,limit:E.limit,status:0,quantity:E.amount,item:{type:Gt.GEM_PACKAGE,itemId:E==null?void 0:E.id,name:E==null?void 0:E.name,describe:E==null?void 0:E.description,imageUrl:E.image,usable:!1}}));y(_)}},[f]);const w=_=>{o(),r(_)};return v.jsx(v.Fragment,{children:t?v.jsx(cS,{}):v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"list-store",children:[...g,...b,...n].map((_,E)=>{var S,T,A,C,I,P,R,N;return v.jsxs(Rt,{className:`store-card ${m==="dark"?"border-yellow":"border-blue"}`,style:p.cardStyle,onClick:()=>w(_),children:[v.jsx(ft,{className:"item-img",src:(S=_==null?void 0:_.item)!=null&&S.imageUrl?(T=_==null?void 0:_.item)==null?void 0:T.imageUrl:lt("/img/store/snowflakes.png"),alt:"item",style:{height:(_==null?void 0:_.itemType)===Gt.GEM_PACKAGE?"4rem":"5rem"}}),(((A=_==null?void 0:_.item)==null?void 0:A.itemId)===1&&((C=_==null?void 0:_.item)==null?void 0:C.type)===Gt.EXP||(_==null?void 0:_.itemType)===Gt.GEM_PACKAGE||(_==null?void 0:_.itemType)===Gt.ASG_PACKAGE)&&v.jsxs("p",{className:"absolute left-[65%] top-[12%] bg-white text-black text-xs px-2 py-0.5 rounded",children:["x",(I=nr(_!=null&&_.quantity?_==null?void 0:_.quantity:0))==null?void 0:I.toLocaleString("en-US")]}),v.jsxs("div",{className:"price",children:[v.jsx(ft,{src:lt((_==null?void 0:_.itemType)===Gt.ASG_PACKAGE?"/icons/balances/usdt.png":"/icons/balances/gold.png"),alt:"price"}),v.jsxs("p",{style:p.textStyle,children:["x",(P=_==null?void 0:_.gold)==null?void 0:P.toLocaleString("en-US")]})]}),v.jsx("div",{className:"tooltip",children:v.jsx(Fd,{message:(R=_==null?void 0:_.item)!=null&&R.describe?(N=_==null?void 0:_.item)==null?void 0:N.describe.replace("/n",`
`):"no describe"})})]},E)})}),i&&v.jsx(hS,{token:e,onClose:l,item:s,theme:m}),c&&v.jsx(Lr,{onClose:()=>{a(Wt(!1))},message:h,status:d})]})})}function uS(){const{token:n}=gs(),[t,e]=V.useState(void 0),s=$t(),{isAuthenticated:r}=mt(d=>d.auth),{referral:i}=mt(d=>d.referral),{saxTheme:o,styles:l}=mt(d=>d.displaySasa),[a,c]=V.useState([]);V.useEffect(()=>{if(i.data&&i.data.length){const u=[...i.data].sort((f,m)=>f.refSocialUsername===""&&m.refSocialUsername!==""?-1:f.refSocialUsername!==""&&m.refSocialUsername===""?1:0);c(u)}},[i]),V.useEffect(()=>{r&&n&&s(x0(n))},[r,s,n]);const h=d=>{navigator.clipboard!==void 0&&(navigator.clipboard.writeText(`${d.code}`),e(d.code),setTimeout(()=>{e(void 0)},1e3))};return v.jsxs("div",{className:"referral",children:[v.jsxs("div",{className:"statistic",children:[v.jsxs("div",{className:"statistic-card",style:l.cardStyle,children:[v.jsx("div",{className:"number",style:l.textStyle,children:i.data.filter(d=>d.refSocialUsername!=="").length||0}),v.jsx("div",{className:"st-line"}),v.jsx("div",{className:"label",style:l.textStyle,children:q("all_referrals")})]}),v.jsxs("div",{className:"statistic-card",style:l.cardStyle,children:[v.jsxs("div",{className:"number",style:l.textStyle,children:[v.jsx(ft,{src:lt("/img/gold-bag.png"),alt:"reward"}),i.data.filter(d=>d.completedQuest).length||0]}),v.jsx("div",{className:"st-line"}),v.jsx("div",{className:"label",style:l.textStyle,children:q("total_earned")})]})]}),v.jsx("div",{className:"list-ref-title",style:l.textStyle,children:q("invite_your_friend")}),v.jsx("div",{className:"referral-list",children:a&&a.length?a.map((d,u)=>v.jsx("div",{className:`referral-card ${o==="dark"&&"dark"}`,children:v.jsx("div",{className:"card-left",children:v.jsxs("div",{className:"ref-info",children:[v.jsx("div",{className:`ref-name ${d.refSocialUsername?"text-line-through":""}`,style:l.textStyle,children:d.code}),!d.refSocialUsername&&v.jsxs("div",{className:"copy-wrapper",children:[v.jsx(ft,{src:o==="light"?lt("/icons/copy-black.png"):lt("/icons/copy.png"),alt:"copy",className:"icon-copy",onClick:()=>h(d)}),v.jsx("div",{className:`copy-tooltip ${t===d.code&&"tooltip-show"}`,children:"copied"})]})]})})},u)):v.jsx("div",{children:"No Data"})})]})}const fS=n=>{const{saxTheme:t}=mt(r=>r.displaySasa),{onClose:e,isOpen:s}=n;return v.jsxs(th,{className:"tab-transfer modal-deposit",isOpen:s,onClose:e,children:[v.jsxs(eh,{children:[v.jsx("div",{className:"h-title"}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(t==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:e})})]}),v.jsx(sh,{className:`custom-modal modal-transaction-success theme-${t}`,children:v.jsx(Vf,{isDeposit:!0,isPopup:!0})})]})},mS=n=>{const{onClose:t,isOpen:e,callback:s}=n,{saxTheme:r}=mt(o=>o.displaySasa),{isImportPassword:i}=mt(o=>o.popup);return V.useEffect(()=>{i&&e&&(t(),s&&s())},[i,t,s,e]),v.jsxs(th,{className:"tab-transfer modal-password-empty",isOpen:e,onClose:t,children:[v.jsxs(eh,{children:[v.jsx("div",{className:"h-title"}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(r==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsx(sh,{className:`custom-modal form-control-password modal-transaction-success theme-${r}`,children:v.jsx(Uf,{isExtension:!0})})]})};function pS(n){var c,h,d,u,f;const{onClose:t,item:e,theme:s,action:r,isDisabled:i}=n,{styles:o}=mt(m=>m.displaySasa),l={backgroundColor:s==="light"?"rgb(239, 241, 241)":"rgba(255 255 255 / 0.05)"},a={color:"#fff",backgroundColor:"#e66e00"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"popup-buy",style:{...o.bgStyle,...o.borderStyle},children:[v.jsxs("div",{className:"popup-header",style:o.borderStyle,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:o.textStyle,children:"Use"})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsxs("div",{className:"popup-content",children:[v.jsx("div",{className:"item-img",style:l,children:v.jsx(ft,{src:(c=e==null?void 0:e.item)!=null&&c.imageUrl?(h=e==null?void 0:e.item)==null?void 0:h.imageUrl:lt("/img/store/snowflakes.png"),alt:"item"})}),v.jsxs("div",{className:"item-right inven",children:[v.jsx("div",{className:"item-name",style:o.textStyle,children:(d=e==null?void 0:e.item)!=null&&d.name?(u=e==null?void 0:e.item)==null?void 0:u.name:"default name"}),(e==null?void 0:e.type)===((f=Gt)==null?void 0:f.GIFTBOX)&&v.jsx("p",{className:"text-xs text-[#faad14] mb-2",children:"You need a key to open the Lucky box. The key will be found in the Gold Bag."}),v.jsx("div",{className:"button-buy",children:v.jsx(Rt,{onClick:r,style:a,className:`${i&&(e==null?void 0:e.type)!==Gt.EXP&&"disabled"}`,children:q("use_this")})})]})]})]})]})}const gS=n=>{var a,c,h,d,u,f,m,p,g,x,b,y,w,_;const{onClose:t,item:e,theme:s}=n,r={color:s==="dark"?"#fff":"#000"},i={backgroundColor:s==="light"?"#fff":"#13161B"},o={backgroundColor:s==="light"?"rgb(239, 241, 241)":"rgba(255 255 255 / 0.05)"},l={borderColor:s==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)",color:s==="dark"?"#fff":"#000"};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"overlay",onClick:t,onKeyDown:()=>{},role:"button",tabIndex:0}),v.jsxs("div",{className:"popup-buy popup-show-reward",style:{...i,...l},children:[v.jsxs("div",{className:"popup-header",style:l,children:[v.jsx("div",{className:"h-title",children:v.jsx("p",{style:r,children:q("notice")})}),v.jsx("div",{className:"close-popup",children:v.jsx(ft,{src:lt(s==="dark"?"/icons/menu/close-dark.png":"/icons/menu/close.png"),alt:"close",onClick:t})})]}),v.jsxs("div",{className:"popup-content",children:[v.jsxs("div",{className:"flex gap-6",children:[v.jsxs("div",{className:"item-img",style:o,children:[v.jsx(ft,{src:(e==null?void 0:e.goldImageUrl)||((a=e==null?void 0:e.result)==null?void 0:a.imageUrl)||((h=(c=e==null?void 0:e.result)==null?void 0:c.item)==null?void 0:h.imageUrl)||((u=(d=e==null?void 0:e.inventory)==null?void 0:d.item)==null?void 0:u.imageUrl)||lt("/img/default.png"),alt:"item"}),v.jsxs("span",{className:"reward",style:r,children:["x",(e==null?void 0:e.goldReward)||((f=e==null?void 0:e.result)==null?void 0:f.quantity)||((m=e==null?void 0:e.inventory)==null?void 0:m.quantity)||""]})]}),(e==null?void 0:e.chestReward)>0&&v.jsxs("div",{className:"item-img",style:o,children:[v.jsx(ft,{src:(e==null?void 0:e.chestImageUrl)||lt("/img/key.png"),alt:"item"}),v.jsxs("span",{className:"reward",style:r,children:["x",e==null?void 0:e.chestReward]})]})]}),v.jsx("div",{className:"item-right",children:v.jsxs("div",{className:"item-name",style:r,children:[q("congratulations_on_unlocking_the_gift_of")+" ",v.jsxs("span",{style:{color:"#faad14"},children:[(e==null?void 0:e.goldReward)||((p=e==null?void 0:e.result)==null?void 0:p.quantity)||((g=e==null?void 0:e.inventory)==null?void 0:g.quantity)||""," "]}),e!=null&&e.goldImageUrl||e!=null&&e.goldReward?"Gold":((x=e==null?void 0:e.result)==null?void 0:x.name)||((y=(b=e==null?void 0:e.result)==null?void 0:b.item)==null?void 0:y.name)||((_=(w=e==null?void 0:e.inventory)==null?void 0:w.item)==null?void 0:_.name)||""," ",(e==null?void 0:e.chestReward)!==void 0&&(e==null?void 0:e.chestReward)>0&&v.jsxs(v.Fragment,{children:[v.jsxs("span",{children:[" ",q("and")]}),v.jsx("span",{style:{color:"#faad14"},children:" "+(e==null?void 0:e.chestReward)+" "}),v.jsx("span",{children:(e==null?void 0:e.chestReward)>1?"Keys":"Key"})]}),"."]})})]})]})]})};function xS(){var P,R,N,F,D,L,O,j,U;const{token:n}=gs(),[t,e]=V.useState(!1),[s,r]=V.useState(!1),i=$t(),{inventory:o}=mt(B=>B.inventory),{styles:l,saxTheme:a}=mt(B=>B.displaySasa),{isOpen:c,onOpen:h,onClose:d}=ar(),[u,f]=V.useState(""),[m,p]=V.useState(""),[g,x]=V.useState(!1),[b,y]=V.useState(),[w,_]=V.useState({}),[E,S]=V.useState(!1),[T,A]=V.useState(!1);V.useEffect(()=>{n&&i($s(n))},[n,i]);const C=async(B,G)=>{var H,K;try{x(!0);const z=await Jc({itemType:B,itemId:G,quantity:1},n);(z==null?void 0:z.status)===200?(d(),e(!1),r(!0),f("Success!"),p("success"),x(!1),i($s(n)),i(Ws(n)),_(JSON.parse(z.data.data)),((b==null?void 0:b.type)===1||(b==null?void 0:b.type)===3)&&S(!0)):(d(),e(!1),r(!0),f("An error occurred, please try again later!"),p("error"),x(!1))}catch(z){x(!1),r(!0),f((K=(H=z==null?void 0:z.response)==null?void 0:H.data)==null?void 0:K.message),p("error"),e(!1)}},I=B=>{h(),y(B)};return v.jsxs("div",{className:"bag-list",children:[v.jsx("div",{className:"list",children:(R=(P=o==null?void 0:o.data)==null?void 0:P.filter(B=>B.type!==Gt.WHITELIST&&B.type!==Gt.FRAGMENT))==null?void 0:R.map((B,G)=>{var H,K,z,J;return v.jsx(v.Fragment,{children:v.jsxs("div",{className:`bag-card ${a==="dark"?"border-yellow":"border-blue"}`,style:l.cardStyle,onClick:()=>{I(B)},onKeyDown:()=>{},role:"button",tabIndex:0,children:[v.jsx(ft,{src:(H=B==null?void 0:B.item)!=null&&H.imageUrl?(K=B==null?void 0:B.item)==null?void 0:K.imageUrl:lt("/img/store/snowflakes.png"),alt:"item"}),v.jsx("p",{style:l.textStyle,children:B==null?void 0:B.quantity.toLocaleString("en-US")}),v.jsx("div",{className:"tooltip",children:v.jsx(Fd,{message:(z=B==null?void 0:B.item)!=null&&z.describe?(J=B==null?void 0:B.item)==null?void 0:J.describe:"no describe"})})]},G)})})}),c&&v.jsx(pS,{onClose:d,item:b,theme:a,action:()=>{var B,G,H,K,z;(b==null?void 0:b.type)===Gt.EXP?A(!0):((b==null?void 0:b.type)!==((B=Gt)==null?void 0:B.GIFTBOX)&&((G=b==null?void 0:b.item)!=null&&G.usable)||(b==null?void 0:b.type)===((H=Gt)==null?void 0:H.GIFTBOX)&&((z=(K=o==null?void 0:o.data)==null?void 0:K.filter(J=>(J==null?void 0:J.type)===Gt.CHEST))==null?void 0:z.length)>0)&&(e(!0),d())},isDisabled:((N=b==null?void 0:b.item)==null?void 0:N.usable)===!1||(b==null?void 0:b.type)===((F=Gt)==null?void 0:F.GIFTBOX)&&((L=(D=o==null?void 0:o.data)==null?void 0:D.filter(B=>(B==null?void 0:B.type)===Gt.CHEST))==null?void 0:L.length)<=0}),t&&v.jsx(Nd,{onClose:()=>{e(!1)},theme:a,onConfirm:()=>{C(b==null?void 0:b.type,b==null?void 0:b.itemId)},title:`Do you want to use ${(O=b==null?void 0:b.item)==null?void 0:O.name}?`,isLoading:g}),E&&v.jsx(gS,{theme:a,item:w,onClose:()=>S(!1)}),T&&v.jsx(Ig,{onClose:()=>{A(!1)},theme:a,max:o!=null&&o.data&&((j=o==null?void 0:o.data)==null?void 0:j.filter(B=>B.type===0).length)>0?(U=o==null?void 0:o.data)==null?void 0:U.filter(B=>B.type===0)[0].quantity:0,image:lt("/img/sasa.png"),token:n}),s&&v.jsx(Lr,{onClose:()=>{r(!1)},message:u,status:m})]})}const bS=()=>v.jsx(b0,{});function Pg(){var h,d,u,f,m,p,g,x,b,y,w,_;const{user:n,balancesInGame:t}=mt(E=>E.user),{saxTheme:e,styles:s}=mt(E=>E.displaySasa),[r,i]=V.useState(!1),[o,l]=V.useState(""),a=E=>{i(!0),l(E)},c=E=>{var S,T;return v.jsx("div",{className:"tooltip",children:v.jsxs("div",{className:"coins",children:[v.jsx("div",{className:"title",children:v.jsx("span",{children:(E==null?void 0:E.amount.toLocaleString("en-US"))||0})}),v.jsx(ft,{src:lt(`/icons/balances/${(S=E==null?void 0:E.symbol)==null?void 0:S.toLowerCase()}.png`),alt:"ap",style:{cursor:"pointer"},onClick:()=>{(E==null?void 0:E.symbol)===He.AP&&a(He.AP)}}),v.jsx("div",{className:"credit",style:s.textStyle,children:v.jsx("span",{children:(T=nr(E!=null&&E.amount?E==null?void 0:E.amount:0))==null?void 0:T.toLocaleString("en-US")})})]})},E.symbol)};return v.jsxs("div",{className:"wrapper-balance",children:[v.jsxs("div",{className:"balance",children:[n&&(n==null?void 0:n.paymentBalancesInfo)&&((h=n==null?void 0:n.paymentBalancesInfo)==null?void 0:h.length)>0&&((u=(d=n==null?void 0:n.paymentBalancesInfo)==null?void 0:d.filter(E=>E.symbol===rs.GOLD))==null?void 0:u.map(E=>c(E))),n&&(n==null?void 0:n.paymentBalancesInfo)&&((f=n==null?void 0:n.paymentBalancesInfo)==null?void 0:f.length)>0&&((p=(m=n==null?void 0:n.paymentBalancesInfo)==null?void 0:m.filter(E=>E.symbol===rs.AP))==null?void 0:p.map(E=>c(E))),n&&(n==null?void 0:n.paymentBalancesInfo)&&((g=n==null?void 0:n.paymentBalancesInfo)==null?void 0:g.length)>0&&((b=(x=n==null?void 0:n.paymentBalancesInfo)==null?void 0:x.filter(E=>E.symbol===rs.ASG))==null?void 0:b.map(E=>c(E)))]}),v.jsxs("div",{className:"balance flex-wrap",children:[n&&((w=(y=n==null?void 0:n.paymentBalancesInfo)==null?void 0:y.filter(E=>E.symbol!==rs.AP&&E.symbol!==rs.GOLD&&E.symbol!==rs.ASG))==null?void 0:w.map(E=>c(E))),v.jsxs("div",{className:"tooltip",children:[v.jsx("div",{className:"title",children:v.jsx("span",{children:t&&(t==null?void 0:t.gem)>0?(_=t==null?void 0:t.gem)==null?void 0:_.toLocaleString("en-US"):0})}),v.jsxs("div",{className:"coins",children:[v.jsx(ft,{src:lt("/icons/balances/gem.png"),alt:"gem"}),v.jsx("div",{className:"credit",style:s.textStyle,children:v.jsx("span",{children:t&&(t==null?void 0:t.gem)>0?nr(t==null?void 0:t.gem).toLocaleString("en-US"):0})})]})]})]}),r&&v.jsx(Mg,{openNotiWhiteList:()=>{},theme:e,onClose:()=>i(!1),balance:o})]})}const Zs=n=>{const{children:t,textClose:e,onClosePage:s,className:r,isWalletTab:i,isHideIconBack:o,isHideBalance:l,isHideBorderHeader:a,isWalletContent:c}=n,{saxTheme:h,styles:d}=mt(u=>u.displaySasa);return v.jsx(y0,{children:v.jsxs("div",{className:"wrapper-wallet",children:[!i&&v.jsxs("div",{className:`header ${c?"header-in-wallet":""}`,style:a?{border:"none"}:d.borderStyle,children:[v.jsx(rh,{className:"left",onClick:s&&s,children:!o&&v.jsxs(v.Fragment,{children:[v.jsx(w0,{color:h==="dark"?"#fff":"#000",fontSize:28,className:"icon-back"}),v.jsx("h1",{className:"text-close",style:d==null?void 0:d.textStyle,children:e})]})}),!l&&v.jsx("div",{className:"right",children:v.jsx(Pg,{})})]}),v.jsx("div",{className:`content ${r}`,children:t})]})})},yS=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{isWalletTab:!0,onClosePage:t,className:"sasa-popup extension-x",textClose:"",children:v.jsx(bS,{})})},wS=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer no-header",textClose:q("back"),isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(v0,{})})},vS=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer",textClose:q("back"),isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(Vf,{isExtensionTabTransfer:!0,isExtension:!0,isPopup:!0})})},Ng=()=>{const n=$t(),{isResetPassword:t}=mt(s=>s.displaySasa),e=()=>{n(E0(!1)),t||n(Bn())};return v.jsx(Zs,{onClosePage:e,className:"tab-transfer no-header",textClose:q("back"),isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(_0,{})})},_S=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer no-header",textClose:q("back"),isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(S0,{})})},ES=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer no-header",textClose:q("back"),isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(T0,{})})},SS=Symbol(),Bd=Symbol(),Mi="a",Wi="w";let TS=(n,t)=>new Proxy(n,t);const qc=Object.getPrototypeOf,Kc=new WeakMap,Fg=n=>n&&(Kc.has(n)?Kc.get(n):qc(n)===Object.prototype||qc(n)===Array.prototype),go=n=>typeof n=="object"&&n!==null,AS=n=>{if(Array.isArray(n))return Array.from(n);const t=Object.getOwnPropertyDescriptors(n);return Object.values(t).forEach(e=>{e.configurable=!0}),Object.create(qc(n),t)},Dd=n=>n[Bd]||n,Bg=(n,t,e,s)=>{if(!Fg(n))return n;let r=s&&s.get(n);if(!r){const a=Dd(n);r=(c=>Object.values(Object.getOwnPropertyDescriptors(c)).some(h=>!h.configurable&&!h.writable))(a)?[a,AS(a)]:[a],s==null||s.set(n,r)}const[i,o]=r;let l=e&&e.get(i);return l&&l[1].f===!!o||(l=((a,c)=>{const h={f:c};let d=!1;const u=(m,p)=>{if(!d){let g=h[Mi].get(a);if(g||(g={},h[Mi].set(a,g)),m===Wi)g[Wi]=!0;else{let x=g[m];x||(x=new Set,g[m]=x),x.add(p)}}},f={get:(m,p)=>p===Bd?a:(u("k",p),Bg(Reflect.get(m,p),h[Mi],h.c,h.t)),has:(m,p)=>p===SS?(d=!0,h[Mi].delete(a),!0):(u("h",p),Reflect.has(m,p)),getOwnPropertyDescriptor:(m,p)=>(u("o",p),Reflect.getOwnPropertyDescriptor(m,p)),ownKeys:m=>(u(Wi),Reflect.ownKeys(m))};return c&&(f.set=f.deleteProperty=()=>!1),[f,h]})(i,!!o),l[1].p=TS(o||i,l[0]),e&&e.set(i,l)),l[1][Mi]=t,l[1].c=e,l[1].t=s,l[1].p},Dg=(n,t,e,s,r=Object.is)=>{if(r(n,t))return!1;if(!go(n)||!go(t))return!0;const i=e.get(Dd(n));if(!i)return!0;if(s){const l=s.get(n);if(l&&l.n===t)return l.g;s.set(n,{n:t,g:!1})}let o=null;try{for(const l of i.h||[])if(o=Reflect.has(n,l)!==Reflect.has(t,l),o)return o;if(i[Wi]===!0){if(o=((l,a)=>{const c=Reflect.ownKeys(l),h=Reflect.ownKeys(a);return c.length!==h.length||c.some((d,u)=>d!==h[u])})(n,t),o)return o}else for(const l of i.o||[])if(o=!!Reflect.getOwnPropertyDescriptor(n,l)!=!!Reflect.getOwnPropertyDescriptor(t,l),o)return o;for(const l of i.k||[])if(o=Dg(n[l],t[l],e,s,r),o)return o;return o===null&&(o=!0),o}finally{s&&s.set(n,{n:t,g:o})}},CS=n=>Fg(n)&&n[Bd]||null,Ef=(n,t=!0)=>{Kc.set(n,t)},kS=(n,t,e)=>{const s=[],r=new WeakSet,i=(o,l)=>{if(r.has(o))return;go(o)&&r.add(o);const a=go(o)&&t.get(Dd(o));if(a){var c,h;if((c=a.h)==null||c.forEach(u=>{const f=`:has(${String(u)})`;s.push(l?[...l,f]:[f])}),a[Wi]===!0){const u=":ownKeys";s.push(l?[...l,u]:[u])}else{var d;(d=a.o)==null||d.forEach(u=>{const f=`:hasOwn(${String(u)})`;s.push(l?[...l,f]:[f])})}(h=a.k)==null||h.forEach(u=>{e&&!("value"in(Object.getOwnPropertyDescriptor(o,u)||{}))||i(o[u],l?[...l,u]:[u])})}else l&&s.push(l)};return i(n),s};var xo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Ol=n=>typeof n=="object"&&n!==null,Kn=new WeakMap,Pa=new WeakSet,IS=(n=Object.is,t=(c,h)=>new Proxy(c,h),e=c=>Ol(c)&&!Pa.has(c)&&(Array.isArray(c)||!(Symbol.iterator in c))&&!(c instanceof WeakMap)&&!(c instanceof WeakSet)&&!(c instanceof Error)&&!(c instanceof Number)&&!(c instanceof Date)&&!(c instanceof String)&&!(c instanceof RegExp)&&!(c instanceof ArrayBuffer),s=c=>{switch(c.status){case"fulfilled":return c.value;case"rejected":throw c.reason;default:throw c}},r=new WeakMap,i=(c,h,d=s)=>{const u=r.get(c);if((u==null?void 0:u[0])===h)return u[1];const f=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c));return Ef(f,!0),r.set(c,[h,f]),Reflect.ownKeys(c).forEach(m=>{if(Object.getOwnPropertyDescriptor(f,m))return;const p=Reflect.get(c,m),{enumerable:g}=Reflect.getOwnPropertyDescriptor(c,m),x={value:p,enumerable:g,configurable:!0};if(Pa.has(p))Ef(p,!1);else if(p instanceof Promise)delete x.value,x.get=()=>d(p);else if(Kn.has(p)){const[b,y]=Kn.get(p);x.value=i(b,y(),d)}Object.defineProperty(f,m,x)}),Object.preventExtensions(f)},o=new WeakMap,l=[1,1],a=c=>{if(!Ol(c))throw new Error("object required");const h=o.get(c);if(h)return h;let d=l[0];const u=new Set,f=(A,C=++l[0])=>{d!==C&&(d=C,u.forEach(I=>I(A,C)))};let m=l[1];const p=(A=++l[1])=>(m!==A&&!u.size&&(m=A,x.forEach(([C])=>{const I=C[1](A);I>d&&(d=I)})),d),g=A=>(C,I)=>{const P=[...C];P[1]=[A,...P[1]],f(P,I)},x=new Map,b=(A,C)=>{if((xo?"production":void 0)!=="production"&&x.has(A))throw new Error("prop listener already exists");if(u.size){const I=C[3](g(A));x.set(A,[C,I])}else x.set(A,[C])},y=A=>{var C;const I=x.get(A);I&&(x.delete(A),(C=I[1])==null||C.call(I))},w=A=>(u.add(A),u.size===1&&x.forEach(([I,P],R)=>{if((xo?"production":void 0)!=="production"&&P)throw new Error("remove already exists");const N=I[3](g(R));x.set(R,[I,N])}),()=>{u.delete(A),u.size===0&&x.forEach(([I,P],R)=>{P&&(P(),x.set(R,[I]))})}),_=Array.isArray(c)?[]:Object.create(Object.getPrototypeOf(c)),S=t(_,{deleteProperty(A,C){const I=Reflect.get(A,C);y(C);const P=Reflect.deleteProperty(A,C);return P&&f(["delete",[C],I]),P},set(A,C,I,P){const R=Reflect.has(A,C),N=Reflect.get(A,C,P);if(R&&(n(N,I)||o.has(I)&&n(N,o.get(I))))return!0;y(C),Ol(I)&&(I=CS(I)||I);let F=I;if(I instanceof Promise)I.then(D=>{I.status="fulfilled",I.value=D,f(["resolve",[C],D])}).catch(D=>{I.status="rejected",I.reason=D,f(["reject",[C],D])});else{!Kn.has(I)&&e(I)&&(F=a(I));const D=!Pa.has(F)&&Kn.get(F);D&&b(C,D)}return Reflect.set(A,C,F,P),f(["set",[C],I,N]),!0}});o.set(c,S);const T=[_,p,i,w];return Kn.set(S,T),Reflect.ownKeys(c).forEach(A=>{const C=Object.getOwnPropertyDescriptor(c,A);"value"in C&&(S[A]=c[A],delete C.value,delete C.writable),Object.defineProperty(_,A,C)}),S})=>[a,Kn,Pa,n,t,e,s,r,i,o,l],[RS]=IS();function MS(n={}){return RS(n)}function PS(n,t,e){const s=Kn.get(n);(xo?"production":void 0)!=="production"&&!s&&console.warn("Please use proxy object");let r;const i=[],o=s[3];let l=!1;const c=o(h=>{if(i.push(h),e){t(i.splice(0));return}r||(r=Promise.resolve().then(()=>{r=void 0,l&&t(i.splice(0))}))});return l=!0,()=>{l=!1,c()}}function Sf(n,t){const e=Kn.get(n);(xo?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[s,r,i]=e;return i(s,r(),t)}var Lg={exports:{}},Og={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=V;function NS(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var FS=typeof Object.is=="function"?Object.is:NS,BS=mi.useState,DS=mi.useEffect,LS=mi.useLayoutEffect,OS=mi.useDebugValue;function VS(n,t){var e=t(),s=BS({inst:{value:e,getSnapshot:t}}),r=s[0].inst,i=s[1];return LS(function(){r.value=e,r.getSnapshot=t,Vl(r)&&i({inst:r})},[n,e,t]),DS(function(){return Vl(r)&&i({inst:r}),n(function(){Vl(r)&&i({inst:r})})},[n]),OS(e),e}function Vl(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!FS(n,e)}catch{return!0}}function US(n,t){return t()}var jS=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?US:VS;Og.useSyncExternalStore=mi.useSyncExternalStore!==void 0?mi.useSyncExternalStore:jS;Lg.exports=Og;var XS=Lg.exports;const GS=oh(XS);var YS={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{use:Tf}=A0,{useSyncExternalStore:$S}=GS,WS=(n,t)=>{const e=V.useRef();V.useEffect(()=>{e.current=kS(n,t,!0)}),V.useDebugValue(e.current)},zS=new WeakMap;function HS(n,t){const e=t==null?void 0:t.sync,s=V.useRef(),r=V.useRef();let i=!0;const o=$S(V.useCallback(c=>{const h=PS(n,c,e);return c(),h},[n,e]),()=>{const c=Sf(n,Tf);try{if(!i&&s.current&&r.current&&!Dg(s.current,c,r.current,new WeakMap))return s.current}catch{}return c},()=>Sf(n,Tf));i=!1;const l=new WeakMap;V.useEffect(()=>{s.current=o,r.current=l}),(YS?"production":void 0)!=="production"&&WS(o,l);const a=V.useMemo(()=>new WeakMap,[]);return Bg(o,l,a,zS)}const Zc=MS({isMenu:!1,isGame:!1,lite:!0}),pi=n=>{try{Object.assign(Zc,n),typeof chrome<"u"&&chrome.runtime?chrome.runtime.sendMessage({type:"set-state",payload:n}):console.error("chrome.runtime is not available")}catch{}},Ld=()=>{const n=HS(Zc);return V.useEffect(()=>{const t=e=>{try{Object.assign(Zc,Object.entries(e).reduce((s,[r,{newValue:i}])=>(s[r]=i,s),{}))}catch(s){console.error("Error updating state from storage changes:",s)}};try{typeof chrome<"u"&&chrome.storage&&window.location.href.includes("https://twitter.com/")&&chrome.storage.onChanged.addListener(t)}catch(e){console.error("Error adding storage change listener:",e)}return()=>{try{typeof chrome<"u"&&chrome.storage&&window.location.href.includes("https://twitter.com/")&&chrome.storage.onChanged.removeListener(t)}catch(e){console.error("Error removing storage change listener:",e)}}},[]),n};function qS(){const{isInitialized:n,maintain:t}=mt(o=>o.maintain),e=Ld(),s=$t(),r=()=>{pi({isGame:!e.isGame}),pi({isMenu:e.isMenu}),i()},i=()=>{chrome.storage.local.get([St.ACCESS_TOKEN],async function(o){o.sax_access_token!==void 0&&o.sax_access_token!==""&&(s(Ws(o.sax_access_token)),s(ah(o.sax_access_token)))})};return v.jsxs("div",{className:"flex items-center justify-between ",children:[v.jsx("div",{className:"game-list flex ",children:n&&!t.PLAY&&!t.GAME&&v.jsx(ft,{src:lt("/img/game_on.png"),alt:"Accordion Image",onClick:r,role:"button",tabIndex:0,width:"40px",height:"40px",style:{borderRadius:"12px"}})}),v.jsx("div",{className:"link",children:v.jsx(js,{href:C0,target:"_blank",className:"text-[#1890FF] text-sm gap-3 underline",children:q("explore_sa")})})]})}const Vg=()=>{const{isResetPassword:n,isDisplayChangePassword:t}=mt(r=>r.displaySasa),e=$t(),s=()=>{e(Bn())};return n&&!t?v.jsx(Zs,{onClosePage:s,className:"sasa-popup extension-x",textClose:"Back",isWalletTab:!1,isHideBalance:!0,isHideIconBack:!1,isHideBorderHeader:!0,children:v.jsx(k0,{isExtension:!0,password:""})}):t?v.jsx(Ng,{}):v.jsx(Zs,{isWalletTab:!0,onClosePage:()=>{},className:"sasa-popup extension-x",textClose:"",children:v.jsx(Uf,{isExtension:!0})})},KS=()=>{const n=$t(),t=()=>{n(Bn())};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer no-header",textClose:"Back",isHideBalance:!0,isHideBorderHeader:!0,isWalletContent:!0,children:v.jsx(I0,{})})},ZS=()=>{const n=$t(),{isInitialized:t,maintain:e}=mt(T=>T.maintain),{store:s,loading:r}=mt(T=>T.store),{tabActive:i,tabQuestActive:o}=mt(T=>T.displaySasa),{isDisplayDepositTab:l,isDisplayWithdrawTab:a,isDisplayChangePassword:c,isDisplayExportWallet:h,isDisplayExportWalletSuccess:d,isDisplayPasswordEmpty:u,styles:f,saxTheme:m,isDisplaySwapTab:p}=mt(T=>T.displaySasa),[g,x]=V.useState(!1),{isOpen:b,onClose:y}=ar(),{isOpen:w,onOpen:_,onClose:E}=ar(),S=T=>{n(Nf(T)),n(Bn()),x(T===0)};return v.jsxs(v.Fragment,{children:[v.jsxs(Bf,{className:`main-tab theme-${m}`,index:i,onChange:T=>S(T),children:[v.jsxs("div",{className:"header-tab",style:f.borderStyle,children:[v.jsxs("div",{className:"left",children:[v.jsx("div",{className:"sasa",children:v.jsx(ft,{src:lt("/img/sasa_768px.png"),alt:"",className:""})}),v.jsx("h1",{style:f.textStyle,children:"XSasa"})]}),i?v.jsx("div",{className:"right",children:v.jsx(Pg,{})}):null]}),v.jsx("div",{className:"list-game",children:v.jsx(qS,{})}),v.jsxs(Df,{className:"navigation",children:[v.jsx(Sn,{style:i===0?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:q("home")})}),v.jsx(Sn,{style:i===1?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:q("quest")})}),v.jsx(Sn,{style:i===2?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:q("store")})}),v.jsx(Sn,{style:i===3?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:q("referrals")})}),v.jsx(Sn,{style:i===4?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:"Wallet"})}),v.jsx(Sn,{style:i===5?f.tabActiveStyle:f.tabStyle,children:v.jsx("span",{children:"Bag"})})]}),v.jsxs(Lf,{className:"main-tab-panel",children:[v.jsx(Tn,{className:"tab-panel-home",children:t&&(e!=null&&e.HOME)?v.jsx(zr,{}):v.jsx(ZE,{isFetchInventory:g})}),v.jsx(Tn,{className:"tab-panel-quest",children:t&&(e!=null&&e.QUEST)?v.jsx(zr,{}):v.jsx(lS,{index:o})}),v.jsx(Tn,{className:"tab-panel-store",children:t&&(e!=null&&e.STORE)?v.jsx(zr,{}):v.jsx(dS,{shopItems:s==null?void 0:s.data,loading:r})}),v.jsx(Tn,{className:"tab-panel-referrals",children:v.jsx(uS,{})}),v.jsx(Tn,{className:"tab-panel-referrals",children:t&&e.WALLET?v.jsx(zr,{}):v.jsx(v.Fragment,{children:u?v.jsxs(v.Fragment,{children:[l&&v.jsx(wS,{}),p&&v.jsx(KS,{}),a&&v.jsx(vS,{}),c&&v.jsx(Ng,{}),h&&v.jsx(_S,{}),d&&v.jsx(ES,{}),!(l||p||a||c||d||h)&&v.jsx(yS,{})]}):v.jsx(Vg,{})})}),v.jsx(Tn,{className:"tab-panel-referrals",children:t&&(e!=null&&e.INVENTORY)?v.jsx(zr,{}):v.jsx(xS,{})})]})]}),v.jsx(fS,{isOpen:w,onClose:E}),v.jsx(mS,{isOpen:b,onClose:y,callback:_})]})},Ug=n=>{const{isDeposit:t}=n,e=$t(),s=R0(),{token:r}=gs(),{msgDepositInj:i}=M0(),{handleGetBalance:o}=P0(),{isExtension:l}=V.useContext(N0),{isOpen:a,onOpen:c,onClose:h}=ar(),{isOpen:d,onOpen:u,onClose:f}=ar(),{isNoti:m,notiMessage:p,notiStatus:g}=mt(X=>X.isNoti),{saxTheme:x,styles:b,isDisplayPasswordEmpty:y,activeCurrency:w}=mt(X=>X.displaySasa),{balance:_,injAddress:E}=mt(X=>X.balance),[S,T]=V.useState(!0),[A,C]=V.useState(!1),[I,P]=V.useState(""),[R,N]=V.useState(w),[F,D]=V.useState(!1),[L,O]=V.useState(""),[j,U]=V.useState(""),B={[He.INJ]:_==null?void 0:_.inj,[He.ASG]:_==null?void 0:_.asg,[He.USDT]:_==null?void 0:_.usdt},G=B[R]||"";V.useEffect(()=>{if(H(),!I||I==="0.0"||!R||!A){T(!0);return}else{T(!1);return}},[I,R,A]);const H=async()=>{var X,W,Z;try{const at=(Z=(W=(X=F0)==null?void 0:X.amount)==null?void 0:W.find(gt=>gt.denom===la.INJ))==null?void 0:Z.amount;U(B0(Number(at)*3,6))}catch{}},K=X=>{X||P(""),U0(X.replaceAll(",",""))&&(Number(X.replaceAll(",",""))<=Number(G.replaceAll(",",""))?P(X):P(G.replaceAll(",","")))},z=X=>{N(X),P(""),C(!1)},J=async()=>{try{D(!0);let X;if(R===He.INJ)if(Number(I)+Number(j)>Number(_==null?void 0:_.inj)){const W=`${q("insufficient_funds_for_gas")}`;l?(e(Wt(!0)),e(ee("error")),e(se(W))):(s({title:W,status:"error"}),D(!1)),h()}else X=await i({toAddress:ca,amountTrans:I,denom:la.INJ,decimals:Zo.INJ});else if(Number(j)>Number(_.inj)){const W=`${q("insufficient_funds_for_gas")}`;s(l?{title:W,status:"error"}:{title:`${q("insufficient_funds_for_gas")}`,status:"error"}),h(),D(!1)}else R===He.ASG?X=await i({toAddress:ca,amountTrans:I,denom:la.ASG,decimals:Zo.ASG}):R===He.USDT&&(X=await i({toAddress:ca,amountTrans:I,denom:la.USDT,decimals:Zo.USDT}));if(X)if(X!=null&&X.code){D(!1);const W=(X==null?void 0:X.rawLog)||"Error";l?(e(Wt(!0)),e(ee("error")),e(se(W))):s({title:W,status:"error"}),h()}else D(!1),O(JSON.stringify(X==null?void 0:X.txHash)),P(""),C(!1),setTimeout(()=>{o(),e(Ws(r))},2e3),u(),h();else{h();const W=`${q("create_transaction_again")}`;D(!1),l?(e(Wt(!0)),e(ee("error")),e(se(W))):s({title:W,status:"error"})}}catch(X){l?(e(Wt(!0)),e(ee("error")),e(se(X==null?void 0:X.toString()))):s({title:X.toString(),status:"error"}),h(),D(!1)}},Q=()=>{e(jf(!1)),e(nh(!1))};return v.jsx(v.Fragment,{children:y?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`deposit-withdraw-to-pool theme-${x} `,children:[v.jsx("h1",{className:"title",children:`${t?"Deposit":"Withdraw"} to SASA Wallet`}),v.jsx("p",{className:"sub-title",children:q("transfer_your_assets")}),v.jsxs("div",{className:"group-address",children:[v.jsxs("div",{className:`from-address ${t?"deposit":""}`,children:[v.jsx("div",{className:"name",children:q("my_wallet")}),v.jsx("div",{className:"address",children:E})]}),v.jsx("div",{className:`from-address ${t?"deposit":""}`,children:v.jsx("div",{className:"name",children:q("sasa_account")})}),v.jsx("div",{className:"group-arrow",children:v.jsx(ft,{src:x==="dark"?lt("/icons/arrow-dark.png"):lt("/icons/arrow-light.png"),alt:""})})]}),v.jsxs("div",{className:"form",children:[v.jsxs("div",{className:"first-form",children:[v.jsxs("div",{className:"amount",children:[v.jsxs("div",{className:"label",children:[v.jsx("h3",{children:q("amount")}),v.jsxs("p",{children:[q("available")," ",B[R]||"0.0"," ",R]})]}),v.jsx("div",{className:"confirm-value",children:v.jsx(Pf,{type:"text",className:"amount",placeholder:"0.00",onChange:X=>K(X.target.value),value:I,style:b==null?void 0:b.inputStyle,onBlur:()=>{(I==="0"||Number(I)===0)&&T(!0)}})})]}),v.jsx("div",{className:"currency",children:v.jsx(D0,{getValue:z,isDeposit:t})})]}),v.jsx("div",{className:"note",children:v.jsx(L0,{className:`theme-${x}`,isChecked:A,onChange:X=>C(X.target.checked),children:q("confirm_all_information_is_exactly")})}),v.jsxs("div",{className:"group-btn",children:[v.jsx(Rt,{className:`btn-submit-form cancel theme-${x}`,onClick:Q,style:{background:x==="dark"?"#0D0E12":"#F0F0F0",color:x==="dark"?"#fff":"#000",display:"flex",...x==="dark"?b.borderStyle:{border:"none"}},children:q("cancel")}),v.jsx(Rt,{onClick:c,spinner:null,className:"btn-submit-form submit",style:{background:x==="dark"?"#faad14":"#1890FF",color:x==="dark"?"#000":"#fff",display:"flex"},isLoading:S,loadingText:"Deposit",children:q("deposit")})]})]})]}),v.jsx(O0,{address:ca,totalAmount:I,fee:j,currency:R,onConfirm:J,isOpen:a,loading:F,onClose:h}),v.jsx(V0,{isOpen:d,hash:L,onClose:f}),m&&v.jsx(Lr,{onClose:()=>{e(Wt(!1))},message:p,status:g})]}):v.jsx(Vg,{})})},QS=()=>{const n=$t(),t=()=>{n(nh(!1))};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer",textClose:q("home"),children:v.jsx("div",{className:"transfer-sasa-wallet",children:v.jsx(Ug,{isDeposit:!0})})})},JS=()=>{const n=$t(),t=()=>{n(jf(!1))};return v.jsx(Zs,{onClosePage:t,className:"tab-transfer",textClose:q("home"),children:v.jsx("div",{className:"transfer-sasa-wallet",children:v.jsx(Ug,{})})})};function tT(){j0(),X0(),G0(),Y0();const n=Ld(),{token:t}=gs(),{url:e}=kg(),s=$t(),[r,i]=V.useState({menu:n.isMenu,isOpenNoti:!1,isLogin:!1}),{isInitialized:o,maintain:l}=mt(L=>L.maintain),{user:a,error:c}=mt(L=>L.user),{games:h}=mt(L=>L.games),{saxTheme:d,styles:u,isDisplayTransferDeposit:f,isDisplayTransferWithdraw:m}=mt(L=>L.displaySasa),[p,g]=V.useState(""),[x,b]=V.useState(""),[y,w]=V.useState(""),[_,E]=V.useState(!1),S=V.useRef(null),T=V.useRef(null);V.useEffect(()=>{var O,j,U,B,G,H,K,z,J,Q;const L=document.querySelectorAll('[data-testid="SideNav_AccountSwitcher_Button"]');L&&(L==null?void 0:L.length)>0&&a&&a!=null&&a.socialUsername&&(a==null?void 0:a.socialUsername)!==null&&(a==null?void 0:a.socialUsername)!==void 0&&(a==null?void 0:a.socialUsername)!==""&&r.isLogin&&((G=(B=(U=(j=(O=L[0])==null?void 0:O.children[1])==null?void 0:j.children[0])==null?void 0:U.children[1])==null?void 0:B.getElementsByTagName("span")[0])==null?void 0:G.innerText)!==void 0&&((Q=(J=(z=(K=(H=L[0])==null?void 0:H.children[1])==null?void 0:K.children[0])==null?void 0:z.children[1])==null?void 0:J.getElementsByTagName("span")[0])==null?void 0:Q.innerText)!==`@${a==null?void 0:a.socialUsername}`&&R()},[a,a==null?void 0:a.socialUsername,t,r.isLogin]),V.useEffect(()=>{const L=localStorage.getItem("isMenuOpen");i(O=>({...O,menu:L==="true"})),pi({isMenu:L==="true"})},[]),V.useEffect(()=>{i(L=>({...L,menu:n.isMenu}))},[n]);const A=()=>{i(L=>({...L,menu:!L.menu})),pi({isMenu:!r.menu}),localStorage.setItem("isMenuOpen","true")};V.useEffect(()=>{c.toLowerCase()==="error"&&R()},[c]),V.useEffect(()=>{r.isLogin&&t&&(C(),s(Ws(t)),s(Of(t)),s(ah(t)))},[r.isLogin,t]);const C=async()=>{try{s($s(t)),s(vo({accessToken:t,type:Gt.FRAGMENT}))}catch{}};V.useEffect(()=>{o&&!(l!=null&&l.ALL)&&I()},[o,l]),V.useEffect(()=>{o&&!(l!=null&&l.ALL)&&P()},[h,l]);const I=async()=>{try{s($0()),s(W0())}catch{}},P=async()=>{var L;try{h&&(h==null?void 0:h.length)>0&&(h!=null&&h.find(O=>O.name==="Harvest Heist"))&&s(z0((L=h==null?void 0:h.find(O=>O.name==="Harvest Heist"))==null?void 0:L.id))}catch{}};V.useEffect(()=>{t?(i(L=>({...L,isLogin:!0})),s(Ul(!0))):i(L=>({...L,isLogin:!1}))},[t,s]);const R=()=>{i(L=>({...L,isLogin:!1})),chrome.storage.local.clear(),chrome.storage.session.clear(),localStorage.removeItem(St.QUEST_PROGRESS),s(Ul(!1))},N=L=>{g(L)},F=async()=>{var L,O,j,U;try{if(p&&t)try{const B=await H0(t,{code:p});i(G=>({...G,isOpenNoti:!0})),b(((O=(L=B==null?void 0:B.data)==null?void 0:L.data)==null?void 0:O.message)||"Success"),w("success"),E(!0)}catch(B){i(G=>({...G,isOpenNoti:!0})),b(((U=(j=B==null?void 0:B.response)==null?void 0:j.data)==null?void 0:U.message)||"Error"),w("error")}}catch{}};V.useEffect(()=>(S!==null&&S.current&&S.current.addEventListener("load",D),()=>{var L;return(L=S==null?void 0:S.current)==null?void 0:L.removeEventListener("load",D)}));const D=()=>{T!=null&&T.current&&(T==null||T.current.classList.add("hidden"))};return e.startsWith(ih)&&v.jsxs("div",{className:`menu ${r.menu?"open-menu-wrapper":"close-menu-wrapper"}`,style:u.bgStyle,children:[r.isOpenNoti&&v.jsx(Lr,{onClose:()=>{i(L=>({...L,isOpenNoti:!1}))},message:x,status:y}),v.jsx(WE,{className:"open-menu-btn",onclick:A}),v.jsx("div",{className:"menu-content open-menu",style:{borderColor:d==="dark"?"rgba(255, 255, 255, 0.2)":"rgb(209, 217, 221)"},children:v.jsxs(v.Fragment,{children:[o&&l.ALL&&v.jsx(zr,{}),o&&!l.ALL&&(r.isLogin?v.jsx(v.Fragment,{children:v.jsx("div",{className:"login",children:a!=null&&a.userId&&!a.ref&&!_?v.jsx($E,{getDataInput:N,confirmReferralCode:F}):v.jsxs(v.Fragment,{children:[f&&v.jsx(QS,{}),m&&v.jsx(JS,{}),!(f||m)&&v.jsx(ZS,{})]})})}):v.jsxs("div",{className:"logout",children:[v.jsx(ft,{className:"exten-logo",src:lt("/img/sa.png"),alt:"home"}),v.jsx(Rt,{style:{background:d==="dark"?"#faad14":"#1890FF",color:d==="dark"?"#000":"#fff"},onClick:xh,children:q("login")})]}))]})}),o&&!l.ALL&&v.jsx(YE,{theme:d,url:e})]})}const eT=({level:n,currentCostumeId:t})=>{const e=V.useRef(),[s,r]=V.useState("");return V.useEffect(()=>{t===ze.DEFAULT?r(Ue.DEFAULT):t===ze.LEVEL1?r(Ue.LEVEL1):t===ze.LEVEL2?r(Ue.LEVEL2):r(Ue.LEVEL3)},[t]),v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:e,id:"12312312312dsfsdf",style:{pointerEvents:"none"},children:s!==""&&v.jsx(Pd,{path:lt("/img/sasaAnim/sasadance.json"),width:280,height:150,id:"sasa",defaultSkin:s,animation:"idle",coors:{x:2.4,y:1.1},scale:{x:.08,y:.08},onComplete:()=>{},loop:!0,refChild:e})}),v.jsxs(En,{style:{fontSize:"14px",textAlign:"center"},children:["Lv: ",n]})]})},Af=({isAuth:n,userReward:t})=>{const e={width:"70px",height:"auto"};return v.jsx(v.Fragment,{children:n?t&&(t==null?void 0:t.freeTimes)>0&&((t==null?void 0:t.lastTimeClaim)===0||((t==null?void 0:t.lastTimeClaim)+Xf)*1e3<=new Date().getTime())&&v.jsx(ft,{className:"gold",src:lt("/img/gif/bag.gif"),alt:"sasa",style:e}):v.jsx(ft,{className:"gold",src:lt("/img/gif/bag.gif"),alt:"sasa",style:e})})};function Cf(){const n={width:"150px",height:"auto"};return v.jsx(v.Fragment,{children:v.jsx(ft,{className:"gold",src:lt("/img/gif/bag-open.gif"),alt:"sasa",style:n})})}const sT=({isAuth:n,userReward:t,fetchData:e})=>{const{token:s}=gs(),[r,i]=V.useState(!1),[o,l]=V.useState(),[a,c]=V.useState(!1),[h,d]=V.useState(!0),[u,f]=V.useState(""),m=async()=>{var p;if(s)try{c(!0);const x=new URL(window.location.href).pathname.split("/").pop(),b=await q0(s,x||"");b.data.statusCode===200&&(c(!1),i(!0),e(),l((p=b==null?void 0:b.data)==null?void 0:p.data),d(!0),f("success"))}catch{return d(!0),f("error"),c(!1),null}finally{c(!1)}};return v.jsx(v.Fragment,{children:n?t&&(t==null?void 0:t.freeTimes)>0&&((t==null?void 0:t.lastTimeClaim)===0||((t==null?void 0:t.lastTimeClaim)+Xf)*1e3<=new Date().getTime())&&v.jsxs(v.Fragment,{children:[v.jsx(Cf,{}),r?v.jsxs(v.Fragment,{children:[v.jsx(En,{fontWeight:700,style:{fontSize:"20px",marginTop:"8px",marginBottom:"8px"},children:q("golden_bag_open_title")}),v.jsxs(En,{style:{fontSize:"12px",marginBottom:"8px"},children:[q("golden_bag_open_content_1")," ",o!==void 0&&v.jsxs("span",{style:{color:"#faad14"},children:[(o==null?void 0:o.goldReward)>0?`${o==null?void 0:o.goldReward} ${(o==null?void 0:o.goldReward)>1?"Golds":"Gold"}`:"",(o==null?void 0:o.chestReward)>0?` and ${o==null?void 0:o.chestReward} ${(o==null?void 0:o.chestReward)>1?"Keys":"Key"}`:""]}),q("golden_bag_open_content_2")]})]}):v.jsxs(v.Fragment,{children:[v.jsx(En,{fontWeight:700,style:{fontSize:"20px",marginTop:"8px",marginBottom:"8px"},children:q("open_treasure")}),v.jsxs(En,{style:{fontSize:"12px",marginBottom:"8px"},children:[q("golden_bag_des_1")," ",v.jsx("span",{style:{color:"#faad14"},children:ii.CHARACTERS}),q("golden_bag_des_2"),v.jsx("span",{style:{color:"#faad14"},children:ii.HASHTAG}),q("golden_bag_des_3")]}),v.jsx(Rt,{onClick:m,style:{backgroundColor:"#faad14",color:"#000"},isLoading:a,borderRadius:"20px",padding:"6px 8px",border:"none",fontWeight:600,fontFamily:"'Sora', sans-serif",cursor:"pointer",children:q("golden_bag_button")}),h&&u==="error"&&v.jsx(En,{style:{fontSize:"14px",marginBottom:"8px",color:"red",textAlign:"center"},children:q("golden_bag_des")})]})]}):v.jsxs(v.Fragment,{children:[v.jsx(Cf,{}),v.jsx(En,{fontWeight:700,style:{fontSize:"20px",marginTop:"8px",marginBottom:"8px"},children:q("open_treasure")}),v.jsxs(En,{style:{fontSize:"12px",marginBottom:"8px"},children:[q("golden_bag_des_1")," ",v.jsx("span",{style:{color:"#faad14"},children:ii.CHARACTERS}),q("golden_bag_des_2")," ",v.jsx("span",{style:{color:"#faad14"},children:ii.HASHTAG}),q("golden_bag_des_3")]}),v.jsx(Rt,{onClick:xh,background:"white",textColor:"black",borderRadius:"20px",padding:"6px 8px",border:"none",fontWeight:600,style:{backgroundColor:"#faad14",color:"#000"},cursor:"pointer",children:q("login")})]})})},nT=async(n,t)=>{let e=n;if(n){let s;try{s=K0(n)}catch{return}const r=s==null?void 0:s.exp;if(r&&Date.now()>=r*1e3){const i=t;if(i)try{await Z0(i).then(o=>{var a;const l=(a=o==null?void 0:o.data)==null?void 0:a.accessToken;l&&(chrome.storage.local.set({sax_access_token:l}),localStorage.setItem(St.ACCESS_TOKEN,l),e=l)})}catch(o){throw chrome.storage.local.remove(St.ACCESS_TOKEN),chrome.storage.local.remove(St.REFRESH_TOKEN),o}else return}else localStorage.setItem(St.ACCESS_TOKEN,n),e=n}return e},rT=({...n})=>{const[t,e]=V.useState({click:!1,showHide:!0,playStatus:!1}),[s,r]=V.useState(""),[i,o]=V.useState(""),l=V.useRef(null);V.useEffect(()=>{chrome.storage.local.get([St.ACCESS_TOKEN],async function(h){r(h.sax_access_token)}),chrome.storage.local.get([St.REFRESH_TOKEN],async function(h){o(h.sax_refresh_token)});const c=new PerformanceObserver(h=>{for(const d of h.getEntries())d.entryType==="resource"&&d instanceof PerformanceResourceTiming&&d.initiatorType});return c.observe({entryTypes:["resource"]}),()=>{c.disconnect()}},[]),V.useEffect(()=>{const c=h=>{h.origin===$a&&h.data==="LOADING_COMPLETE"&&e({...t,playStatus:!0})};return window.addEventListener("message",c),()=>{window.removeEventListener("message",c)}},[]);const a=async()=>{if(l.current){const c=await nT(s,i);l.current.contentWindow.postMessage(`${c}`,$a)}setTimeout(()=>{e({...t,click:!0})},500)};return v.jsx("div",{style:{maxWidth:"566px",display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"center"},children:v.jsxs("div",{style:{height:"fit-content",position:"relative",maxWidth:"566px",backgroundColor:"#0000"},children:[v.jsx("iframe",{id:"iframeGame",ref:l,className:"iframe-game",src:n.iframeURL,name:"gameFrame",frameBorder:"0",scrolling:"no",allowFullScreen:!0,allow:"clipboard-read; clipboard-write",style:{overflow:"hidden",margin:"auto",width:n!=null&&n.width?n.width:"100%",minHeight:n!=null&&n.height?n.height:"22rem",maxHeight:n!=null&&n.height?"75dvh":"22rem",borderRadius:"10px",aspectRatio:`${n.data.ratio}`},title:n.data.name,children:"BROWSER_NOT_SUPPORT"}),t.playStatus&&v.jsx("div",{style:t.click?{display:"none"}:{display:"flex",position:"absolute",top:0,left:0,backgroundColor:"#1e1e1f",justifyContent:"center",alignItems:"center",width:"100%",minHeight:n!=null&&n.height?n.height:"22rem",maxHeight:n!=null&&n.height?"75dvh":"22rem",borderRadius:"10px",aspectRatio:`${n.data.ratio}`},children:s?v.jsx(ft,{onClick:a,src:lt("/icons/Playnowc.gif"),alt:"GIF Button",style:{width:"120px",height:"40px",cursor:"pointer"}}):v.jsx(Rt,{onClick:xh,background:"white",textColor:"black",borderRadius:"20px",padding:"6px 8px",border:"none",fontWeight:600,cursor:"pointer",children:q("login")})})]})})},iT=({image:n,content:t,fetchUserInfoBalance:e})=>{const s=Ld(),[r,i]=V.useState(!0);let o={message:"",count:0};V.useEffect(()=>{const a=c=>{c.origin===$a&&(o={message:c.data,count:o.count+1},c.data!==o.message&&o.count<1&&(i(!0),c.data==="ALLOW_BUTTON"?i(!0):c.data==="BLOCK_BUTTON"?i(!1):i(!0)))};return window.addEventListener("message",a),()=>{window.removeEventListener("message",a)}},[]);const l=()=>{r&&(pi({isGame:!s.isGame}),pi({isMenu:s.isMenu}),e())};return v.jsxs("div",{className:`accordion-item ${s.isGame?"open":""}`,style:{display:"flex",justifyItems:"center",alignItems:"center"},children:[v.jsx(Rt,{onClick:l,style:s.isGame?{padding:"10px",display:"flex",alignItems:"center",justifyItems:"center",backgroundColor:"#ffffff",width:"30px",height:"80px",border:"2px solid #00000075",borderTopLeftRadius:"12px",borderBottomLeftRadius:"12px",borderRight:"none"}:{display:"none"},children:v.jsx(ft,{src:n,alt:"Accordion Image",role:"button",tabIndex:0,width:"24px",height:"24px",style:{borderRadius:"12px"}})}),v.jsx("div",{className:"accordion-content",style:s.isGame?{display:"block",opacity:1,transition:"opacity 0.5s ease-in-out",height:"auto"}:{display:"none",opacity:0,transition:"opacity 0.5s ease-in-out",height:0},children:t})]})},aT=({data:n,fetchUserInfoBalance:t})=>{const e=[{image:lt("/icons/right-light.png"),content:v.jsx(rT,{width:"450px",height:"65dvh",iframeURL:$a+n.url,data:n})}];return v.jsx("div",{className:"accordion",style:{position:"fixed",top:150,right:0,zIndex:9999999999},children:v.jsx(iT,{image:e[0].image,content:e[0].content,fetchUserInfoBalance:t})})};function oT(){var _,E,S,T,A,C,I;const{url:n}=kg(),{token:t}=gs(),e=$t(),{isInitialized:s,maintain:r}=mt(P=>P.maintain),{user:i,userReward:o}=mt(P=>P.user),{games:l}=mt(P=>P.games),{isAuthenticated:a}=mt(P=>P.auth),{isChangeQuest:c}=mt(P=>P.listQuests),[h,d]=V.useState([]),[u,f]=V.useState(void 0),[m,p]=V.useState(!1),[g,x]=V.useState(!1);let b=!1;V.useEffect(()=>{s&&!r.ALL&&e(Q0())},[e,s,r]),V.useEffect(()=>{b||(async()=>{try{!b&&l&&(l==null?void 0:l.length)>0&&(b=!0,l.length>0&&!r.PLAY&&l.map(R=>{R.name.trim()==="Harvest Heist"&&f(R)}),d(l))}catch(R){console.error("Error fetching data:",R)}})()},[l,r]),V.useEffect(()=>{if(s&&!r.ALL){const P=document.body,R=()=>{var L,O,j,U,B,G,H,K;const D=document.querySelectorAll('[data-testid="Tweet-User-Avatar"]');if(D&&(D==null?void 0:D.length)>0&&(N.disconnect(),n!=="")){if(n.includes("/home")||n.includes("/explore")){const z=Math.floor(Math.random()*((D==null?void 0:D.length)>5?5:D==null?void 0:D.length));document.querySelector(".reward-box")&&document.querySelector(".reward-box").remove();const J=(j=(O=(L=D[z===0?0:z-1])==null?void 0:L.getElementsByTagName("div")[2])==null?void 0:O.dataset)==null?void 0:j.testid,Q=(H=(G=(B=(U=D[z===0?0:z-1])==null?void 0:U.parentElement)==null?void 0:B.parentElement)==null?void 0:G.getElementsByTagName("time")[0])==null?void 0:H.dateTime;if(localStorage.setItem(St.GOLDEN_BAG,J+","+Q),Q){const X=document.createElement("div");X.className="reward-box",X.style.position="absolute",X.style.top="40px",X.style.left="-17px",X.style.zIndex="1000000",Sr(X).render(v.jsx(Af,{isAuth:a,userReward:o})),D[z===0?0:z-1].appendChild(X)}J!==localStorage.getItem(St.GOLDEN_BAG).split(",")[0]&&document.querySelector(".reward-box").remove(),window.addEventListener("scroll",function(){var Z,at,gt,yt,nt,It;const X=document.querySelector(`[data-testid=${localStorage.getItem(St.GOLDEN_BAG).split(",")[0]}]`),W=(It=(nt=(yt=(gt=(at=(Z=X==null?void 0:X.parentElement)==null?void 0:Z.parentElement)==null?void 0:at.parentElement)==null?void 0:gt.parentElement)==null?void 0:yt.parentElement)==null?void 0:nt.getElementsByTagName("time")[0])==null?void 0:It.dateTime;if(W&&document.querySelector(".reward-box")===null&&localStorage.getItem(St.GOLDEN_BAG).split(",")[1]===W){const Ct=document.createElement("div");Ct.className="reward-box",Ct.style.position="absolute",Ct.style.top="40px",Ct.style.left="-17px",Ct.style.zIndex="1000000",Sr(Ct).render(v.jsx(Af,{isAuth:a,userReward:o})),X.appendChild(Ct)}})}else if(n.includes("/status/")&&document.querySelector(`[data-testid=${localStorage.getItem(St.GOLDEN_BAG).split(",")[0]}]`)!==null){const J=document.querySelectorAll('[data-testid="tweet"]');if(J[0].classList.add("r-eqz5dr"),J&&((K=J[0].getElementsByTagName("time")[0])==null?void 0:K.dateTime)===localStorage.getItem(St.GOLDEN_BAG).split(",")[1]){const Q=document.createElement("div");Q.className="open-reward-box",Q.style.display="flex",Q.style.flexDirection="column",Q.style.justifyContent="center",Q.style.alignItems="center",Q.style.fontFamily="'Sora', sans-serif",Sr(Q).render(v.jsx(sT,{isAuth:a,userReward:o,fetchData:()=>{y(),w()}})),J[0].append(Q),localStorage.removeItem("user")}}}},N=new MutationObserver(R),F={attributes:!0,childList:!0,subtree:!0};if(N.observe(P,F),n.startsWith(J0)){const D=new URLSearchParams(document.location.search),L=D.get("accessToken"),O=D.get("refreshToken");L&&O&&(chrome.storage.local.set({[St.ACCESS_TOKEN]:L}),chrome.storage.local.set({sax_refresh_token:O}),window.location.replace(ih))}}},[n,i==null?void 0:i.id,(_=i==null?void 0:i.currentCharacter)==null?void 0:_.currentLevel,(E=i==null?void 0:i.currentCharacter)==null?void 0:E.currentCostumeId]),V.useEffect(()=>{var P;if(localStorage.getItem(St.QUEST_PROGRESS)&&JSON.parse(localStorage.getItem(St.QUEST_PROGRESS))){const R=(P=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:P.filter(N=>N.questMode!==Rn.DAILY||N.questMode===Rn.DAILY&&N.endAt>new Date().getTime());localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(R))}},[]),V.useEffect(()=>{var R;const P=document.body;if(localStorage.getItem(St.QUEST_PROGRESS)&&JSON.parse(localStorage.getItem(St.QUEST_PROGRESS))&&((R=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:R.find(N=>N.targetUrl.toString()===n.toString()))!==void 0){const N=L=>{var j;const O=(j=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:j.find(U=>U.targetUrl.toString()===n.toString());if((O==null?void 0:O.socialMode)===Vs.REPLY){for(const B of L)(B.type==="childList"||B.type==="attributes")&&p(!m);const U=document.querySelectorAll('[data-testid="tweetButtonInline"]');(U==null?void 0:U.length)>0&&F.disconnect()}else(O==null?void 0:O.socialMode)===Vs.RE_POST&&g&&document.querySelector('[data-testid="Dropdown"]')!==null&&(F.disconnect(),document.querySelector('[data-testid="retweetConfirm"]').addEventListener("click",()=>{e(Xr(!c))}),document.querySelector('[data-testid="unretweetConfirm"]').addEventListener("click",()=>{e(Xr(!c))}))},F=new MutationObserver(N),D={attributes:!0,childList:!0,subtree:!0};F.observe(P,D)}},[n,e,g,c,m]),V.useEffect(()=>{const P=document.body,R=D=>{var L,O,j,U,B,G,H,K,z,J;if(localStorage.getItem(St.QUEST_PROGRESS)&&JSON.parse(localStorage.getItem(St.QUEST_PROGRESS))&&((L=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:L.find(Q=>Q.targetUrl.toString()===n.toString()))!==void 0){const Q=(O=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:O.find(X=>X.targetUrl.toString()===n.toString());if((Q==null?void 0:Q.socialMode)===Vs.FOLLOW){const X=document.querySelector('[data-testid="userActions"]');if(X){N.disconnect();const W=X.parentElement.querySelector('[data-testid="placementTracking"]');for(const Z of D)(Z.type==="childList"||Z.type==="attributes")&&p(!m);if((W==null?void 0:W.getElementsByTagName("span")[0].textContent)==="Following"){const Z=(j=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:j.map(at=>at.targetUrl.toString()===n.toString()?{...at,completed:!0}:at);localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(Z)),e(Xr(!c))}else if((W==null?void 0:W.getElementsByTagName("span")[0].textContent)==="Follow"){const Z=(U=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:U.map(at=>at.targetUrl.toString()===n.toString()?{...at,completed:!1}:at);localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(Z)),e(Xr(!c))}}}else{const X=document.querySelectorAll('[data-testid="Tweet-User-Avatar"]');if(X&&(X==null?void 0:X.length)>0&&(N.disconnect(),n!=="")){const W=document.querySelectorAll('[data-testid="tweet"]');if(W){W[0].addEventListener("click",()=>{p(!m)});let Z;if((Q==null?void 0:Q.socialMode)===Vs.LIKE)W[0].querySelector('[data-testid="unlike"]')?Z=!0:Z=!1;else if((Q==null?void 0:Q.socialMode)===Vs.RE_POST){const at=W[0].querySelector('[data-testid="retweet"]');at&&at.ariaExpanded==="true"&&x(!0),W[0].querySelector('[data-testid="unretweet"]')?Z=!0:Z=!1}else if((Q==null?void 0:Q.socialMode)===Vs.REPLY){for(let at=0;at<W.length;at++)if(((H=(G=(B=W[at].querySelector('[data-testid="User-Name"]'))==null?void 0:B.getElementsByTagName("a")[1])==null?void 0:G.getElementsByTagName("span")[0])==null?void 0:H.textContent)===`@${i==null?void 0:i.socialUsername}`){const yt=(K=W[at].querySelector('[data-testid="tweetText"]'))==null?void 0:K.getElementsByTagName("span");let nt="";for(let It=0;It<yt.length;It++)nt+=yt[It].textContent;if(nt.includes(ii.HASHTAG)&&(nt==null?void 0:nt.length)>=ii.CHARACTERS){Z=!0;break}else{Z=!1;break}}}if(Z){const at=(z=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:z.map(gt=>gt.targetUrl.toString()===n.toString()?{...gt,completed:!0}:gt);localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(at)),e(Xr(!c))}else{const at=(J=JSON.parse(localStorage.getItem(St.QUEST_PROGRESS)))==null?void 0:J.map(gt=>gt.targetUrl.toString()===n.toString()?{...gt,completed:!1}:gt);localStorage.setItem(St.QUEST_PROGRESS,JSON.stringify(at)),e(Xr(!c))}}}}}},N=new MutationObserver(R),F={attributes:!0,childList:!0,subtree:!0};N.observe(P,F)},[n,i==null?void 0:i.id,m,c,g,e,i==null?void 0:i.socialUsername]),V.useEffect(()=>{const P=document.body,R=()=>{var L,O,j;const D=document.querySelector('[data-testid="editProfileButton"]');if(D!==null&&(i==null?void 0:i.id)!==void 0&&((L=i==null?void 0:i.currentCharacter)!=null&&L.currentLevel)){N.disconnect();const U=document.querySelector(".sasa-profile");U&&U.remove();const B=document.createElement("div");B.className="sasa-profile",B.style.position="absolute",B.style.left="-280px",B.style.top="-100px",Sr(B).render(v.jsx(eT,{level:(O=i==null?void 0:i.currentCharacter)==null?void 0:O.currentLevel,currentCostumeId:(j=i==null?void 0:i.currentCharacter)==null?void 0:j.currentCostumeId})),D.appendChild(B)}},N=new MutationObserver(R),F={attributes:!0,childList:!0,subtree:!0};N.observe(P,F)},[n,i==null?void 0:i.id,(S=i==null?void 0:i.currentCharacter)==null?void 0:S.currentLevel,(T=i==null?void 0:i.currentCharacter)==null?void 0:T.currentCostumeId]),V.useEffect(()=>{const P=document.body,R=()=>{const D=document.querySelectorAll('[data-testid="Tweet-User-Avatar"]'),L=document.querySelectorAll('[data-testid="tweet"]'),O=document.querySelectorAll('div[role="dialog"]'),j=document.querySelector("#react-root");if(h.length>0&&u&&O&&O.length===0&&D)try{const U=document.createElement("div");U.className="play-game-box",U.style.zIndex="1000000",U.style.order="1",Sr(U).render(v.jsx(aT,{data:u,fetchUserInfoBalance:y})),L&&L.length>0&&j&&!j.querySelector(".play-game-box")&&j.appendChild(U)}catch(U){console.error("error",U)}},N=new MutationObserver(R),F={attributes:!0,childList:!0,subtree:!0};N.observe(P,F)},[h,n,i==null?void 0:i.id,(A=i==null?void 0:i.currentCharacter)==null?void 0:A.currentLevel,(C=i==null?void 0:i.currentCharacter)==null?void 0:C.currentCostumeId,(I=document.querySelectorAll('[data-testid="tweet"]'))==null?void 0:I.length,u]);const y=()=>{s&&!r.ALL&&t&&(e(Ws(t)),e(ah(t)))},w=()=>{t&&e($s(t))};return null}const Dn=document.createElement("div");Dn.id="chrome-extension-boilerplate-react-vite-content-view-root";Dn.style.position="fixed";Dn.style.top="0px";Dn.style.right="0px";Dn.style.bottom="0px";Dn.style.zIndex="10000";document.body.append(Dn);const gi=document.createElement("div");gi.id="shadow-root";gi.style.height="100%";const Od=Dn.attachShadow({mode:"open"});Od.appendChild(gi);const jg=document.createElement("style");jg.innerHTML=Ox;Od.appendChild(jg);Lb(gi,Od);Sr(gi).render(v.jsx(tx,{children:v.jsx(jb,{rootId:Dn.id,children:v.jsxs(Ub,{shadowRootId:gi.id,children:[v.jsx(ex,{children:v.jsx(tT,{})}),v.jsx(oT,{})]})})}));
